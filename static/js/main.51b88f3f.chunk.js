(this["webpackJsonpravs-client"]=this["webpackJsonpravs-client"]||[]).push([[1],{104:function(e,t,n){"use strict";var a=n(27),r=n(28),c=function(){function e(){Object(a.a)(this,e),this.id=""}return Object(r.a)(e,[{key:"setIdentity",value:function(e){this.id=e.toString()}},{key:"codeName",value:function(e){return btoa(encodeURI(e+this.id))}},{key:"save",value:function(e,t){var n=JSON.stringify(t);localStorage.setItem(this.codeName(e),n)}},{key:"delete",value:function(e){localStorage.removeItem(this.codeName(e))}},{key:"read",value:function(e){var t=localStorage.getItem(this.codeName(e));if(!t)return null;try{return JSON.parse(t)}catch(n){return null}}}]),e}();t.a=new c},109:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2),r=n.n(a),c=n(36),i=n(0),s=(n(331),r.a.lazy((function(){return n.e(13).then(n.bind(null,895))})));function o(){return Object(i.jsx)(r.a.Suspense,{fallback:Object(i.jsx)(c.a,{}),children:Object(i.jsx)(s,{})})}},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(13),r=n(6),c=n(51),i=n(974),s=n(88),o=n(958),u=n(2),l=n.n(u),j=n(454),d=n.n(j),b=n(173),f=n(318),O=n(93),h=n(0),p=["children","hidden","index"];function x(e){var t=e.children,n=e.hidden,r=e.index,c=Object(b.a)(e,p);return l.a.useMemo((function(){return Object(h.jsx)(f.a,Object(a.a)(Object(a.a)({role:"tabpanel",hidden:n,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),{},{children:Object(h.jsx)(O.a,{children:t})}))}),[n,r,t,c])}function m(e){var t=Object(c.a)(),n=l.a.useState(0),u=Object(r.a)(n,2),j=u[0],b=u[1],f=l.a.useCallback((function(e,t){b(t)}),[]),O=l.a.useCallback((function(e){b(e)}),[]),p=l.a.useMemo((function(){return e.tabs.map((function(e,t){return Object(h.jsx)(i.a,Object(a.a)({label:Object(h.jsx)(s.a,{component:"h2",variant:"button",children:e.name})},function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}(t)),t)}))}),[e.tabs]),m=l.a.useMemo((function(){return e.tabs.map((function(e,n){return Object(h.jsx)(x,{index:n,hidden:j!==n,dir:t.direction,children:e.component},n)}))}),[e.tabs,j,t.direction]);return Object(h.jsxs)("div",{children:[Object(h.jsx)(o.a,{allowScrollButtonsMobile:!0,value:j,onChange:f,indicatorColor:"primary",variant:"scrollable",sx:{borderBottom:2,borderColor:"divider"},children:p}),Object(h.jsx)("br",{}),Object(h.jsx)(d.a,{axis:"x",index:j,onChangeIndex:O,children:m})]})}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(50),j=n(118),d=n(33),b=n(161),f=n(125),O=n(36),h=n(0),p=Object(o.createContext)(null);function x(e){var t=e.children,n=Object(b.a)(),r=n.getBuildingLink,o=n.reloadMap,x=Object(d.a)(),m=Object(l.h)(),v=u.a.useState(),g=Object(s.a)(v,2),y=g[0],k=g[1],w=Object(f.a)(6e4);u.a.useLayoutEffect((function(){j.a.setPath(m)}),[m]);var C=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.getView();case 2:t=e.sent,k(t.data);case 4:case"end":return e.stop()}}),e)}))),[m,w]),S=u.a.useCallback((function(e){k((function(t){if(t)return Object(a.a)(Object(a.a)({},t),{},{occupied:e})}))}),[]),z=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,j.a.update(t);case 5:return k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),t)})),x("Sala zosta\u0142a zaktualizowana","success"),("name"in t&&t.name!==y.name||"buildingId"in t&&t.buildingId!==(null===y||void 0===y?void 0:y.building.id))&&o(),e.abrupt("return",!0);case 11:e.prev=11,e.t0=e.catch(2),x(e.t0.description,"error");case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[x,o,y]),I=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j.a.remove();case 5:o(),x("Sala zosta\u0142a usuni\u0119ta","success",(function(){return Object(h.jsx)(l.a,{to:r(y.building.id)})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.description,"error");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[x,y,o,r]),P=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.updateRFID(t);case 3:return k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),{},{RFIDTag:t})})),x("Tag zosta\u0142 przypisany","success"),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),x(e.t0.description,"error"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[x]),E=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.deleteRFIDTag();case 3:k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),{},{RFIDTag:null})})),x("Tag zosta\u0142 usuni\u0119ty","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[x]);return u.a.useEffect((function(){return C(),function(){}}),[C]),Boolean(y)?Object(h.jsx)(p.Provider,{value:{room:y,updateRoom:z,deleteRoom:I,updateRFIDTag:P,deleteRFIDTag:E,setOccupied:S},children:t}):Object(h.jsx)(O.a,{})}function m(){return u.a.useContext(p)}},112:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(260),o=n(88),u=n(961),l=n(319),j=n(2),d=n.n(j),b=n(73),f=n.n(b),O=n(132),h=n.n(O),p=n(33),x=n(40),m=n(0);function v(e){var t=e.open,n=e.onSuccess,a=e.onClose,j=e.objectName,b=Object(p.a)(),O=d.a.useState(""),v=Object(i.a)(O,2),g=v[0],y=v[1],k=d.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g===j){e.next=3;break}return b("Wpisana nazwa jest niepoprawna","error"),e.abrupt("return");case 3:n(),y("");case 5:case"end":return e.stop()}}),e)}))),[j,g,n,b]),w=d.a.useCallback((function(){y(""),a()}),[a]);return Object(m.jsx)(x.a,{open:t,onClose:w,"aria-label":"Okno do usuwania obiektu",sx:{maxWidth:"400px"},children:Object(m.jsxs)(s.a,{direction:"column",spacing:3,children:[Object(m.jsx)(o.a,{variant:"h5",color:"primary.dark",children:"Usuwanie obiektu"}),Object(m.jsxs)(o.a,{variant:"body1",color:"text.secondary",children:["Tej operacji nie da si\u0119 cofn\u0105\u0107.",Object(m.jsx)("br",{}),"1. Przepisz nazw\u0119 ",Object(m.jsx)("b",{children:j}),Object(m.jsx)("br",{}),"2. Naci\u015bnij 'Zatwierd\u017a'"]}),Object(m.jsx)(u.a,{id:"resource-name",label:"nazwa",variant:"outlined",value:g,onChange:function(e){return y(e.target.value)}}),Object(m.jsxs)(s.a,{direction:"row",justifyContent:"space-around",children:[Object(m.jsx)(l.a,{startIcon:Object(m.jsx)(h.a,{}),onClick:w,children:"Anuluj"}),Object(m.jsx)(l.a,{startIcon:Object(m.jsx)(f.a,{color:"inherit"}),onClick:k,color:"error",children:"Zatwierd\u017a"})]})]})})}},114:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(44),i=n(45),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e){return this.post("/addresses",e)}},{key:"getBuildings",value:function(){return this.get("".concat(this.path,"/buildings"))}},{key:"getResourcesMap",value:function(){return this.get("/addresses/resources")}}]),n}(n(60).a);t.a=new s},118:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(44),i=n(45),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId,a=e.roomId;this._path="/addresses/".concat(t,"/buildings/").concat(n,"/rooms/").concat(a)}},{key:"getView",value:function(){return this.get(this.path)}},{key:"create",value:function(e,t){var n=e.addressId,a=e.buildingId;return this.post("/addresses/".concat(n,"/buildings/").concat(a,"/rooms"),t)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"updateRFID",value:function(e){return this.patch("".concat(this.path,"/keys"),{RFIDTag:e})}},{key:"deleteRFIDTag",value:function(){return this.delete("".concat(this.path,"/keys"))}}]),n}(n(60).a);t.a=new s},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(6),r=n(2),c=n.n(r);function i(e){var t=c.a.useState(),n=Object(a.a)(t,2),r=n[0],i=n[1];return c.a.useEffect((function(){var t=setInterval((function(){return i((function(e){return!e}))}),e);return function(){return clearInterval(t)}}),[e]),r}},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(88),r=n(42),c=n(0);function i(e){return Object(c.jsxs)(a.a,{color:"text.secondary",variant:"body2",fontSize:"smaller",children:["Utworzono: ",Object(r.a)(e.model._created),Object(c.jsx)("br",{}),"Ostatnia aktualizacja: ",Object(r.a)(e.model._updated)]})}},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(50),j=n(33),d=n(21),b=n(114),f=n(41),O=n(36),h=n(0),p=u.a.createContext(null);function x(e){var t=Object(j.a)(),n=Object(f.b)().reloadMap,r=Object(l.h)(),o=u.a.useState(),x=Object(s.a)(o,2),m=x[0],v=x[1];u.a.useLayoutEffect((function(){b.a.setPath(r)}),[r]);var g=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.getCurrentOne();case 2:t=e.sent,v(t.data);case 4:case"end":return e.stop()}}),e)}))),[r]);u.a.useEffect((function(){g()}),[g]);var y=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.getBuildings();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[r]),k=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.update(r);case 3:return v((function(e){return Object(a.a)(Object(a.a)({},e),r)})),n(),t("Adres zaktualizowany","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[t,n]),w=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.remove();case 3:n(),t("Adres zosta\u0142 usuni\u0119ty","success",(function(){return Object(h.jsx)(l.a,{to:d.a.HOME})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m&&t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,m,n]);return Boolean(m)?Object(h.jsx)(p.Provider,{value:{address:m,deleteAddress:w,getBuildingsInAddress:y,updateAddress:k},children:e.children}):Object(h.jsx)(O.a,{})}function m(){return u.a.useContext(p)}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return x}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(50),l=n(33),j=n(135),d=n(21),b=n(41),f=n(36),O=n(0),h=o.a.createContext(null);function p(e){var t=Object(l.a)(),n=Object(b.b)().reloadMap,a=Object(u.h)(),s=o.a.useState(),p=Object(i.a)(s,2),x=p[0],m=p[1];o.a.useLayoutEffect((function(){j.a.setPath(a)}),[a]);var v=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.getCurrentOne();case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);o.a.useEffect((function(){v()}),[v]);var g=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.getRoomsInBuilding();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),y=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.update(a);case 3:if(!e.sent){e.next=8;break}return x&&("addressId"in a&&x.address.id!==a.addressId||"name"in a)&&n(),m((function(e){return e&&Object.keys(a).forEach((function(t){if("addressId"===t)e.address.id=Number(a[t]);else e[t]=a[t]})),Object.assign({},e)})),t("Bydynek zaktualizowany","success"),e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(e.t0.description,"error");case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t,x,n]),k=o.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.remove();case 3:x&&t("Budynek usuni\u0119ty","success",(function(){return Object(O.jsx)(u.a,{to:d.b.toAddress(x.address.id)})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(e.t0.description,"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[t,x]);return Boolean(x)?Object(O.jsx)(h.Provider,{value:{building:x,deleteBuilding:k,getRoomsInBuilding:g,updateBuilding:y},children:e.children}):Object(O.jsx)(f.a,{})}function x(){return o.a.useContext(h)}},135:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(44),i=n(45),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId;this._path="/addresses/".concat(t,"/buildings/").concat(n)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e,t){var n=e.addressId;return this.post("/addresses/".concat(n,"/buildings"),t)}},{key:"getRoomsInBuilding",value:function(){return this.get("".concat(this.path,"/rooms"))}}]),n}(n(60).a);t.a=new s},138:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return M.a})),n.d(t,"d",(function(){return y.b}));var a=n(260),r=n(2),c=n.n(r),i=n(54),s=n(11),o=n.n(s),u=n(13),l=n(20),j=n(6),d=n(318),b=n(88),f=n(961),O=n(319),h=n(970),p=n(249),x=n(0),m=[{name:"tydzie\u0144",value:"1 week ago"},{name:"miesi\u0105c",value:"1 month ago"},{name:"6 miesi\u0119cy",value:"6 month ago"},{name:"rok",value:"1 year ago"}];function v(){var e=Object(i.b)(),t=e.queryParams,n=e.setQueryParams,r=c.a.useState({from:new Date,to:new Date}),s=Object(j.a)(r,2),v=s[0],g=s[1],y=c.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return Object(u.a)(Object(u.a)({},e),{},{from:t,to:"1 hour"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),k=c.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n({from:null===(a=v.from)||void 0===a?void 0:a.toDateString(),to:null===(r=v.to)||void 0===r?void 0:r.toDateString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v.from,v.to,n]);return Object(x.jsxs)(a.a,{direction:"column",spacing:2,children:[Object(x.jsxs)(d.a,{children:[Object(x.jsx)(b.a,{variant:"subtitle2",children:"Zakres czasu:"}),Object(x.jsx)(p.a,{onChange:y,buttons:m,value:t.from})]}),Object(x.jsxs)(d.a,{component:"form",onSubmit:k,children:[Object(x.jsx)(b.a,{variant:"subtitle2",pb:"5px",children:"Zakres niestandardowy:"}),Object(x.jsxs)(a.a,{direction:"row",spacing:1,children:[Object(x.jsx)(h.a,{label:"od",inputFormat:"yyyy-MM-dd",value:v.from,onChange:function(e){return g(Object(u.a)(Object(u.a)({},v),{},{from:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(x.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(h.a,{label:"do",inputFormat:"yyyy-MM-dd",value:v.to,onChange:function(e){return g(Object(u.a)(Object(u.a)({},v),{},{to:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(x.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(O.a,{type:"submit",variant:(null===t||void 0===t?void 0:t.from)===v.from.toDateString()?"contained":"outlined",children:"OK"})]})]})]})}var g=c.a.memo(v),y=n(228);function k(e){return Object(x.jsx)(i.a,{name:"charts-query-params",default:{from:"1 month ago",to:"1 hour"},children:Object(x.jsx)(y.a,{children:Object(x.jsxs)(a.a,{spacing:4,children:[Object(x.jsx)(g,{}),e.children]})})})}var w=c.a.memo(k),C=n(887),S=n(320),z=n(244),I=n.n(z),P=n(243),E=n.n(P),R=n(885),T=n(951);function A(e){var t=c.a.useState(!!(null===e||void 0===e?void 0:e.defaultOpen)),n=Object(j.a)(t,2),a=n[0],r=n[1];return Object(x.jsxs)(d.a,{children:[Object(x.jsx)(d.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:Object(x.jsxs)(b.a,{variant:"h6",component:"h5",id:e.title.replace(" ","_"),children:[e.title,Object(x.jsx)(R.a,{onClick:function(){return r((function(e){return!e}))},children:a?Object(x.jsx)(E.a,{}):Object(x.jsx)(I.a,{})})]})}),Object(x.jsxs)(C.a,{in:a,timeout:"auto",children:[Object(x.jsx)(S.a,{container:!0,spacing:2,children:e.children}),Object(x.jsx)("br",{}),Object(x.jsx)(T.a,{})]})]})}var M=n(323)},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a),c=n(232);function i(){return r.a.useContext(c.b)}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(50),j=n(43),d=n(33),b=n(61),f=n(36),O=n(21),h=n(0),p=u.a.createContext(null);function x(e){var t=Object(l.h)(),n=Object(d.a)(),r=Object(j.a)(),o=u.a.useState(),x=Object(s.a)(o,2),m=x[0],v=x[1];u.a.useLayoutEffect((function(){var e="me"===t.userId&&r.user?{userId:r.user.id.toString()}:t;b.a.setPath(e)}),[t,r]);var g=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.getCurrentOne();case 3:t=e.sent,v(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);u.a.useEffect((function(){g()}),[g]);var y=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.remove();case 3:return a=function(){return null},r&&(null===(t=r.user)||void 0===t?void 0:t.id)===(null===m||void 0===m?void 0:m.id)?r.logout():a=function(){return Object(h.jsx)(l.a,{to:O.a.USERS})},n("U\u017cytkownik zosta\u0142 usuni\u0119ty","success",a),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[n,r,null===m||void 0===m?void 0:m.id]),k=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.update(t);case 3:if(!e.sent){e.next=6;break}v((function(e){return Object(a.a)(Object(a.a)({},e),t)})),n("U\u017cytkownik zosta\u0142 zaktualizowany","success");case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return m?Object(h.jsx)(p.Provider,{value:{user:m,deleteUser:y,updateUser:k},children:e.children}):Object(h.jsx)(f.a,{})}function m(){return u.a.useContext(p)}},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a={PUBLIC:"/public",HOME:"/app"};a.LOGIN=a.PUBLIC+"/login",a.REGISTER=a.PUBLIC+"/register",a.ACTIVATE=a.PUBLIC+"/activate",a.REMIND_PASSWORD=a.PUBLIC+"/passwd",a.ACCESS=a.HOME+"/accesses",a.SETTINGS=a.HOME+"/settings",a.USERS=a.HOME+"/users",a.USER=a.USERS+"/:userId",a.MY_PROFILE=a.USERS+"/me",a.INFRASTRUCTURE=a.HOME+"/infrastructure",a.ADDRESS=a.HOME+"/addresses/:addressId",a.BUILDING=a.ADDRESS+"/buildings/:buildingId",a.ROOM=a.BUILDING+"/rooms/:roomId";var r={toAddress:function(e){return"/app/addresses/".concat(e)},toBuilding:function(e,t){return r.toAddress(e)+"/buildings/".concat(t)},toRoom:function(e,t,n){return r.toBuilding(e,t)+"/rooms/".concat(n)},toUser:function(e){return a.USERS+"/".concat(e)}};t.a=a},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(50),l=n(43),j=n(33),d=n(54),b=n(27),f=n(28),O=n(44),h=n(45),p=function(e){Object(O.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var a=0,r=Object.entries({"/settings":"/requests","/users":"/users"});a<r.length;a++){var c=Object(i.a)(r[a],2),s=c[0],o=c[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId,"/buildings"),"buildingId"in e&&(t+="/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&(t+="/users/".concat(e.userId));return t}},{key:"fetchData",value:function(e,t){return this.get(this.preparePath(e)+"/stats",t)}}]),n}(n(60).a),x=new p,m=n(36),v=n(125),g=n(0),y=o.a.createContext(null);function k(e){var t=Object(j.a)(),n=Object(u.h)(),a=Object(v.a)(6e4),s=Object(l.a)().user,b=Object(d.b)().queryParams,f=o.a.useState({}),O=Object(i.a)(f,2),h=O[0],p=O[1],k=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,"userId"in n&&"me"===n.userId&&(a={userId:"".concat(null===s||void 0===s?void 0:s.id)}),e.prev=2,e.next=5,x.fetchData(a,b);case 5:c=e.sent,p(c.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(e.t0.description,"error"),p({});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,b,n,null===s||void 0===s?void 0:s.id]);return o.a.useEffect((function(){k()}),[k,a]),0===Object.keys(h).length?Object(g.jsx)(m.a,{}):Object(g.jsx)(y.Provider,{value:{chartsData:h},children:e.children})}function w(){return o.a.useContext(y)}},230:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(6),r=n(2),c=n.n(r),i=n(104),s={queryParams:{q:1},setQueryParams:function(e){}},o=n(0),u=c.a.createContext(s);function l(e){var t=c.a.useState((function(){return t=e.name,n=e.default,i.a.read(t)||n;var t,n})),n=Object(a.a)(t,2),r=n[0],s=n[1];return c.a.useEffect((function(){i.a.save(e.name,r)}),[r,e.name]),r?Object(o.jsx)(u.Provider,{value:{queryParams:r,setQueryParams:s},children:e.children}):null}},232:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return O}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(43),l=n(125),j=n(114),d=n(33),b=n(0),f=o.a.createContext(null);function O(e){var t=o.a.useState([]),n=Object(i.a)(t,2),a=n[0],s=n[1],O=o.a.useState(!1),h=Object(i.a)(O,2),p=h[0],x=h[1],m=Object(l.a)(3e5),v=Object(u.a)().user,g=Object(d.a)(),y=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.getResourcesMap();case 3:(null===(t=e.sent)||void 0===t?void 0:t.data)&&s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[g]);o.a.useEffect((function(){v&&y(),x(!0)}),[v,y,m]);var k=o.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]),w=o.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2)}),[a]),C=o.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return{name:e.name,href:e.href,id:e.id}}))})).flat(2)}),[a]),S=o.a.useMemo((function(){return a.map((function(e){return{name:e.name,href:e.href,id:e.id}}))}),[a]),z=o.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]);return!1===p?null:Object(b.jsx)(f.Provider,{value:{resourceMap:a,reloadMap:function(){y()},allRooms:w,getRoomLink:k,getBuildingLink:z,allAddresses:S,allBuildings:C},children:e.children})}},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(13),r=n(2),c=n(877),i=n(260),s=n(486),o=n(485),u=n(882),l=n(879),j=n(54),d=n(0);function b(){var e,t=Object(j.b)(),n=t.queryParams,b=t.setQueryParams,f=r.useCallback((function(e,t){b((function(e){return Object(a.a)(Object(a.a)({},e),{},{currentPage:t})}))}),[b]),O=r.useCallback((function(e,t){b((function(t){return Object(a.a)(Object(a.a)({},t),{},{itemsOnPage:Number(e.target.value)})}))}),[b]),h=r.useMemo((function(){return[5,10,15,20].map((function(e){return Object(d.jsx)(s.a,{value:e,children:e},e)}))}),[]);return Object(d.jsxs)(i.a,{spacing:2,sx:{flexWrap:"wrap",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},children:[Object(d.jsx)(c.a,{count:n.pagesCount,size:"small",page:n.currentPage,onChange:f}),Object(d.jsxs)(o.a,{fullWidth:!0,sx:{maxWidth:"100px"},children:[Object(d.jsx)(u.a,{id:"items-on-page-label",children:"Na stronie"}),Object(d.jsxs)(l.a,{size:"small",labelId:"items-on-page-label",id:"items-on-page",label:"Na stronie",value:null!==(e=n.itemsOnPage)&&void 0!==e?e:5,onChange:O,children:[h,Object(d.jsx)(s.a,{value:1e4,children:"wszystko"})]})]})]})}},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(13),r=n(6),c=n(70),i=n(2),s=n.n(i),o=n(0);function u(e){var t=e.value,n=e.onChange,i=e.label,u=e.name,l=e.sx,j=s.a.useState(),d=Object(r.a)(j,2),b=d[0],f=d[1],O=s.a.useState(t),h=Object(r.a)(O,2),p=h[0],x=h[1],m=s.a.useCallback((function(e){x(e.target.value),clearTimeout(b);var t=setTimeout((function(){n(e)}),1e3);f(t)}),[b,n]);return Object(o.jsx)(c.c,{name:u,value:p,onChange:m,placeholder:i,sx:Object(a.a)({width:"100%",maxWidth:"600px",p:1,bgcolor:"background.default"},l),inputProps:{"aria-label":i}})}},240:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(27),r=n(28),c=n(44),i=n(45),s=n(204),o=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r,c;return Object(a.a)(this,n),(c=t.call(this,null===(r=e.error)||void 0===r?void 0:r.description)).data=void 0,c.data=e,c}return Object(r.a)(n,[{key:"code",get:function(){return this.data.statusCode}},{key:"description",get:function(){var e;return null===(e=this.data.error)||void 0===e?void 0:e.description}}]),n}(Object(s.a)(Error))},249:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(889),r=n(880),c=n(485),i=n(884),s=n(2),o=n.n(s),u=n(0);function l(e){var t=e.onChange,n=e.buttons,s=e.value,l=o.a.useCallback((function(e){t(e.target.value)}),[t]),j=o.a.useMemo((function(){return n.map((function(e){var t=e.value,n=e.name;return Object(u.jsx)(a.a,{value:t,control:Object(u.jsx)(r.a,{}),label:n,"aria-label":n,title:n},n)}))}),[n]);return Object(u.jsx)(c.a,{component:"fieldset",children:Object(u.jsx)(i.a,{row:!0,"aria-label":"wyb\xf3r opcji",name:"wyb\xf3r zdefiniowanej opcji",value:s,onChange:l,children:j})})}},253:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return R}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(50),l=n(33),j=n(27),d=n(28),b=n(44),f=n(45),O=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/users/auth",{email:t.email,password:t.password});case 2:return(n=e.sent).data&&localStorage.setItem(this._TOKEN_NAME,n.data.toString()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem(this._TOKEN_NAME)}},{key:"hasToken",value:function(){return Boolean(localStorage.getItem(this._TOKEN_NAME))}},{key:"hasSession",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.hasToken()){e.next=5;break}return e.next=4,this.get("/users/me");case 4:return e.abrupt("return",!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(n(60).a),h=new O,p=n(46),x=n(338),m=n(79),v=n(95),g=n(104),y=n(61),k=n(13),w=n(883),C=n(886),S=n(88),z=n(0);function I(e){return Object(z.jsxs)(w.a,{sx:Object(k.a)({display:"flex",flexDirection:"column",color:"primary.main",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"background.default"},e.sx),open:e.open,children:[Object(z.jsx)(S.a,{variant:"h5",pb:2,children:e.text}),Object(z.jsx)(C.a,{color:"inherit"})]})}var P=n(21),E=Object(s.createContext)(null);function R(e){var t=e.children,n=Object(l.a)(),a=o.a.useState(!0),j=Object(i.a)(a,2),d=j[0],b=j[1],f=Object(s.useState)(null),O=Object(i.a)(f,2),k=O[0],w=O[1],C=o.a.useCallback((function(e){w(e),g.a.setIdentity(e.id),m.a.metadata=e.metadata,m.a.userId=e.id,v.a.userId=e.id,x.a.userId=e.id,p.a.userId=e.id,y.a.userId=e.id}),[]),S=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!h.hasToken()){e.next=19;break}return e.prev=2,e.next=5,h.hasSession();case 5:if(!e.sent){e.next=13;break}return e.next=8,y.a.getMe();case 8:t=e.sent,C(t),n("Witaj ponownie!","info"),e.next=14;break;case 13:n("Twoja sesja wygas\u0142a","info",(function(){return Object(z.jsx)(u.a,{to:P.a.LOGIN})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(e.t0.description,"error",(function(){return Object(z.jsx)(u.a,{to:P.a.WELCOME})}));case 19:b(!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),[n,C]);o.a.useEffect((function(){return S(),function(){}}),[S]);var R=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.login(t);case 3:return e.next=5,y.a.getMe();case 5:a=e.sent,C(a),n("Pomy\u015blnie zalogowano!","success",(function(){return Object(z.jsx)(u.a,{to:P.a.HOME})})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.description,404===e.t0.code&&(c="U\u017cytkownik nie istnieje"),n(c,"error");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,C]),T=o.a.useCallback((function(){n("Pomy\u015blnie wylogowano!","success",(function(){return Object(z.jsx)(u.a,{to:P.a.PUBLIC})})),w(null),h.logout()}),[n]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(I,{open:d,text:"\u0141adowanie Sesji..."}),Object(z.jsx)(E.Provider,{value:{user:k,login:R,logout:T},children:!d&&t})]})}},254:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return j}));var a=n(6),r=n(960),c=n(957),i=n(2),s=n.n(i),o=function(e){},u=n(0),l=Object(i.createContext)(o);function j(e){var t=e.children,n=s.a.useState(),i=Object(a.a)(n,2),o=i[0],j=i[1],d=s.a.useState(!1),b=Object(a.a)(d,2),f=b[0],O=b[1],h=s.a.useState("error"),p=Object(a.a)(h,2),x=p[0],m=p[1],v=s.a.useState(),g=Object(a.a)(v,2),y=g[0],k=g[1],w=s.a.useCallback((function(e,t){"clickaway"!==t&&(O(!1),j(""),k(null))}),[]),C=s.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};m(t),j(e),O(!0),k(n())}),[]);return Object(u.jsxs)(l.Provider,{value:C,children:[t,Object(u.jsx)(r.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:6e3,onClose:w,children:Object(u.jsx)(c.a,{onClose:w,severity:x,sx:{width:"100%"},children:o})}),y]})}},322:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(88),r=n(0);function c(e){return Object(r.jsxs)("span",{children:[Object(r.jsx)(a.a,{variant:"h4",component:"h2",color:"primary.dark",children:e.title}),e.subtitle&&Object(r.jsx)(a.a,{variant:"body1",color:"text.secondary",mt:"5px",children:e.subtitle})]})}},323:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}));var a=n(318),r=n(320),c=n(260),i=n(88),s=n(2),o=n.n(s),u=n(478),l=n(461),j=n.n(l),d=n(0),b=["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"];function f(e){var t=o.a.useMemo((function(){return{getValue:function(t){return e.resolveDay?b[Number(t.x)]:t.x},min:0}}),[e.resolveDay]),n=o.a.useMemo((function(){return[{getValue:function(e){return e.y},position:"left",elementType:"bar",minDomainLength:15,hardMin:0,scaleType:"linear",showDatumElements:!0}]}),[]),s=o.a.useMemo((function(){var t=e.y.map((function(e){return{label:e.label,data:[]}}));return e.data.forEach((function(n){e.y.forEach((function(a,r){var c=a.key;t[r].data.push({x:n[e.xKey],y:Number(n[c])})}))})),t}),[e.y,e.xKey,e.data]);return Object(d.jsxs)(r.a,{item:!0,xs:12,lg:e.fullWidth?12:6,children:[Object(d.jsxs)(c.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(d.jsx)(i.a,{variant:"body2",component:"h4",color:"text.secondary",children:e.title}),Object(d.jsx)(j.a,{color:"primary"})]}),0===e.data.length?Object(d.jsx)(i.a,{component:"p",color:"text.secondary",children:"Brak danych do nakre\u015blenia wykresu"}):Object(d.jsx)(a.a,{sx:{maxHeight:"400px",height:"40vh",minHeight:"300px",width:"100%"},children:Object(d.jsx)(u.a,{options:{data:s,primaryAxis:t,secondaryAxes:n}})})]})}},324:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(59),r=n(0);a.Font.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-light-webfont.ttf"});var c=a.StyleSheet.create({page:{fontSize:11,fontFamily:"Roboto",flexDirection:"column",backgroundColor:"#ffffff"},section:{marginBottom:"15px",justifyContent:"flex-start",padding:"15px"},head:{fontSize:"16px"}});function i(e){return Object(r.jsx)(a.Document,{children:Object(r.jsxs)(a.Page,{size:"A4",style:c.page,wrap:!0,children:[Object(r.jsxs)(a.View,{style:c.section,children:[Object(r.jsxs)(a.Text,{style:c.head,children:["Rav System, dnia ",(new Date).toLocaleString("pl")]}),Object(r.jsx)(a.Text,{style:c.head,children:e.subject})]}),e.sections.map((function(e,t){return Object(r.jsx)(a.View,{style:c.section,children:e},t)}))]})})}},325:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(59),r=n(0),c=a.StyleSheet.create({title:{padding:"5px",marginBottom:"5px",fontSize:"18px"},table:{},row:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid black"},cell:{padding:"5px",width:"80px",alignItems:"center"},text:{margin:"0px",padding:"0px",wordBreak:"keep-all",textAlign:"center"}});function i(e){var t=e.cols;return Object(r.jsx)(a.View,{style:c.row,children:t.map((function(e,t){return Object(r.jsx)(s,{val:e},t)}))})}function s(e){return Object(r.jsx)(a.View,{style:c.cell,children:Object(r.jsx)(a.Text,{style:c.text,children:e.val})})}function o(e){return e.every((function(e){return e.slice(1).every((function(e){return 0===e}))}))}function u(e){var t=e.rows,n=e.title;return Object(r.jsxs)(a.View,{children:[Object(r.jsx)(a.Text,{style:c.title,children:n}),o(t.slice(1))?Object(r.jsx)(a.Text,{style:c.text,children:"Brak danych w wybranym przedziale czasu"}):t.map((function(e,t){return Object(r.jsx)(i,{cols:e},t)}))]})}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n(254);function c(){return Object(a.useContext)(r.b)}},331:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(6),r=n(484),c=n(210),i=n(885),s=n(887),o=n(318),u=n(2),l=n.n(u),j=n(49),d=n(888),b=n(42),f=n(244),O=n.n(f),h=n(243),p=n.n(h),x=n(0);function m(e){var t=e.row,n=l.a.useState(!1),u=Object(a.a)(n,2),f=u[0],h=u[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(r.a,{hover:!0,sx:{"& > *":{borderBottom:"unset"}},children:[Object(x.jsx)(c.a,{children:Object(x.jsx)(i.a,{"aria-label":"szczeg\xf3\u0142y zapytania",size:"small",onClick:function(){return h(!f)},children:f?Object(x.jsx)(p.a,{}):Object(x.jsx)(O.a,{})})}),Object(x.jsx)(c.a,{component:"th",scope:"row",children:t.id}),Object(x.jsx)(c.a,{align:"left",children:t.endpoint}),Object(x.jsx)(c.a,{align:"left",children:Math.fround(1e3*t.time).toPrecision(6)})]}),Object(x.jsx)(r.a,{children:Object(x.jsx)(c.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(x.jsx)(s.a,{in:f,timeout:"auto",unmountOnExit:!0,children:Object(x.jsxs)(o.a,{component:"pre",sx:{margin:1},children:[Object(x.jsx)(d.a,{component:j.b,to:"/users/".concat(t.user),children:"Poka\u017c u\u017cytkownika"})," ",Object(x.jsx)("br",{}),Object(b.a)(t._created),"\xa0|\xa0",t.method,"\xa0",t.endpoint,Object(x.jsx)("br",{}),"czas przetwarzania: ",t.time," [s]",Object(x.jsx)("br",{}),"Cia\u0142o zapytania ",Object(x.jsx)("br",{}),JSON.stringify(JSON.parse(t.payload),void 0,3)]})})})})]})}},338:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(44),u=n(45),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"fetch",value:function(e,t){return this.get(this.preparePath(e)+"/requests",t)}},{key:"getStats",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/requests/stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(60).a);t.a=new l},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(886),r=n(318),c=n(0);function i(){return Object(c.jsx)(r.a,{sx:{display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",minHeight:"200px",height:"100%"},children:Object(c.jsx)(a.a,{})})}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(2),r=n.n(a),c=n(43),i={owner:!1,accessAdmin:!1,premisesAdmin:!1,keysAdmin:!1,reservationsAdmin:!1,reservationsAbility:!1,logsAdmin:!1,statsViewer:!1,myId:function(e){return!1}};function s(){var e=Object(c.a)().user;return r.a.useMemo((function(){if(!e)return i;var t=e.access,n=t.owner,a=t.accessAdmin,r=t.premisesAdmin,c=t.keysAdmin,s=t.reservationsAdmin,o=t.reservationsAbility,u=t.logsAdmin,l=t.statsViewer;return{owner:n,accessAdmin:n||a,premisesAdmin:n||r,keysAdmin:n||c,reservationsAdmin:n||s,reservationsAbility:n||o,logsAdmin:n||u,statsViewer:n||l,myId:function(t){return n||e.id===t}}}),[e])}},40:function(e,t,n){"use strict";var a=n(13),r=n(2),c=n(883),i=n(878),s=n(867),o=n(483),u=n(0);function l(e){var t=e.children,n=e.open,r=e.sx,l=e.onClose;return Object(u.jsx)(i.a,{open:n,onClose:l,closeAfterTransition:!0,BackdropComponent:c.a,BackdropProps:{timeout:500},sx:{display:"flex",justifyContent:"center",alignItems:"flex-start",overflow:"auto"},children:Object(u.jsx)(s.a,{in:n,children:Object(u.jsx)(o.a,{sx:Object(a.a)({bgcolor:"background.paper",position:"absolute",width:"95%",mt:"5vw",maxWidth:"500px",boxShadow:24,p:3},r),children:t})})})}t.a=r.memo(l)},41:function(e,t,n){"use strict";var a=n(161);n.d(t,"b",(function(){return a.a}));var r=n(232);n.d(t,"a",(function(){return r.a}))},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(6);function r(e){var t=new Date(e);return new Intl.DateTimeFormat("pl-PL",{dateStyle:"medium",timeStyle:"medium"}).format(t)}var c=new Intl.DateTimeFormat("pl-PL",{timeStyle:"medium"});function i(e){if(!e)return!1;var t=new Date(e);return Boolean(t.getDate())}function s(e){var t=e.split(/\.|:|,\s/).map((function(e){return Number(e)})),n=Object(a.a)(t,6),r=n[0],c=n[1],i=n[2],s=n[3],o=n[4],u=n[5];return new Date(i,c-1,r,s,o,u)}},43:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n(253);function c(){return Object(a.useContext)(r.b)}},443:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(319),o=n(88),u=n(947),l=n(459),j=n.n(l),d=n(2),b=n.n(d),f=n(61);function O(e,t){switch(t.statusCode){case 200:case 201:return{success:!0,message:"Kod zosta\u0142 wys\u0142any na podany email"};case 403:case 401:case 400:default:return{success:!1,message:t.payload};case 404:return{success:!1,message:"Taki u\u017cytkownik nie istnieje."};case 422:return{success:!1,message:"Adres email jest niepoprawny"};case"NO_ADDRESS":return{success:!1,message:"Musisz poda\u0107 adres email"}}}var h=n(0);function p(e){var t,n=b.a.useReducer(O,{success:null,message:e.text}),a=Object(i.a)(n,2),l=a[0],d=a[1],p=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.email||d({statusCode:"NO_ADDRESS"}),t.prev=1,t.next=4,f.a.generateKey(e.email);case 4:n=t.sent,d(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d({statusCode:t.t0.code,payload:t.t0.description});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(u.a,{component:"div",display:"flex",children:[Object(h.jsx)(s.a,{sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},onClick:p,children:Object(h.jsx)(j.a,{fontSize:"large"})}),Object(h.jsx)(u.a,{sx:{display:"flex",alignItems:"center",ml:1},children:Object(h.jsx)(o.a,{variant:"body2",component:"p",color:(t=l.success,null===t?"inherit":!0===t?"green":"error"),children:l.message})})]})}},444:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(11),r=n.n(a),c=n(20),i=n(4),s=n(13),o=n(6),u=n(961),l=n(319),j=n(320),d=n(888),b=n(947),f=n(443),O=n(2),h=n.n(O),p=n(88),x=n(0);function m(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{variant:"h5",sx:{mt:3},children:e.title}),Object(x.jsx)(p.a,{variant:"body2",sx:{mt:1},children:e.text}),e.children]})}var v=n(61),g=n(50),y=n(21),k=n(33);function w(e){var t,n,a=Object(k.a)(),O=h.a.useState({email:null!==(t=null===(n=localStorage.getItem("email"))||void 0===n?void 0:n.toString())&&void 0!==t?t:"",newPassword:"",code:""}),p=Object(o.a)(O,2),w=p[0],C=p[1],S=h.a.useCallback((function(e){C((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))}),[]),z=h.a.useCallback(function(){var t=Object(c.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,v.a.changePassword(w);case 4:a("Has\u0142o zosta\u0142o zmienione","success",(function(){return e.onSuccess&&e.onSuccess(),Object(x.jsx)(g.a,{to:y.a.LOGIN})})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),c=t.t0.description,404===t.t0.code&&(c="Taki u\u017cytkownik nie istnieje"),a(c,"error");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),[w,a,e]);return Object(x.jsxs)(b.a,{component:"form",onSubmit:z,sx:{mt:1},children:[Object(x.jsxs)(m,{title:"1. Wygeneruj Kod",text:"Podaj sw\xf3j aders email i naci\u015bnij przycisk by otrzyma\u0107 email i kodem.",children:[Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email",autoFocus:!0,value:w.email,onChange:S}),Object(x.jsx)(f.a,{text:"Kliknij przycisk by otrzyma\u0107 kod.",email:w.email})]}),Object(x.jsxs)(m,{title:"2. Podaj nowe has\u0142o i kod",text:"Podaj nowe has\u0142o i kod kt\xf3ry otrzyma\u0142e\u015b (je\u015bli nie, powt\xf3rz krok nr 1)",children:[Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"Has\u0142o",type:"password",id:"password",value:w.newPassword,onChange:S,autoComplete:"current-password"}),Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Kod",type:"text",id:"code",value:w.code,onChange:S,autoComplete:"email-code"})]}),Object(x.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"3. Zmie\u0144 Has\u0142o"}),Object(x.jsx)(j.a,{container:!0,justifyContent:"flex-end",children:Object(x.jsx)(j.a,{item:!0,children:Object(x.jsx)(d.a,{href:y.a.LOGIN,children:"Has\u0142o zmienione? Zaloguj si\u0119!"})})})]})}},46:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(44),u=n(45),l=n(240),j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"sendImage",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t,{method:"POST",cache:"no-cache",mode:"cors",body:n,headers:{Authorization:this.authToken}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(c=e.sent,console.debug(c),a.ok){e.next=10;break}throw console.error("".concat(a.status,"\t").concat(null===c||void 0===c||null===(i=c.error)||void 0===i?void 0:i.type,"\t").concat(null===c||void 0===c||null===(s=c.error)||void 0===s?void 0:s.description)),new l.a(c);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLink",value:function(e){return(null===e||void 0===e?void 0:e.url.includes("http"))?e.url:this._BASE_URL.slice(0,this._BASE_URL.length-3)+(null===e||void 0===e?void 0:e.url)}},{key:"upload",value:function(e,t){var n=new FormData;return n.append("file",t),this.sendImage(this.preparePath(e)+"/image",n)}},{key:"remove",value:function(e){return this.delete(this.preparePath(e)+"/image")}}]),n}(n(60).a);t.a=new j},514:function(e,t,n){},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(320),r=n(88),c=n(2),i=n.n(c),s=n(132),o=n.n(s),u=n(167),l=n.n(u),j=n(260),d=n(319),b=n(0);function f(e){var t=e.title,n=e.subtitle,c=e.onSubmit,s=e.onCancel,u=e.children,f=i.a.useCallback((function(e){e.preventDefault(),c()}),[c]);return Object(b.jsxs)(j.a,{rowGap:3,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)(r.a,{variant:"h5",color:"primary.dark",children:t}),n&&Object(b.jsx)(r.a,{variant:"body2",color:"text.secondary",mt:"5px",children:n})]}),Object(b.jsxs)(a.a,{container:!0,spacing:2,component:"form",onSubmit:f,children:[u,Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsxs)(j.a,{direction:"row",justifyContent:"space-around",mt:1.5,children:[Object(b.jsx)(d.a,{"aria-label":"Zamknij",title:"Zamknij",startIcon:Object(b.jsx)(o.a,{}),onClick:s,children:"Zamknij"}),Object(b.jsx)(d.a,{"aria-label":"Zatwierd\u017a",title:"Zatwierd\u017a",startIcon:Object(b.jsx)(l.a,{color:"inherit"}),type:"submit",color:"success",children:"Zatwierd\u017a"})]})})]})]})}},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return i}));var a=n(230),r=n(2),c=n.n(r);function i(){return c.a.useContext(a.b)}},550:function(e,t){},552:function(e,t){},582:function(e,t){},583:function(e,t){},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(6),r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(240),l=function(){function e(){Object(s.a)(this,e),this._BASE_URL="https://ravsapi.herokuapp.com/v1",this._TOKEN_NAME="auth_token",this._userId=-1}return Object(o.a)(e,[{key:"userId",get:function(){if(-1===this._userId)throw Error("user id was not set");return this._userId},set:function(e){this._userId=e}},{key:"authToken",get:function(){return"Bearer "+window.localStorage.getItem(this._TOKEN_NAME)}},{key:"_fetch",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t.endpoint,{method:t.method,cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json",Authorization:this.authToken},body:JSON.stringify(t.body)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,401!==n.status||t.endpoint.match("/auth|me|activate")||window.location.reload(),n.ok){e.next=11;break}throw new u.a(a);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var r=0,c=Object.entries({"/accesses":"/accesses","/settings":"/configurations","/users":"/users"});r<c.length;r++){var i=Object(a.a)(c[r],2),s=i[0],o=i[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId),"buildingId"in e&&(t+="/buildings/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&("me"===e.userId?t+="/users/"+this.userId.toString():t+="/users/"+e.userId);return t}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fetch({method:"GET",endpoint:e+"?"+new URLSearchParams(t).toString()})}},{key:"post",value:function(e,t){return this._fetch({method:"POST",endpoint:e,body:t})}},{key:"patch",value:function(e,t){if(0!==Object.keys(t).length)return this._fetch({method:"PATCH",endpoint:e,body:t})}},{key:"delete",value:function(e){return this._fetch({method:"DELETE",endpoint:e})}}]),e}()},61:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(44),u=n(45),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="/users",e}return Object(s.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"getMe",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/users/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(e){return this.get("/users",e)}},{key:"register",value:function(e){return this.post("/users",e)}},{key:"activate",value:function(e){return this.patch("/users/activate",e)}},{key:"generateKey",value:function(e){return this.post("/users/key",{email:e})}},{key:"updateAccess",value:function(e,t){return this.patch("/users/".concat(e,"/access"),{accessId:t})}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"changePassword",value:function(e){return this.patch("/users/password",e)}}]),n}(n(60).a);t.a=new l},694:function(e,t){},79:function(e,t,n){"use strict";var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(104),l=n(61),j=function(){function e(){var t;Object(s.a)(this,e),this.STORAGE_NAME="user-metadata",this.data=void 0,this._userId=void 0,this.data=null!==(t=u.a.read(this.STORAGE_NAME))&&void 0!==t?t:{notes:"",favourites:[]}}return Object(o.a)(e,[{key:"save",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.a.save(this.STORAGE_NAME,this.data),this._userId){e.next=3;break}return e.abrupt("return");case 3:return l.a.setPath({userId:null===(t=this._userId)||void 0===t?void 0:t.toString()}),e.prev=4,e.next=7,l.a.update({metadata:this.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"userId",set:function(e){this._userId=e}},{key:"metadata",set:function(e){this.data=Object(a.a)(Object(a.a)({},this.data),e)}},{key:"notes",get:function(){var e;return null!==(e=this.data.notes)&&void 0!==e?e:""},set:function(e){this.data.notes=e,this.save()}},{key:"favourites",get:function(){var e;return null!==(e=this.data.favourites)&&void 0!==e?e:[]}},{key:"addFavourite",value:function(e){var t,n;null===(t=this.data.favourites)||void 0===t||t.push(e),null===(n=this.data.favourites)||void 0===n||n.sort((function(e,t){return e.type>=t.type?e.type===t.type?e.name>t.name?1:-1:1:-1})),console.log(this.data),this.save()}},{key:"isFavourite",value:function(e){var t;return Boolean(null===(t=this.data.favourites)||void 0===t?void 0:t.find((function(t){var n=t.id;return t.type===e.type&&n===e.id})))}},{key:"removeFavourite",value:function(e){var t;this.data.favourites=null===(t=this.data.favourites)||void 0===t?void 0:t.filter((function(t){return t.id+t.type!==e.id+e.type})),this.save()}}]),e}();t.a=new j},863:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(94),i=n.n(c),s=(n(514),n(955)),o=n(318),u=n(987),l=(n(515),n(516),n(517),n(518),n(967)),j=n(939),d=n(940),b=n(317),f=n(13),O=n(173),h=n(49),p=n(0),x=["href"],m=a.forwardRef((function(e,t){var n=e.href,a=Object(O.a)(e,x);return Object(p.jsx)(h.b,Object(f.a)({"data-testid":"custom-link",ref:t,to:n},a))})),v=Object(b.a)({palette:{primary:j.a,secondary:{dark:"#f5f5f5",main:"#304ffe",light:"#fff"},background:{default:"#f3f3f3",paper:"#fff"}},shape:{borderRadius:4},components:{MuiCssBaseline:{styleOverrides:{body:Object(d.a)({track:"#f5f5f5",thumb:"#adadad",active:"#959595"})}},MuiTextField:{defaultProps:{size:"medium",variant:"outlined"}},MuiSelect:{defaultProps:{size:"medium"}},MuiButton:{defaultProps:{sx:{borderRadius:function(e){var t=e.shape;return Number(t.borderRadius)/2}}}},MuiLink:{defaultProps:{component:m}},MuiButtonBase:{defaultProps:{LinkComponent:m}},MuiSvgIcon:{defaultProps:{color:"inherit"}},MuiIconButton:{defaultProps:{color:"primary"}}}});function g(e){return Object(p.jsx)(l.a,{theme:v,children:e.children})}var y=n(253),k=n(947),w=n(50),C=n(21),S=n(43),z=n(36),I=r.a.lazy((function(){return n.e(10).then(n.bind(null,1021))}));function P(){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:Object(p.jsx)(I,{})})}var E=n(320),R=n(109),T=n(260),A=n(54),M=n(11),D=n.n(M),B=n(20),F=n(6),N=n(95),W=n(111),L=n(33),U=n(40),_=n(88),q=n(885),H=n(973),K=n(42),G=n(112),Z=n(4),V=n(961),J=n(882),Q=n(485),Y=n(879),$=n(486),X=n(41);function ee(){return r.a.useContext(He)}var te=n(53),ne=n(959);function ae(e){var t=e.value,n=e.onChange,a=e.label,c=r.a.useCallback((function(e){e&&n(e)}),[n]);return Object(p.jsx)(ne.a,{minDate:new Date,label:a,value:t,onChange:c,renderInput:function(e){return Object(p.jsx)(V.a,Object(f.a)({sx:{width:"100%"}},e))}})}function re(e){var t,n,a,c=ee().updateReservation,i=Object(X.b)().allRooms,s=r.a.useState({}),o=Object(F.a)(s,2),u=o[0],l=o[1],j=r.a.useCallback((function(){e.onClose(),l({})}),[e]),d=r.a.useCallback(Object(B.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e.reservation.id,u);case 2:if(!t.sent){t.next=5;break}j(),l({});case 5:case"end":return t.stop()}}),t)}))),[e,u,j,c]),b=r.a.useCallback((function(e){l((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(Z.a)({},e.target.name,e.target.value))}))}),[]),O=r.a.useCallback((function(e,t){t&&l((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e,t.toLocaleString("pl")))}))}),[]);return Object(p.jsx)(U.a,{open:e.open,onClose:j,"aria-label":"Okno do edycji rezerwacji",children:Object(p.jsxs)(te.a,{title:"Edycja rezerwacji",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:d,onCancel:e.onClose,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(t=u.title)&&void 0!==t?t:e.reservation.title,onChange:b})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(n=u.description)&&void 0!==n?n:e.reservation.description,onChange:b})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(ae,{value:u.plannedStart?Object(K.b)(u.plannedStart):new Date(e.reservation.plannedStart),label:"Pocz\u0105tek",onChange:function(e){return O("plannedStart",e)}})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(ae,{value:u.plannedEnd?Object(K.b)(u.plannedEnd):new Date(e.reservation.plannedEnd),label:"Koniec",onChange:function(e){return O("plannedEnd",e)}})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(p.jsx)(Y.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(a=u.roomId)&&void 0!==a?a:e.reservation.room.id,label:"Sala",onChange:function(e){return l((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:i.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)($.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var ce=n(319),ie=n(73),se=n.n(ie);function oe(e){var t,n,a,c,i=ee().createReservation,s=Object(X.b)().allRooms,u=Object(L.a)(),l=r.a.useState({color:"",from:new Date(e.reservation.plannedStart),to:new Date(e.reservation.plannedEnd)}),j=Object(F.a)(l,2),d=j[0],b=j[1],O=r.a.useState([]),h=Object(F.a)(O,2),x=h[0],m=h[1],v=r.a.useState({title:e.reservation.title,description:e.reservation.description,roomId:null!==(t=e.reservation.room.id)&&void 0!==t?t:0}),g=Object(F.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback((function(){e.onClose()}),[e]),C=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.map(function(){var e=Object(B.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(f.a)(Object(f.a)({},y),{},{plannedStart:t.from.toLocaleString("pl"),plannedEnd:t.to.toLocaleString("pl")}));case 2:return n=e.sent,t.color=n?"green":"red",e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,m(n);case 5:case"end":return e.stop()}}),e)}))),[y,x,i]),S=r.a.useCallback((function(e){m((function(t){return t.splice(e,1),Object.assign([],t)}))}),[]),z=r.a.useCallback((function(e,t){b((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e,t))}))}),[]),I=r.a.useCallback((function(){x.find((function(e){var t=e.from,n=e.to;return t===d.from||n===d.to}))?u("Daty powinny si\u0119 r\xf3\u017cni\u0107","error"):m((function(e){return e.push(Object(f.a)(Object(f.a)({},d),{},{color:""})),Object.assign([],e)}))}),[d,u,x]),P=r.a.useCallback((function(e){k((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(Z.a)({},e.target.name,e.target.value))}))}),[]);return Object(p.jsx)(U.a,{open:e.open,onClose:w,"aria-label":"Okno do kopiowania rezerwacji",children:Object(p.jsxs)(te.a,{title:"Kopiowanie rezerwacji",subtitle:"Skopiuj rezerwacj\u0119 dla wybranych przez siebie nowych dat.",onSubmit:C,onCancel:e.onClose,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(n=y.title)&&void 0!==n?n:e.reservation.title,onChange:P})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(a=y.description)&&void 0!==a?a:e.reservation.description,onChange:P})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:5,children:Object(p.jsx)(ae,{label:"Pocz\u0105tek",value:d.from,onChange:function(e){return z("from",e)}})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:5,children:Object(p.jsx)(ae,{label:"Koniec",value:d.to,onChange:function(e){return z("to",e)}})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:2,children:Object(p.jsx)(ce.a,{size:"large",sx:{height:"100%",width:"100%"},variant:"outlined",onClick:I,children:"Dodaj"})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(T.a,{spacing:1,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5,bgcolor:"background.default",maxHeight:"200px",overflow:"auto"},children:[0===x.length&&Object(p.jsx)(_.a,{textAlign:"center",component:"p",children:"Brak dat"}),x.map((function(e,t){var n=e.color,a=e.from,r=e.to;return Object(p.jsxs)(o.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pl:"3px"},children:[Object(p.jsx)(_.a,{component:"p",sx:{color:n},children:Object(p.jsxs)(p.Fragment,{children:[a.toLocaleString("pl"),"\xa0-\xa0",r.toLocaleString("pl")]})}),Object(p.jsx)(q.a,{onClick:function(){return S(t)},children:Object(p.jsx)(se.a,{})})]},t)}))]})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(p.jsx)(Y.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(c=y.roomId)&&void 0!==c?c:e.reservation.room.id,label:"Sala",onChange:function(e){return k((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:s.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)($.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var ue=n(203),le=n.n(ue),je=n(946),de=n(132),be=n.n(de),fe=Object(je.a)("input")({position:"absolute",left:"-1000px",color:"transparent"});function Oe(e){var t=r.a.useState(""),n=Object(F.a)(t,2),a=n[0],c=n[1],i=r.a.useState("primary"),s=Object(F.a)(i,2),u=s[0],l=s[1],j=r.a.useRef(null),d=function(){var t=Object(B.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.onScan(a);case 3:t.sent?(l("success"),setTimeout(b,2e3)):l("error"),c("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){e.onClose(),c(""),l("primary")};return Object(p.jsxs)(T.a,{onClick:function(){j.current&&console.log(j.current.focus())},component:"form",direction:"column",spacing:4,onSubmit:d,children:[Object(p.jsx)(le.a,{sx:{fontSize:140,alignSelf:"center"},color:u}),Object(p.jsx)(fe,{ref:j,autoFocus:!0,type:"text",value:a,onChange:function(e){return c(e.target.value)}}),Object(p.jsxs)(o.a,{component:"span",textAlign:"center",children:[Object(p.jsx)(_.a,{variant:"h5",color:"primary.dark",children:e.headline}),Object(p.jsx)(_.a,{variant:"body2",color:"text.secondary",mt:"5px",children:e.bodyText})]}),Object(p.jsx)(ce.a,{startIcon:Object(p.jsx)(be.a,{}),onClick:b,color:"error",children:"Zamknij"})]})}function he(e){var t=ee().pingKeyForReservation,n=r.a.useCallback(function(){var n=Object(B.a)(D.a.mark((function n(a){return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t(e.reservationId,a));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(p.jsx)(U.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno do edycji rezerwacji",sx:{maxWidth:"400px"},children:Object(p.jsx)(Oe,{headline:"Wczytaj klucz z tagiem NFC",bodyText:'Przy pomocy czytnika, wczytaj wydawany klucz. Aby opu\u015bci\u0107 to okno, naci\u015bnij "Zamknij"',onScan:n,onClose:e.onClose})})}var pe=n(453),xe=n.n(pe),me=n(452),ve=n.n(me),ge=n(950),ye=n(480),ke=n(948),we=n(451),Ce=n.n(we);function Se(e){var t=r.a.useState(null),n=Object(F.a)(t,2),a=n[0],c=n[1],i=Boolean(a),s=r.a.useCallback((function(e){c(e.currentTarget)}),[]),o=function(){c(null)};return Object(p.jsxs)(k.a,{sx:e.sx,children:[Object(p.jsx)(q.a,{"aria-label":"more-options","aria-controls":"card-menu","aria-expanded":i?"true":void 0,"aria-haspopup":"true",onClick:s,children:Object(p.jsx)(Ce.a,{})}),Object(p.jsx)(ye.a,{MenuListProps:{"aria-labelledby":"more-options"},anchorEl:a,id:"card-menu",open:i,onClose:o,PaperProps:{sx:{minWidth:200,maxWidth:"100%"}},children:e.options.map((function(e,t){return Object(p.jsxs)($.a,{onClick:function(){e.action(),o()},children:[Object(p.jsx)(ke.a,{children:e.icon}),Object(p.jsx)(_.a,{children:e.label})]},t)}))})]})}var ze=n(975),Ie=n(888),Pe=n(977),Ee=n(964),Re=n(949),Te=n(46);function Ae(e){var t=e.user;return Object(p.jsxs)(ze.a,{button:!0,component:Ie.a,href:C.b.toUser(t.id),children:[Object(p.jsx)(Pe.a,{children:Object(p.jsx)(Ee.a,{src:Te.a.getLink(t.image),alt:"".concat(t.name," ").concat(t.surname)})}),Object(p.jsx)(Re.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:t.email})]})}function Me(e){var t=e.room,n=Object(X.b)().getRoomLink,a=r.a.useMemo((function(){return n(t.id)}),[t.id,n]);return Object(p.jsxs)(ze.a,{button:!0,component:Ie.a,href:a,children:[Object(p.jsx)(Pe.a,{children:Object(p.jsx)(Ee.a,{src:Te.a.getLink(t.image),alt:"zdj\u0119cie sali ".concat(t.name)})}),Object(p.jsx)(Re.a,{primary:"Sala ".concat(t.name),secondary:t.roomType})]})}var De=n(37),Be=n(965);function Fe(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)(_.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(p.jsx)(_.a,{variant:"body1",color:"text.secondary",textAlign:"left",component:"div",children:Object(p.jsx)(T.a,{direction:"row",alignItems:"center",flexWrap:"wrap",rowGap:1,columnGap:1,children:e.children.map((function(e){var t=e.label,n=e.value;return Object(p.jsxs)("div",{children:[t,":\xa0",Object(p.jsx)(Be.a,{label:n})]},t)}))})})]})}function Ne(e){return Object(p.jsxs)("span",{children:[Object(p.jsx)(_.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(p.jsx)(_.a,{variant:"body1",color:"text.secondary",textAlign:"justify",component:"p",children:e.children})]})}function We(e){var t=Object(De.a)(),n=t.reservationsAdmin,a=t.keysAdmin,c=t.myId,i=ee().deleteReservation,s=r.a.useState(!1),o=Object(F.a)(s,2),u=o[0],l=o[1],j=r.a.useState(!1),d=Object(F.a)(j,2),b=d[0],f=d[1],O=r.a.useState(!1),h=Object(F.a)(O,2),x=h[0],m=h[1],v=r.a.useState(!1),g=Object(F.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback(Object(B.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e.reservation.id);case 2:if(!t.sent){t.next=4;break}l(!1);case 4:case"end":return t.stop()}}),t)}))),[e.reservation.id,i]),C=r.a.useMemo((function(){var t=[{icon:Object(p.jsx)(ve.a,{color:"primary"}),label:"Kopiuj",action:function(){return k(!0)}}];return a&&t.unshift({icon:Object(p.jsx)(le.a,{color:"primary"}),label:"Odbij klucz",action:function(){return m(!0)}}),(c(e.reservation.user.id)||n)&&t.push({icon:Object(p.jsx)(ge.a,{color:"primary"}),label:"Edytuj",action:function(){return f(!0)}},{icon:Object(p.jsx)(se.a,{color:"error"}),label:"Usu\u0144",action:function(){return l(!0)}}),t}),[c,a,e.reservation.user.id,n]);return Object(p.jsxs)(p.Fragment,{children:[(c(e.reservation.user.id)||n)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a,{open:u,onClose:function(){return l(!1)},objectName:e.reservation.title,onSuccess:w}),Object(p.jsx)(re,{open:b,onClose:function(){return f(!1)},reservation:e.reservation})]}),Object(p.jsx)(oe,{open:y,onClose:function(){return k(!1)},reservation:e.reservation}),a&&Object(p.jsx)(he,{open:x,onClose:function(){return m(!1)},reservationId:e.reservation.id}),Object(p.jsx)(U.a,{open:e.open,onClose:e.onClose,"aria-label":"Widok Rezerwacji",sx:{maxWidth:"800px",mt:"4vw"},children:Object(p.jsxs)(E.a,{container:!0,spacing:"15px",children:[Object(p.jsx)(E.a,{item:!0,xs:10,sm:11,children:Object(p.jsxs)(T.a,{spacing:4,alignItems:"stretch",children:[Object(p.jsx)(_.a,{component:"h2",variant:"h4",children:e.reservation.title}),Object(p.jsx)(Fe,{title:"Planowany czas:",children:[{label:"Od",value:Object(K.a)(e.reservation.plannedStart)},{label:"do",value:Object(K.a)(e.reservation.plannedEnd)}]})]})}),Object(p.jsx)(E.a,{item:!0,xs:2,sm:1,children:Object(p.jsxs)(T.a,{alignItems:"flex-end",direction:"column",spacing:3,children:[Object(p.jsx)(q.a,{onClick:e.onClose,children:Object(p.jsx)(xe.a,{})}),Object(p.jsx)(Se,{options:C,sx:{justifySelf:"right"}}),a&&Object(p.jsx)(q.a,{onClick:function(){return m(!0)},title:"Odbij klucz","aria-label":"Odbij klucz",color:"success",children:Object(p.jsx)(le.a,{})})]})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(T.a,{spacing:4,alignItems:"stretch",children:[Object(p.jsx)(Fe,{title:"Faktyczny czas rezerwacji:",children:[{label:"Pocz\u0105tek",value:e.reservation.actualStart?Object(K.a)(e.reservation.actualStart):"Brak"},{label:"Koniec",value:e.reservation.actualEnd?Object(K.a)(e.reservation.actualEnd):"Brak"}]}),Object(p.jsx)(Ne,{title:"Opis:",children:e.reservation.description}),Object(p.jsxs)(H.a,{component:"div",children:[Object(p.jsx)(Ae,{user:e.reservation.user}),Object(p.jsx)(Me,{room:e.reservation.room})]})]})})]})})]})}var Le=r.a.createContext({showReservation:function(e){},reservation:null});function Ue(e){var t,n=ee().reservations,a=r.a.useState(!0),c=Object(F.a)(a,2),i=c[0],s=c[1],o=r.a.useState(null),u=Object(F.a)(o,2),l=u[0],j=u[1],d=null!==(t=r.a.useMemo((function(){if(l)return n.find((function(e){return e.id===l}))}),[n,l]))&&void 0!==t?t:null,b=r.a.useCallback((function(e){j(e),s(!0)}),[]);return Object(p.jsxs)(Le.Provider,{value:{reservation:d,showReservation:b},children:[e.children,d&&Object(p.jsx)(We,{reservation:d,open:i,onClose:function(){return s(!1)}})]})}var _e=n(161),qe=n(125),He=r.a.createContext(null);function Ke(e){var t=Object(A.b)(),n=t.queryParams,a=t.setQueryParams,c=Object(L.a)(),i=Object(_e.a)().getRoomLink,s=Object(W.b)(),o=Object(S.a)().user,u=Object(w.h)(),l=Object(qe.a)(3e4),j=r.a.useState(),d=Object(F.a)(j,2),b=d[0],O=d[1],h=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t,r,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u,0===Object.keys(u).length&&window.location.pathname===C.a.HOME&&(t={userId:"me"}),e.next=5,N.a.getReservations(t,n);case 5:(r=e.sent).pagination&&a((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=r.pagination)||void 0===t?void 0:t.pagesCount})})),O(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c(null!==(i=e.t0.description)&&void 0!==i?i:e.t0.message,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[n.currentPage,n.itemsOnPage,n.from,n.search,a,u,c,o]);r.a.useEffect((function(){h()}),[h,l]);var x=r.a.useCallback((function(){return a((function(e){return Object.assign({},e)}))}),[a]),m=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,a=b.find((function(e){return e.id===t}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,N.a.pingKey(t,n);case 8:r=e.sent,O((function(e){return e&&e.forEach((function(e){e.id===t&&(e.actualStart?e.actualEnd=(new Date).toString():e.actualStart=(new Date).toString())})),Object.assign([],e)})),s&&s.setOccupied(!a.room.occupied),(null===r||void 0===r?void 0:r.data)&&c(r.data.toString(),"success"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),c(e.t0.description,"error"),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,s,c]),v=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.createOne(t);case 3:x(),c("Rezerwacja utworzona prawid\u0142owo!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[c,x]),g=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.remove(t);case 3:O((function(e){return e&&e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c]),y=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.update(t,n);case 3:O((function(e){return e&&e.map((function(e){return e.id===t&&(["plannedStart","plannedEnd"].forEach((function(t){t in n&&(e[t]=Object(K.b)(n[t]).toUTCString())})),["description","title"].forEach((function(t){t in n&&(e[t]=n[t])}))),e}))})),"roomId"in n?n.roomId&&c("Rezerwacja zaktualizowana i przeniesiona!","success",(function(){return Object(p.jsx)(w.a,{to:i(Number(n.roomId))})})):c("Rezerwacja zaktualizowana!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,c]);return Object(p.jsx)(He.Provider,{value:{reservations:b,updateReservation:y,deleteReservation:g,createReservation:v,pingKeyForReservation:m},children:Object(p.jsx)(Ue,{children:e.children})})}var Ge=n(233),Ze=r.a.memo((function(e){return Object(p.jsx)(Ee.a,{alt:"u\u017cytkownik",src:Te.a.getLink(e.img)})}));function Ve(e){var t,n=e.data,a=e.onClick,r=N.a.resolveStatus(n),c=r.message,i=r.color;return Object(p.jsxs)(ze.a,{component:"li",button:!0,sx:{mb:"2px",bgcolor:i,"&:hover, &:focus":{bgcolor:i,filter:"brightness(97%)"}},onClick:a,children:[Object(p.jsx)(Pe.a,{children:Object(p.jsx)(Ie.a,{href:C.b.toUser(n.user.id),children:Object(p.jsx)(Ze,{img:n.user.image})})}),Object(p.jsx)(Re.a,{primary:n.title,secondary:Object(K.a)(null!==(t=n.actualStart)&&void 0!==t?t:n.plannedStart)+" - "+c})]})}function Je(){var e=r.a.useContext(Le).showReservation,t=ee().reservations,n=r.a.useMemo((function(){return null===t||void 0===t?void 0:t.map((function(t){return Object(p.jsx)(Ve,{data:t,onClick:function(){return e(t.id)}},t.id)}))}),[t,e]);return t?Object(p.jsx)(H.a,{"aria-label":"lista rezerwacji",children:0===t.length?Object(p.jsx)(ze.a,{children:Object(p.jsx)(Re.a,{primary:"Brak rezerwacji spe\u0142niaj\u0105cych kryteria."})}):n}):Object(p.jsx)(z.a,{})}var Qe=n(970),Ye=n(249),$e=n(234),Xe=n(251),et=n.n(Xe);function tt(e){var t,n=Object(L.a)(),a=Object(X.b)().allRooms,c=r.a.useState({start:new Date,end:new Date(Date.now()+36e5)}),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useState({title:"",description:"",plannedStart:"",plannedEnd:"",roomId:null!==(t=e.roomId)&&void 0!==t?t:0}),l=Object(F.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback((function(e){d((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(Z.a)({},e.target.name,e.target.value))}))}),[]),O=r.a.useCallback(Object(B.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j.plannedStart=s.start.toLocaleString("pl"),j.plannedEnd=s.end.toLocaleString("pl"),t.prev=2,t.next=5,N.a.createOne(j);case 5:n("Rezerwacja utworzona!","success"),e.onCancel(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(t.t0.description,"error");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),[j,n,e,s.start,s.end]),h=r.a.useCallback((function(e,t){o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e,t))}))}),[]);return Object(p.jsxs)(te.a,{title:"Tworzenie rezerwacji",subtitle:"Stw\xf3rz rezerwacj\u0119 w wybranym przez siebie pokoju.",onSubmit:O,onCancel:e.onCancel,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{title:"Tytu\u0142 rezerwacji",inputProps:{title:"Tytu\u0142 rezerwacji"},autoFocus:!0,required:!0,fullWidth:!0,maxRows:4,label:"Tytu\u0142",id:"outlined-multiline-flexible",name:"title",value:j.title,onChange:b})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,multiline:!0,maxRows:20,label:"Opis",id:"outlined-multiline-flexible",name:"description",value:j.description,onChange:b})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(ae,{label:"Pocz\u0105tek",value:s.start,onChange:function(e){return h("start",e)}})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(ae,{label:"Koniec",value:s.end,onChange:function(e){return h("end",e)}})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(p.jsx)(Y.a,{required:!0,labelId:"wybierz-budynek",name:"buildingId",value:j.roomId,label:"Budynek",onChange:function(e){return d((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:a.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)($.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})}function nt(e){return Object(p.jsx)(U.a,{open:e.open,"aria-label":"Okno do tworzenia rezerwacji",onClose:e.onClose,children:Object(p.jsx)(tt,{roomId:e.roomId,onCancel:e.onClose})})}var at=r.a.memo(nt),rt=[{name:"Dzi\u015b",value:"today"},{name:"Ten tydzie\u0144",value:"this week"},{name:"Od wczoraj",value:"yesterday"}];function ct(){var e,t,n,a=Object(De.a)().reservationsAbility,c=Object(A.b)(),i=c.setQueryParams,s=c.queryParams,u=Object(w.h)(),l=r.a.useState(!1),j=Object(F.a)(l,2),d=j[0],b=j[1],O=r.a.useState(new Date(Object(K.c)(s.from)?null!==(e=s.from)&&void 0!==e?e:"xxx":Date.now())),h=Object(F.a)(O,2),x=h[0],m=h[1],v=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{from:e})}))}),[i]),g=r.a.useCallback((function(e){e.preventDefault(),i((function(e){return Object(f.a)(Object(f.a)({},e),{},{from:x.toISOString()})}))}),[x,i]),y=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{search:e.target.value})}))}),[i]);return Object(p.jsxs)(p.Fragment,{children:[a&&Object(p.jsx)(at,{open:d,onClose:function(){return b(!1)},roomId:"roomId"in u?Number(u.roomId):void 0}),Object(p.jsxs)(E.a,{container:!0,component:"form",onSubmit:g,spacing:2,alignItems:"center",children:[Object(p.jsxs)(E.a,{item:!0,xs:12,md:12,children:[Object(p.jsx)(Ye.a,{onChange:v,buttons:rt,value:Object(K.c)(s.from)?"":null!==(t=null===s||void 0===s?void 0:s.from)&&void 0!==t?t:rt[0].value}),Object(p.jsxs)(o.a,{display:"inline-flex",children:[Object(p.jsx)(Qe.a,{label:"Od daty",inputFormat:"yyyy-MM-dd",value:x,onChange:function(e){return e&&m(e)},renderInput:function(e){return Object(p.jsx)(V.a,Object(f.a)(Object(f.a)({},e),{},{size:"small"}))}}),Object(p.jsx)(ce.a,{variant:(null===s||void 0===s?void 0:s.from)===x.toISOString()?"contained":"outlined",type:"submit",sx:{ml:1},children:"OK"})]})]}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)($e.a,{name:"search",label:"wyszukaj",value:null!==(n=s.search)&&void 0!==n?n:"",onChange:y})}),a&&Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(ce.a,{startIcon:Object(p.jsx)(et.a,{}),onClick:function(){return b(!0)},children:"Stw\xf3rz rezerwacj\u0119"})})]})]})}var it=r.a.memo(ct);function st(){return Object(p.jsx)(A.a,{name:"reservations-query-params",default:{itemsOnPage:5,currentPage:1,from:"today"},children:Object(p.jsx)(Ke,{children:Object(p.jsxs)(T.a,{rowGap:3,children:[Object(p.jsx)(it,{}),Object(p.jsx)(Je,{}),Object(p.jsx)(Ge.a,{})]})})})}var ot=r.a.memo(st),ut=n(110),lt=n(127),jt=n(978),dt=n(979),bt=n(980),ft=n(981),Ot=Object(je.a)("iframe")({width:"100%",height:"50vh",maxHeight:"400px",minHeight:"300px"});function ht(e){var t=e.address,n=e.sx,a=r.a.useMemo((function(){var e=t.street,n=t.number,a=t.town,r=t.country,c=new URL("https://maps.google.com/maps"),i=new URLSearchParams({q:"".concat(e+" "+n+" "+a+" "+r),ie:"UTF8",z:"14",iwloc:"",output:"embed"});return c.search=i.toString(),c.toString()}),[t]);return Object(p.jsx)(o.a,{children:Object(p.jsx)(Ot,{src:a,frameBorder:"0",sx:Object(f.a)({},n)})})}var pt=n(133),xt=n.n(pt);function mt(e){var t,n,a,c,i,s=e.open,o=e.onClose,u=Object(lt.b)(),l=u.address,j=u.updateAddress,d=r.a.useState({}),b=Object(F.a)(d,2),O=b[0],h=b[1],x=r.a.useCallback((function(){o(),h({})}),[o]),m=r.a.useCallback((function(e){h((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(Z.a)({},e.target.name,e.target.value))}))}),[]),v=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(O);case 2:if(!e.sent){e.next=4;break}x();case 4:case"end":return e.stop()}}),e)}))),[O,x,j]);return Object(p.jsx)(U.a,{open:s,onClose:o,"aria-label":"Okno do edycji budynku",children:Object(p.jsxs)(te.a,{title:"Edycja adresu",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci adresu i zatwierd\u017a zmiany.",onSubmit:v,onCancel:o,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:null!==(t=O.country)&&void 0!==t?t:l.country,onChange:m})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{autoFocus:!0,required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",value:null!==(n=O.town)&&void 0!==n?n:l.town,onChange:m})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:null!==(a=O.postalCode)&&void 0!==a?a:l.postalCode,onChange:m})}),Object(p.jsx)(E.a,{item:!0,xs:8,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:null!==(c=O.street)&&void 0!==c?c:l.street,onChange:m})}),Object(p.jsx)(E.a,{item:!0,xs:4,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:null!==(i=O.number)&&void 0!==i?i:l.number,onChange:m})})]})})}var vt=n(969);function gt(e){var t=e.open,n=e.onClose,a=e.handleCreateBuilding,c=r.a.useState({name:"",openTime:new Date(0,0,0,7,0).toString(),closeTime:new Date(0,0,0,21,0).toString()}),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(f.a)(Object(f.a)({},s),{},{closeTime:K.d.format(new Date(s.closeTime)),openTime:K.d.format(new Date(s.openTime))}));case 2:e.sent&&n();case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(p.jsx)(U.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia budynku",children:Object(p.jsxs)(te.a,{title:"Dodaj nowy budynek!",subtitle:"Wype\u0142nij dane nowego budynku i kliknij zatwierd\u017a.",onSubmit:l,onCancel:n,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(vt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:s.openTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{openTime:e})}))},renderInput:function(e){return Object(p.jsx)(V.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(vt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:s.closeTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{closeTime:e})}))},renderInput:function(e){return Object(p.jsx)(V.a,Object(f.a)({sx:{width:"100%"}},e))}})})]})})}var yt=n(114);function kt(e){var t=e.open,n=e.onClose,a=Object(L.a)(),c=Object(X.b)().reloadMap,i=r.a.useState({country:"Polska",town:"",street:"",number:"",postalCode:""}),s=Object(F.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback((function(e){u((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(Z.a)({},e.target.name,e.target.value))}))}),[]),j=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,yt.a.create(o);case 3:c(),a("Adres zosta\u0142 dodany","success"),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0.description,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[o,a,n,c]);return Object(p.jsx)(U.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia adresu",children:Object(p.jsxs)(te.a,{title:"Dodaj nowy adres!",subtitle:"Wype\u0142nij dane nowego adresu i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:o.country,onChange:l})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",autoFocus:!0,value:o.town,onChange:l})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:o.postalCode,onChange:l})}),Object(p.jsx)(E.a,{item:!0,xs:8,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:o.street,onChange:l})}),Object(p.jsx)(E.a,{item:!0,xs:4,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:o.number,onChange:l})})]})})}var wt=n(126);function Ct(){var e=Object(De.a)().premisesAdmin,t=Object(lt.b)(),n=t.address,a=t.deleteAddress,c=r.a.useState(!1),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(F.a)(u,2),j=l[0],d=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return d(!0)},icon:Object(p.jsx)(xt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(p.jsx)(se.a,{color:"error"})}]}),[]);return Object(p.jsxs)(p.Fragment,{children:[e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a,{objectName:"".concat(n.street," ").concat(n.number),open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(p.jsx)(mt,{open:j,onClose:function(){return d(!1)}})]}),Object(p.jsxs)(jt.a,{elevation:0,children:[Object(p.jsx)(dt.a,{action:e&&Object(p.jsx)(Se,{options:b}),title:Object(p.jsxs)(p.Fragment,{children:[n.country,", ",n.town]}),subheader:Object(p.jsxs)(p.Fragment,{children:[n.street," ",n.number]})}),Object(p.jsx)(bt.a,{component:"div",children:Object(p.jsx)(ht,{address:n})}),Object(p.jsxs)(ft.a,{children:[Object(p.jsxs)(_.a,{component:"p",children:["ul. ",n.street," ",n.number,Object(p.jsx)("br",{}),n.postalCode," ",n.town,", ",Object(p.jsx)("br",{}),n.country]}),Object(p.jsx)("br",{}),Object(p.jsx)(wt.a,{model:n})]})]})]})}var St=n(135),zt=n(235),It=n.n(zt);function Pt(e){var t=Object(De.a)().premisesAdmin;return Object(p.jsx)(k.a,{children:Object(p.jsxs)(H.a,{sx:{minHeight:"160px",maxHeight:"400px"},children:[t&&Object(p.jsxs)(ze.a,{button:!0,onClick:e.onAddItem,children:[Object(p.jsx)(ke.a,{children:Object(p.jsx)(It.a,{color:"primary"})}),Object(p.jsx)(Re.a,{primary:"Dodaj element"})]}),e.children]})})}var Et=n(344),Rt=n.n(Et);function Tt(e){return Object(p.jsxs)(ze.a,{button:!0,component:Ie.a,href:e.link,sx:{py:"2px"},children:[Object(p.jsx)(ke.a,{children:Object(p.jsx)(Rt.a,{})}),Object(p.jsx)(Re.a,{primary:e.primary})]})}var At=r.a.memo(Tt),Mt=n(93);function Dt(){var e=Object(lt.b)().getBuildingsInAddress,t=Object(X.b)().reloadMap,n=Object(L.a)(),a=Object(w.h)(),c=r.a.useState(!1),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(F.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(B.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,St.a.create(a,r);case 3:return b(),t(),n("Nowa sala utworzona!","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,b,a]),O=r.a.useMemo((function(){return null===j||void 0===j?void 0:j.map((function(e){return Object(p.jsx)(At,{primary:"Budynek ".concat(e.name),link:"./".concat(e.address,"/buildings/").concat(e.id)},e.id)}))}),[j]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(gt,{open:s,onClose:function(){return o(!1)},handleCreateBuilding:f}),Object(p.jsx)(Mt.a,{title:"Budynki pod adresem",children:Object(p.jsx)(Pt,{onAddItem:function(){return o(!0)},children:O})}),Object(p.jsx)("br",{})]})}var Bt=r.a.memo(Dt),Ft=r.a.lazy((function(){return n.e(11).then(n.bind(null,1017))})),Nt=function(){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:Object(p.jsx)(Ft,{})})};function Wt(){var e=Object(De.a)(),t=e.logsAdmin,n=e.statsViewer,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)(ot,{})}),n&&e.push({name:"Statystyki",component:Object(p.jsx)(Nt,{})}),t&&e.push({name:"Logi",component:Object(p.jsx)(R.a,{})}),e}),[t,n]);return Object(p.jsx)(lt.a,{children:Object(p.jsxs)(E.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(E.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(ut.a,{tabs:a})}),Object(p.jsxs)(E.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(Ct,{})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(Bt,{})})]})]})})}var Lt=r.a.memo(Wt),Ut=n(128),_t=n(7),qt=n(167),Ht=n.n(qt),Kt=Object(_t.a)("input")({display:"none"}),Gt=Object(_t.a)("img")({width:"fill-available",maxHeight:"350px"});function Zt(e){var t=Object(L.a)(),n=Object(w.g)(),a=Object(w.h)(),c=r.a.useState(),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback(function(){var r=Object(B.a)(D.a.mark((function r(c){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),s){r.next=4;break}return t("Najpierw za\u0142aduj nowy obraz","warning"),r.abrupt("return");case 4:return r.prev=4,r.next=7,Te.a.upload(a,s);case 7:e.onUpload&&e.onUpload(),t("Obraz zosta\u0142 zmieniony","success",(function(){return Object(p.jsx)(w.a,{to:n.pathname})})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),t(r.t0.description,"error");case 14:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(e){return r.apply(this,arguments)}}(),[s,e,t,n,a]),l=r.a.useCallback((function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];o(t)}}),[]),j=r.a.useCallback(Object(B.a)(D.a.mark((function r(){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Te.a.remove(a);case 3:e.onDelete&&e.onDelete(),t("Przywr\xf3cono domy\u015blny obraz, za\u0142aduj ponownie aby zobaczy\u0107 rezultat.","success",(function(){return Object(p.jsx)(w.a,{to:n.pathname})})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(r.t0.description,"error");case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),[e,t,n,a]);return Object(p.jsxs)(E.a,{container:!0,component:"form",onSubmit:u,direction:"row",alignItems:"stretch",spacing:2,children:[Object(p.jsx)(E.a,{item:!0,xs:12,sm:9,children:Object(p.jsx)(Gt,{src:s?URL.createObjectURL(s):Te.a.getLink(e.image),alt:"nowy obraz"})}),Object(p.jsxs)(E.a,{item:!0,xs:12,sm:3,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[Object(p.jsxs)("label",{htmlFor:"upload-obrazu",children:[Object(p.jsx)(Kt,{accept:"*.(jpg|png)",id:"upload-obrazu",type:"file",onChange:l}),Object(p.jsx)(ce.a,{color:"primary",variant:"outlined",component:"span",children:"Wybierz zdj\u0119cie"})]}),Object(p.jsx)(ce.a,{color:"error",startIcon:Object(p.jsx)(se.a,{}),onClick:j,children:"Usu\u0144"}),Object(p.jsx)(ce.a,{type:"submit",color:"success",startIcon:Object(p.jsx)(Ht.a,{}),children:"Zapisz"})]})]})}var Vt,Jt=n(951);function Qt(e){var t=e.split(":"),n=Object(F.a)(t,2),a=n[0],r=n[1];return new Date(0,0,0,Number(a),Number(r))}function Yt(e){var t,n,a,c,i=e.open,s=e.onClose,o=Object(X.b)().allAddresses,u=Object(Ut.b)(),l=u.updateBuilding,j=u.building,d=r.a.useState({}),b=Object(F.a)(d,2),O=b[0],h=b[1],x=r.a.useCallback((function(){s(),h({})}),[s]),m=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);h((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]),v=r.a.useCallback((function(e,t){h((function(n){return n[e]=K.d.format(t),Object.assign({},n)}))}),[]),g=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(O);case 2:if(!e.sent){e.next=4;break}x();case 4:case"end":return e.stop()}}),e)}))),[O,x,l]),y=r.a.useCallback((function(e){var t=e.target.value;"addressId"===e.target.name&&(t=Number(t)),e.target&&h((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]);return Object(p.jsx)(U.a,{open:i,onClose:s,"aria-label":"Okno edycji budynku",children:Object(p.jsxs)(T.a,{spacing:3,children:[Object(p.jsx)(Zt,{image:j.image}),Object(p.jsx)(Jt.a,{}),Object(p.jsxs)(te.a,{title:"Edycja budynku",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci budynku i zatwierd\u017a zmiany.",onSubmit:g,onCancel:s,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=O.name)&&void 0!==t?t:j.name,onChange:m})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(vt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:Qt(null!==(n=O.openTime)&&void 0!==n?n:j.openTime),onChange:function(e){return v("openTime",e)},renderInput:function(e){return Object(p.jsx)(V.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(vt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:Qt(null!==(a=O.closeTime)&&void 0!==a?a:j.closeTime),onChange:function(e){return v("closeTime",e)},renderInput:function(e){return Object(p.jsx)(V.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"wybierz-adres",children:"Adres"}),Object(p.jsx)(Y.a,{labelId:"wybierz-adres",name:"addressId",value:null!==(c=O.addressId)&&void 0!==c?c:j.address.id,label:"Adres",onChange:y,children:o.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)($.a,{value:n,children:[t," "]},t)}))})]})})]})]})})}function $t(e){var t=e.open,n=e.onClose,a=e.handleCreateRoom,c=r.a.useState({name:"",roomType:Vt.LECTURE,seatsCount:50,floor:0}),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]),j=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(s);case 2:if(!e.sent){e.next=4;break}n();case 4:case"end":return e.stop()}}),e)}))),[s,a,n]);return Object(p.jsx)(U.a,{open:t,onClose:n,"aria-label":"Okno edycji budynku",children:Object(p.jsxs)(te.a,{title:"Dodaj now\u0105 sal\u0119",subtitle:"Wype\u0142nij dane nowej sali i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"room-type",children:"Typ Sali"}),Object(p.jsx)(Y.a,{required:!0,labelId:"room-type",id:"roomType",value:s.roomType,name:"roomType",label:"Typ Sali",onChange:l,children:Object.values(Vt).map((function(e){return Object(p.jsx)($.a,{value:e,children:e},e)}))})]})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:s.seatsCount,onChange:u})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:s.floor,onChange:u})})]})})}!function(e){e.LABORATORY="Sala laboratoryjna",e.CONFERENCE="Sala konferencyjna",e.LECTURE="Sala wyk\u0142adowa"}(Vt||(Vt={}));var Xt,en=n(455),tn=n.n(en),nn=n(456),an=n.n(nn),rn=n(79);function cn(e){var t=r.a.useState(!1),n=Object(F.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(rn.a.isFavourite(e.data))}),[e.data]);var i=r.a.useCallback((function(){a?rn.a.removeFavourite(e.data):rn.a.addFavourite(e.data),c((function(e){return!e}))}),[a,e.data]);return Object(p.jsx)(q.a,{sx:{display:"inline"},onClick:i,color:"warning",children:a?Object(p.jsx)(tn.a,{}):Object(p.jsx)(an.a,{})})}function sn(){var e=Object(De.a)().premisesAdmin,t=Object(Ut.b)(),n=t.building,a=t.deleteBuilding,c=r.a.useState(!1),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(F.a)(u,2),j=l[0],d=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return d(!0)},icon:Object(p.jsx)(xt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(p.jsx)(se.a,{color:"error"})}]}),[]);return Boolean(n)?Object(p.jsxs)(p.Fragment,{children:[e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a,{objectName:n.name,open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(p.jsx)(Yt,{open:j,onClose:function(){return d(!1)}})]}),Object(p.jsxs)(jt.a,{elevation:0,children:[Object(p.jsx)(dt.a,{action:e&&Object(p.jsx)(Se,{options:b}),title:Object(p.jsxs)(p.Fragment,{children:["Budynek ",n.name,Object(p.jsx)(cn,{data:{id:n.id,name:n.name,type:Xt.Building,addressId:n.address.id}})]}),subheader:Object(p.jsxs)(p.Fragment,{children:[n.openTime," - ",n.closeTime]})}),Object(p.jsx)(bt.a,{component:"img",height:"350",image:Te.a.getLink(n.image),alt:n.name}),Object(p.jsxs)(ft.a,{children:[Object(p.jsxs)(Ie.a,{href:C.b.toAddress(n.address.id),children:[n.address.town,",\xa0",n.address.street,"\xa0",n.address.number]}),Object(p.jsx)("br",{}),Object(p.jsx)(wt.a,{model:n})]})]})]}):null}!function(e){e.Building="building-item",e.Room="room-item"}(Xt||(Xt={}));var on=n(118);function un(){var e=Object(Ut.b)().getRoomsInBuilding,t=Object(X.b)().reloadMap,n=Object(w.h)(),a=Object(L.a)(),c=r.a.useState(!1),i=Object(F.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(F.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(B.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,on.a.create(n,r);case 3:return a("Nowa sala utworzona!","success"),b(),t(),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),a(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,t,b,n]),O=r.a.useMemo((function(){return null===j||void 0===j?void 0:j.map((function(e){return Object(p.jsx)(At,{primary:"Sala ".concat(e.name),link:"./".concat(e.building,"/rooms/").concat(e.id)},e.id)}))}),[j]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)($t,{handleCreateRoom:f,open:s,onClose:function(){return o(!1)}}),Object(p.jsx)(Mt.a,{title:"Sale w budynku",children:Object(p.jsx)(Pt,{onAddItem:function(){return o(!0)},children:O})}),Object(p.jsx)("br",{})]})}var ln=r.a.memo(un),jn=r.a.lazy((function(){return n.e(0).then(n.bind(null,1018))})),dn=function(){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:Object(p.jsx)(jn,{})})};function bn(){var e=Object(De.a)(),t=e.logsAdmin,n=e.statsViewer,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)(ot,{})}),n&&e.push({name:"Statystyki",component:Object(p.jsx)(dn,{})}),t&&e.push({name:"Logi",component:Object(p.jsx)(R.a,{})}),e}),[t,n]);return Object(p.jsx)(Ut.a,{children:Object(p.jsxs)(E.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(E.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(ut.a,{tabs:a})}),Object(p.jsxs)(E.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(sn,{})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(ln,{})})]})]})})}var fn=r.a.memo(bn),On=n(457),hn=n.n(On);function pn(e){switch(e.type){case Xt.Building:var t=e,n=t.addressId,a=t.id,r=t.name;return Object(p.jsx)(Re.a,{primary:Object(p.jsxs)(Ie.a,{href:C.b.toBuilding(n,a),children:["Budynek ",r]})},r+a);case Xt.Room:var c=e,i=c.addressId,s=c.buildingId,o=c.id,u=c.name;return Object(p.jsx)(Re.a,{primary:Object(p.jsxs)(Ie.a,{href:C.b.toRoom(i,s,o),children:["Sala ",u]})},u+o);default:return null}}function xn(){var e=Object(S.a)().user,t=r.a.useState(),n=Object(F.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(rn.a.favourites)}),[e]);var i=r.a.useCallback((function(e){rn.a.removeFavourite(e),c(rn.a.favourites)}),[]);return Object(p.jsx)(Mt.a,{title:"Ulubione",children:Object(p.jsxs)(H.a,{sx:{minHeight:"160px"},children:[null===a||void 0===a?void 0:a.map((function(e){return Object(p.jsxs)(ze.a,{disablePadding:!0,children:[pn(e),Object(p.jsx)(q.a,{title:"usu\u0144 z ulubionych","aria-label":"usu\u0144 z ulubionych",onClick:function(){return i(e)},size:"small",children:Object(p.jsx)(hn.a,{fontSize:"small"})})]},"".concat(e.name,"-").concat(e.id))})),0===(null===a||void 0===a?void 0:a.length)&&Object(p.jsx)(Re.a,{color:"text.secondary",primary:"Brak ulubionych"})]})})}var mn=r.a.memo(xn),vn=n(70);function gn(){var e,t=Object(L.a)(),n=r.a.useState(),a=Object(F.a)(n,2),c=a[0],i=a[1];r.a.useEffect((function(){i(rn.a.notes)}),[]);var s=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c){e.next=3;break}return e.abrupt("return");case 3:try{rn.a.notes=c,t("Notatki zosta\u0142y zapisane","success"),i(void 0)}catch(a){t(a.description,"error")}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),o=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(p.jsx)(Mt.a,{title:"Notatnik",children:Object(p.jsxs)(k.a,{component:"form",onSubmit:s,sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:[Object(p.jsx)(vn.c,{"aria-label":"twoje notatki",title:"twoje notatki",multiline:!0,minRows:4,maxRows:10,name:"search",value:null!==(e=null!==c&&void 0!==c?c:rn.a.notes)&&void 0!==e?e:"",onChange:o,placeholder:"Twoje notatki",sx:{width:"100%",height:"100%",p:1,bgcolor:"background.default"},inputProps:{"aria-label":"Twoje notatki"}}),Object(p.jsx)(ce.a,{title:"Zapisz notatki","aria-label":"Zapisz notatki",sx:{mr:"0px",ml:"auto"},startIcon:Object(p.jsx)(Ht.a,{}),type:"submit",children:"Zapisz"})]})})}var yn=r.a.memo(gn);function kn(){return Object(p.jsx)(Mt.a,{title:"Rezerwacje",children:Object(p.jsx)(ot,{})})}function wn(){return Object(p.jsxs)(E.a,{container:!0,spacing:2,children:[Object(p.jsx)(E.a,{item:!0,xs:12,lg:8,children:Object(p.jsx)(kn,{})}),Object(p.jsxs)(E.a,{item:!0,container:!0,spacing:2,xs:12,lg:4,alignContent:"flex-start",children:[Object(p.jsx)(E.a,{item:!0,xs:12,sm:6,lg:12,children:Object(p.jsx)(yn,{})}),Object(p.jsx)(E.a,{item:!0,xs:12,sm:6,lg:12,children:Object(p.jsx)(mn,{})})]})]})}var Cn=n(484),Sn=n(210),zn=n(983),In=n(984),Pn=n(985),En=n(986),Rn=n(982),Tn=n(889);function An(e){var t,n,r,c,i,s,o=e.open,u=e.onClose,l=Object(W.b)(),j=l.room,d=l.updateRoom,b=Object(X.b)().allBuildings,O=a.useState({}),h=Object(F.a)(O,2),x=h[0],m=h[1],v=a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"name":t=String(t);break;case"blocked":t=!e.target.checked;break;default:t=Number(t)}m((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]),g=a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&m((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[]),y=a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(x);case 2:if(!e.sent){e.next=4;break}u();case 4:case"end":return e.stop()}}),e)}))),[x,d,u]);return Object(p.jsx)(U.a,{open:o,onClose:u,"aria-label":"Okno usuwania obiektu",sx:{maxWidth:"450px"},children:Object(p.jsxs)(T.a,{spacing:2,children:[Object(p.jsx)(Zt,{image:j.image}),Object(p.jsx)(Jt.a,{}),Object(p.jsxs)(te.a,{title:"Edycja sali",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:y,onCancel:u,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=x.name)&&void 0!==t?t:j.name,onChange:v})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"room-type",children:"Typ Sali"}),Object(p.jsx)(Y.a,{labelId:"room-type",id:"roomType",value:null!==(n=x.roomType)&&void 0!==n?n:j.roomType,name:"roomType",label:"Typ Sali",onChange:g,children:Object.values(Vt).map((function(e){return Object(p.jsx)($.a,{value:e,children:e},e)}))})]})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:null!==(r=x.seatsCount)&&void 0!==r?r:j.seatsCount,onChange:v})}),Object(p.jsx)(E.a,{item:!0,xs:6,children:Object(p.jsx)(V.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:null!==(c=x.floor)&&void 0!==c?c:j.floor,onChange:v})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsxs)(Q.a,{fullWidth:!0,children:[Object(p.jsx)(J.a,{id:"wybierz-budynek",children:"Budynek"}),Object(p.jsx)(Y.a,{labelId:"wybierz-budynek",name:"buildingId",value:null!==(i=x.buildingId)&&void 0!==i?i:j.building.id,label:"Budynek",onChange:g,children:b.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)($.a,{value:n,children:["Budynek \xa0",t," "]},t)}))})]})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(Tn.a,{labelPlacement:"start",control:Object(p.jsx)(Rn.a,{id:"room-blocked",name:"blocked",inputProps:{"aria-label":"controlled"},onChange:v,checked:!(null!==(s=x.blocked)&&void 0!==s?s:j.blocked)}),label:"Dost\u0119pno\u015b\u0107 Sali"})})]})]})})}function Mn(e){var t=Object(W.b)().updateRFIDTag;return Object(p.jsx)(U.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno przypisania tagu RFID",sx:{maxWidth:"400px"},children:Object(p.jsx)(Oe,{headline:"U\u017cyj czytnika, aby wprowadzi\u0107 tag.",bodyText:'Je\u015bli nie chcesz wprowadza\u0107 zmian, naci\u015bnij "Zamknij"',onScan:t,onClose:e.onClose})})}var Dn=n(458),Bn=n.n(Dn),Fn=["value"];function Nn(e){var t=e.value,n=Object(O.a)(e,Fn);return t?Object(p.jsx)(Bn.a,Object(f.a)({color:"success"},n)):Object(p.jsx)(be.a,Object(f.a)({sx:{color:"red"}},n))}function Wn(e){var t=e.room,n=e.deleteTag,a=Object(De.a)().keysAdmin,c=Object(X.b)().getBuildingLink,i=r.a.useState(!1),s=Object(F.a)(i,2),o=s[0],u=s[1],l=r.a.useMemo((function(){var e=[{label:"Ilo\u015b\u0107 miejsc",value:t.seatsCount},{label:"Pi\u0119tro",value:0===t.floor?"parter":t.floor},{label:"Budynek",value:Object(p.jsxs)(Ie.a,{href:c(t.building.id),children:[" ",t.building.name," "]})},{label:"Aktualnie wolny",value:Object(p.jsx)(Nn,{value:!t.occupied})}];return a&&e.push({label:"Tag RFID",value:t.RFIDTag?Object(p.jsx)(Be.a,{label:t.RFIDTag,onDelete:n,sx:{maxWidth:"120px"}}):Object(p.jsx)(q.a,{size:"small",onClick:function(){return u(!0)},sx:{p:"0px"},children:Object(p.jsx)(It.a,{})})}),e.push({label:"Dost\u0119pny do rezerwacji",value:Object(p.jsx)(Nn,{value:!t.blocked})}),e}),[a,t,n,c]),j=r.a.useMemo((function(){return l.map((function(e){var t=e.label,n=e.value;return Object(p.jsxs)(Cn.a,{hover:!0,children:[Object(p.jsx)(Sn.a,{sx:{color:"text.secondary"},align:"left",children:t}),Object(p.jsx)(Sn.a,{sx:{color:"primary.main",fontWeight:"bold"},align:"left",children:n})]},t)}))}),[l]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Mn,{open:o,onClose:function(){return u(!1)}}),Object(p.jsx)(zn.a,{children:Object(p.jsxs)(In.a,{"aria-label":"room-info-table",size:"small",children:[Object(p.jsx)(Pn.a,{sx:{display:"none"},children:Object(p.jsxs)(Cn.a,{children:[Object(p.jsx)(Sn.a,{align:"left",children:"W\u0142a\u015bciwo\u015b\u0107"}),Object(p.jsx)(Sn.a,{align:"left",children:"stan"})]})}),Object(p.jsx)(En.a,{children:j})]})})]})}function Ln(){var e=Object(De.a)().premisesAdmin,t=Object(W.b)(),n=t.room,a=t.deleteRoom,c=t.deleteRFIDTag,i=r.a.useState(!1),s=Object(F.a)(i,2),o=s[0],u=s[1],l=r.a.useState(!1),j=Object(F.a)(l,2),d=j[0],b=j[1],f=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return b(!0)},icon:Object(p.jsx)(xt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return u(!0)},icon:Object(p.jsx)(se.a,{color:"error"})}]}),[]);return Boolean(n)?Object(p.jsxs)(p.Fragment,{children:[e&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a,{objectName:n.name,open:o,onClose:function(){return u(!1)},onSuccess:a}),Object(p.jsx)(An,{open:d,onClose:function(){return b(!1)}})]}),Object(p.jsxs)(jt.a,{elevation:0,children:[Object(p.jsx)(dt.a,{action:e&&Object(p.jsx)(Se,{options:f}),title:Object(p.jsxs)(p.Fragment,{children:[n.name,Object(p.jsx)(cn,{data:{id:n.id,name:n.name,type:Xt.Room,addressId:n.building.address,buildingId:n.building.id}})]}),subheader:Object(p.jsx)(p.Fragment,{children:n.roomType})}),Object(p.jsx)(bt.a,{component:"img",height:"350",image:Te.a.getLink(n.image),alt:n.name}),Object(p.jsxs)(ft.a,{children:[Object(p.jsx)(Wn,{room:n,deleteTag:c}),Object(p.jsx)("br",{}),Object(p.jsx)(wt.a,{model:n})]})]})]}):Object(p.jsx)(z.a,{})}var Un=r.a.lazy((function(){return n.e(0).then(n.bind(null,1018))})),_n=function(){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:Object(p.jsx)(Un,{})})};function qn(){var e=Object(De.a)(),t=e.logsAdmin,n=e.statsViewer,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)(ot,{})}),n&&e.push({name:"Statystyki",component:Object(p.jsx)(_n,{})}),t&&e.push({name:"Logi",component:Object(p.jsx)(R.a,{})}),e}),[t,n]);return Object(p.jsx)(W.a,{children:Object(p.jsxs)(E.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(E.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(ut.a,{tabs:a})}),Object(p.jsx)(E.a,{item:!0,xs:12,md:5,lg:4,children:Object(p.jsx)(Ln,{})})]})})}var Hn=r.a.lazy((function(){return n.e(12).then(n.bind(null,1020))}));function Kn(){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:Object(p.jsx)(Hn,{})})}var Gn=n(163),Zn=n(460),Vn=n.n(Zn),Jn=n(444);function Qn(e){var t=e.open,n=e.onClose,a=Object(S.a)().logout,c=r.a.useCallback((function(){n()}),[n]),i=r.a.useCallback((function(){a()}),[a]);return Object(p.jsx)(U.a,{open:t,onClose:c,sx:{maxWidth:"450px"},children:Object(p.jsx)(Jn.a,{onSuccess:i})})}function Yn(e){var t,n,a=e.open,c=e.onClose,i=e.user,s=Object(Gn.b)().updateUser,o=r.a.useState({}),u=Object(F.a)(o,2),l=u[0],j=u[1],d=r.a.useCallback((function(){c(),j({})}),[c]),b=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l);case 2:if(!e.sent){e.next=4;break}d();case 4:case"end":return e.stop()}}),e)}))),[l,d,s]),O=r.a.useCallback((function(e){j((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(Z.a)({},e.target.name,e.target.value))}))}),[]);return Object(p.jsx)(U.a,{open:a,onClose:d,sx:{maxWidth:"450px"},children:Object(p.jsxs)(T.a,{spacing:3,children:[Object(p.jsx)(Zt,{image:i.image}),Object(p.jsx)(Jt.a,{}),Object(p.jsxs)(te.a,{title:"Edycja u\u017cytkownika",subtitle:"Zmie\u0144 dane u\u017cytkownika. Zmiany w ca\u0142ej aplikacji b\u0119d\u0105 widoczne po ponownym prze\u0142adowaniu aplikacji.",onSubmit:b,onCancel:d,children:[Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"name",label:"Imi\u0119",name:"name",autoFocus:!0,value:null!==(t=l.name)&&void 0!==t?t:i.name,onChange:O})}),Object(p.jsx)(E.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{required:!0,fullWidth:!0,id:"surname",label:"Nazwisko",name:"surname",value:null!==(n=l.surname)&&void 0!==n?n:i.surname,onChange:O})})]})]})})}function $n(){var e=Object(De.a)(),t=e.myId,n=e.owner,a=Object(Gn.b)(),c=a.user,i=a.deleteUser,s=r.a.useState(!1),o=Object(F.a)(s,2),u=o[0],l=o[1],j=r.a.useState(!1),d=Object(F.a)(j,2),b=d[0],f=d[1],O=r.a.useState(!1),h=Object(F.a)(O,2),x=h[0],m=h[1],v=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return l(!0)},icon:Object(p.jsx)(xt.a,{color:"success"})},{label:"Zmie\u0144 has\u0142o",action:function(){return f(!0)},icon:Object(p.jsx)(Vn.a,{color:"warning"})},{label:"Usu\u0144 konto",action:function(){return m(!0)},icon:Object(p.jsx)(se.a,{color:"error"})}]}),[]);return Object(p.jsxs)(p.Fragment,{children:[(t(c.id)||n)&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a,{objectName:"".concat(c.email),open:x,onClose:function(){return m(!1)},onSuccess:i}),Object(p.jsx)(Yn,{user:c,open:u,onClose:function(){return l(!1)}}),Object(p.jsx)(Qn,{open:b,onClose:function(){return f(!1)}})]}),Object(p.jsxs)(jt.a,{elevation:0,children:[Object(p.jsx)(dt.a,{action:(t(c.id)||n)&&Object(p.jsx)(Se,{options:v}),title:Object(p.jsxs)(p.Fragment,{children:[c.name," ",c.surname]}),subheader:Object(p.jsx)("a",{href:"mailto:".concat(c.email),children:c.email})}),Object(p.jsx)(bt.a,{component:"img",height:"350",image:Te.a.getLink(c.image),alt:c.email}),Object(p.jsxs)(ft.a,{children:[Object(p.jsxs)(_.a,{color:"text.secondary",variant:"subtitle1",children:["Ostatnio aktywny: ",Object(K.a)(c.lastActivity),Object(p.jsx)("br",{}),"Klasa dost\u0119pu: ",Object(p.jsx)(Ie.a,{href:C.a.ACCESS,children:c.access.name})]}),Object(p.jsx)("br",{}),Object(p.jsx)(wt.a,{model:c})]})]})]})}var Xn=r.a.lazy((function(){return n.e(6).then(n.bind(null,1019))})),ea=function(){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:Object(p.jsx)(Xn,{})})};function ta(){var e=Object(De.a)(),t=e.statsViewer,n=e.logsAdmin,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)(ot,{})}),t&&e.push({name:"Statystyki",component:Object(p.jsx)(ea,{})}),n&&e.push({name:"Logi",component:Object(p.jsx)(R.a,{})}),e}),[t,n]);return Object(p.jsx)(Gn.a,{children:Object(p.jsxs)(E.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(E.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(ut.a,{tabs:a})}),Object(p.jsx)(E.a,{item:!0,xs:12,md:5,lg:4,children:Object(p.jsx)($n,{})})]})})}var na=n(61),aa=r.a.createContext(null);function ra(e){var t=Object(L.a)(),n=Object(A.b)(),a=n.queryParams,c=n.setQueryParams,i=r.a.useState(),s=Object(F.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,na.a.getUsers(a);case 3:n=e.sent,c((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=n.pagination)||void 0===t?void 0:t.pagesCount})})),u(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error"),u([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t,a.itemsOnPage,a.currentPage,a.search,a.deleted,a.activated]);return r.a.useEffect((function(){l()}),[l]),o?Object(p.jsx)(aa.Provider,{value:{users:o},children:e.children}):Object(p.jsx)(z.a,{})}var ca=n(322);function ia(){var e,t=Object(A.b)(),n=t.setQueryParams,a=t.queryParams,c=r.a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"deleted":case"activated":t=Boolean(e.target.checked)}n((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(Z.a)({},e.target.name,t))}))}),[n]);return Object(p.jsxs)(E.a,{container:!0,children:[Object(p.jsx)(E.a,{item:!0,xs:12,md:8,children:Object(p.jsx)($e.a,{label:"wyszukaj",name:"search",value:null!==(e=a.search)&&void 0!==e?e:"",onChange:c})}),Object(p.jsxs)(E.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"start",flexWrap:"wrap",color:"text.secondary",children:[Object(p.jsx)(Tn.a,{labelPlacement:"start",control:Object(p.jsx)(Rn.a,{id:"aktywni-u\u017cytkownicy",name:"activated",inputProps:{"aria-label":"aktywni-u\u017cytkownicy"},onChange:c,checked:a.activated}),label:"Aktywne konta"}),Object(p.jsx)(Tn.a,{labelPlacement:"start",control:Object(p.jsx)(Rn.a,{id:"unsuni\u0119ci-u\u017cytkownicy",name:"deleted",inputProps:{"aria-label":"unsuni\u0119ci-u\u017cytkownicy"},onChange:c,checked:a.deleted}),label:"Usuni\u0119te konta"})]})]})}var sa=r.a.memo(ia);function oa(e){var t=e.user;return Object(p.jsxs)(ze.a,{button:!0,component:Ie.a,href:C.b.toUser(t.id),children:[Object(p.jsx)(Pe.a,{title:t.email,"aria-label":t.email,children:Object(p.jsx)(Ee.a,{src:Te.a.getLink(t.image)})}),Object(p.jsx)(Re.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:Object(p.jsx)(p.Fragment,{children:t.email})})]})}function ua(){var e=r.a.useContext(aa).users;return Object(p.jsxs)(H.a,{children:[0===e.length&&Object(p.jsx)(ze.a,{children:Object(p.jsx)(Re.a,{primary:"Brak u\u017cytkownik\xf3w spe\u0142niaj\u0105cych kryteria"})}),e.map((function(e){return Object(p.jsx)(oa,{user:e},e.id)}))]})}function la(){return Object(p.jsxs)(T.a,{spacing:3,children:[Object(p.jsx)(ca.a,{title:"Lista u\u017cytkownik\xf3w",subtitle:"Wyszukuj u\u017cytkownik\xf3w wed\u0142ug podanych kryteri\xf3w."}),Object(p.jsx)(sa,{}),Object(p.jsx)(ua,{}),Object(p.jsx)(Ge.a,{})]})}var ja=n(29),da=n(138),ba=n(326),fa=n.n(ba),Oa=n(59),ha=n(324),pa=n(325);function xa(){return Object(p.jsx)(da.c,{children:Object(p.jsx)(ma,{})})}function ma(){var e=Object(da.d)().chartsData,t=Object(Oa.usePDF)({document:Object(p.jsx)(ha.a,{subject:"Statystyki u\u017cytkownik\xf3w",sections:[Object(p.jsx)(pa.a,{title:"Statystyki u\u017cytkownik\xf3w",rows:[["email","ilo\u015b\u0107 rezerwacji","czas rezerwacji","\u015bredni czas rezerwacji","\u015bredni planowany czas rezerwacji"]].concat(Object(ja.a)(e.users.map((function(e){return[e.email,e.reservationsCount,e.allTimeMinutes,e.avgActualTimeMinutes,e.avgPlannedTimeMinutes]}))))})]})}),n=Object(F.a)(t,1)[0];return Object(p.jsxs)(p.Fragment,{children:[n.loading||!n.url?Object(p.jsx)("p",{children:"loading pdf ..."}):Object(p.jsx)(ce.a,{startIcon:Object(p.jsx)(fa.a,{}),children:Object(p.jsx)("a",{href:n.url,download:"stats.pdf",title:"pobierz tabele pdf",children:"Pobierz raport pdf"})}),Object(p.jsxs)(da.b,{defaultOpen:!0,title:"Statystyki u\u017cytkownik\xf3w",children:[Object(p.jsx)(da.a,{fullWidth:e.users.length>=6,title:"Ilo\u015b\u0107 rezerwacji na u\u017cytkownika",data:e.users,xKey:"email",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(da.a,{fullWidth:e.users.length>=6,title:"Czas wszystkich reserwacji w dany dzie\u0144",data:e.users,xKey:"email",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]}),Object(p.jsx)(da.a,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.users,xKey:"email",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]})]})]})}function va(){var e=Object(De.a)(),t=e.statsViewer,n=e.logsAdmin,a=r.a.useMemo((function(){var e=[{name:"U\u017cytkownicy",component:Object(p.jsx)(la,{})}];return t&&e.push({name:"Statystyki",component:Object(p.jsx)(xa,{})}),n&&e.push({name:"Logi",component:Object(p.jsx)(R.a,{})}),e}),[n,t]);return Object(p.jsx)(A.a,{name:"users-query-params",default:{deleted:!1,activated:!0,search:"",itemsOnPage:10,currentPage:1},children:Object(p.jsx)(ra,{children:Object(p.jsx)(ut.a,{tabs:a})})})}function ga(){return Object(S.a)().user?Object(p.jsxs)(w.d,{children:[Object(p.jsx)(w.b,{path:C.a.ROOM,component:qn}),Object(p.jsx)(w.b,{path:C.a.BUILDING,component:fn}),Object(p.jsx)(w.b,{path:C.a.ADDRESS,component:Lt}),Object(p.jsx)(w.b,{path:C.a.SETTINGS,component:Kn}),Object(p.jsx)(w.b,{path:C.a.ACCESS,component:P}),Object(p.jsx)(w.b,{path:C.a.USER,component:ta}),Object(p.jsx)(w.b,{path:C.a.USERS,component:va}),Object(p.jsx)(w.b,{path:C.a.HOME,component:wn}),Object(p.jsx)(w.b,{path:C.a.INFRASTRUCTURE,children:"Zasoby"}),Object(p.jsx)(w.b,{path:C.a.HOME+"/*",children:Object(p.jsx)(w.a,{to:C.a.HOME})})]}):Object(p.jsx)(w.a,{to:C.a.PUBLIC})}var ya=r.a.lazy((function(){return n.e(7).then(n.bind(null,1022))})),ka=r.a.lazy((function(){return n.e(5).then(n.bind(null,1023))})),wa=r.a.lazy((function(){return n.e(9).then(n.bind(null,1024))})),Ca=r.a.lazy((function(){return n.e(8).then(n.bind(null,1025))})),Sa=r.a.lazy((function(){return n.e(4).then(n.bind(null,1026))}));function za(){return Object(S.a)().user?Object(p.jsx)(w.a,{to:C.a.HOME}):Object(p.jsxs)(w.d,{children:[Object(p.jsxs)(r.a.Suspense,{fallback:Object(p.jsx)(z.a,{}),children:[Object(p.jsx)(w.b,{path:C.a.LOGIN,component:ka}),Object(p.jsx)(w.b,{path:C.a.REGISTER,component:wa}),Object(p.jsx)(w.b,{path:C.a.ACTIVATE,component:ya}),Object(p.jsx)(w.b,{path:C.a.REMIND_PASSWORD,component:Ca}),Object(p.jsx)(w.b,{path:C.a.PUBLIC,exact:!0,component:Sa})]}),Object(p.jsx)(w.b,{path:"*",children:Object(p.jsx)(w.a,{to:C.a.PUBLIC})})]})}var Ia={minHeight:"84vh",padding:"1.5vh 0px"};function Pa(){return Object(p.jsx)(k.a,{sx:Ia,children:Object(p.jsxs)(w.d,{children:[Object(p.jsx)(w.b,{path:C.a.HOME,component:ga}),Object(p.jsx)(w.b,{path:C.a.PUBLIC,component:za}),Object(p.jsx)(w.b,{path:"*",children:Object(p.jsx)(w.a,{to:C.a.PUBLIC})})]})})}function Ea(){return Object(p.jsx)(_.a,{align:"center",sx:{backgroundColor:"primary.dark",padding:2,color:"primary.light"},children:"\xa9 Szymon Ryka\u0142a 2021/2022"})}var Ra=r.a.memo(Ea),Ta=function(e){return Object(p.jsx)(ze.a,{sx:{width:"30%",minWidth:"200px"},children:Object(p.jsx)(Ie.a,{sx:{color:"background.default"},href:e.link,children:e.name})})};function Aa(){var e=Object(S.a)().user,t=Object(De.a)(),n=r.a.useMemo((function(){var n=[];return e?(n.push({name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Home",link:C.a.HOME}),t.accessAdmin&&n.push({name:"Dost\u0119py",link:C.a.ACCESS}),t.owner&&n.push({name:"Ustawienia",link:C.a.SETTINGS})):n.push({name:"Strona g\u0142\xf3wna",link:C.a.PUBLIC},{name:"Logowanie",link:C.a.LOGIN},{name:"Rejestracja",link:C.a.REGISTER},{name:"Aktywacja Konta",link:C.a.ACTIVATE}),n}),[e,null===t||void 0===t?void 0:t.accessAdmin,null===t||void 0===t?void 0:t.owner]),a=r.a.useMemo((function(){return n.filter((function(e){return e.link})).map((function(e){return Object(p.jsx)(Ta,Object(f.a)({},e),e.name)}))}),[n]);return Object(p.jsx)(k.a,{sx:{backgroundColor:"primary.main"},children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(_.a,{sx:{pt:2},component:"p",variant:"body2",color:"background.default",children:"Przydatne linki:"}),Object(p.jsx)(H.a,{sx:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-start",flexWrap:"wrap"},children:a})]})})}var Ma=r.a.memo(Aa);function Da(){return Object(p.jsx)(k.a,{children:Object(p.jsxs)(E.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(p.jsx)(E.a,{item:!0,children:Object(p.jsx)(Ma,{})}),Object(p.jsx)(E.a,{item:!0,children:Object(p.jsx)(Ra,{})})]})})}var Ba=n(956),Fa=n(875),Na=n(479),Wa=n(254),La=n(966),Ua=n(469),_a=n.n(Ua),qa=n(442),Ha=n.n(qa),Ka=n(470),Ga=n.n(Ka),Za=n(471),Va=n.n(Za),Ja=n(472),Qa=n.n(Ja),Ya=[{label:"Panel G\u0142\xf3wny",href:C.a.HOME,icon:_a.a},{label:"Moje Konto",href:C.a.MY_PROFILE,icon:Ha.a}],$a={label:"Ustawienia Platformy",href:C.a.SETTINGS,icon:Ga.a},Xa={label:"Klasy dost\u0119pu",href:C.a.ACCESS,icon:Va.a},er={label:"U\u017cytkownicy",href:C.a.USERS,icon:Qa.a},tr=r.a.memo((function(e){return Object(p.jsxs)(ze.a,{button:!0,component:Ie.a,href:e.href,children:[Object(p.jsx)(ke.a,{color:"primary",children:Object(p.jsx)(e.icon,{color:"primary"})}),Object(p.jsx)(Re.a,{primary:e.label})]})}));function nr(){var e=Object(De.a)(),t=e.accessAdmin,n=e.owner,a=r.a.useMemo((function(){var e=Object.assign([],Ya);return e.push(er),t&&e.push(Xa),n&&e.push($a),e}),[t,n]),c=r.a.useMemo((function(){return a.map((function(e){return Object(p.jsx)(tr,Object(f.a)({},e),e.label)}))}),[a]);return Object(p.jsx)(H.a,{children:c})}function ar(e){var t=e.children,n=e.toggleOpen;return Object(p.jsx)(o.a,{sx:{width:320},role:"presentation",onClick:n,onKeyDown:n,children:t})}function rr(e){var t=e.user;return Object(p.jsxs)(k.a,{onClick:function(e){return e.stopPropagation()},sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2,color:"primary.dark"},children:[Object(p.jsx)(Ee.a,{alt:"".concat(null===t||void 0===t?void 0:t.name," ").concat(null===t||void 0===t?void 0:t.surname),src:Te.a.getLink(null===t||void 0===t?void 0:t.image),sx:{width:"120px",height:"120px",fontSize:"36px",mt:2,mb:2}}),Object(p.jsxs)(_.a,{children:[null===t||void 0===t?void 0:t.name,"\xa0",null===t||void 0===t?void 0:t.surname]}),Object(p.jsx)(_.a,{children:Object(p.jsx)("a",{href:"mailto:".concat(null===t||void 0===t?void 0:t.email),children:null===t||void 0===t?void 0:t.email})})]})}var cr=n(475),ir=n.n(cr),sr=n(474),or=n.n(sr),ur=n(953),lr=n(954),jr=n(952),dr=n(887),br=n(104);function fr(e){var t=r.a.useState(!1),n=Object(F.a)(t,2),a=n[0],c=n[1],i=r.a.useMemo((function(){return"".concat(e.name,"-nav-item")}),[e.name]);r.a.useEffect((function(){c(br.a.read(i))}),[i]);var s=r.a.useCallback((function(e){e.stopPropagation(),br.a.save(i,!a),c((function(e){return!e}))}),[i,a]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(T.a,{direction:"row",children:[Object(p.jsxs)(jr.a,{component:Ie.a,href:e.href,sx:e.sx,children:[Object(p.jsx)(ke.a,{children:e.icon}),Object(p.jsx)(Re.a,{primary:e.name})]}),Object(p.jsx)(q.a,{sx:{width:"42px",height:"42px"},size:"medium",onClick:s,children:a?Object(p.jsx)(ur.a,{}):Object(p.jsx)(lr.a,{})})]}),Object(p.jsx)(dr.a,{in:a,timeout:"auto",children:Object(p.jsx)(T.a,{sx:e.sx,children:e.children})})]})}var Or=n(473),hr=n.n(Or);function pr(e){return Object(p.jsx)(ze.a,{button:!0,component:Ie.a,href:"".concat(C.a.HOME).concat(e.href),children:Object(p.jsxs)(o.a,{sx:{width:"100%"},children:[Object(p.jsx)(ke.a,{children:Object(p.jsx)(hr.a,{})}),e.name]})})}var xr=r.a.memo(pr);function mr(){var e=Object(X.b)().resourceMap,t=r.a.useMemo((function(){return null===e||void 0===e?void 0:e.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.buildings;return Object(p.jsx)(fr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(p.jsx)(or.a,{color:"primary"}),sx:{width:"100%"},children:r.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.rooms;return Object(p.jsx)(fr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(p.jsx)(ir.a,{color:"primary"}),sx:{pl:6,width:"100%"},children:r.map((function(e){return Object(p.jsx)(xr,Object(f.a)({},e),e.id)}))},t)}))},t)}))}),[e]);return Object(p.jsx)(T.a,{children:t})}function vr(){var e=r.a.useState(!1),t=Object(F.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){e.stopPropagation(),a(!0)}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(kt,{open:n,onClose:function(){return a(!1)}}),Object(p.jsxs)(ze.a,{button:!0,component:"div",onClick:c,sx:{color:"primary.dark"},children:[Object(p.jsx)(ke.a,{children:Object(p.jsx)(et.a,{color:"primary"})}),"Dodaj adres"]})]})}function gr(e){var t=e.toggleOpen,n=e.open,a=Object(De.a)().premisesAdmin,r=Object(S.a)().user;return Object(p.jsxs)(La.a,{variant:"temporary",ModalProps:{keepMounted:!0},anchor:"left",open:n,onClose:t,children:[Object(p.jsxs)(ar,{toggleOpen:t,children:[Object(p.jsx)(rr,{user:r}),Object(p.jsx)(Jt.a,{}),Object(p.jsx)(nr,{}),Object(p.jsx)(Jt.a,{}),Object(p.jsx)(ze.a,{onClick:function(e){return e.stopPropagation()},component:"div",sx:{pb:0,color:"text.disabled"},children:Object(p.jsx)(Re.a,{children:"Zasoby:"})}),Object(p.jsx)(mr,{})]}),a&&Object(p.jsx)(vr,{})]})}var yr=n(988),kr=n(989),wr=n(476),Cr=n.n(wr),Sr=[{name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Panel G\u0142\xf3wny",link:C.a.HOME}];function zr(e){var t=e.trigger,n=e.handleClose,a=Object(S.a)().logout,c=r.a.useMemo((function(){return Sr.map((function(e,t){var a=e.name,r=e.link;return Object(p.jsx)($.a,{onClick:n,href:r,component:Ie.a,children:a},t)}))}),[n]);return Object(p.jsxs)(ye.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:n,children:[c,Object(p.jsx)($.a,{onClick:function(){n(),a()},children:"Wyloguj"})]})}function Ir(e){var t=Object(S.a)().user,n=a.useState(null),r=Object(F.a)(n,2),c=r[0],i=r[1],s=a.useCallback((function(e){i(e.currentTarget)}),[]),u=a.useCallback((function(){i(null)}),[]);return Object(p.jsx)(o.a,{sx:{flexGrow:1},children:Object(p.jsx)(yr.a,{position:"static",children:Object(p.jsxs)(kr.a,{children:[t&&Object(p.jsx)(q.a,{onClick:e.toggleDrawer,size:"large",edge:"start","aria-label":"menu",sx:{mr:2,color:"background.default"},children:Object(p.jsx)(Cr.a,{color:"inherit"})}),Object(p.jsx)(_.a,{variant:"h4",component:"span",sx:{flexGrow:1,fontFamily:"Dancing Script, cursive"},children:Object(p.jsx)(Ie.a,{href:t?C.a.HOME:C.a.PUBLIC,sx:{width:"fit-content",color:"background.default","&:hover":{textDecoration:"none"}},children:"Rav System"})}),t&&Object(p.jsxs)("div",{children:[Object(p.jsx)(q.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:s,color:"inherit",children:Object(p.jsx)(Ee.a,{alt:t.name,src:Te.a.getLink(t.image),sx:{width:42,height:42}})}),Object(p.jsx)(zr,{trigger:c,handleClose:u})]})]})})})}function Pr(){var e=r.a.useState(!1),t=Object(F.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.stopPropagation(),(!t||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a((function(e){return!e}))}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ir,{toggleDrawer:c}),Object(p.jsx)(gr,{open:n,toggleOpen:c})]})}var Er=function(){return Object(p.jsx)(g,{children:Object(p.jsxs)(Fa.b,{dateAdapter:Ba.a,locale:Na.a,children:[Object(p.jsx)(s.a,{}),Object(p.jsx)(o.a,{component:"div",className:"App",sx:{backgroundColor:"background.default"},children:Object(p.jsx)(h.a,{children:Object(p.jsx)(Wa.a,{children:Object(p.jsx)(y.a,{children:Object(p.jsxs)(X.a,{children:[Object(p.jsx)(Pr,{}),Object(p.jsx)(u.a,{children:Object(p.jsx)(Pa,{})}),Object(p.jsx)(Da,{})]})})})})})]})})},Rr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(Er,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ravs-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ravs-client","/service-worker.js");Rr?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Tr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Tr(t,e)}))}}()},93:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(13),r=n(483),c=n(88),i=n(0);function s(e){var t;return Object(i.jsxs)(r.a,{elevation:0,sx:Object(a.a)({p:2},e.sx),children:[(null===e||void 0===e?void 0:e.title)&&Object(i.jsx)(c.a,{variant:"body2",component:null!==(t=e.titleComponent)&&void 0!==t?t:"h2",color:"text.secondary",children:e.title}),e.children]})}},95:function(e,t,n){"use strict";var a,r=n(27),c=n(28),i=n(44),s=n(45),o=n(21),u=n(60);!function(e){e.success="#edf7ed",e.error="#fdeded",e.info="#e5f6fd",e.warning="#fff4e5",e.inert="#f5f5f5"}(a||(a={}));var l=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"emitStatus",value:function(e,t){return{message:e,color:t}}},{key:"localPreparPath",value:function(e){return window.location.toString().includes(o.a.HOME)&&0===Object.keys(e).length?"/users/"+this.userId.toString():this.preparePath(e)}},{key:"getReservations",value:function(e,t){return this.get("".concat(this.localPreparPath(e),"/reservations"),t)}},{key:"createOne",value:function(e){return this.post("/reservations",e)}},{key:"update",value:function(e,t){return this.patch("/reservations/".concat(e),t)}},{key:"pingKey",value:function(e,t){return this.patch("/reservations/".concat(e,"/keys"),{RFIDTag:t})}},{key:"remove",value:function(e){return this.delete("/reservations/".concat(e))}},{key:"resolveStatus",value:function(e){var t=Date.now(),n=new Date(t),r=new Date(t-9e5),c=new Date(t+9e5),i=e.actualStart,s=e.plannedStart,o=e.actualEnd,u=e.plannedEnd,l=new Date(i||s),j=new Date(o||u);if(!i)return l<n&&l>r?this.emitStatus("Powinna zosta\u0107 ju\u017c odebrana",a.warning):l>n&&l<c?this.emitStatus("Za chwil\u0119 zostanie odebrana",a.info):l<c?this.emitStatus("Nieodebrana.",a.error):this.emitStatus("Oczekuje",a.inert);if(i){if(o)return this.emitStatus("Rezerwacja zako\u0144czona.",a.inert);if(!o){if(n<j&&c>j)return this.emitStatus("Za chwil\u0119 si\u0119 ko\u0144czy.",a.info);if(n>j){var d=new Date(Date.parse(j.toString())+9e5);if(n<d)return this.emitStatus("Powinna si\u0119 zako\u0144czy\u0107.",a.warning);if(n>d)return this.emitStatus("Czas min\u0105\u0142, klucz nie oddany.",a.error)}return this.emitStatus("Rezerwacja trwa.",a.success)}}return this.emitStatus("Status nieznany",a.warning)}}]),n}(u.a);t.a=new l}},[[863,2,3]]]);
//# sourceMappingURL=main.51b88f3f.chunk.js.map