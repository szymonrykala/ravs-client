(this["webpackJsonpravs-client"]=this["webpackJsonpravs-client"]||[]).push([[1],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(13),r=n(6),c=n(50),i=n(970),s=n(89),o=n(952),u=n(2),l=n.n(u),j=n(452),d=n.n(j),b=n(173),f=n(481),h=n(92),p=n(0),O=["children","hidden","index"];function x(e){var t=e.children,n=e.hidden,r=e.index,c=Object(b.a)(e,O);return l.a.useMemo((function(){return Object(p.jsx)(f.a,Object(a.a)(Object(a.a)({role:"tabpanel",hidden:n,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),{},{children:Object(p.jsx)(h.a,{children:t})}))}),[n,r,t,c])}function m(e){var t=Object(c.a)(),n=l.a.useState(0),u=Object(r.a)(n,2),j=u[0],b=u[1],f=l.a.useCallback((function(e,t){b(t)}),[]),h=l.a.useCallback((function(e){b(e)}),[]),O=l.a.useMemo((function(){return e.tabs.map((function(e,t){return Object(p.jsx)(i.a,Object(a.a)({label:Object(p.jsx)(s.a,{component:"h2",variant:"button",children:e.name})},function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}(t)),t)}))}),[e.tabs]),m=l.a.useMemo((function(){return e.tabs.map((function(e,n){return Object(p.jsx)(x,{index:n,hidden:j!==n,dir:t.direction,children:e.component},n)}))}),[e.tabs,j,t.direction]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(o.a,{allowScrollButtonsMobile:!0,value:j,onChange:f,indicatorColor:"primary",variant:"scrollable",sx:{borderBottom:2,borderColor:"divider"},children:O}),Object(p.jsx)("br",{}),Object(p.jsx)(d.a,{axis:"x",index:j,onChangeIndex:h,children:m})]})}},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(49),j=n(117),d=n(33),b=n(161),f=n(123),h=n(37),p=n(0),O=Object(o.createContext)(null);function x(e){var t=e.children,n=Object(b.a)(),r=n.getBuildingLink,o=n.reloadMap,x=Object(d.a)(),m=Object(l.i)(),v=u.a.useState(),g=Object(s.a)(v,2),y=g[0],k=g[1],w=Object(f.a)(6e4);u.a.useLayoutEffect((function(){j.a.setPath(m)}),[m]);var C=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.getView();case 2:t=e.sent,k(t.data);case 4:case"end":return e.stop()}}),e)}))),[m,w]),S=u.a.useCallback((function(e){k((function(t){if(t)return Object(a.a)(Object(a.a)({},t),{},{occupied:e})}))}),[]),z=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,j.a.update(t);case 5:return k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),t)})),x("Sala zosta\u0142a zaktualizowana","success"),("name"in t&&t.name!==y.name||"buildingId"in t&&t.buildingId!==(null===y||void 0===y?void 0:y.building.id))&&o(),e.abrupt("return",!0);case 11:e.prev=11,e.t0=e.catch(2),x(e.t0.description,"error");case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[x,o,y]),I=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,j.a.remove();case 5:o(),x("Sala zosta\u0142a usuni\u0119ta","success",(function(){return Object(p.jsx)(l.a,{to:r(y.building.id)})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.description,"error");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[x,y,o,r]),E=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.updateRFID(t);case 3:return k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),{},{RFIDTag:t})})),x("Tag zosta\u0142 przypisany","success"),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),x(e.t0.description,"error"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[x]),P=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.deleteRFIDTag();case 3:k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),{},{RFIDTag:null})})),x("Tag zosta\u0142 usuni\u0119ty","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[x]);return u.a.useEffect((function(){return C(),function(){}}),[C]),Boolean(y)?Object(p.jsx)(O.Provider,{value:{room:y,updateRoom:z,deleteRoom:I,updateRFIDTag:E,deleteRFIDTag:P,setOccupied:S},children:t}):Object(p.jsx)(h.a,{})}function m(){return u.a.useContext(O)}},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(257),o=n(89),u=n(955),l=n(315),j=n(2),d=n.n(j),b=n(72),f=n.n(b),h=n(130),p=n.n(h),O=n(33),x=n(39),m=n(0);function v(e){var t=e.open,n=e.onSuccess,a=e.onClose,j=Object(O.a)(),b=d.a.useState(""),h=Object(i.a)(b,2),v=h[0],g=h[1],y=d.a.useMemo((function(){return Math.random().toString(36).substring(5).toUpperCase()}),[]),k=d.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v===y){e.next=3;break}return j("Wpisany tekst jest niepoprawny","error"),e.abrupt("return");case 3:n(),g("");case 5:case"end":return e.stop()}}),e)}))),[y,v,n,j]),w=d.a.useCallback((function(){g(""),a()}),[a]);return Object(m.jsx)(x.a,{open:t,onClose:w,"aria-label":"Okno do usuwania obiektu",sx:{maxWidth:"400px"},children:Object(m.jsxs)(s.a,{direction:"column",spacing:3,children:[Object(m.jsx)(o.a,{variant:"h5",color:"primary.dark",children:"Usuwanie obiektu"}),Object(m.jsxs)(o.a,{variant:"body1",color:"text.secondary",children:["Tej operacji nie da si\u0119 cofn\u0105\u0107.",Object(m.jsx)("br",{}),"1. Przepisz tekst: ",Object(m.jsx)("b",{children:y}),Object(m.jsx)("br",{}),'2. Naci\u015bnij "Zatwierd\u017a"']}),Object(m.jsx)(u.a,{id:"random-tekst",label:"tekst",variant:"outlined",value:v,onChange:function(e){return g(e.target.value)}}),Object(m.jsxs)(s.a,{direction:"row",justifyContent:"space-around",children:[Object(m.jsx)(l.a,{startIcon:Object(m.jsx)(p.a,{}),onClick:w,children:"Anuluj"}),Object(m.jsx)(l.a,{startIcon:Object(m.jsx)(f.a,{color:"inherit"}),onClick:k,color:"error",children:"Zatwierd\u017a"})]})]})})}},113:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(42),i=n(43),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e){return this.post("/addresses",e)}},{key:"getBuildings",value:function(){return this.get("".concat(this.path,"/buildings"))}},{key:"getResourcesMap",value:function(){return this.get("/addresses/resources")}}]),n}(n(59).a);t.a=new s},117:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(42),i=n(43),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId,a=e.roomId;this._path="/addresses/".concat(t,"/buildings/").concat(n,"/rooms/").concat(a)}},{key:"getView",value:function(){return this.get(this.path)}},{key:"create",value:function(e,t){var n=e.addressId,a=e.buildingId;return this.post("/addresses/".concat(n,"/buildings/").concat(a,"/rooms"),t)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"updateRFID",value:function(e){return this.patch("".concat(this.path,"/keys"),{RFIDTag:e})}},{key:"deleteRFIDTag",value:function(){return this.delete("".concat(this.path,"/keys"))}}]),n}(n(59).a);t.a=new s},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(6),r=n(2),c=n.n(r);function i(e){var t=c.a.useState(),n=Object(a.a)(t,2),r=n[0],i=n[1];return c.a.useEffect((function(){var t=setInterval((function(){return i((function(e){return!e}))}),e);return function(){return clearInterval(t)}}),[e]),r}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(2);var a=n(89),r=n(44),c=n(0);function i(e){return Object(c.jsxs)(a.a,{color:"text.secondary",variant:"body2",fontSize:"smaller",children:["Utworzono: ",Object(r.a)(e.model._created),Object(c.jsx)("br",{}),"Ostatnia aktualizacja: ",Object(r.a)(e.model._updated)]})}},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(49),j=n(33),d=n(21),b=n(113),f=n(40),h=n(37),p=n(0),O=u.a.createContext(null);function x(e){var t=Object(j.a)(),n=Object(f.b)().reloadMap,r=Object(l.i)(),o=u.a.useState(),x=Object(s.a)(o,2),m=x[0],v=x[1];u.a.useLayoutEffect((function(){b.a.setPath(r)}),[r]);var g=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.getCurrentOne();case 2:t=e.sent,v(t.data);case 4:case"end":return e.stop()}}),e)}))),[r]);u.a.useEffect((function(){g()}),[g]);var y=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.getBuildings();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[r]),k=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.update(r);case 3:return v((function(e){return Object(a.a)(Object(a.a)({},e),r)})),n(),t("Adres zaktualizowany","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[t,n]),w=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.remove();case 3:n(),t("Adres zosta\u0142 usuni\u0119ty","success",(function(){return Object(p.jsx)(l.a,{to:d.a.HOME})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m&&t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,m,n]);return Boolean(m)?Object(p.jsx)(O.Provider,{value:{address:m,deleteAddress:w,getBuildingsInAddress:y,updateAddress:k},children:e.children}):Object(p.jsx)(h.a,{})}function m(){return u.a.useContext(O)}},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return x}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(49),l=n(33),j=n(135),d=n(21),b=n(40),f=n(37),h=n(0),p=o.a.createContext(null);function O(e){var t=Object(l.a)(),n=Object(b.b)().reloadMap,a=Object(u.i)(),s=o.a.useState(),O=Object(i.a)(s,2),x=O[0],m=O[1];o.a.useLayoutEffect((function(){j.a.setPath(a)}),[a]);var v=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.getCurrentOne();case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);o.a.useEffect((function(){v()}),[v]);var g=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.getRoomsInBuilding();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),y=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.update(a);case 3:if(!e.sent){e.next=8;break}return x&&("addressId"in a&&x.address.id!==a.addressId||"name"in a)&&n(),m((function(e){return e&&Object.keys(a).forEach((function(t){if("addressId"===t)e.address.id=Number(a[t]);else e[t]=a[t]})),Object.assign({},e)})),t("Bydynek zaktualizowany","success"),e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(e.t0.description,"error");case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t,x,n]),k=o.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.remove();case 3:n(),x&&t("Budynek usuni\u0119ty","success",(function(){return Object(h.jsx)(u.a,{to:d.b.toAddress(x.address.id)})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,x,n]);return Boolean(x)?Object(h.jsx)(p.Provider,{value:{building:x,deleteBuilding:k,getRoomsInBuilding:g,updateBuilding:y},children:e.children}):Object(h.jsx)(f.a,{})}function x(){return o.a.useContext(p)}},135:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(42),i=n(43),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId;this._path="/addresses/".concat(t,"/buildings/").concat(n)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e,t){var n=e.addressId;return this.post("/addresses/".concat(n,"/buildings"),t)}},{key:"getRoomsInBuilding",value:function(){return this.get("".concat(this.path,"/rooms"))}}]),n}(n(59).a);t.a=new s},138:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return D.a})),n.d(t,"d",(function(){return y.b}));var a=n(2),r=n.n(a),c=n(257),i=n(53),s=n(11),o=n.n(s),u=n(13),l=n(20),j=n(6),d=n(481),b=n(89),f=n(955),h=n(315),p=n(964),O=n(245),x=n(0),m=[{name:"tydzie\u0144",value:"1 week ago"},{name:"miesi\u0105c",value:"1 month ago"},{name:"6 miesi\u0119cy",value:"6 month ago"},{name:"rok",value:"1 year ago"}];function v(){var e,t,n=Object(i.b)(),a=n.queryParams,s=n.setQueryParams,v=r.a.useState({from:new Date(null!==(e=null===a||void 0===a?void 0:a.from)&&void 0!==e?e:Date.now()-21600),to:new Date(null!==(t=null===a||void 0===a?void 0:a.to)&&void 0!==t?t:Date.now()+518400)}),g=Object(j.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s((function(e){return Object(u.a)(Object(u.a)({},e),{},{from:t,to:"1 hour"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s]),C=r.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),s({from:null===(n=y.from)||void 0===n?void 0:n.toDateString(),to:null===(a=y.to)||void 0===a?void 0:a.toDateString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y.from,y.to,s]);return Object(x.jsxs)(c.a,{direction:"column",spacing:2,children:[Object(x.jsxs)(d.a,{children:[Object(x.jsx)(b.a,{variant:"subtitle2",children:"Zakres czasu:"}),Object(x.jsx)(O.a,{onChange:w,buttons:m,value:a.from})]}),Object(x.jsxs)(d.a,{component:"form",onSubmit:C,children:[Object(x.jsx)(b.a,{variant:"subtitle2",pb:"5px",children:"Zakres niestandardowy:"}),Object(x.jsxs)(c.a,{direction:"row",spacing:1,children:[Object(x.jsx)(p.a,{label:"od",inputFormat:"yyyy-MM-dd",value:y.from,onChange:function(e){return k(Object(u.a)(Object(u.a)({},y),{},{from:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(x.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(p.a,{label:"do",inputFormat:"yyyy-MM-dd",value:y.to,onChange:function(e){return k(Object(u.a)(Object(u.a)({},y),{},{to:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(x.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(h.a,{type:"submit",variant:(null===a||void 0===a?void 0:a.from)===y.from.toDateString()?"contained":"outlined",children:"OK"})]})]})]})}var g=r.a.memo(v),y=n(227);function k(e){return Object(x.jsx)(i.a,{name:"charts-query-params",default:{from:"1 month ago",to:"1 hour"},children:Object(x.jsx)(y.a,{children:Object(x.jsxs)(c.a,{spacing:4,children:[Object(x.jsx)(g,{}),e.children]})})})}var w=r.a.memo(k),C=n(986),S=n(316),z=n(341),I=n.n(z),E=n(340),P=n.n(E),T=n(965),R=n(945);function A(e){var t=r.a.useState(!!(null===e||void 0===e?void 0:e.defaultOpen)),n=Object(j.a)(t,2),a=n[0],c=n[1];return Object(x.jsxs)(d.a,{children:[Object(x.jsx)(d.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:Object(x.jsxs)(b.a,{variant:"h6",component:"h5",id:e.title.replace(" ","_"),children:[e.title,Object(x.jsx)(T.a,{onClick:function(){return c((function(e){return!e}))},children:a?Object(x.jsx)(P.a,{}):Object(x.jsx)(I.a,{})})]})}),Object(x.jsxs)(C.a,{in:a,timeout:"auto",children:[Object(x.jsx)(S.a,{container:!0,spacing:2,children:e.children}),Object(x.jsx)("br",{}),Object(x.jsx)(R.a,{})]})]})}var D=n(319)},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a),c=n(230);function i(){return r.a.useContext(c.b)}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(49),j=n(41),d=n(33),b=n(60),f=n(37),h=n(21),p=n(0),O=u.a.createContext(null);function x(e){var t=Object(l.i)(),n=Object(d.a)(),r=Object(j.a)(),o=u.a.useState(),x=Object(s.a)(o,2),m=x[0],v=x[1];u.a.useLayoutEffect((function(){var e="me"===t.userId&&r.user?{userId:r.user.id.toString()}:t;b.b.setPath(e)}),[t,r]);var g=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.b.getCurrentOne();case 3:t=e.sent,v(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);u.a.useEffect((function(){g()}),[g]);var y=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.b.remove();case 3:return a=function(){return null},r&&(null===(t=r.user)||void 0===t?void 0:t.id)===(null===m||void 0===m?void 0:m.id)?r.logout():a=function(){return Object(p.jsx)(l.a,{to:h.a.USERS})},n("U\u017cytkownik zosta\u0142 usuni\u0119ty","success",a),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[n,r,null===m||void 0===m?void 0:m.id]),k=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.b.update(t);case 3:if(!e.sent){e.next=6;break}v((function(e){return Object(a.a)(Object(a.a)({},e),t)})),n("U\u017cytkownik zosta\u0142 zaktualizowany","success");case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return m?Object(p.jsx)(O.Provider,{value:{user:m,deleteUser:y,updateUser:k},children:e.children}):Object(p.jsx)(f.a,{})}function m(){return u.a.useContext(O)}},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a={PUBLIC:"/public",HOME:"/app"};a.LOGIN=a.PUBLIC+"/login",a.REGISTER=a.PUBLIC+"/register",a.ACTIVATE=a.PUBLIC+"/activate",a.REMIND_PASSWORD=a.PUBLIC+"/passwd",a.ACCESS=a.HOME+"/accesses",a.SETTINGS=a.HOME+"/settings",a.USERS=a.HOME+"/users",a.USER=a.USERS+"/:userId",a.MY_PROFILE=a.USERS+"/me",a.INFRASTRUCTURE=a.HOME+"/infrastructure",a.ADDRESS=a.HOME+"/addresses/:addressId",a.BUILDING=a.ADDRESS+"/buildings/:buildingId",a.ROOM=a.BUILDING+"/rooms/:roomId",a.LOGS=a.HOME+"/logsexplorer";var r={toAddress:function(e){return"/app/addresses/".concat(e)},toBuilding:function(e,t){return r.toAddress(e)+"/buildings/".concat(t)},toRoom:function(e,t,n){return r.toBuilding(e,t)+"/rooms/".concat(n)},toUser:function(e){return a.USERS+"/".concat(e)}};t.a=a},227:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(49),l=n(41),j=n(33),d=n(53),b=n(27),f=n(28),h=n(42),p=n(43),O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var a=0,r=Object.entries({"/settings":"/requests","/users":"/users"});a<r.length;a++){var c=Object(i.a)(r[a],2),s=c[0],o=c[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId,"/buildings"),"buildingId"in e&&(t+="/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&(t+="/users/".concat(e.userId));return t}},{key:"fetchData",value:function(e,t){return this.get(this.preparePath(e)+"/stats",t)}}]),n}(n(59).a),x=new O,m=n(37),v=n(123),g=n(0),y=o.a.createContext(null);function k(e){var t=Object(j.a)(),n=Object(u.i)(),a=Object(v.a)(6e4),s=Object(l.a)().user,b=Object(d.b)().queryParams,f=o.a.useState({}),h=Object(i.a)(f,2),p=h[0],O=h[1],k=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,"userId"in n&&"me"===n.userId&&(a={userId:"".concat(null===s||void 0===s?void 0:s.id)}),e.prev=2,e.next=5,x.fetchData(a,b);case 5:c=e.sent,O(c.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(e.t0.description,"error"),O({});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,b,n,null===s||void 0===s?void 0:s.id]);return o.a.useEffect((function(){k()}),[k,a]),0===Object.keys(p).length?Object(g.jsx)(m.a,{}):Object(g.jsx)(y.Provider,{value:{chartsData:p},children:e.children})}function w(){return o.a.useContext(y)}},229:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(6),r=n(2),c=n.n(r),i=n(82),s={queryParams:{q:1},setQueryParams:function(e){}},o=n(0),u=c.a.createContext(s);function l(e){var t=c.a.useState((function(){return t=e.name,n=e.default,i.a.read(t)||n;var t,n})),n=Object(a.a)(t,2),r=n[0],s=n[1];return c.a.useEffect((function(){i.a.save(e.name,r)}),[r,e.name]),r?Object(o.jsx)(u.Provider,{value:{queryParams:r,setQueryParams:s},children:e.children}):null}},230:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return h}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(41),l=n(123),j=n(113),d=n(33),b=n(0),f=o.a.createContext(null);function h(e){var t=o.a.useState([]),n=Object(i.a)(t,2),a=n[0],s=n[1],h=o.a.useState(!1),p=Object(i.a)(h,2),O=p[0],x=p[1],m=Object(l.a)(3e5),v=Object(u.a)().user,g=Object(d.a)(),y=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.getResourcesMap();case 3:(null===(t=e.sent)||void 0===t?void 0:t.data)&&s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[g]);o.a.useEffect((function(){v&&y(),x(!0)}),[v,y,m]);var k=o.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]),w=o.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2)}),[a]),C=o.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return{name:e.name,href:e.href,id:e.id}}))})).flat(2)}),[a]),S=o.a.useMemo((function(){return a.map((function(e){return{name:e.name,href:e.href,id:e.id}}))}),[a]),z=o.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]);return!1===O?null:Object(b.jsx)(f.Provider,{value:{resourceMap:a,reloadMap:function(){y()},allRooms:w,getRoomLink:k,getBuildingLink:z,allAddresses:S,allBuildings:C},children:e.children})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(13),r=n(2),c=n(875),i=n(257),s=n(484),o=n(483),u=n(880),l=n(877),j=n(53),d=n(0);function b(){var e,t=Object(j.b)(),n=t.queryParams,b=t.setQueryParams,f=r.useCallback((function(e,t){b((function(e){return Object(a.a)(Object(a.a)({},e),{},{currentPage:t})}))}),[b]),h=r.useCallback((function(e,t){b((function(t){return Object(a.a)(Object(a.a)({},t),{},{itemsOnPage:Number(e.target.value)})}))}),[b]),p=r.useMemo((function(){return[5,10,15,20].map((function(e){return Object(d.jsx)(s.a,{value:e,children:e},e)}))}),[]);return Object(d.jsxs)(i.a,{spacing:2,sx:{flexWrap:"wrap",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},children:[Object(d.jsx)(c.a,{count:n.pagesCount,size:"small",page:n.currentPage,onChange:f}),Object(d.jsxs)(o.a,{fullWidth:!0,sx:{maxWidth:"100px"},children:[Object(d.jsx)(u.a,{id:"items-on-page-label",children:"Na stronie"}),Object(d.jsxs)(l.a,{size:"small",labelId:"items-on-page-label",id:"items-on-page",label:"Na stronie",value:null!==(e=n.itemsOnPage)&&void 0!==e?e:5,onChange:h,children:[p,Object(d.jsx)(s.a,{value:1e4,children:"wszystko"})]})]})]})}},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(13),r=n(6),c=n(69),i=n(2),s=n.n(i),o=n(0);function u(e){var t=e.value,n=e.onChange,i=e.label,u=e.name,l=e.sx,j=s.a.useState(),d=Object(r.a)(j,2),b=d[0],f=d[1],h=s.a.useState(t),p=Object(r.a)(h,2),O=p[0],x=p[1],m=s.a.useCallback((function(e){x(e.target.value),clearTimeout(b);var t=setTimeout((function(){n(e)}),1e3);f(t)}),[b,n]);return Object(o.jsx)(c.c,{name:u,value:O,onChange:m,placeholder:i,sx:Object(a.a)({width:"100%",maxWidth:"600px",p:1,bgcolor:"background.default"},l),inputProps:{"aria-label":i}})}},239:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(27),r=n(28),c=n(42),i=n(43),s=n(204),o=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r,c;return Object(a.a)(this,n),(c=t.call(this,null===(r=e.error)||void 0===r?void 0:r.description)).data=void 0,c.data=e,c}return Object(r.a)(n,[{key:"code",get:function(){return this.data.statusCode}},{key:"description",get:function(){var e;return null===(e=this.data.error)||void 0===e?void 0:e.description}}]),n}(Object(s.a)(Error))},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(884),r=n(878),c=n(483),i=n(882),s=n(2),o=n.n(s),u=n(0);function l(e){var t=e.onChange,n=e.buttons,s=e.value,l=o.a.useCallback((function(e){t(e.target.value)}),[t]),j=o.a.useMemo((function(){return n.map((function(e){var t=e.value,n=e.name;return Object(u.jsx)(a.a,{value:t,control:Object(u.jsx)(r.a,{}),label:n,"aria-label":n,title:n},n)}))}),[n]);return Object(u.jsx)(c.a,{component:"fieldset",children:Object(u.jsx)(i.a,{row:!0,"aria-label":"wyb\xf3r opcji",name:"wyb\xf3r zdefiniowanej opcji",value:s,onChange:l,children:j})})}},250:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return T}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(49),l=n(33),j=n(27),d=n(28),b=n(42),f=n(43),h=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/users/auth",{email:t.email,password:t.password});case 2:return(n=e.sent).data&&localStorage.setItem(this._TOKEN_NAME,n.data.toString()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem(this._TOKEN_NAME)}},{key:"hasToken",value:function(){return Boolean(localStorage.getItem(this._TOKEN_NAME))}},{key:"hasSession",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.hasToken()){e.next=5;break}return e.next=4,this.get("/users/me");case 4:return e.abrupt("return",!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(n(59).a),p=new h,O=n(45),x=n(333),m=n(79),v=n(96),g=n(82),y=n(60),k=n(13),w=n(881),C=n(883),S=n(89),z=n(0);function I(e){return Object(z.jsxs)(w.a,{sx:Object(k.a)({display:"flex",flexDirection:"column",color:"primary.main",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"background.default"},e.sx),open:e.open,children:[Object(z.jsx)(S.a,{variant:"h5",pb:2,children:e.text}),Object(z.jsx)(C.a,{color:"inherit"})]})}var E=n(21),P=Object(s.createContext)(null);function T(e){var t=e.children,n=Object(l.a)(),a=o.a.useState(!0),j=Object(i.a)(a,2),d=j[0],b=j[1],f=Object(s.useState)(null),h=Object(i.a)(f,2),k=h[0],w=h[1],C=o.a.useCallback((function(e){w(e),g.a.setIdentity(e.id),m.a.userId=e.id,m.a.metadata=e.metadata,v.a.userId=e.id,x.a.userId=e.id,O.a.userId=e.id,y.b.userId=e.id}),[]),S=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!p.hasToken()){e.next=19;break}return e.prev=2,e.next=5,p.hasSession();case 5:if(!e.sent){e.next=13;break}return e.next=8,y.b.getMe();case 8:t=e.sent,C(t),n("Witaj ponownie!","info"),e.next=14;break;case 13:n("Twoja sesja wygas\u0142a","info",(function(){return Object(z.jsx)(u.a,{to:E.a.LOGIN})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(e.t0.description,"error",(function(){return Object(z.jsx)(u.a,{to:E.a.WELCOME})}));case 19:b(!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),[n,C]);o.a.useEffect((function(){return S(),function(){}}),[S]);var T=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.login(t);case 3:return e.next=5,y.b.getMe();case 5:a=e.sent,C(a),n("Pomy\u015blnie zalogowano!","success",(function(){return Object(z.jsx)(u.a,{to:E.a.HOME})})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.description,404===e.t0.code&&(c="U\u017cytkownik nie istnieje"),n(c,"error");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,C]),R=o.a.useCallback((function(){n("Pomy\u015blnie wylogowano!","success",(function(){return Object(z.jsx)(u.a,{to:E.a.PUBLIC})})),w(null),p.logout()}),[n]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(I,{open:d,text:"\u0141adowanie Sesji..."}),Object(z.jsx)(P.Provider,{value:{user:k,login:T,logout:R},children:!d&&t})]})}},251:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return j}));var a=n(6),r=n(954),c=n(951),i=n(2),s=n.n(i),o=function(e){},u=n(0),l=Object(i.createContext)(o);function j(e){var t=e.children,n=s.a.useState(),i=Object(a.a)(n,2),o=i[0],j=i[1],d=s.a.useState(!1),b=Object(a.a)(d,2),f=b[0],h=b[1],p=s.a.useState("error"),O=Object(a.a)(p,2),x=O[0],m=O[1],v=s.a.useState(),g=Object(a.a)(v,2),y=g[0],k=g[1],w=s.a.useCallback((function(e,t){"clickaway"!==t&&(h(!1),j(""),k(null))}),[]),C=s.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};m(t),j(e),h(!0),k(n())}),[]);return Object(u.jsxs)(l.Provider,{value:C,children:[t,Object(u.jsx)(r.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:6e3,onClose:w,children:Object(u.jsx)(c.a,{onClose:w,severity:x,sx:{width:"100%"},children:o})}),y]})}},318:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(2);var a=n(89),r=n(0);function c(e){return Object(r.jsxs)("span",{children:[Object(r.jsx)(a.a,{variant:"h4",component:"h2",color:"primary.dark",children:e.title}),e.subtitle&&Object(r.jsx)(a.a,{variant:"body1",color:"text.secondary",mt:"5px",children:e.subtitle})]})}},319:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}));var a=n(2),r=n.n(a),c=n(481),i=n(316),s=n(257),o=n(89),u=n(476),l=n(459),j=n.n(l),d=n(0),b=["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"];function f(e){var t=r.a.useMemo((function(){return{getValue:function(t){return e.resolveDay?b[Number(t.x)]:t.x},min:0}}),[e.resolveDay]),n=r.a.useMemo((function(){return[{getValue:function(e){return e.y},position:"left",elementType:"bar",minDomainLength:15,hardMin:0,scaleType:"linear",showDatumElements:!0}]}),[]),a=r.a.useMemo((function(){var t=e.y.map((function(e){return{label:e.label,data:[]}}));return e.data.forEach((function(n){e.y.forEach((function(a,r){var c=a.key;t[r].data.push({x:n[e.xKey],y:Number(n[c])})}))})),t}),[e.y,e.xKey,e.data]);return Object(d.jsxs)(i.a,{item:!0,xs:12,lg:e.fullWidth?12:6,children:[Object(d.jsxs)(s.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(d.jsx)(o.a,{variant:"body2",component:"h4",color:"text.secondary",children:e.title}),Object(d.jsx)(j.a,{color:"primary"})]}),0===e.data.length?Object(d.jsx)(o.a,{component:"p",color:"text.secondary",children:"Brak danych do nakre\u015blenia wykresu"}):Object(d.jsx)(c.a,{sx:{maxHeight:"400px",height:"40vh",minHeight:"300px",width:"100%"},children:Object(d.jsx)(u.a,{options:{data:a,primaryAxis:t,secondaryAxes:n}})})]})}},320:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(2);var a=n(58),r=n(0);a.Font.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-light-webfont.ttf"});var c=a.StyleSheet.create({page:{fontSize:11,fontFamily:"Roboto",flexDirection:"column",backgroundColor:"#ffffff"},section:{marginBottom:"15px",justifyContent:"flex-start",padding:"15px"},head:{fontSize:"16px"}});function i(e){return Object(r.jsx)(a.Document,{children:Object(r.jsxs)(a.Page,{size:"A4",style:c.page,wrap:!0,children:[Object(r.jsxs)(a.View,{style:c.section,children:[Object(r.jsxs)(a.Text,{style:c.head,children:["Rav System, dnia ",(new Date).toLocaleString("pl")]}),Object(r.jsx)(a.Text,{style:c.head,children:e.subject})]}),e.sections.map((function(e,t){return Object(r.jsx)(a.View,{style:c.section,children:e},t)}))]})})}},321:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(2);var a=n(58),r=n(0),c=a.StyleSheet.create({title:{padding:"5px",marginBottom:"5px",fontSize:"18px"},table:{},row:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid black"},cell:{padding:"5px",width:"80px",alignItems:"center"},text:{margin:"0px",padding:"0px",wordBreak:"keep-all",textAlign:"center"}});function i(e){var t=e.cols;return Object(r.jsx)(a.View,{style:c.row,children:t.map((function(e,t){return Object(r.jsx)(s,{val:e},t)}))})}function s(e){return Object(r.jsx)(a.View,{style:c.cell,children:Object(r.jsx)(a.Text,{style:c.text,children:e.val})})}function o(e){return e.every((function(e){return e.slice(1).every((function(e){return 0===e}))}))}function u(e){var t=e.rows,n=e.title;return Object(r.jsxs)(a.View,{children:[Object(r.jsx)(a.Text,{style:c.title,children:n}),o(t.slice(1))?Object(r.jsx)(a.Text,{style:c.text,children:"Brak danych w wybranym przedziale czasu"}):t.map((function(e,t){return Object(r.jsx)(i,{cols:e},t)}))]})}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n(251);function c(){return Object(a.useContext)(r.b)}},333:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(42),u=n(43),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"fetch",value:function(e,t){return this.get(this.preparePath(e)+"/requests",t)}},{key:"getStats",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/requests/stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(59).a);t.a=new l},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(2);var a=n(883),r=n(481),c=n(0);function i(){return Object(c.jsx)(r.a,{sx:{display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",minHeight:"200px",height:"100%"},children:Object(c.jsx)(a.a,{})})}},39:function(e,t,n){"use strict";var a=n(13),r=n(2),c=n(881),i=n(876),s=n(865),o=n(482),u=n(0);function l(e){var t=e.children,n=e.open,r=e.sx,l=e.onClose;return Object(u.jsx)(i.a,{open:n,onClose:l,closeAfterTransition:!0,BackdropComponent:c.a,BackdropProps:{timeout:500},sx:{display:"flex",justifyContent:"center",alignItems:"flex-start",overflow:"auto"},children:Object(u.jsx)(s.a,{in:n,children:Object(u.jsx)(o.a,{sx:Object(a.a)({bgcolor:"background.paper",position:"absolute",width:"95%",mt:"5vw",maxWidth:"500px",boxShadow:24,p:3},r),children:t})})})}t.a=r.memo(l)},40:function(e,t,n){"use strict";var a=n(161);n.d(t,"b",(function(){return a.a}));var r=n(230);n.d(t,"a",(function(){return r.a}))},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n(250);function c(){return Object(a.useContext)(r.b)}},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(6);function r(e){var t=new Date(e);return new Intl.DateTimeFormat("pl-PL",{dateStyle:"medium",timeStyle:"medium"}).format(t)}var c=new Intl.DateTimeFormat("pl-PL",{timeStyle:"medium"});function i(e){if(!e)return!1;var t=new Date(e);return Boolean(t.getDate())}function s(e){var t=e.split(/\.|:|,\s/).map((function(e){return Number(e)})),n=Object(a.a)(t,6),r=n[0],c=n[1],i=n[2],s=n[3],o=n[4],u=n[5];return new Date(i,c-1,r,s,o,u)}},440:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(315),o=n(89),u=n(941),l=n(457),j=n.n(l),d=n(2),b=n.n(d),f=n(60);function h(e,t){switch(t.statusCode){case 200:case 201:return{success:!0,message:"Kod zosta\u0142 wys\u0142any na podany email"};case 403:case 401:case 400:default:return{success:!1,message:t.payload};case 404:return{success:!1,message:"Taki u\u017cytkownik nie istnieje."};case 422:return{success:!1,message:"Adres email jest niepoprawny"};case"NO_ADDRESS":return{success:!1,message:"Musisz poda\u0107 adres email"}}}var p=n(0);function O(e){var t,n=b.a.useReducer(h,{success:null,message:e.text}),a=Object(i.a)(n,2),l=a[0],d=a[1],O=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.email||d({statusCode:"NO_ADDRESS"}),t.prev=1,t.next=4,f.b.generateKey(e.email);case 4:n=t.sent,d(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d({statusCode:t.t0.code,payload:t.t0.description});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(u.a,{component:"div",display:"flex",children:[Object(p.jsx)(s.a,{sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},onClick:O,children:Object(p.jsx)(j.a,{fontSize:"large"})}),Object(p.jsx)(u.a,{sx:{display:"flex",alignItems:"center",ml:1},children:Object(p.jsx)(o.a,{variant:"body2",component:"p",color:(t=l.success,null===t?"inherit":!0===t?"green":"error"),children:l.message})})]})}},441:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(11),r=n.n(a),c=n(20),i=n(4),s=n(13),o=n(6),u=n(955),l=n(315),j=n(316),d=n(973),b=n(941),f=n(440),h=n(2),p=n.n(h),O=n(89),x=n(0);function m(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.a,{variant:"h5",sx:{mt:3},children:e.title}),Object(x.jsx)(O.a,{variant:"body2",sx:{mt:1},children:e.text}),e.children]})}var v=n(60),g=n(49),y=n(21),k=n(33);function w(e){var t,n,a=Object(k.a)(),h=p.a.useState({email:null!==(t=null===(n=localStorage.getItem("email"))||void 0===n?void 0:n.toString())&&void 0!==t?t:"",newPassword:"",code:""}),O=Object(o.a)(h,2),w=O[0],C=O[1],S=p.a.useCallback((function(e){C((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))}),[]),z=p.a.useCallback(function(){var t=Object(c.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,v.b.changePassword(w);case 4:a("Has\u0142o zosta\u0142o zmienione","success",(function(){return e.onSuccess&&e.onSuccess(),Object(x.jsx)(g.a,{to:y.a.LOGIN})})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),c=t.t0.description,404===t.t0.code&&(c="Taki u\u017cytkownik nie istnieje"),a(c,"error");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),[w,a,e]);return Object(x.jsxs)(b.a,{component:"form",onSubmit:z,sx:{mt:1},children:[Object(x.jsxs)(m,{title:"1. Wygeneruj Kod",text:"Podaj sw\xf3j aders email i naci\u015bnij przycisk by otrzyma\u0107 email i kodem.",children:[Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email",autoFocus:!0,value:w.email,onChange:S}),Object(x.jsx)(f.a,{text:"Kliknij przycisk by otrzyma\u0107 kod.",email:w.email})]}),Object(x.jsxs)(m,{title:"2. Podaj nowe has\u0142o i kod",text:"Podaj nowe has\u0142o i kod kt\xf3ry otrzyma\u0142e\u015b (je\u015bli nie, powt\xf3rz krok nr 1)",children:[Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"Has\u0142o",type:"password",id:"password",value:w.newPassword,onChange:S,autoComplete:"current-password"}),Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Kod",type:"text",id:"code",value:w.code,onChange:S,autoComplete:"email-code"})]}),Object(x.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"3. Zmie\u0144 Has\u0142o"}),Object(x.jsx)(j.a,{container:!0,justifyContent:"flex-end",children:Object(x.jsx)(j.a,{item:!0,children:Object(x.jsx)(d.a,{href:y.a.LOGIN,children:"Has\u0142o zmienione? Zaloguj si\u0119!"})})})]})}},45:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(42),u=n(43),l=n(239),j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"sendImage",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t,{method:"POST",cache:"no-cache",mode:"cors",body:n,headers:{Authorization:this.authToken}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(c=e.sent,console.debug(c),a.ok){e.next=10;break}throw console.error("".concat(a.status,"\t").concat(null===c||void 0===c||null===(i=c.error)||void 0===i?void 0:i.type,"\t").concat(null===c||void 0===c||null===(s=c.error)||void 0===s?void 0:s.description)),new l.a(c);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLink",value:function(e){return(null===e||void 0===e?void 0:e.url.includes("http"))?e.url:this._BASE_URL.slice(0,this._BASE_URL.length-3)+(null===e||void 0===e?void 0:e.url)}},{key:"upload",value:function(e,t){var n=new FormData;return n.append("file",t),this.sendImage(this.preparePath(e)+"/image",n)}},{key:"remove",value:function(e){return this.delete(this.preparePath(e)+"/image")}}]),n}(n(59).a);t.a=new j},512:function(e,t,n){},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(316),r=n(89),c=n(2),i=n.n(c),s=n(130),o=n.n(s),u=n(167),l=n.n(u),j=n(257),d=n(315),b=n(0);function f(e){var t=e.title,n=e.subtitle,c=e.onSubmit,s=e.onCancel,u=e.children,f=i.a.useCallback((function(e){e.preventDefault(),c()}),[c]);return Object(b.jsxs)(j.a,{rowGap:3,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)(r.a,{variant:"h5",color:"primary.dark",children:t}),n&&Object(b.jsx)(r.a,{variant:"body2",color:"text.secondary",mt:"5px",children:n})]}),Object(b.jsxs)(a.a,{container:!0,spacing:2,component:"form",onSubmit:f,children:[u,Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsxs)(j.a,{direction:"row",justifyContent:"space-around",mt:1.5,children:[Object(b.jsx)(d.a,{"aria-label":"Zamknij",title:"Zamknij",startIcon:Object(b.jsx)(o.a,{}),onClick:s,children:"Zamknij"}),Object(b.jsx)(d.a,{"aria-label":"Zatwierd\u017a",title:"Zatwierd\u017a",startIcon:Object(b.jsx)(l.a,{color:"inherit"}),type:"submit",color:"success",children:"Zatwierd\u017a"})]})})]})]})}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return i}));var a=n(229),r=n(2),c=n.n(r);function i(){return c.a.useContext(a.b)}},548:function(e,t){},550:function(e,t){},580:function(e,t){},581:function(e,t){},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(6),r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(239),l=function(){function e(){Object(s.a)(this,e),this._BASE_URL="https://ravsapi.herokuapp.com/v1",this._TOKEN_NAME="auth_token",this._userId=-1}return Object(o.a)(e,[{key:"userId",get:function(){if(-1===this._userId)throw Error("user id was not set");return this._userId},set:function(e){this._userId=e}},{key:"authToken",get:function(){return"Bearer "+window.localStorage.getItem(this._TOKEN_NAME)}},{key:"_fetch",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t.endpoint,{method:t.method,cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json",Authorization:this.authToken},body:JSON.stringify(t.body)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,401!==n.status||t.endpoint.match("/auth|me|activate")||window.location.reload(),n.ok){e.next=11;break}throw new u.a(a);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var r=0,c=Object.entries({"/accesses":"/accesses","/settings":"/configurations","/users":"/users"});r<c.length;r++){var i=Object(a.a)(c[r],2),s=i[0],o=i[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId),"buildingId"in e&&(t+="/buildings/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&("me"===e.userId?t+="/users/"+this.userId.toString():t+="/users/"+e.userId);return t}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fetch({method:"GET",endpoint:e+"?"+new URLSearchParams(t).toString()})}},{key:"post",value:function(e,t){return this._fetch({method:"POST",endpoint:e,body:t})}},{key:"patch",value:function(e,t){if(0!==Object.keys(t).length)return this._fetch({method:"PATCH",endpoint:e,body:t})}},{key:"delete",value:function(e){return this._fetch({method:"DELETE",endpoint:e})}}]),e}()},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a,r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(42),l=n(43),j=n(59);!function(e){e[e.ACTIVATION_NEEDED=0]="ACTIVATION_NEEDED",e[e.NO_ACTIVATION_NEEDED=1]="NO_ACTIVATION_NEEDED"}(a||(a={}));var d=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="/users",e}return Object(o.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"getMe",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/users/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(e){return this.get("/users",e)}},{key:"register",value:function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/users",t);case 2:if(!(e.sent.data.search(/aktywacji|mailowy/)>0)){e.next=5;break}return e.abrupt("return",a.NO_ACTIVATION_NEEDED);case 5:return e.abrupt("return",a.ACTIVATION_NEEDED);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"activate",value:function(e){return this.patch("/users/activate",e)}},{key:"generateKey",value:function(e){return this.post("/users/key",{email:e})}},{key:"updateAccess",value:function(e,t){return this.patch("/users/".concat(e,"/access"),{accessId:t})}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"changePassword",value:function(e){return this.patch("/users/password",e)}}]),n}(j.a);t.b=new d},692:function(e,t){},75:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return p}));var a=n(6),r=n(2),c=n.n(r),i=n(0),s=c.a.createContext(null);function o(e){var t=e.children,n=c.a.useState([]),r=Object(a.a)(n,2),o=r[0],u=r[1],l=c.a.useState(!0),j=Object(a.a)(l,2),d=j[0],b=j[1];c.a.useEffect((function(){d&&setTimeout((function(){var e;o.length>0&&(null===(e=o.shift())||void 0===e||e.trigger(),b(!1))}),1e3)}),[o,d]);var f=c.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Date.now();return u((function(a){return a.find((function(e){return e.id===n}))?a:(a.push({trigger:e,priority:t,id:n}),Object.assign([],a.sort((function(e,t){return t.priority-e.priority}))))})),function(){u((function(e){var t;0===e.length?b(!0):null===(t=e.shift())||void 0===t||t.trigger();return Object.assign([],e)}))}}),[b,u]);return Object(i.jsx)(s.Provider,{value:f,children:t})}var u=n(968),l=n(257),j=n(315),d=n(89),b=n(451),f=n.n(b),h=n(82);function p(e){var t=c.a.useRef(null),n=c.a.useContext(s),r=c.a.useState(!1),o=Object(a.a)(r,2),b=o[0],p=o[1],O=c.a.useState((function(){return function(){}})),x=Object(a.a)(O,2),m=x[0],v=x[1],g=c.a.useRef(null),y=c.a.useState(!1),k=Object(a.a)(y,2),w=k[0],C=k[1];c.a.useEffect((function(){g.current=new IntersectionObserver((function(e){var t=Object(a.a)(e,1)[0];return C(t.isIntersecting)}))}),[g]),c.a.useEffect((function(){return g.current.observe(t.current),function(){g.current.disconnect()}}),[t,g]),c.a.useEffect((function(){var t=e.text.slice(0,15);if(!h.a.read(t)&&w){var a,r=n((function(){return setTimeout((function(){return p(!0)}),300)}),null!==(a=e.priority)&&void 0!==a?a:1);v((function(){return r})),h.a.save(t,!0)}}),[e.text,e.priority,n,w]);var S=c.a.useCallback((function(){m(),p(!1)}),[m]);return Object(i.jsxs)("span",{ref:t,children:[Object(i.jsxs)(u.a,{open:b,anchorEl:t.current,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:[Object(i.jsxs)(l.a,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{px:1,bgcolor:"warning.light"},children:[Object(i.jsx)(f.a,{color:"primary"}),Object(i.jsx)(j.a,{onClick:S,color:"primary",children:"OK"})]}),Object(i.jsx)(d.a,{sx:{p:1,maxWidth:"220px",bgcolor:"warning.light"},children:e.text})]}),e.children]})}},79:function(e,t,n){"use strict";var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(82),l=n(60),j=function(){function e(){Object(s.a)(this,e),this.STORAGE_NAME="user-metadata",this.data=void 0,this._userId=void 0,this.data={notes:"",favourites:[]}}return Object(o.a)(e,[{key:"save",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.a.save(this.STORAGE_NAME,this.data),this._userId){e.next=3;break}return e.abrupt("return");case 3:return l.b.setPath({userId:null===(t=this._userId)||void 0===t?void 0:t.toString()}),e.prev=4,e.next=7,l.b.update({metadata:this.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"userId",set:function(e){var t;this._userId=e,this.data=null!==(t=u.a.read(this.STORAGE_NAME))&&void 0!==t?t:{notes:"",favourites:[]}}},{key:"metadata",set:function(e){this.data=Object(a.a)(Object(a.a)({},this.data),e)}},{key:"notes",get:function(){var e;return null!==(e=this.data.notes)&&void 0!==e?e:""},set:function(e){this.data.notes=e,this.save()}},{key:"favourites",get:function(){var e;return null!==(e=this.data.favourites)&&void 0!==e?e:[]}},{key:"addFavourite",value:function(e){var t,n;null===(t=this.data.favourites)||void 0===t||t.push(e),null===(n=this.data.favourites)||void 0===n||n.sort((function(e,t){return e.type>=t.type?e.type===t.type?e.name>t.name?1:-1:1:-1})),console.log(this.data),this.save()}},{key:"isFavourite",value:function(e){var t;return Boolean(null===(t=this.data.favourites)||void 0===t?void 0:t.find((function(t){var n=t.id;return t.type===e.type&&n===e.id})))}},{key:"removeFavourite",value:function(e){var t;this.data.favourites=null===(t=this.data.favourites)||void 0===t?void 0:t.filter((function(t){return t.id+t.type!==e.id+e.type})),this.save()}}]),e}();t.a=new j},82:function(e,t,n){"use strict";var a=n(27),r=n(28),c=function(){function e(){Object(a.a)(this,e),this.id=""}return Object(r.a)(e,[{key:"setIdentity",value:function(e){this.id=e.toString()}},{key:"codeName",value:function(e){return btoa(encodeURI(e+this.id))}},{key:"save",value:function(e,t){var n=JSON.stringify(t);localStorage.setItem(this.codeName(e),n)}},{key:"delete",value:function(e){localStorage.removeItem(this.codeName(e))}},{key:"read",value:function(e){var t=localStorage.getItem(this.codeName(e));if(!t)return null;try{return JSON.parse(t)}catch(n){return null}}}]),e}();t.a=new c},861:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(95),i=n.n(c),s=(n(512),n(949)),o=n(481),u=n(987),l=(n(513),n(514),n(515),n(516),n(961)),j=n(933),d=n(934),b=n(314),f=n(13),h=n(173),p=n(46),O=n(0),x=["href"],m=a.forwardRef((function(e,t){var n=e.href,a=Object(h.a)(e,x);return Object(O.jsx)(p.b,Object(f.a)({"data-testid":"custom-link",ref:t,to:n},a))})),v=Object(b.a)({palette:{primary:j.a,secondary:{dark:"#f5f5f5",main:"#304ffe",light:"#fff"},background:{default:"#f3f3f3",paper:"#fff"}},shape:{borderRadius:4},components:{MuiCssBaseline:{styleOverrides:{body:Object(d.a)({track:"#f5f5f5",thumb:"#adadad",active:"#959595"})}},MuiTextField:{defaultProps:{size:"medium",variant:"outlined"}},MuiSelect:{defaultProps:{size:"medium"}},MuiButton:{defaultProps:{sx:{borderRadius:function(e){var t=e.shape;return Number(t.borderRadius)/2}}}},MuiLink:{defaultProps:{component:m}},MuiButtonBase:{defaultProps:{LinkComponent:m}},MuiSvgIcon:{defaultProps:{color:"inherit"}},MuiIconButton:{defaultProps:{color:"primary"}}}});function g(e){return Object(O.jsx)(l.a,{theme:v,children:e.children})}var y=n(250),k=n(941),w=n(49),C=n(21),S=n(41),z=n(37),I=r.a.lazy((function(){return n.e(10).then(n.bind(null,1021))}));function E(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(I,{})})}var P=n(316),T=n(257),R=n(53),A=n(11),D=n.n(A),M=n(20),N=n(6),B=n(96),F=n(110),L=n(33),W=n(39),U=n(89),_=n(965),q=n(969),H=n(44),K=n(111),G=n(4),Z=n(955),V=n(880),Q=n(483),J=n(877),Y=n(484),$=n(40);function X(){return r.a.useContext(Ge)}var ee=n(52),te=n(953);function ne(e){var t=e.value,n=e.onChange,a=e.label,c=r.a.useCallback((function(e){e&&n(e)}),[n]);return Object(O.jsx)(te.a,{minDate:new Date,label:a,value:t,onChange:c,renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}function ae(e){var t,n,a,c=X().updateReservation,i=Object($.b)().allRooms,s=r.a.useState({}),o=Object(N.a)(s,2),u=o[0],l=o[1],j=r.a.useCallback((function(){e.onClose(),l({})}),[e]),d=r.a.useCallback(Object(M.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e.reservation.id,u);case 2:if(!t.sent){t.next=5;break}j(),l({});case 5:case"end":return t.stop()}}),t)}))),[e,u,j,c]),b=r.a.useCallback((function(e){l((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))}),[]),h=r.a.useCallback((function(e,t){t&&l((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e,t.toLocaleString("pl")))}))}),[]);return Object(O.jsx)(W.a,{open:e.open,onClose:j,"aria-label":"Okno do edycji rezerwacji",children:Object(O.jsxs)(ee.a,{title:"Edycja rezerwacji",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:d,onCancel:e.onClose,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(t=u.title)&&void 0!==t?t:e.reservation.title,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(n=u.description)&&void 0!==n?n:e.reservation.description,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{value:u.plannedStart?Object(H.b)(u.plannedStart):new Date(e.reservation.plannedStart),label:"Pocz\u0105tek",onChange:function(e){return h("plannedStart",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{value:u.plannedEnd?Object(H.b)(u.plannedEnd):new Date(e.reservation.plannedEnd),label:"Koniec",onChange:function(e){return h("plannedEnd",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(J.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(a=u.roomId)&&void 0!==a?a:e.reservation.room.id,label:"Sala",onChange:function(e){return l((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:i.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var re=n(315),ce=n(72),ie=n.n(ce);function se(e){var t,n,a,c,i=X().createReservation,s=Object($.b)().allRooms,u=Object(L.a)(),l=r.a.useState({color:"",from:new Date(e.reservation.plannedStart),to:new Date(e.reservation.plannedEnd)}),j=Object(N.a)(l,2),d=j[0],b=j[1],h=r.a.useState([]),p=Object(N.a)(h,2),x=p[0],m=p[1],v=r.a.useState({title:e.reservation.title,description:e.reservation.description,roomId:null!==(t=e.reservation.room.id)&&void 0!==t?t:0}),g=Object(N.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback((function(){e.onClose()}),[e]),C=r.a.useCallback(Object(M.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.map(function(){var e=Object(M.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(f.a)(Object(f.a)({},y),{},{plannedStart:t.from.toLocaleString("pl"),plannedEnd:t.to.toLocaleString("pl")}));case 2:return n=e.sent,t.color=n?"green":"red",e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,m(n);case 5:case"end":return e.stop()}}),e)}))),[y,x,i]),S=r.a.useCallback((function(e){m((function(t){return t.splice(e,1),Object.assign([],t)}))}),[]),z=r.a.useCallback((function(e,t){b((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e,t))}))}),[]),I=r.a.useCallback((function(){x.find((function(e){var t=e.from,n=e.to;return t===d.from||n===d.to}))?u("Daty powinny si\u0119 r\xf3\u017cni\u0107","error"):m((function(e){return e.push(Object(f.a)(Object(f.a)({},d),{},{color:""})),Object.assign([],e)}))}),[d,u,x]),E=r.a.useCallback((function(e){k((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))}),[]);return Object(O.jsx)(W.a,{open:e.open,onClose:w,"aria-label":"Okno do kopiowania rezerwacji",children:Object(O.jsxs)(ee.a,{title:"Kopiowanie rezerwacji",subtitle:"Skopiuj rezerwacj\u0119 dla wybranych przez siebie nowych dat.",onSubmit:C,onCancel:e.onClose,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(n=y.title)&&void 0!==n?n:e.reservation.title,onChange:E})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(a=y.description)&&void 0!==a?a:e.reservation.description,onChange:E})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:5,children:Object(O.jsx)(ne,{label:"Pocz\u0105tek",value:d.from,onChange:function(e){return z("from",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:5,children:Object(O.jsx)(ne,{label:"Koniec",value:d.to,onChange:function(e){return z("to",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:2,children:Object(O.jsx)(re.a,{size:"large",sx:{height:"100%",width:"100%"},variant:"outlined",onClick:I,children:"Dodaj"})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(T.a,{spacing:1,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5,bgcolor:"background.default",maxHeight:"200px",overflow:"auto"},children:[0===x.length&&Object(O.jsx)(U.a,{textAlign:"center",component:"p",children:"Brak dat"}),x.map((function(e,t){var n=e.color,a=e.from,r=e.to;return Object(O.jsxs)(o.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pl:"3px"},children:[Object(O.jsx)(U.a,{component:"p",sx:{color:n},children:Object(O.jsxs)(O.Fragment,{children:[a.toLocaleString("pl"),"\xa0-\xa0",r.toLocaleString("pl")]})}),Object(O.jsx)(_.a,{onClick:function(){return S(t)},children:Object(O.jsx)(ie.a,{})})]},t)}))]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(J.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(c=y.roomId)&&void 0!==c?c:e.reservation.room.id,label:"Sala",onChange:function(e){return k((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:s.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var oe=n(203),ue=n.n(oe),le=n(940),je=n(130),de=n.n(je),be=Object(le.a)("input")({position:"absolute",left:"-1000px",color:"transparent"});function fe(e){var t=r.a.useState(""),n=Object(N.a)(t,2),a=n[0],c=n[1],i=r.a.useState("primary"),s=Object(N.a)(i,2),u=s[0],l=s[1],j=r.a.useRef(null),d=function(){var t=Object(M.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.onScan(a);case 3:t.sent?(l("success"),setTimeout(b,2e3)):l("error"),c("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){e.onClose(),c(""),l("primary")};return Object(O.jsxs)(T.a,{onClick:function(){j.current&&console.log(j.current.focus())},component:"form",direction:"column",spacing:4,onSubmit:d,children:[Object(O.jsx)(ue.a,{sx:{fontSize:140,alignSelf:"center"},color:u}),Object(O.jsx)(be,{ref:j,autoFocus:!0,type:"text",value:a,onChange:function(e){return c(e.target.value)}}),Object(O.jsxs)(o.a,{component:"span",textAlign:"center",children:[Object(O.jsx)(U.a,{variant:"h5",color:"primary.dark",children:e.headline}),Object(O.jsx)(U.a,{variant:"body2",color:"text.secondary",mt:"5px",children:e.bodyText})]}),Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(de.a,{}),onClick:b,color:"error",children:"Zamknij"})]})}function he(e){var t=X().pingKeyForReservation,n=r.a.useCallback(function(){var n=Object(M.a)(D.a.mark((function n(a){return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t(e.reservationId,a));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(O.jsx)(W.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno do edycji rezerwacji",sx:{maxWidth:"400px"},children:Object(O.jsx)(fe,{headline:"Wczytaj klucz z tagiem NFC",bodyText:'Przy pomocy czytnika, wczytaj wydawany klucz. Aby opu\u015bci\u0107 to okno, naci\u015bnij "Zamknij"',onScan:n,onClose:e.onClose})})}var pe=n(450),Oe=n.n(pe),xe=n(449),me=n.n(xe),ve=n(131),ge=n.n(ve),ye=n(944),ke=n(478),we=n(942),Ce=n(448),Se=n.n(Ce);function ze(e){var t=r.a.useState(null),n=Object(N.a)(t,2),a=n[0],c=n[1],i=Boolean(a),s=r.a.useCallback((function(e){c(e.currentTarget)}),[]),o=function(){c(null)};return Object(O.jsxs)(k.a,{sx:e.sx,children:[Object(O.jsx)(_.a,{"aria-label":"more-options","aria-controls":"card-menu","aria-expanded":i?"true":void 0,"aria-haspopup":"true",onClick:s,children:Object(O.jsx)(Se.a,{})}),Object(O.jsx)(ke.a,{MenuListProps:{"aria-labelledby":"more-options"},anchorEl:a,id:"card-menu",open:i,onClose:o,PaperProps:{sx:{minWidth:200,maxWidth:"100%"}},children:e.options.map((function(e,t){return Object(O.jsxs)(Y.a,{onClick:function(){e.action(),o()},children:[Object(O.jsx)(we.a,{children:e.icon}),Object(O.jsx)(U.a,{children:e.label})]},t)}))})]})}var Ie=n(971),Ee=n(973),Pe=n(974),Te=n(958),Re=n(943),Ae=n(45);function De(e){var t=e.user;return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:C.b.toUser(t.id),children:[Object(O.jsx)(Pe.a,{children:Object(O.jsx)(Te.a,{src:Ae.a.getLink(t.image),alt:"".concat(t.name," ").concat(t.surname)})}),Object(O.jsx)(Re.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:t.email})]})}function Me(e){var t=e.room,n=Object($.b)().getRoomLink,a=r.a.useMemo((function(){return n(t.id)}),[t.id,n]);return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:a,children:[Object(O.jsx)(Pe.a,{children:Object(O.jsx)(Te.a,{src:Ae.a.getLink(t.image),alt:"zdj\u0119cie sali ".concat(t.name)})}),Object(O.jsx)(Re.a,{primary:"Sala ".concat(t.name),secondary:t.roomType})]})}var Ne={owner:!1,accessAdmin:!1,premisesAdmin:!1,keysAdmin:!1,reservationsAdmin:!1,reservationsAbility:!1,logsAdmin:!1,statsViewer:!1,myId:function(e){return!1}};function Be(){var e=Object(S.a)().user;return r.a.useMemo((function(){if(!e)return Ne;var t=e.access,n=t.owner,a=t.accessAdmin,r=t.premisesAdmin,c=t.keysAdmin,i=t.reservationsAdmin,s=t.reservationsAbility,o=t.logsAdmin,u=t.statsViewer;return{owner:n,accessAdmin:n||a,premisesAdmin:n||r,keysAdmin:n||c,reservationsAdmin:n||i,reservationsAbility:n||s,logsAdmin:n||o,statsViewer:n||u,myId:function(t){return n||e.id===t}}}),[e])}var Fe=n(959);function Le(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)(U.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(O.jsx)(U.a,{variant:"body1",color:"text.secondary",textAlign:"left",component:"div",children:Object(O.jsx)(T.a,{direction:"row",alignItems:"center",flexWrap:"wrap",rowGap:1,columnGap:1,children:e.children.map((function(e){var t=e.label,n=e.value;return Object(O.jsxs)("div",{children:[t,":\xa0",Object(O.jsx)(Fe.a,{label:n})]},t)}))})})]})}function We(e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(U.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(O.jsx)(U.a,{variant:"body1",color:"text.secondary",textAlign:"justify",component:"p",children:e.children})]})}function Ue(e){var t=Be(),n=t.reservationsAdmin,a=t.keysAdmin,c=t.myId,i=t.logsAdmin,s=X().deleteReservation,o=Object(w.g)(),u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useState(!1),f=Object(N.a)(b,2),h=f[0],p=f[1],x=r.a.useState(!1),m=Object(N.a)(x,2),v=m[0],g=m[1],y=r.a.useState(!1),k=Object(N.a)(y,2),S=k[0],z=k[1],I=r.a.useCallback(Object(M.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e.reservation.id);case 2:if(!t.sent){t.next=4;break}d(!1);case 4:case"end":return t.stop()}}),t)}))),[e.reservation.id,s]),E=r.a.useMemo((function(){var t=[{icon:Object(O.jsx)(me.a,{color:"primary"}),label:"Kopiuj",action:function(){return z(!0)}}];return a&&t.unshift({icon:Object(O.jsx)(ue.a,{color:"primary"}),label:"Odbij klucz",action:function(){return g(!0)}}),i&&t.push({icon:Object(O.jsx)(ge.a,{color:"primary"}),label:"Logs Explorer",action:function(){return o.push("".concat(C.a.LOGS,"?endpoint=%/reservations/").concat(e.reservation.id))}}),(c(e.reservation.user.id)||n)&&t.push({icon:Object(O.jsx)(ye.a,{color:"primary"}),label:"Edytuj",action:function(){return p(!0)}},{icon:Object(O.jsx)(ie.a,{color:"error"}),label:"Usu\u0144",action:function(){return d(!0)}}),t}),[c,a,i,e.reservation.user.id,e.reservation.id,n,o]);return Object(O.jsxs)(O.Fragment,{children:[(c(e.reservation.user.id)||n)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{open:j,onClose:function(){return d(!1)},onSuccess:I}),Object(O.jsx)(ae,{open:h,onClose:function(){return p(!1)},reservation:e.reservation})]}),Object(O.jsx)(se,{open:S,onClose:function(){return z(!1)},reservation:e.reservation}),a&&Object(O.jsx)(he,{open:v,onClose:function(){return g(!1)},reservationId:e.reservation.id}),Object(O.jsx)(W.a,{open:e.open,onClose:e.onClose,"aria-label":"Widok Rezerwacji",sx:{maxWidth:"800px",mt:"4vw"},children:Object(O.jsxs)(P.a,{container:!0,spacing:"15px",children:[Object(O.jsx)(P.a,{item:!0,xs:10,sm:11,children:Object(O.jsxs)(T.a,{spacing:4,alignItems:"stretch",children:[Object(O.jsx)(U.a,{component:"h2",variant:"h4",children:e.reservation.title}),Object(O.jsx)(Le,{title:"Planowany czas:",children:[{label:"Od",value:Object(H.a)(e.reservation.plannedStart)},{label:"do",value:Object(H.a)(e.reservation.plannedEnd)}]})]})}),Object(O.jsx)(P.a,{item:!0,xs:2,sm:1,children:Object(O.jsxs)(T.a,{alignItems:"flex-end",direction:"column",spacing:3,children:[Object(O.jsx)(_.a,{onClick:e.onClose,children:Object(O.jsx)(Oe.a,{})}),Object(O.jsx)(ze,{options:E,sx:{justifySelf:"right"}}),a&&Object(O.jsx)(_.a,{onClick:function(){return g(!0)},title:"Odbij klucz","aria-label":"Odbij klucz",color:"success",children:Object(O.jsx)(ue.a,{})})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(T.a,{spacing:4,alignItems:"stretch",children:[Object(O.jsx)(Le,{title:"Faktyczny czas rezerwacji:",children:[{label:"Pocz\u0105tek",value:e.reservation.actualStart?Object(H.a)(e.reservation.actualStart):"Brak"},{label:"Koniec",value:e.reservation.actualEnd?Object(H.a)(e.reservation.actualEnd):"Brak"}]}),Object(O.jsx)(We,{title:"Opis:",children:e.reservation.description}),Object(O.jsxs)(q.a,{component:"div",children:[Object(O.jsx)(De,{user:e.reservation.user}),Object(O.jsx)(Me,{room:e.reservation.room})]})]})})]})})]})}var _e=r.a.createContext({showReservation:function(e){},reservation:null});function qe(e){var t,n=X().reservations,a=r.a.useState(!0),c=Object(N.a)(a,2),i=c[0],s=c[1],o=r.a.useState(null),u=Object(N.a)(o,2),l=u[0],j=u[1],d=null!==(t=r.a.useMemo((function(){if(l)return n.find((function(e){return e.id===l}))}),[n,l]))&&void 0!==t?t:null,b=r.a.useCallback((function(e){j(e),s(!0)}),[]);return Object(O.jsxs)(_e.Provider,{value:{reservation:d,showReservation:b},children:[e.children,d&&Object(O.jsx)(Ue,{reservation:d,open:i,onClose:function(){return s(!1)}})]})}var He=n(161),Ke=n(123),Ge=r.a.createContext(null);function Ze(e){var t=Object(R.b)(),n=t.queryParams,a=t.setQueryParams,c=Object(L.a)(),i=Object(He.a)().getRoomLink,s=Object(F.b)(),o=Object(S.a)().user,u=Object(w.i)(),l=Object(Ke.a)(3e4),j=r.a.useState(),d=Object(N.a)(j,2),b=d[0],h=d[1],p=r.a.useCallback(Object(M.a)(D.a.mark((function e(){var t,r,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u,0===Object.keys(u).length&&window.location.pathname===C.a.HOME&&(t={userId:"me"}),e.next=5,B.a.getReservations(t,n);case 5:(r=e.sent).pagination&&a((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=r.pagination)||void 0===t?void 0:t.pagesCount})})),h(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c(null!==(i=e.t0.description)&&void 0!==i?i:e.t0.message,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[n.currentPage,n.itemsOnPage,n.from,n.search,a,u,c,o]);r.a.useEffect((function(){p()}),[p,l]);var x=r.a.useCallback((function(){return a((function(e){return Object.assign({},e)}))}),[a]),m=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,a=b.find((function(e){return e.id===t}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,B.a.pingKey(t,n);case 8:r=e.sent,h((function(e){return e&&e.forEach((function(e){e.id===t&&(e.actualStart?e.actualEnd=(new Date).toString():e.actualStart=(new Date).toString())})),Object.assign([],e)})),s&&s.setOccupied(!a.room.occupied),(null===r||void 0===r?void 0:r.data)&&c(r.data.toString(),"success"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),c(e.t0.description,"error"),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,s,c]),v=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.createOne(t);case 3:x(),c("Rezerwacja utworzona prawid\u0142owo!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[c,x]),g=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.remove(t);case 3:h((function(e){return e&&e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c]),y=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.update(t,n);case 3:h((function(e){return e&&e.map((function(e){return e.id===t&&(["plannedStart","plannedEnd"].forEach((function(t){t in n&&(e[t]=Object(H.b)(n[t]).toUTCString())})),["description","title"].forEach((function(t){t in n&&(e[t]=n[t])}))),e}))})),"roomId"in n?n.roomId&&c("Rezerwacja zaktualizowana i przeniesiona!","success",(function(){return Object(O.jsx)(w.a,{to:i(Number(n.roomId))})})):c("Rezerwacja zaktualizowana!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,c]);return Object(O.jsx)(Ge.Provider,{value:{reservations:b,updateReservation:y,deleteReservation:g,createReservation:v,pingKeyForReservation:m},children:Object(O.jsx)(qe,{children:e.children})})}var Ve=n(232),Qe=r.a.memo((function(e){return Object(O.jsx)(Te.a,{alt:"u\u017cytkownik",src:Ae.a.getLink(e.img)})}));function Je(e){var t,n=e.data,a=e.onClick,r=B.a.resolveStatus(n),c=r.message,i=r.color;return Object(O.jsxs)(Ie.a,{component:"li",button:!0,sx:{mb:"2px",bgcolor:i,"&:hover, &:focus":{bgcolor:i,filter:"brightness(97%)"}},onClick:a,children:[Object(O.jsx)(Pe.a,{children:Object(O.jsx)(Ee.a,{href:C.b.toUser(n.user.id),children:Object(O.jsx)(Qe,{img:n.user.image})})}),Object(O.jsx)(Re.a,{primary:n.title,secondary:Object(H.a)(null!==(t=n.actualStart)&&void 0!==t?t:n.plannedStart)+" - "+c})]})}function Ye(){var e=r.a.useContext(_e).showReservation,t=X().reservations,n=r.a.useMemo((function(){return null===t||void 0===t?void 0:t.map((function(t){return Object(O.jsx)(Je,{data:t,onClick:function(){return e(t.id)}},t.id)}))}),[t,e]);return t?Object(O.jsx)(q.a,{"aria-label":"lista rezerwacji",children:0===t.length?Object(O.jsx)(Ie.a,{children:Object(O.jsx)(Re.a,{primary:"Brak rezerwacji spe\u0142niaj\u0105cych kryteria."})}):n}):Object(O.jsx)(z.a,{})}var $e=n(964),Xe=n(245),et=n(233),tt=n(247),nt=n.n(tt);function at(e){var t,n=Object(L.a)(),a=Object($.b)().allRooms,c=r.a.useState({start:new Date(Date.now()+36e5),end:new Date(Date.now()+72e5)}),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState({title:"",description:"",plannedStart:"",plannedEnd:"",roomId:null!==(t=e.roomId)&&void 0!==t?t:0}),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback((function(e){d((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))}),[]),h=r.a.useCallback(Object(M.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j.plannedStart=s.start.toLocaleString("pl"),j.plannedEnd=s.end.toLocaleString("pl"),t.prev=2,t.next=5,B.a.createOne(j);case 5:n("Rezerwacja utworzona!","success"),e.onCancel(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(t.t0.description,"error");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),[j,n,e,s.start,s.end]),p=r.a.useCallback((function(e,t){o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e,t))}))}),[]);return Object(O.jsxs)(ee.a,{title:"Tworzenie rezerwacji",subtitle:"Stw\xf3rz rezerwacj\u0119 w wybranym przez siebie pokoju.",onSubmit:h,onCancel:e.onCancel,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{title:"Tytu\u0142 rezerwacji",inputProps:{title:"Tytu\u0142 rezerwacji"},autoFocus:!0,required:!0,fullWidth:!0,maxRows:4,label:"Tytu\u0142",id:"outlined-multiline-flexible",name:"title",value:j.title,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,multiline:!0,maxRows:20,label:"Opis",id:"outlined-multiline-flexible",name:"description",value:j.description,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{label:"Pocz\u0105tek",value:s.start,onChange:function(e){return p("start",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{label:"Koniec",value:s.end,onChange:function(e){return p("end",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(J.a,{required:!0,labelId:"wybierz-budynek",name:"buildingId",value:j.roomId,label:"Budynek",onChange:function(e){return d((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:a.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})}function rt(e){return Object(O.jsx)(W.a,{open:e.open,"aria-label":"Okno do tworzenia rezerwacji",onClose:e.onClose,children:Object(O.jsx)(at,{roomId:e.roomId,onCancel:e.onClose})})}var ct=r.a.memo(rt),it=n(75),st=[{name:"Dzi\u015b",value:"today"},{name:"Ten tydzie\u0144",value:"this week"},{name:"Od wczoraj",value:"yesterday"}];function ot(){var e,t,n,a=Be().reservationsAbility,c=Object(R.b)(),i=c.setQueryParams,s=c.queryParams,u=Object(w.i)(),l=r.a.useState(!1),j=Object(N.a)(l,2),d=j[0],b=j[1],h=r.a.useState(new Date(Object(H.c)(s.from)?null!==(e=s.from)&&void 0!==e?e:"xxx":Date.now())),p=Object(N.a)(h,2),x=p[0],m=p[1],v=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{from:e})}))}),[i]),g=r.a.useCallback((function(e){e.preventDefault(),i((function(e){return Object(f.a)(Object(f.a)({},e),{},{from:x.toISOString()})}))}),[x,i]),y=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{search:e.target.value})}))}),[i]);return Object(O.jsxs)(O.Fragment,{children:[a&&Object(O.jsx)(ct,{open:d,onClose:function(){return b(!1)},roomId:"roomId"in u?Number(u.roomId):void 0}),Object(O.jsxs)(P.a,{container:!0,component:"form",onSubmit:g,spacing:2,alignItems:"center",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:12,children:Object(O.jsxs)(it.a,{text:"Mo\u017cesz wyszukiwa\u0107 rezerwacje wed\u0142ug daty lub u\u017cywaj\u0105c s\u0142\xf3w kluczowych",priority:2,children:[Object(O.jsx)(Xe.a,{onChange:v,buttons:st,value:Object(H.c)(s.from)?"":null!==(t=null===s||void 0===s?void 0:s.from)&&void 0!==t?t:st[0].value}),Object(O.jsxs)(o.a,{display:"inline-flex",children:[Object(O.jsx)($e.a,{label:"Od daty",inputFormat:"yyyy-MM-dd",value:x,onChange:function(e){return e&&m(e)},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)(Object(f.a)({},e),{},{size:"small"}))}}),Object(O.jsx)(re.a,{variant:(null===s||void 0===s?void 0:s.from)===x.toISOString()?"contained":"outlined",type:"submit",sx:{ml:1},children:"OK"})]})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(et.a,{name:"search",label:"wyszukaj",value:null!==(n=s.search)&&void 0!==n?n:"",onChange:y})}),a&&Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(it.a,{text:"Kliknij ten przycisk, aby stworzy\u0107 rezerwacj\u0119!",priority:10,children:Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(nt.a,{}),onClick:function(){return b(!0)},children:"Stw\xf3rz rezerwacj\u0119"})})})]})]})}var ut=r.a.memo(ot);function lt(){return Object(O.jsx)(R.a,{name:"reservations-query-params",default:{itemsOnPage:5,currentPage:1,from:"today"},children:Object(O.jsx)(Ze,{children:Object(O.jsxs)(T.a,{rowGap:3,children:[Object(O.jsx)(ut,{}),Object(O.jsx)(Ye,{}),Object(O.jsx)(Ve.a,{})]})})})}var jt=r.a.memo(lt),dt=n(109),bt=n(126),ft=n(975),ht=n(976),pt=n(977),Ot=n(978),xt=Object(le.a)("iframe")({width:"100%",height:"50vh",maxHeight:"400px",minHeight:"300px"});function mt(e){var t=e.address,n=e.sx,a=r.a.useMemo((function(){var e=t.street,n=t.number,a=t.town,r=t.country,c=new URL("https://maps.google.com/maps"),i=new URLSearchParams({q:"".concat(e+" "+n+" "+a+" "+r),ie:"UTF8",z:"14",iwloc:"",output:"embed"});return c.search=i.toString(),c.toString()}),[t]);return Object(O.jsx)(o.a,{children:Object(O.jsx)(xt,{src:a,frameBorder:"0",sx:Object(f.a)({},n)})})}var vt=n(132),gt=n.n(vt);function yt(e){var t,n,a,c,i,s=e.open,o=e.onClose,u=Object(bt.b)(),l=u.address,j=u.updateAddress,d=r.a.useState({}),b=Object(N.a)(d,2),h=b[0],p=b[1],x=r.a.useCallback((function(){o(),p({})}),[o]),m=r.a.useCallback((function(e){p((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))}),[]),v=r.a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(h);case 2:if(!e.sent){e.next=4;break}x();case 4:case"end":return e.stop()}}),e)}))),[h,x,j]);return Object(O.jsx)(W.a,{open:s,onClose:o,"aria-label":"Okno do edycji budynku",children:Object(O.jsxs)(ee.a,{title:"Edycja adresu",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci adresu i zatwierd\u017a zmiany.",onSubmit:v,onCancel:o,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:null!==(t=h.country)&&void 0!==t?t:l.country,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{autoFocus:!0,required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",value:null!==(n=h.town)&&void 0!==n?n:l.town,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:null!==(a=h.postalCode)&&void 0!==a?a:l.postalCode,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:8,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:null!==(c=h.street)&&void 0!==c?c:l.street,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:4,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:null!==(i=h.number)&&void 0!==i?i:l.number,onChange:m})})]})})}var kt=n(963);function wt(e){var t=e.open,n=e.onClose,a=e.handleCreateBuilding,c=r.a.useState({name:"",openTime:new Date(0,0,0,7,0).toString(),closeTime:new Date(0,0,0,21,0).toString()}),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(f.a)(Object(f.a)({},s),{},{closeTime:H.d.format(new Date(s.closeTime)),openTime:H.d.format(new Date(s.openTime))}));case 2:e.sent&&n();case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(O.jsx)(W.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia budynku",children:Object(O.jsxs)(ee.a,{title:"Dodaj nowy budynek!",subtitle:"Wype\u0142nij dane nowego budynku i kliknij zatwierd\u017a.",onSubmit:l,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(kt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:s.openTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{openTime:e})}))},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(kt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:s.closeTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{closeTime:e})}))},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})})]})})}var Ct=n(113);function St(e){var t=e.open,n=e.onClose,a=Object(L.a)(),c=Object($.b)().reloadMap,i=r.a.useState({country:"Polska",town:"",street:"",number:"",postalCode:""}),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback((function(e){u((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))}),[]),j=r.a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ct.a.create(o);case 3:c(),a("Adres zosta\u0142 dodany","success"),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0.description,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[o,a,n,c]);return Object(O.jsx)(W.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia adresu",children:Object(O.jsxs)(ee.a,{title:"Dodaj nowy adres!",subtitle:"Wype\u0142nij dane nowego adresu i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:o.country,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",autoFocus:!0,value:o.town,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:o.postalCode,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:8,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:o.street,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:4,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:o.number,onChange:l})})]})})}var zt=n(125);function It(){var e=Be().premisesAdmin,t=Object(bt.b)(),n=t.address,a=t.deleteAddress,c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return d(!0)},icon:Object(O.jsx)(gt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}]}),[]);return Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(O.jsx)(yt,{open:j,onClose:function(){return d(!1)}})]}),Object(O.jsxs)(ft.a,{elevation:0,children:[Object(O.jsx)(ht.a,{action:e&&Object(O.jsx)(ze,{options:b}),title:Object(O.jsxs)(O.Fragment,{children:[n.country,", ",n.town]}),subheader:Object(O.jsxs)(O.Fragment,{children:[n.street," ",n.number]})}),Object(O.jsx)(pt.a,{component:"div",children:Object(O.jsx)(mt,{address:n})}),Object(O.jsxs)(Ot.a,{children:[Object(O.jsxs)(U.a,{component:"p",children:["ul. ",n.street," ",n.number,Object(O.jsx)("br",{}),n.postalCode," ",n.town,", ",Object(O.jsx)("br",{}),n.country]}),Object(O.jsx)("br",{}),Object(O.jsx)(zt.a,{model:n})]})]})]})}var Et=n(135),Pt=n(234),Tt=n.n(Pt);function Rt(e){var t=Be().premisesAdmin;return Object(O.jsxs)(k.a,{children:[t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("br",{}),Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(Tt.a,{color:"primary"}),onClick:e.onAddItem,children:"Dodaj element"})]}),Object(O.jsx)(q.a,{sx:{minHeight:"100px",maxHeight:"270px",overflow:"auto"},children:e.children})]})}var At=n(339),Dt=n.n(At);function Mt(e){return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:e.link,sx:{py:"2px"},children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(Dt.a,{})}),Object(O.jsx)(Re.a,{primary:e.primary})]})}function Nt(e){return Object(O.jsx)(Ie.a,{sx:{py:"2px"},children:Object(O.jsx)(Re.a,{primary:e.text})})}var Bt=r.a.memo(Mt),Ft=n(92);function Lt(){var e=Object(bt.b)().getBuildingsInAddress,t=Object($.b)().reloadMap,n=Object(L.a)(),a=Object(w.i)(),c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(M.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Et.a.create(a,r);case 3:return b(),t(),n("Nowy Budynek utworzony!","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,b,a]),h=r.a.useMemo((function(){return j&&j.length>0?null===j||void 0===j?void 0:j.map((function(e){return Object(O.jsx)(Bt,{primary:"Budynek ".concat(e.name),link:"./".concat(e.address,"/buildings/").concat(e.id)},e.id)})):Object(O.jsx)(Nt,{text:"Aktualnie brak budynk\xf3w dla adresu."})}),[j]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(wt,{open:s,onClose:function(){return o(!1)},handleCreateBuilding:f}),Object(O.jsx)(it.a,{text:"To jest lista budynk\xf3w pod tym adresem.",priority:10,children:Object(O.jsx)(Ft.a,{title:"Budynki pod adresem",children:Object(O.jsx)(Rt,{onAddItem:function(){return o(!0)},children:h})})}),Object(O.jsx)("br",{})]})}var Wt=r.a.memo(Lt),Ut=r.a.lazy((function(){return n.e(11).then(n.bind(null,1017))})),_t=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Ut,{})})};function qt(){var e=Be().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(jt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(_t,{})}),t}),[e]);return Object(O.jsx)(bt.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(It,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Wt,{})})]})]})})}var Ht=r.a.memo(qt),Kt=n(127),Gt=n(7),Zt=n(167),Vt=n.n(Zt),Qt=Object(Gt.a)("input")({display:"none"}),Jt=Object(Gt.a)("img")({width:"fill-available",maxHeight:"350px"});function Yt(e){var t=Object(L.a)(),n=Object(w.h)(),a=Object(w.i)(),c=r.a.useState(),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback(function(){var r=Object(M.a)(D.a.mark((function r(c){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),s){r.next=4;break}return t("Najpierw za\u0142aduj nowy obraz","warning"),r.abrupt("return");case 4:return r.prev=4,r.next=7,Ae.a.upload(a,s);case 7:e.onUpload&&e.onUpload(),t("Obraz zosta\u0142 zmieniony","success",(function(){return Object(O.jsx)(w.a,{to:n.pathname})})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),t(r.t0.description,"error");case 14:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(e){return r.apply(this,arguments)}}(),[s,e,t,n,a]),l=r.a.useCallback((function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];o(t)}}),[]),j=r.a.useCallback(Object(M.a)(D.a.mark((function r(){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ae.a.remove(a);case 3:e.onDelete&&e.onDelete(),t("Przywr\xf3cono domy\u015blny obraz, za\u0142aduj ponownie aby zobaczy\u0107 rezultat.","success",(function(){return Object(O.jsx)(w.a,{to:n.pathname})})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(r.t0.description,"error");case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),[e,t,n,a]);return Object(O.jsxs)(P.a,{container:!0,component:"form",onSubmit:u,direction:"row",alignItems:"stretch",spacing:2,children:[Object(O.jsx)(P.a,{item:!0,xs:12,sm:9,children:Object(O.jsx)(Jt,{src:s?URL.createObjectURL(s):Ae.a.getLink(e.image),alt:"nowy obraz"})}),Object(O.jsxs)(P.a,{item:!0,xs:12,sm:3,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[Object(O.jsxs)("label",{htmlFor:"upload-obrazu",children:[Object(O.jsx)(Qt,{accept:"*.(jpg|png)",id:"upload-obrazu",type:"file",onChange:l}),Object(O.jsx)(re.a,{color:"primary",variant:"outlined",component:"span",children:"Wybierz zdj\u0119cie"})]}),Object(O.jsx)(re.a,{color:"error",startIcon:Object(O.jsx)(ie.a,{}),onClick:j,children:"Usu\u0144"}),Object(O.jsx)(re.a,{type:"submit",color:"success",startIcon:Object(O.jsx)(Vt.a,{}),children:"Zapisz"})]})]})}var $t,Xt=n(945);function en(e){var t=e.split(":"),n=Object(N.a)(t,2),a=n[0],r=n[1];return new Date(0,0,0,Number(a),Number(r))}function tn(e){var t,n,a,c,i=e.open,s=e.onClose,o=Object($.b)().allAddresses,u=Object(Kt.b)(),l=u.updateBuilding,j=u.building,d=r.a.useState({}),b=Object(N.a)(d,2),h=b[0],p=b[1],x=r.a.useCallback((function(){s(),p({})}),[s]),m=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);p((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]),v=r.a.useCallback((function(e,t){p((function(n){return n[e]=H.d.format(t),Object.assign({},n)}))}),[]),g=r.a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(h);case 2:if(!e.sent){e.next=4;break}x();case 4:case"end":return e.stop()}}),e)}))),[h,x,l]),y=r.a.useCallback((function(e){var t=e.target.value;"addressId"===e.target.name&&(t=Number(t)),e.target&&p((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]);return Object(O.jsx)(W.a,{open:i,onClose:s,"aria-label":"Okno edycji budynku",children:Object(O.jsxs)(T.a,{spacing:3,children:[Object(O.jsx)(Yt,{image:j.image}),Object(O.jsx)(Xt.a,{}),Object(O.jsxs)(ee.a,{title:"Edycja budynku",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci budynku i zatwierd\u017a zmiany.",onSubmit:g,onCancel:s,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=h.name)&&void 0!==t?t:j.name,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(kt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:en(null!==(n=h.openTime)&&void 0!==n?n:j.openTime),onChange:function(e){return v("openTime",e)},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(kt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:en(null!==(a=h.closeTime)&&void 0!==a?a:j.closeTime),onChange:function(e){return v("closeTime",e)},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-adres",children:"Adres"}),Object(O.jsx)(J.a,{labelId:"wybierz-adres",name:"addressId",value:null!==(c=h.addressId)&&void 0!==c?c:j.address.id,label:"Adres",onChange:y,children:o.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:[t," "]},t)}))})]})})]})]})})}function nn(e){var t=e.open,n=e.onClose,a=e.handleCreateRoom,c=r.a.useState({name:"",roomType:$t.LECTURE,seatsCount:50,floor:0}),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]),j=r.a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(s);case 2:if(!e.sent){e.next=4;break}n();case 4:case"end":return e.stop()}}),e)}))),[s,a,n]);return Object(O.jsx)(W.a,{open:t,onClose:n,"aria-label":"Okno edycji budynku",children:Object(O.jsxs)(ee.a,{title:"Dodaj now\u0105 sal\u0119",subtitle:"Wype\u0142nij dane nowej sali i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"room-type",children:"Typ Sali"}),Object(O.jsx)(J.a,{required:!0,labelId:"room-type",id:"roomType",value:s.roomType,name:"roomType",label:"Typ Sali",onChange:l,children:Object.values($t).map((function(e){return Object(O.jsx)(Y.a,{value:e,children:e},e)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:s.seatsCount,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:s.floor,onChange:u})})]})})}!function(e){e.LABORATORY="Sala laboratoryjna",e.CONFERENCE="Sala konferencyjna",e.LECTURE="Sala wyk\u0142adowa"}($t||($t={}));var an,rn=n(453),cn=n.n(rn),sn=n(454),on=n.n(sn),un=n(79);function ln(e){var t=r.a.useState(!1),n=Object(N.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(un.a.isFavourite(e.data))}),[e.data]);var i=r.a.useCallback((function(){a?un.a.removeFavourite(e.data):un.a.addFavourite(e.data),c((function(e){return!e}))}),[a,e.data]);return Object(O.jsx)(it.a,{text:"Kliknij aby doda\u0107 do ulubionych",priority:0,children:Object(O.jsx)(_.a,{sx:{display:"inline"},onClick:i,color:"warning",children:a?Object(O.jsx)(cn.a,{}):Object(O.jsx)(on.a,{})})})}function jn(){var e=Be().premisesAdmin,t=Object(Kt.b)(),n=t.building,a=t.deleteBuilding,c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return d(!0)},icon:Object(O.jsx)(gt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}]}),[]);return Boolean(n)?Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(O.jsx)(tn,{open:j,onClose:function(){return d(!1)}})]}),Object(O.jsxs)(ft.a,{elevation:0,children:[Object(O.jsx)(ht.a,{action:e&&Object(O.jsx)(ze,{options:b}),title:Object(O.jsxs)(O.Fragment,{children:["Budynek ",n.name,Object(O.jsx)(ln,{data:{id:n.id,name:n.name,type:an.Building,addressId:n.address.id}})]}),subheader:Object(O.jsxs)(O.Fragment,{children:[n.openTime," - ",n.closeTime]})}),Object(O.jsx)(pt.a,{component:"img",height:"350",image:Ae.a.getLink(n.image),alt:n.name}),Object(O.jsxs)(Ot.a,{children:[Object(O.jsxs)(Ee.a,{href:C.b.toAddress(n.address.id),children:[n.address.town,",\xa0",n.address.street,"\xa0",n.address.number]}),Object(O.jsx)("br",{}),Object(O.jsx)(zt.a,{model:n})]})]})]}):null}!function(e){e.Building="building-item",e.Room="room-item"}(an||(an={}));var dn=n(117);function bn(){var e=Object(Kt.b)().getRoomsInBuilding,t=Object($.b)().reloadMap,n=Object(w.i)(),a=Object(L.a)(),c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(M.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dn.a.create(n,r);case 3:return a("Nowa sala utworzona!","success"),b(),t(),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),a(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,t,b,n]),h=r.a.useMemo((function(){return j&&j.length>0?null===j||void 0===j?void 0:j.map((function(e){return Object(O.jsx)(Bt,{primary:"Sala ".concat(e.name),link:"./".concat(e.building,"/rooms/").concat(e.id)},e.id)})):Object(O.jsx)(Nt,{text:"Aktualnie brak sal dla budynku."})}),[j]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(nn,{handleCreateRoom:f,open:s,onClose:function(){return o(!1)}}),Object(O.jsx)(it.a,{text:"Lista Sal znajduj\u0105cych si\u0119 w wybranym budynku.",priority:1,children:Object(O.jsx)(Ft.a,{title:"Sale w budynku",children:Object(O.jsx)(Rt,{onAddItem:function(){return o(!0)},children:h})})}),Object(O.jsx)("br",{})]})}var fn=r.a.memo(bn),hn=r.a.lazy((function(){return n.e(0).then(n.bind(null,1018))})),pn=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(hn,{})})};function On(){var e=Be().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(jt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(pn,{})}),t}),[e]);return Object(O.jsx)(Kt.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(jn,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(fn,{})})]})]})})}var xn=r.a.memo(On),mn=n(455),vn=n.n(mn);function gn(e){switch(e.type){case an.Building:var t=e,n=t.addressId,a=t.id,r=t.name;return Object(O.jsx)(Re.a,{primary:Object(O.jsxs)(Ee.a,{href:C.b.toBuilding(n,a),children:["Budynek ",r]})},r+a);case an.Room:var c=e,i=c.addressId,s=c.buildingId,o=c.id,u=c.name;return Object(O.jsx)(Re.a,{primary:Object(O.jsxs)(Ee.a,{href:C.b.toRoom(i,s,o),children:["Sala ",u]})},u+o);default:return null}}function yn(){var e=Object(S.a)().user,t=r.a.useState(),n=Object(N.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(un.a.favourites)}),[e]);var i=r.a.useCallback((function(e){un.a.removeFavourite(e),c(un.a.favourites)}),[]);return Object(O.jsx)(Ft.a,{title:"Ulubione",children:Object(O.jsxs)(q.a,{sx:{minHeight:"160px"},children:[null===a||void 0===a?void 0:a.map((function(e){return Object(O.jsxs)(Ie.a,{disablePadding:!0,children:[gn(e),Object(O.jsx)(_.a,{title:"usu\u0144 z ulubionych","aria-label":"usu\u0144 z ulubionych",onClick:function(){return i(e)},size:"small",children:Object(O.jsx)(vn.a,{fontSize:"small"})})]},"".concat(e.name,"-").concat(e.id))})),0===(null===a||void 0===a?void 0:a.length)&&Object(O.jsx)(Re.a,{color:"text.secondary",primary:"Brak ulubionych"})]})})}var kn=r.a.memo(yn),wn=n(69);function Cn(){var e,t=Object(L.a)(),n=r.a.useState(),a=Object(N.a)(n,2),c=a[0],i=a[1];r.a.useEffect((function(){i(un.a.notes)}),[]);var s=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c){e.next=3;break}return e.abrupt("return");case 3:try{un.a.notes=c,t("Notatki zosta\u0142y zapisane","success"),i(void 0)}catch(a){t(a.description,"error")}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),o=r.a.useCallback(function(){var e=Object(M.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(O.jsx)(Ft.a,{title:"Notatnik",children:Object(O.jsxs)(k.a,{component:"form",onSubmit:s,sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:[Object(O.jsx)(wn.c,{"aria-label":"twoje notatki",title:"twoje notatki",multiline:!0,minRows:4,maxRows:10,name:"search",value:null!==(e=null!==c&&void 0!==c?c:un.a.notes)&&void 0!==e?e:"",onChange:o,placeholder:"Twoje notatki",sx:{width:"100%",height:"100%",p:1,bgcolor:"background.default"},inputProps:{"aria-label":"Twoje notatki"}}),Object(O.jsx)(re.a,{title:"Zapisz notatki","aria-label":"Zapisz notatki",sx:{mr:"0px",ml:"auto"},startIcon:Object(O.jsx)(Vt.a,{}),type:"submit",children:"Zapisz"})]})})}var Sn=r.a.memo(Cn);function zn(){return Object(O.jsx)(Ft.a,{title:"Rezerwacje",children:Object(O.jsx)(jt,{})})}function In(){return Object(O.jsxs)(P.a,{container:!0,spacing:2,children:[Object(O.jsx)(P.a,{item:!0,xs:12,lg:8,children:Object(O.jsx)(zn,{})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,xs:12,lg:4,alignContent:"flex-start",children:[Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,lg:12,children:Object(O.jsx)(Sn,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,lg:12,children:Object(O.jsx)(kn,{})})]})]})}var En=r.a.lazy((function(){return n.e(12).then(n.bind(null,1022))}));function Pn(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(En,{})})}var Tn=n(980),Rn=n(981),An=n(982),Dn=n(983),Mn=n(984),Nn=n(985),Bn=n(979),Fn=n(884);function Ln(e){var t,n,r,c,i,s,o=e.open,u=e.onClose,l=Object(F.b)(),j=l.room,d=l.updateRoom,b=Object($.b)().allBuildings,h=a.useState({}),p=Object(N.a)(h,2),x=p[0],m=p[1],v=a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"name":t=String(t);break;case"blocked":t=!e.target.checked;break;default:t=Number(t)}m((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]),g=a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&m((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[]),y=a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(x);case 2:if(!e.sent){e.next=4;break}u();case 4:case"end":return e.stop()}}),e)}))),[x,d,u]);return Object(O.jsx)(W.a,{open:o,onClose:u,"aria-label":"Okno usuwania obiektu",sx:{maxWidth:"450px"},children:Object(O.jsxs)(T.a,{spacing:2,children:[Object(O.jsx)(Yt,{image:j.image}),Object(O.jsx)(Xt.a,{}),Object(O.jsxs)(ee.a,{title:"Edycja sali",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:y,onCancel:u,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=x.name)&&void 0!==t?t:j.name,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"room-type",children:"Typ Sali"}),Object(O.jsx)(J.a,{labelId:"room-type",id:"roomType",value:null!==(n=x.roomType)&&void 0!==n?n:j.roomType,name:"roomType",label:"Typ Sali",onChange:g,children:Object.values($t).map((function(e){return Object(O.jsx)(Y.a,{value:e,children:e},e)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:null!==(r=x.seatsCount)&&void 0!==r?r:j.seatsCount,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:null!==(c=x.floor)&&void 0!==c?c:j.floor,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-budynek",children:"Budynek"}),Object(O.jsx)(J.a,{labelId:"wybierz-budynek",name:"buildingId",value:null!==(i=x.buildingId)&&void 0!==i?i:j.building.id,label:"Budynek",onChange:g,children:b.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Budynek \xa0",t," "]},t)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Fn.a,{labelPlacement:"start",control:Object(O.jsx)(Bn.a,{id:"room-blocked",name:"blocked",inputProps:{"aria-label":"controlled"},onChange:v,checked:!(null!==(s=x.blocked)&&void 0!==s?s:j.blocked)}),label:"Dost\u0119pno\u015b\u0107 Sali"})})]})]})})}function Wn(e){var t=Object(F.b)().updateRFIDTag;return Object(O.jsx)(W.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno przypisania tagu RFID",sx:{maxWidth:"400px"},children:Object(O.jsx)(fe,{headline:"U\u017cyj czytnika, aby wprowadzi\u0107 tag.",bodyText:'Je\u015bli nie chcesz wprowadza\u0107 zmian, naci\u015bnij "Zamknij"',onScan:t,onClose:e.onClose})})}var Un=n(456),_n=n.n(Un),qn=["value"];function Hn(e){var t=e.value,n=Object(h.a)(e,qn);return t?Object(O.jsx)(_n.a,Object(f.a)({color:"success"},n)):Object(O.jsx)(de.a,Object(f.a)({sx:{color:"red"}},n))}function Kn(e){var t=e.room,n=e.deleteTag,a=Be().keysAdmin,c=Object($.b)().getBuildingLink,i=r.a.useState(!1),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useMemo((function(){var e=[{label:"Ilo\u015b\u0107 miejsc",value:t.seatsCount},{label:"Pi\u0119tro",value:0===t.floor?"parter":t.floor},{label:"Budynek",value:Object(O.jsxs)(Ee.a,{href:c(t.building.id),children:[" ",t.building.name," "]})},{label:"Aktualnie wolny",value:Object(O.jsx)(Hn,{value:!t.occupied})}];return a&&e.push({label:"Tag RFID",value:t.RFIDTag?Object(O.jsx)(Fe.a,{label:t.RFIDTag,onDelete:n,sx:{maxWidth:"120px"}}):Object(O.jsx)(it.a,{text:'Kliknij "+" by przypisa\u0107 klucz RFID',priority:10,children:Object(O.jsx)(_.a,{size:"small",onClick:function(){return u(!0)},sx:{p:"0px"},children:Object(O.jsx)(Tt.a,{})})})}),e.push({label:"Dost\u0119pny do rezerwacji",value:Object(O.jsx)(Hn,{value:!t.blocked})}),e}),[a,t,n,c]),j=r.a.useMemo((function(){return l.map((function(e){var t=e.label,n=e.value;return Object(O.jsxs)(Tn.a,{hover:!0,children:[Object(O.jsx)(Rn.a,{sx:{color:"text.secondary"},align:"left",children:t}),Object(O.jsx)(Rn.a,{sx:{color:"primary.main",fontWeight:"bold"},align:"left",children:n})]},t)}))}),[l]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Wn,{open:o,onClose:function(){return u(!1)}}),Object(O.jsx)(An.a,{children:Object(O.jsxs)(Dn.a,{"aria-label":"room-info-table",size:"small",children:[Object(O.jsx)(Mn.a,{sx:{display:"none"},children:Object(O.jsxs)(Tn.a,{children:[Object(O.jsx)(Rn.a,{align:"left",children:"W\u0142a\u015bciwo\u015b\u0107"}),Object(O.jsx)(Rn.a,{align:"left",children:"stan"})]})}),Object(O.jsx)(Nn.a,{children:j})]})})]})}function Gn(){var e=Be(),t=e.premisesAdmin,n=e.logsAdmin,a=Object(F.b)(),c=a.room,i=a.deleteRoom,s=a.deleteRFIDTag,o=Object(w.g)(),u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useState(!1),f=Object(N.a)(b,2),h=f[0],p=f[1],x=r.a.useMemo((function(){var e=[{label:"Edytuj",action:function(){return p(!0)},icon:Object(O.jsx)(gt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return d(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}];return n&&e.push({icon:Object(O.jsx)(ge.a,{color:"primary"}),label:"Logs Explorer",action:function(){return o.push("".concat(C.a.LOGS,"?endpoint=%/rooms/").concat(c.id))}}),e}),[o,n,c.id]);return Boolean(c)?Object(O.jsxs)(O.Fragment,{children:[t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{open:j,onClose:function(){return d(!1)},onSuccess:i}),Object(O.jsx)(Ln,{open:h,onClose:function(){return p(!1)}})]}),Object(O.jsxs)(ft.a,{elevation:0,children:[Object(O.jsx)(ht.a,{action:t&&Object(O.jsx)(ze,{options:x}),title:Object(O.jsxs)(O.Fragment,{children:[c.name,Object(O.jsx)(ln,{data:{id:c.id,name:c.name,type:an.Room,addressId:c.building.address,buildingId:c.building.id}})]}),subheader:Object(O.jsx)(O.Fragment,{children:c.roomType})}),Object(O.jsx)(pt.a,{component:"img",height:"350",image:Ae.a.getLink(c.image),alt:c.name}),Object(O.jsxs)(Ot.a,{children:[Object(O.jsx)(it.a,{text:"Tutaj znajduj\u0105 si\u0119 informacje na temat Sali",priority:20,children:Object(O.jsx)(Kn,{room:c,deleteTag:s})}),Object(O.jsx)("br",{}),Object(O.jsx)(zt.a,{model:c})]})]})]}):Object(O.jsx)(z.a,{})}var Zn=r.a.lazy((function(){return n.e(0).then(n.bind(null,1018))})),Vn=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Zn,{})})};function Qn(){var e=Be().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(jt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(Vn,{})}),t}),[e]);return Object(O.jsx)(F.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsx)(P.a,{item:!0,xs:12,md:5,lg:4,children:Object(O.jsx)(Gn,{})})]})})}var Jn=r.a.lazy((function(){return n.e(13).then(n.bind(null,1020))}));function Yn(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Jn,{})})}var $n=n(163),Xn=n(458),ea=n.n(Xn),ta=n(441);function na(e){var t=e.open,n=e.onClose,a=Object(S.a)().logout,c=r.a.useCallback((function(){n()}),[n]),i=r.a.useCallback((function(){a()}),[a]);return Object(O.jsx)(W.a,{open:t,onClose:c,sx:{maxWidth:"450px"},children:Object(O.jsx)(ta.a,{onSuccess:i})})}function aa(e){var t,n,a=e.open,c=e.onClose,i=e.user,s=Object($n.b)().updateUser,o=r.a.useState({}),u=Object(N.a)(o,2),l=u[0],j=u[1],d=r.a.useCallback((function(){c(),j({})}),[c]),b=r.a.useCallback(Object(M.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l);case 2:if(!e.sent){e.next=4;break}d();case 4:case"end":return e.stop()}}),e)}))),[l,d,s]),h=r.a.useCallback((function(e){j((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(G.a)({},e.target.name,e.target.value))}))}),[]);return Object(O.jsx)(W.a,{open:a,onClose:d,sx:{maxWidth:"450px"},children:Object(O.jsxs)(T.a,{spacing:3,children:[Object(O.jsx)(Yt,{image:i.image}),Object(O.jsx)(Xt.a,{}),Object(O.jsxs)(ee.a,{title:"Edycja u\u017cytkownika",subtitle:"Zmie\u0144 dane u\u017cytkownika. Zmiany w ca\u0142ej aplikacji b\u0119d\u0105 widoczne po ponownym prze\u0142adowaniu aplikacji.",onSubmit:b,onCancel:d,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Imi\u0119",name:"name",autoFocus:!0,value:null!==(t=l.name)&&void 0!==t?t:i.name,onChange:h})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"surname",label:"Nazwisko",name:"surname",value:null!==(n=l.surname)&&void 0!==n?n:i.surname,onChange:h})})]})]})})}function ra(){var e=Be(),t=e.myId,n=e.owner,a=e.logsAdmin,c=Object($n.b)(),i=c.user,s=c.deleteUser,o=Object(w.g)(),u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useState(!1),f=Object(N.a)(b,2),h=f[0],p=f[1],x=r.a.useState(!1),m=Object(N.a)(x,2),v=m[0],g=m[1],y=r.a.useMemo((function(){var e=[{label:"Edytuj",action:function(){return d(!0)},icon:Object(O.jsx)(gt.a,{color:"success"})},{label:"Zmie\u0144 has\u0142o",action:function(){return p(!0)},icon:Object(O.jsx)(ea.a,{color:"warning"})},{label:"Usu\u0144 konto",action:function(){return g(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}];return a&&e.push({icon:Object(O.jsx)(ge.a,{color:"primary"}),label:"Logs Explorer",action:function(){return o.push("".concat(C.a.LOGS,"?endpoint=%/users/").concat(i.id))}}),e}),[o,a,i.id]);return Object(O.jsxs)(O.Fragment,{children:[(t(i.id)||n)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{open:v,onClose:function(){return g(!1)},onSuccess:s}),Object(O.jsx)(aa,{user:i,open:j,onClose:function(){return d(!1)}}),Object(O.jsx)(na,{open:h,onClose:function(){return p(!1)}})]}),Object(O.jsxs)(ft.a,{elevation:0,children:[Object(O.jsx)(ht.a,{action:(t(i.id)||n)&&Object(O.jsx)(ze,{options:y}),title:Object(O.jsxs)(O.Fragment,{children:[i.name," ",i.surname]}),subheader:Object(O.jsx)("a",{href:"mailto:".concat(i.email),children:i.email})}),Object(O.jsx)(pt.a,{component:"img",height:"350",image:Ae.a.getLink(i.image),alt:i.email}),Object(O.jsxs)(Ot.a,{children:[Object(O.jsxs)(U.a,{color:"text.secondary",variant:"subtitle1",children:["Ostatnio aktywny: ",Object(H.a)(i.lastActivity),Object(O.jsx)("br",{}),"Klasa dost\u0119pu: ",Object(O.jsx)(Ee.a,{href:C.a.ACCESS,children:i.access.name})]}),Object(O.jsx)("br",{}),Object(O.jsx)(zt.a,{model:i})]})]})]})}var ca=r.a.lazy((function(){return n.e(6).then(n.bind(null,1019))})),ia=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(ca,{})})};function sa(){var e=Be().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(jt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(ia,{})}),t}),[e]);return Object(O.jsx)($n.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsx)(P.a,{item:!0,xs:12,md:5,lg:4,children:Object(O.jsx)(ra,{})})]})})}var oa=n(60),ua=r.a.createContext(null);function la(e){var t=Object(L.a)(),n=Object(R.b)(),a=n.queryParams,c=n.setQueryParams,i=r.a.useState(),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback(Object(M.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oa.b.getUsers(a);case 3:n=e.sent,c((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=n.pagination)||void 0===t?void 0:t.pagesCount})})),u(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error"),u([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t,a.itemsOnPage,a.currentPage,a.search,a.deleted,a.activated]);return r.a.useEffect((function(){l()}),[l]),o?Object(O.jsx)(ua.Provider,{value:{users:o},children:e.children}):Object(O.jsx)(z.a,{})}var ja=n(318);function da(){var e,t=Object(R.b)(),n=t.setQueryParams,a=t.queryParams,c=r.a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"deleted":case"activated":t=Boolean(e.target.checked)}n((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(G.a)({},e.target.name,t))}))}),[n]);return Object(O.jsxs)(P.a,{container:!0,children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:8,children:Object(O.jsx)(et.a,{label:"wyszukaj",name:"search",value:null!==(e=a.search)&&void 0!==e?e:"",onChange:c})}),Object(O.jsxs)(P.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"start",flexWrap:"wrap",color:"text.secondary",children:[Object(O.jsx)(Fn.a,{labelPlacement:"start",control:Object(O.jsx)(Bn.a,{id:"aktywni-u\u017cytkownicy",name:"activated",inputProps:{"aria-label":"aktywni-u\u017cytkownicy"},onChange:c,checked:a.activated}),label:"Aktywne konta"}),Object(O.jsx)(Fn.a,{labelPlacement:"start",control:Object(O.jsx)(Bn.a,{id:"unsuni\u0119ci-u\u017cytkownicy",name:"deleted",inputProps:{"aria-label":"unsuni\u0119ci-u\u017cytkownicy"},onChange:c,checked:a.deleted}),label:"Usuni\u0119te konta"})]})]})}var ba=r.a.memo(da);function fa(e){var t=e.user;return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:C.b.toUser(t.id),children:[Object(O.jsx)(Pe.a,{title:t.email,"aria-label":t.email,children:Object(O.jsx)(Te.a,{src:Ae.a.getLink(t.image)})}),Object(O.jsx)(Re.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:Object(O.jsx)(O.Fragment,{children:t.email})})]})}function ha(){var e=r.a.useContext(ua).users;return Object(O.jsxs)(q.a,{children:[0===e.length&&Object(O.jsx)(Ie.a,{children:Object(O.jsx)(Re.a,{primary:"Brak u\u017cytkownik\xf3w spe\u0142niaj\u0105cych kryteria"})}),e.map((function(e){return Object(O.jsx)(fa,{user:e},e.id)}))]})}function pa(){return Object(O.jsxs)(T.a,{spacing:3,children:[Object(O.jsx)(ja.a,{title:"Lista u\u017cytkownik\xf3w",subtitle:"Wyszukuj u\u017cytkownik\xf3w wed\u0142ug podanych kryteri\xf3w."}),Object(O.jsx)(ba,{}),Object(O.jsx)(ha,{}),Object(O.jsx)(Ve.a,{})]})}var Oa=n(29),xa=n(138),ma=n(322),va=n.n(ma),ga=n(58),ya=n(320),ka=n(321);function wa(){return Object(O.jsx)(xa.c,{children:Object(O.jsx)(Ca,{})})}function Ca(){var e=Object(xa.d)().chartsData,t=Object(ga.usePDF)({document:Object(O.jsx)(ya.a,{subject:"Statystyki u\u017cytkownik\xf3w",sections:[Object(O.jsx)(ka.a,{title:"Statystyki u\u017cytkownik\xf3w",rows:[["email","ilo\u015b\u0107 rezerwacji","czas rezerwacji","\u015bredni czas rezerwacji","\u015bredni planowany czas rezerwacji"]].concat(Object(Oa.a)(e.users.map((function(e){return[e.email,e.reservationsCount,e.allTimeMinutes,e.avgActualTimeMinutes,e.avgPlannedTimeMinutes]}))))})]})}),n=Object(N.a)(t,1)[0];return Object(O.jsxs)(O.Fragment,{children:[n.loading||!n.url?Object(O.jsx)("p",{children:"loading pdf ..."}):Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(va.a,{}),children:Object(O.jsx)("a",{href:n.url,download:"stats.pdf",title:"pobierz tabele pdf",children:"Pobierz raport pdf"})}),Object(O.jsxs)(xa.b,{defaultOpen:!0,title:"Statystyki u\u017cytkownik\xf3w",children:[Object(O.jsx)(xa.a,{fullWidth:e.users.length>=6,title:"Ilo\u015b\u0107 rezerwacji na u\u017cytkownika",data:e.users,xKey:"email",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(O.jsx)(xa.a,{fullWidth:e.users.length>=6,title:"Czas wszystkich reserwacji w dany dzie\u0144",data:e.users,xKey:"email",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]}),Object(O.jsx)(xa.a,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.users,xKey:"email",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]})]})]})}function Sa(){var e=Be().statsViewer,t=r.a.useMemo((function(){var t=[{name:"U\u017cytkownicy",component:Object(O.jsx)(pa,{})}];return e&&t.push({name:"Statystyki",component:Object(O.jsx)(wa,{})}),t}),[e]);return Object(O.jsx)(R.a,{name:"users-query-params",default:{deleted:!1,activated:!0,search:"",itemsOnPage:10,currentPage:1},children:Object(O.jsx)(la,{children:Object(O.jsx)(dt.a,{tabs:t})})})}function za(){return Object(S.a)().user?Object(O.jsxs)(w.d,{children:[Object(O.jsx)(w.b,{path:C.a.ROOM,component:Qn}),Object(O.jsx)(w.b,{path:C.a.BUILDING,component:xn}),Object(O.jsx)(w.b,{path:C.a.ADDRESS,component:Ht}),Object(O.jsx)(w.b,{path:C.a.SETTINGS,component:Yn}),Object(O.jsx)(w.b,{path:C.a.ACCESS,component:E}),Object(O.jsx)(w.b,{path:C.a.USER,component:sa}),Object(O.jsx)(w.b,{path:C.a.USERS,component:Sa}),Object(O.jsx)(w.b,{path:C.a.LOGS,component:Pn}),Object(O.jsx)(w.b,{path:C.a.HOME,component:In}),Object(O.jsx)(w.b,{path:C.a.INFRASTRUCTURE,children:"Zasoby"}),Object(O.jsx)(w.b,{path:C.a.HOME+"/*",children:Object(O.jsx)(w.a,{to:C.a.HOME})})]}):Object(O.jsx)(w.a,{to:C.a.PUBLIC})}var Ia=r.a.lazy((function(){return n.e(7).then(n.bind(null,1023))})),Ea=r.a.lazy((function(){return n.e(5).then(n.bind(null,1024))})),Pa=r.a.lazy((function(){return n.e(9).then(n.bind(null,1025))})),Ta=r.a.lazy((function(){return n.e(8).then(n.bind(null,1026))})),Ra=r.a.lazy((function(){return n.e(4).then(n.bind(null,1027))}));function Aa(){return Object(S.a)().user?Object(O.jsx)(w.a,{to:C.a.HOME}):Object(O.jsxs)(w.d,{children:[Object(O.jsxs)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:[Object(O.jsx)(w.b,{path:C.a.LOGIN,component:Ea}),Object(O.jsx)(w.b,{path:C.a.REGISTER,component:Pa}),Object(O.jsx)(w.b,{path:C.a.ACTIVATE,component:Ia}),Object(O.jsx)(w.b,{path:C.a.REMIND_PASSWORD,component:Ta}),Object(O.jsx)(w.b,{path:C.a.PUBLIC,exact:!0,component:Ra})]}),Object(O.jsx)(w.b,{path:"*",children:Object(O.jsx)(w.a,{to:C.a.PUBLIC})})]})}var Da={minHeight:"84vh",padding:"1.5vh 0px"};function Ma(){return Object(O.jsx)(k.a,{sx:Da,children:Object(O.jsxs)(w.d,{children:[Object(O.jsx)(w.b,{path:C.a.HOME,component:za}),Object(O.jsx)(w.b,{path:C.a.PUBLIC,component:Aa}),Object(O.jsx)(w.b,{path:"*",children:Object(O.jsx)(w.a,{to:C.a.PUBLIC})})]})})}function Na(){return Object(O.jsx)(U.a,{align:"center",sx:{backgroundColor:"primary.dark",padding:2,color:"primary.light"},children:"\xa9 Szymon Ryka\u0142a 2021/2022"})}var Ba=r.a.memo(Na),Fa=function(e){return Object(O.jsx)(Ie.a,{sx:{width:"30%",minWidth:"200px"},children:Object(O.jsx)(Ee.a,{sx:{color:"background.default"},href:e.link,children:e.name})})};function La(){var e=Object(S.a)().user,t=Be(),n=r.a.useMemo((function(){var n=[];return e?(n.push({name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Home",link:C.a.HOME}),t.accessAdmin&&n.push({name:"Dost\u0119py",link:C.a.ACCESS}),t.owner&&n.push({name:"Ustawienia",link:C.a.SETTINGS})):n.push({name:"Strona g\u0142\xf3wna",link:C.a.PUBLIC},{name:"Logowanie",link:C.a.LOGIN},{name:"Rejestracja",link:C.a.REGISTER},{name:"Aktywacja Konta",link:C.a.ACTIVATE}),n}),[e,null===t||void 0===t?void 0:t.accessAdmin,null===t||void 0===t?void 0:t.owner]),a=r.a.useMemo((function(){return n.filter((function(e){return e.link})).map((function(e){return Object(O.jsx)(Fa,Object(f.a)({},e),e.name)}))}),[n]);return Object(O.jsx)(k.a,{sx:{backgroundColor:"primary.main"},children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)(U.a,{sx:{pt:2},component:"p",variant:"body2",color:"background.default",children:"Przydatne linki:"}),Object(O.jsx)(q.a,{sx:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-start",flexWrap:"wrap"},children:a})]})})}var Wa=r.a.memo(La);function Ua(){return Object(O.jsx)(k.a,{children:Object(O.jsxs)(P.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(Wa,{})}),Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(Ba,{})})]})})}var _a=n(950),qa=n(873),Ha=n(477),Ka=n(251),Ga=n(960),Za=n(467),Va=n.n(Za),Qa=n(439),Ja=n.n(Qa),Ya=n(468),$a=n.n(Ya),Xa=n(469),er=n.n(Xa),tr=n(470),nr=n.n(tr),ar=[{label:"Panel G\u0142\xf3wny",href:C.a.HOME,icon:Va.a},{label:"Moje Konto",href:C.a.MY_PROFILE,icon:Ja.a}],rr={label:"Ustawienia Platformy",href:C.a.SETTINGS,icon:$a.a},cr={label:"Klasy dost\u0119pu",href:C.a.ACCESS,icon:er.a},ir={label:"U\u017cytkownicy",href:C.a.USERS,icon:nr.a},sr={label:"Logs Explorer",href:C.a.LOGS,icon:ge.a},or=r.a.memo((function(e){return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:e.href,children:[Object(O.jsx)(we.a,{color:"primary",children:Object(O.jsx)(e.icon,{color:"primary"})}),Object(O.jsx)(Re.a,{primary:e.label})]})}));function ur(){var e=Be(),t=e.accessAdmin,n=e.owner,a=e.logsAdmin,c=r.a.useMemo((function(){var e=Object.assign([],ar);return e.push(ir),t&&e.push(cr),a&&e.push(sr),n&&e.push(rr),e}),[t,a,n]),i=r.a.useMemo((function(){return c.map((function(e){return Object(O.jsx)(or,Object(f.a)({},e),e.label)}))}),[c]);return Object(O.jsx)(q.a,{children:i})}function lr(e){var t=e.children,n=e.toggleOpen;return Object(O.jsx)(o.a,{sx:{width:320},role:"presentation",onClick:n,onKeyDown:n,children:t})}function jr(e){var t=e.user;return Object(O.jsxs)(k.a,{onClick:function(e){return e.stopPropagation()},sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2,color:"primary.dark"},children:[Object(O.jsx)(Te.a,{alt:"".concat(null===t||void 0===t?void 0:t.name," ").concat(null===t||void 0===t?void 0:t.surname),src:Ae.a.getLink(null===t||void 0===t?void 0:t.image),sx:{width:"120px",height:"120px",fontSize:"36px",mt:2,mb:2}}),Object(O.jsxs)(U.a,{children:[null===t||void 0===t?void 0:t.name,"\xa0",null===t||void 0===t?void 0:t.surname]}),Object(O.jsx)(U.a,{children:Object(O.jsx)("a",{href:"mailto:".concat(null===t||void 0===t?void 0:t.email),children:null===t||void 0===t?void 0:t.email})})]})}var dr=n(473),br=n.n(dr),fr=n(472),hr=n.n(fr),pr=n(947),Or=n(948),xr=n(946),mr=n(986),vr=n(82);function gr(e){var t=r.a.useState(!1),n=Object(N.a)(t,2),a=n[0],c=n[1],i=r.a.useMemo((function(){return"".concat(e.name,"-nav-item")}),[e.name]);r.a.useEffect((function(){c(vr.a.read(i))}),[i]);var s=r.a.useCallback((function(e){e.stopPropagation(),vr.a.save(i,!a),c((function(e){return!e}))}),[i,a]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(T.a,{direction:"row",children:[Object(O.jsxs)(xr.a,{component:Ee.a,href:e.href,sx:e.sx,children:[Object(O.jsx)(we.a,{children:e.icon}),Object(O.jsx)(Re.a,{primary:e.name})]}),Object(O.jsx)(_.a,{sx:{width:"42px",height:"42px"},size:"medium",onClick:s,children:a?Object(O.jsx)(pr.a,{}):Object(O.jsx)(Or.a,{})})]}),Object(O.jsx)(mr.a,{in:a,timeout:"auto",children:Object(O.jsx)(T.a,{sx:e.sx,children:e.children})})]})}var yr=n(471),kr=n.n(yr);function wr(e){return Object(O.jsx)(Ie.a,{button:!0,component:Ee.a,href:"".concat(C.a.HOME).concat(e.href),children:Object(O.jsxs)(o.a,{sx:{width:"100%"},children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(kr.a,{})}),e.name]})})}var Cr=r.a.memo(wr);function Sr(){var e=Object($.b)().resourceMap,t=r.a.useMemo((function(){return null===e||void 0===e?void 0:e.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.buildings;return Object(O.jsx)(gr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(O.jsx)(hr.a,{color:"primary"}),sx:{width:"100%"},children:r.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.rooms;return Object(O.jsx)(gr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(O.jsx)(br.a,{color:"primary"}),sx:{pl:6,width:"100%"},children:r.map((function(e){return Object(O.jsx)(Cr,Object(f.a)({},e),e.id)}))},t)}))},t)}))}),[e]);return Object(O.jsx)(T.a,{children:t})}function zr(){var e=r.a.useState(!1),t=Object(N.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){e.stopPropagation(),a(!0)}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(St,{open:n,onClose:function(){return a(!1)}}),Object(O.jsxs)(Ie.a,{button:!0,component:"div",onClick:c,sx:{color:"primary.dark"},children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(nt.a,{color:"primary"})}),"Dodaj adres"]})]})}function Ir(e){var t=e.toggleOpen,n=e.open,a=Be().premisesAdmin,r=Object(S.a)().user;return Object(O.jsxs)(Ga.a,{variant:"temporary",ModalProps:{keepMounted:!0},anchor:"left",open:n,onClose:t,children:[Object(O.jsxs)(lr,{toggleOpen:t,children:[Object(O.jsx)(jr,{user:r}),Object(O.jsx)(Xt.a,{}),Object(O.jsx)(ur,{}),Object(O.jsx)(Xt.a,{}),Object(O.jsx)(Ie.a,{onClick:function(e){return e.stopPropagation()},component:"div",sx:{pb:0,color:"text.disabled"},children:Object(O.jsx)(Re.a,{children:"Zasoby:"})}),Object(O.jsx)(Sr,{})]}),a&&Object(O.jsx)(zr,{})]})}var Er=n(988),Pr=n(989),Tr=n(474),Rr=n.n(Tr),Ar=[{name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Panel G\u0142\xf3wny",link:C.a.HOME}];function Dr(e){var t=e.trigger,n=e.handleClose,a=Object(S.a)().logout,c=r.a.useMemo((function(){return Ar.map((function(e,t){var a=e.name,r=e.link;return Object(O.jsx)(Y.a,{onClick:n,href:r,component:Ee.a,children:a},t)}))}),[n]);return Object(O.jsxs)(ke.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:n,children:[c,Object(O.jsx)(Y.a,{onClick:function(){n(),a()},children:"Wyloguj"})]})}function Mr(e){var t=Object(S.a)().user,n=a.useState(null),r=Object(N.a)(n,2),c=r[0],i=r[1],s=a.useCallback((function(e){i(e.currentTarget)}),[]),u=a.useCallback((function(){i(null)}),[]);return Object(O.jsx)(o.a,{sx:{flexGrow:1},children:Object(O.jsx)(Er.a,{position:"static",children:Object(O.jsxs)(Pr.a,{children:[t&&Object(O.jsx)(_.a,{onClick:e.toggleDrawer,size:"large",edge:"start","aria-label":"menu",sx:{mr:2,color:"background.default"},children:Object(O.jsx)(Rr.a,{color:"inherit"})}),Object(O.jsx)(U.a,{variant:"h4",component:"span",sx:{flexGrow:1,fontFamily:"Dancing Script, cursive"},children:Object(O.jsx)(Ee.a,{href:t?C.a.HOME:C.a.PUBLIC,sx:{width:"fit-content",color:"background.default","&:hover":{textDecoration:"none"}},children:"Rav System"})}),t&&Object(O.jsxs)("div",{children:[Object(O.jsx)(_.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:s,color:"inherit",children:Object(O.jsx)(Te.a,{alt:t.name,src:Ae.a.getLink(t.image),sx:{width:42,height:42}})}),Object(O.jsx)(Dr,{trigger:c,handleClose:u})]})]})})})}function Nr(){var e=r.a.useState(!1),t=Object(N.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.stopPropagation(),(!t||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a((function(e){return!e}))}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Mr,{toggleDrawer:c}),Object(O.jsx)(Ir,{open:n,toggleOpen:c})]})}var Br=function(){return Object(O.jsx)(g,{children:Object(O.jsxs)(qa.b,{dateAdapter:_a.a,locale:Ha.a,children:[Object(O.jsx)(s.a,{}),Object(O.jsx)(o.a,{component:"div",className:"App",sx:{backgroundColor:"background.default"},children:Object(O.jsx)(p.a,{children:Object(O.jsx)(Ka.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsx)($.a,{children:Object(O.jsxs)(it.b,{children:[Object(O.jsx)(Nr,{}),Object(O.jsx)(u.a,{children:Object(O.jsx)(Ma,{})}),Object(O.jsx)(Ua,{})]})})})})})})]})})},Fr=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Lr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(Br,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ravs-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ravs-client","/service-worker.js");Fr?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Lr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Lr(t,e)}))}}()},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(13),r=(n(2),n(482)),c=n(89),i=n(0);function s(e){var t;return Object(i.jsxs)(r.a,{elevation:0,sx:Object(a.a)({p:2},e.sx),children:[(null===e||void 0===e?void 0:e.title)&&Object(i.jsx)(c.a,{variant:"body2",component:null!==(t=e.titleComponent)&&void 0!==t?t:"h2",color:"text.secondary",children:e.title}),e.children]})}},96:function(e,t,n){"use strict";var a,r=n(27),c=n(28),i=n(42),s=n(43),o=n(21),u=n(59);!function(e){e.success="#edf7ed",e.error="#fdeded",e.info="#e5f6fd",e.warning="#fff4e5",e.inert="#f5f5f5"}(a||(a={}));var l=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"emitStatus",value:function(e,t){return{message:e,color:t}}},{key:"localPreparPath",value:function(e){return window.location.toString().includes(o.a.HOME)&&0===Object.keys(e).length?"/users/"+this.userId.toString():this.preparePath(e)}},{key:"getReservations",value:function(e,t){return this.get("".concat(this.localPreparPath(e),"/reservations"),t)}},{key:"createOne",value:function(e){return this.post("/reservations",e)}},{key:"update",value:function(e,t){return this.patch("/reservations/".concat(e),t)}},{key:"pingKey",value:function(e,t){return this.patch("/reservations/".concat(e,"/keys"),{RFIDTag:t})}},{key:"remove",value:function(e){return this.delete("/reservations/".concat(e))}},{key:"resolveStatus",value:function(e){var t=Date.now(),n=new Date(t),r=new Date(t-9e5),c=new Date(t+9e5),i=e.actualStart,s=e.plannedStart,o=e.actualEnd,u=e.plannedEnd,l=new Date(i||s),j=new Date(o||u);if(!i)return l<n&&l>r?this.emitStatus("Powinna zosta\u0107 ju\u017c odebrana",a.warning):l>n&&l<c?this.emitStatus("Za chwil\u0119 zostanie odebrana",a.info):l<c?this.emitStatus("Nieodebrana.",a.error):this.emitStatus("Oczekuje",a.inert);if(i){if(o)return this.emitStatus("Rezerwacja zako\u0144czona.",a.inert);if(!o){if(n<j&&c>j)return this.emitStatus("Za chwil\u0119 si\u0119 ko\u0144czy.",a.info);if(n>j){var d=new Date(Date.parse(j.toString())+9e5);if(n<d)return this.emitStatus("Powinna si\u0119 zako\u0144czy\u0107.",a.warning);if(n>d)return this.emitStatus("Czas min\u0105\u0142, klucz nie oddany.",a.error)}return this.emitStatus("Rezerwacja trwa.",a.success)}}return this.emitStatus("Status nieznany",a.warning)}}]),n}(u.a);t.a=new l}},[[861,2,3]]]);
//# sourceMappingURL=main.64a260ed.chunk.js.map