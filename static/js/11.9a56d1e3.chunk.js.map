{"version":3,"sources":["components/pages/protected/AddressPage/components/AddressCharts.tsx"],"names":["AddressCharts","ActualLoader","chartsData","useCharts","address","useAddress","usePDF","document","subject","town","street","number","sections","title","rows","allReservations","map","r","name","reservationsCount","allTimeMinutes","avgActualTimeMinutes","avgPlannedTimeMinutes","PDF","loading","url","startIcon","href","download","defaultOpen","fullWidth","data","xKey","y","label","key"],"mappings":"oQAWe,SAASA,IACpB,OACI,cAAC,IAAD,UACI,cAACC,EAAD,MAKZ,SAASA,IACL,IAAQC,EAAeC,cAAfD,WACAE,EAAYC,cAAZD,QAER,EAAcE,iBAAO,CACjBC,SAAU,cAAC,IAAD,CACNC,QAAO,4BAAuBJ,EAAQK,KAA/B,aAAwCL,EAAQM,OAAhD,YAA0DN,EAAQO,QACzEC,SACI,CACI,cAAC,IAAD,CACIC,MAAM,yCACNC,KAAI,CACA,CACI,gBACA,6BACA,kBACA,8BACA,0CANJ,mBAQKZ,EAAWa,gBAAgBC,KAAI,SAAAC,GAAC,MAAI,CACrCA,EAAEC,KACFD,EAAEE,kBACFF,EAAEG,eACFH,EAAEI,qBACFJ,EAAEK,mCApBvBC,EAAP,oBA2BA,OACI,qCAESA,EAAIC,UAAYD,EAAIE,IACjB,gDAEA,cAAC,IAAD,CAAQC,UAAW,cAAC,IAAD,IAAnB,SACI,mBAAGC,KAAMJ,EAAIE,IAAKG,SAAU,YAAaf,MAAM,qBAA/C,kCAKZ,eAAC,IAAD,CAAcgB,aAAW,EAAChB,MAAM,yBAAhC,UACI,cAAC,IAAD,CACIiB,WAAS,EACTjB,MAAM,6BACNkB,KAAM7B,EAAWa,gBACjBiB,KAAK,OACLC,EAAG,CACC,CAAEC,MAAO,6BAAoBC,IAAK,wBAG1C,cAAC,IAAD,CACIL,WAAS,EACTjB,MAAM,6BACNkB,KAAM7B,EAAWa,gBACjBiB,KAAK,OACLC,EAAG,CACC,CAAEC,MAAO,sBAAkBC,IAAK,qBAGxC,cAAC,IAAD,CACIL,WAAS,EACTjB,MAAM,gCACNkB,KAAM7B,EAAWa,gBACjBiB,KAAK,OACLC,EAAG,CACC,CAAEC,MAAO,6BAAyBC,IAAK,yBACvC,CAAED,MAAO,6BAAyBC,IAAK","file":"static/js/11.9a56d1e3.chunk.js","sourcesContent":["import { BuildingsOrRoomsChartsData } from \"../../../../../models/Stats\";\nimport { Chart, ChartSection, ChartsTab, useCharts } from \"../../components/Charts\";\nimport { useAddress } from \"../AddressContext\";\nimport { usePDF } from \"@react-pdf/renderer\";\nimport { Button } from \"@mui/material\";\nimport PDFPage from \"../../components/PDF/PDFPage\";\nimport Table from \"../../components/PDF/Table\";\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\n\n\n\nexport default function AddressCharts() {\n    return (\n        <ChartsTab>\n            <ActualLoader />\n        </ChartsTab>\n    );\n}\n\nfunction ActualLoader() {\n    const { chartsData } = useCharts<BuildingsOrRoomsChartsData>();\n    const { address } = useAddress();\n\n    const [PDF] = usePDF({\n        document: <PDFPage\n            subject={`Statystyki adresu ${address.town}, ${address.street} ${address.number}`}\n            sections={\n                [\n                    <Table\n                        title=\"Statystyki dla budynków pod adresem\"\n                        rows={[\n                            [\n                                'nazwa budynku',\n                                'ilość rezerwacji',\n                                'czas rezerwacji',\n                                'średni czas rezerwacji',\n                                'średni planowany czas rezerwacji'\n                            ]\n                            , ...chartsData.allReservations.map(r => [\n                                r.name,\n                                r.reservationsCount,\n                                r.allTimeMinutes,\n                                r.avgActualTimeMinutes,\n                                r.avgPlannedTimeMinutes\n                            ])\n                        ]}\n                    />\n                ]} />\n    });\n\n    return (\n        <>\n            {\n                (PDF.loading || !PDF.url) ?\n                    <p>loading pdf ...</p>\n                    :\n                    <Button startIcon={<PictureAsPdfIcon />}>\n                        <a href={PDF.url} download={'stats.pdf'} title='pobierz tabele pdf'>\n                            Pobierz raport pdf\n                        </a>\n                    </Button>\n            }\n            <ChartSection defaultOpen title='Statystyki budynków'>\n                <Chart\n                    fullWidth\n                    title='Ilość rezerwacji'\n                    data={chartsData.allReservations}\n                    xKey='name'\n                    y={[\n                        { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title=\"Czas wszystkich reserwacji\"\n                    data={chartsData.allReservations}\n                    xKey='name'\n                    y={[\n                        { label: 'Czas całkowity', key: 'allTimeMinutes' },\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title=\"Średnie czasy rezerwacji\"\n                    data={chartsData.allReservations}\n                    xKey='name'\n                    y={[\n                        { label: 'Średni planowany czas', key: 'avgPlannedTimeMinutes' },\n                        { label: 'Średni faktyczny czas', key: 'avgActualTimeMinutes' },\n                    ]}\n                />\n            </ChartSection>\n        </>\n    );\n};"],"sourceRoot":""}