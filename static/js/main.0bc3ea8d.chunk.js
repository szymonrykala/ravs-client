(this["webpackJsonpravs-client"]=this["webpackJsonpravs-client"]||[]).push([[0],{256:function(e,t,n){},261:function(e,t,n){},291:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(60),i=n.n(c),s=(n(256),n(366)),o=n(354),u=n(419),l=(n(257),n(258),n(259),n(260),n(261),n(390)),j=n(177),d=n(346),b=n(347),x=Object(j.a)({palette:{primary:d.a,secondary:{dark:"#f5f5f5",main:"#304ffe",light:"#fff"},background:{default:"#f5f5f5",paper:"#fff"}},shape:{borderRadius:4},components:{MuiCssBaseline:{styleOverrides:{body:Object(b.a)({track:"#f5f5f5",thumb:"#adadad",active:"#959595"})}},MuiTextField:{defaultProps:{size:"medium",variant:"outlined"}},MuiSelect:{defaultProps:{size:"medium"}},MuiButton:{defaultProps:{sx:{borderRadius:function(e){var t=e.shape;return Number(t.borderRadius)/2}}}},MuiSvgIcon:{defaultProps:{color:"inherit"}},MuiIconButton:{defaultProps:{color:"primary"}}}}),p=n(0);function m(e){return Object(p.jsx)(l.a,{theme:x,children:e.children})}var h=n(7),O=n.n(h),f=n(13),v=n(5),y=n(35),k=n(375),g=n(368),w=function(e){},C=Object(a.createContext)(w);function z(e){var t=e.children,n=r.a.useState(),a=Object(v.a)(n,2),c=a[0],i=a[1],s=r.a.useState(!1),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useState("error"),d=Object(v.a)(j,2),b=d[0],x=d[1],m=r.a.useState(),h=Object(v.a)(m,2),O=h[0],f=h[1],y=r.a.useCallback((function(e,t){"clickaway"!==t&&(l(!1),i(""),f(null))}),[]),w=r.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};x(t),i(e),l(!0),f(n())}),[]);return Object(p.jsxs)(C.Provider,{value:w,children:[t,Object(p.jsx)(k.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:u,autoHideDuration:6e3,onClose:y,children:Object(p.jsx)(g.a,{onClose:y,severity:b,sx:{width:"100%"},children:c})}),O]})}function S(){return Object(a.useContext)(C)}var I=n(20),P=n(21),E=n(29),T=n(30),R=n(124),M=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(e){var a,r;return Object(I.a)(this,n),(r=t.call(this,null===(a=e.error)||void 0===a?void 0:a.description)).data=void 0,r.data=e,r}return Object(P.a)(n,[{key:"code",get:function(){return this.data.statusCode}},{key:"description",get:function(){var e;return null===(e=this.data.error)||void 0===e?void 0:e.description}}]),n}(Object(R.a)(Error));var A,D=function(){function e(){Object(I.a)(this,e),this._BASE_URL="https://ravsapi.herokuapp.com/v1",this._TOKEN_NAME="auth_token",this._userId=-1}return Object(P.a)(e,[{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}},{key:"authToken",get:function(){return"Bearer "+window.localStorage.getItem(this._TOKEN_NAME)}},{key:"_fetch",value:function(){var e=Object(f.a)(O.a.mark((function e(t){var n,a,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t.endpoint,{method:t.method,cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json",Authorization:this.authToken},body:JSON.stringify(t.body)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,console.debug(a),401!==n.status||t.endpoint.match("/auth|me|activate")||window.location.reload(),n.ok){e.next=11;break}throw console.error("".concat(n.status," ").concat(null===a||void 0===a||null===(r=a.error)||void 0===r?void 0:r.type," ").concat(null===a||void 0===a||null===(c=a.error)||void 0===c?void 0:c.description)),new M(a);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preparePath",value:function(e){var t="",n=window.location.pathname;if(0===Object.keys(e).length)for(var a=0,r=Object.entries({"/accesses":"/accesses","/settings":"/configurations","/users":"/users"});a<r.length;a++){var c=Object(v.a)(r[a],2),i=c[0],s=c[1];n.includes(i)&&(t=s)}else"addressId"in e?(t+="/addresses/".concat(e.addressId),"buildingId"in e&&(t+="/buildings/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&("me"===e.userId?t+="/users/"+this.userId.toString():t+="/users/"+e.userId);return t}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fetch({method:"GET",endpoint:e+"?"+new URLSearchParams(t).toString()})}},{key:"post",value:function(e,t){return this._fetch({method:"POST",endpoint:e,body:t})}},{key:"patch",value:function(e,t){if(0!==Object.keys(t).length)return this._fetch({method:"PATCH",endpoint:e,body:t})}},{key:"delete",value:function(e){return this._fetch({method:"DELETE",endpoint:e})}}]),e}(),W=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"login",value:function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/users/auth",{email:t.email,password:t.password});case 2:return(n=e.sent).data&&localStorage.setItem(this._TOKEN_NAME,n.data.toString()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem(this._TOKEN_NAME)}},{key:"hasToken",value:function(){return Boolean(localStorage.getItem(this._TOKEN_NAME))}},{key:"hasSession",value:function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.hasToken()){e.next=5;break}return e.next=4,this.get("/users/me");case 4:return e.abrupt("return",!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(D),F=new W,N=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"sendImage",value:function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t,{method:"POST",cache:"no-cache",mode:"cors",body:n,headers:{Authorization:this.authToken}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(r=e.sent,console.debug(r),a.ok){e.next=10;break}throw console.error("".concat(a.status,"\t").concat(null===r||void 0===r||null===(c=r.error)||void 0===c?void 0:c.type,"\t").concat(null===r||void 0===r||null===(i=r.error)||void 0===i?void 0:i.description)),new M(r);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLink",value:function(e){return(null===e||void 0===e?void 0:e.url.includes("http"))?e.url:this._BASE_URL.slice(0,this._BASE_URL.length-3)+(null===e||void 0===e?void 0:e.url)}},{key:"upload",value:function(e,t){var n=new FormData;return n.append("file",t),this.sendImage(this.preparePath(e)+"/image",n)}},{key:"remove",value:function(e){return this.delete(this.preparePath(e)+"/image")}}]),n}(D),U=new N,B=n(9),L=new(function(){function e(){Object(I.a)(this,e),this.id=""}return Object(P.a)(e,[{key:"setIdentity",value:function(e){this.id=e.toString()}},{key:"codeName",value:function(e){return btoa(encodeURI(e+this.id))}},{key:"save",value:function(e,t){var n=JSON.stringify(t);localStorage.setItem(this.codeName(e),n)}},{key:"delete",value:function(e){localStorage.removeItem(this.codeName(e))}},{key:"read",value:function(e){var t=localStorage.getItem(this.codeName(e));if(!t)return null;try{return JSON.parse(t)}catch(n){return null}}}]),e}()),q=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="/users",e}return Object(P.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"getMe",value:function(){var e=Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/users/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(e){return this.get("/users",e)}},{key:"register",value:function(e){return this.post("/users",e)}},{key:"activate",value:function(e){return this.patch("/users/activate",e)}},{key:"generateKey",value:function(e){return this.post("/users/key",{email:e})}},{key:"updateAccess",value:function(e,t){return this.patch("/users/".concat(e,"/access"),{accessId:t})}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"changePassword",value:function(e){return this.patch("/users/password",e)}}]),n}(D),H=new q,_=function(){function e(){var t;Object(I.a)(this,e),this.STORAGE_NAME="user-metadata",this.data=void 0,this._userId=void 0,this.data=null!==(t=L.read(this.STORAGE_NAME))&&void 0!==t?t:{notes:"",favourites:[]}}return Object(P.a)(e,[{key:"save",value:function(){var e=Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.save(this.STORAGE_NAME,this.data),this._userId){e.next=3;break}return e.abrupt("return");case 3:return H.setPath({userId:null===(t=this._userId)||void 0===t?void 0:t.toString()}),e.prev=4,e.next=7,H.update({metadata:this.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"userId",set:function(e){this._userId=e}},{key:"metadata",set:function(e){this.data=Object(B.a)(Object(B.a)({},this.data),e)}},{key:"notes",get:function(){var e;return null!==(e=this.data.notes)&&void 0!==e?e:""},set:function(e){this.data.notes=e,this.save()}},{key:"favourites",get:function(){var e;return null!==(e=this.data.favourites)&&void 0!==e?e:[]}},{key:"addFavourite",value:function(e){var t,n;null===(t=this.data.favourites)||void 0===t||t.push(e),null===(n=this.data.favourites)||void 0===n||n.sort((function(e,t){return e.type>=t.type?e.type===t.type?e.name>t.name?1:-1:1:-1})),console.log(this.data),this.save()}},{key:"isFavourite",value:function(e){var t;return Boolean(null===(t=this.data.favourites)||void 0===t?void 0:t.find((function(t){var n=t.id;return t.type===e.type&&n===e.id})))}},{key:"removeFavourite",value:function(e){var t;this.data.favourites=null===(t=this.data.favourites)||void 0===t?void 0:t.filter((function(t){return t.id+t.type!==e.id+e.type})),this.save()}}]),e}(),K=new _;!function(e){e.success="#edf7ed",e.error="#fdeded",e.info="#e5f6fd",e.warning="#fff4e5",e.inert="#f5f5f5"}(A||(A={}));var Z=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"emitStatus",value:function(e,t){return{message:e,color:t}}},{key:"getReservations",value:function(e,t){return this.get("".concat(this.preparePath(e),"/reservations"),t)}},{key:"createOne",value:function(e){return this.post("/reservations",e)}},{key:"update",value:function(e,t){return this.patch("/reservations/".concat(e),t)}},{key:"pingKey",value:function(e,t){return this.patch("/reservations/".concat(e,"/keys"),{RFIDTag:t})}},{key:"remove",value:function(e){return this.delete("/reservations/".concat(e))}},{key:"resolveStatus",value:function(e){var t=Date.now(),n=new Date(t),a=new Date(t-900),r=new Date(t+900),c=e.actualStart,i=e.plannedStart,s=e.actualEnd,o=e.plannedEnd,u=new Date(c||i),l=new Date(s||o);if(!c)return u<n&&u>a?this.emitStatus("Powinna zosta\u0107 ju\u017c odebrana",A.warning):u>n&&u<r?this.emitStatus("Za chwil\u0119 zostanie odebrana",A.info):u<r?this.emitStatus("Nieodebrana.",A.error):this.emitStatus("Oczekuje",A.inert);if(c){if(s)return this.emitStatus("Rezerwacja zako\u0144czona.",A.inert);if(!s)return n<l&&a>l?this.emitStatus("Za chwil\u0119 si\u0119 ko\u0144czy.",A.info):n>l&&l>r?this.emitStatus("Powinna si\u0119 zako\u0144czy\u0107.",A.warning):n>l&&l<r?this.emitStatus("Czas min\u0105\u0142, klucz nie oddany.",A.error):this.emitStatus("Rezerwacja trwa.",A.success)}return this.emitStatus("Status nieznany",A.warning)}}]),n}(D),G=new Z,Q=n(381),J=n(396),V=n(129);function Y(e){return Object(p.jsxs)(Q.a,{sx:Object(B.a)({display:"flex",flexDirection:"column",color:"primary.main",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"background.default"},e.sx),open:e.open,children:[Object(p.jsx)(V.a,{variant:"h5",pb:2,children:e.text}),Object(p.jsx)(J.a,{color:"inherit"})]})}var X={PUBLIC:"/public",FAQ:"/faq",HOME:"/app"};X.LOGIN=X.PUBLIC+"/login",X.REGISTER=X.PUBLIC+"/register",X.ACTIVATE=X.PUBLIC+"/activate",X.REMIND_PASSWORD=X.PUBLIC+"/passwd",X.ACCESS=X.HOME+"/accesses",X.SETTINGS=X.HOME+"/settings",X.USERS=X.HOME+"/users",X.USER=X.USERS+"/:userId",X.MY_PROFILE=X.USERS+"/me",X.INFRASTRUCTURE=X.HOME+"/infrastructure",X.ADDRESS=X.HOME+"/addresses/:addressId",X.BUILDING=X.ADDRESS+"/buildings/:buildingId",X.ROOM=X.BUILDING+"/rooms/:roomId";var $={toAddress:function(e){return"/app/addresses/".concat(e)},toBuilding:function(e,t){return $.toAddress(e)+"/buildings/".concat(t)},toRoom:function(e,t,n){return $.toBuilding(e,t)+"/rooms/".concat(n)},toUser:function(e){return X.USERS+"/".concat(e)}},ee=X,te=Object(a.createContext)(null);function ne(e){var t=e.children,n=S(),c=r.a.useState(!0),i=Object(v.a)(c,2),s=i[0],o=i[1],u=Object(a.useState)(null),l=Object(v.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback((function(e){d(e),L.setIdentity(e.id),K.metadata=e.metadata,K.userId=e.id,G.userId=e.id,U.userId=e.id,H.userId=e.id}),[]),x=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!0),!F.hasToken()){e.next=21;break}return e.prev=2,e.next=5,F.hasSession();case 5:if(!e.sent){e.next=13;break}return e.next=8,H.getMe();case 8:t=e.sent,b(t),n("Witaj ponownie!","info"),e.next=14;break;case 13:n("Twoja sesja wygas\u0142a","info",(function(){return Object(p.jsx)(y.a,{to:ee.LOGIN})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(e.t0.description,"error",(function(){return Object(p.jsx)(y.a,{to:ee.WELCOME})}));case 19:e.next=22;break;case 21:n("Witaj!","info",(function(){return Object(p.jsx)(y.a,{to:ee.WELCOME})}));case 22:o(!1);case 23:case"end":return e.stop()}}),e,null,[[2,16]])}))),[n,b]);r.a.useEffect((function(){return x(),function(){}}),[x]);var m=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.login(t);case 3:return e.next=5,H.getMe();case 5:a=e.sent,b(a),n("Pomy\u015blnie zalogowano!","success",(function(){return Object(p.jsx)(y.a,{to:ee.HOME})})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),r=e.t0.description,404===e.t0.code&&(r="U\u017cytkownik nie istnieje"),n(r,"error");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,b]),h=r.a.useCallback((function(){n("Pomy\u015blnie wylogowano!","success",(function(){return Object(p.jsx)(y.a,{to:ee.WELCOME})})),F.logout(),d(null)}),[n]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Y,{open:s,text:"\u0141adowanie Sesji..."}),Object(p.jsx)(te.Provider,{value:{user:j,login:m,logout:h},children:!s&&t})]})}var ae=n(361),re=n(352),ce={queryParams:{q:1},setQueryParams:function(e){}},ie=r.a.createContext(ce);function se(e){var t=r.a.useState((function(){return t=e.name,n=e.default,L.read(t)||n;var t,n})),n=Object(v.a)(t,2),a=n[0],c=n[1];return r.a.useEffect((function(){L.save(e.name,a)}),[a,e.name]),a?Object(p.jsx)(ie.Provider,{value:{queryParams:a,setQueryParams:c},children:e.children}):null}var oe=n(369),ue=n(397),le=n(377),je=n(370),de=n(401);function be(){return r.a.useContext(ie)}function xe(){var e,t=be(),n=t.queryParams,r=t.setQueryParams,c=a.useCallback((function(e,t){r((function(e){return Object(B.a)(Object(B.a)({},e),{},{currentPage:t})}))}),[r]),i=a.useCallback((function(e,t){r((function(t){return Object(B.a)(Object(B.a)({},t),{},{itemsOnPage:Number(e.target.value)})}))}),[r]);return Object(p.jsxs)(re.a,{spacing:2,sx:{flexWrap:"wrap",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},children:[Object(p.jsx)(oe.a,{count:n.pagesCount,size:"small",page:n.currentPage,onChange:c}),Object(p.jsxs)(ue.a,{fullWidth:!0,sx:{maxWidth:"100px"},children:[Object(p.jsx)(le.a,{id:"items-on-page-label",children:"Na stronie"}),Object(p.jsxs)(je.a,{size:"small",labelId:"items-on-page-label",id:"items-on-page",label:"Na stronie",value:null!==(e=n.itemsOnPage)&&void 0!==e?e:5,onChange:i,children:[[5,10,15,20].map((function(e){return Object(p.jsx)(de.a,{value:e,children:e},e)})),Object(p.jsx)(de.a,{value:1e4,children:"wszystko"})]})]})]})}var pe=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"fetch",value:function(e,t){return this.get(this.preparePath(e)+"/requests",t)}},{key:"getStats",value:function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/requests/stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(D),me=new pe;function he(e){var t=r.a.useState(),n=Object(v.a)(t,2),a=n[0],c=n[1];return r.a.useEffect((function(){var t=setInterval((function(){return c((function(e){return!e}))}),e);return function(){return clearInterval(t)}}),[e]),a}var Oe=r.a.createContext(null);function fe(e){var t=Object(y.h)(),n=be(),a=n.queryParams,c=n.setQueryParams,i=S(),s=he(6e4),o=r.a.useState(),u=Object(v.a)(o,2),l=u[0],j=u[1],d=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me.fetch(t,a);case 3:n=e.sent,j(n.data),n.pagination&&c((function(e){var t;return Object(B.a)(Object(B.a)({},e),{},{pagesCount:null===(t=n.pagination)||void 0===t?void 0:t.pagesCount})})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),i(e.t0.description,"error"),j([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[c,a.currentPage,a.itemsOnPage,a.method,a.userId,i,t]);return r.a.useEffect((function(){d()}),[d,s]),l?Object(p.jsx)(Oe.Provider,{value:{logs:l},children:e.children}):null}var ve=n(3),ye=n(383),ke=n(46);function ge(e){var t=e.value,n=e.onChange,a=e.label,c=e.name,i=e.sx,s=r.a.useState(),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useState(t),d=Object(v.a)(j,2),b=d[0],x=d[1],m=r.a.useCallback((function(e){x(e.target.value),clearTimeout(u);var t=setTimeout((function(){n(e)}),1e3);l(t)}),[u,n]);return Object(p.jsx)(ke.c,{name:c,value:b,onChange:m,placeholder:a,sx:Object(B.a)({width:"100%",maxWidth:"600px",p:1,bgcolor:"background.default"},i),inputProps:{"aria-label":a}})}function we(){var e,t,n=be(),a=n.queryParams,c=n.setQueryParams,i=r.a.useCallback((function(e){e.preventDefault(),c((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[c]);return Object(p.jsxs)(ye.a,{container:!0,component:"form",spacing:3,children:[Object(p.jsx)(ye.a,{item:!0,xs:6,md:2,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-metode",children:"Metoda"}),Object(p.jsxs)(je.a,{size:"small",labelId:"wybierz-metode",id:"metoda",value:a.method,name:"method",label:"wybierz-metode",onChange:i,children:[Object(p.jsx)(de.a,{value:"",children:"brak"}),Object(p.jsx)(de.a,{value:"GET",children:"GET"}),Object(p.jsx)(de.a,{value:"POST",children:"POST"}),Object(p.jsx)(de.a,{value:"PATCH",children:"PATCH"}),Object(p.jsx)(de.a,{value:"DELETE",children:"DELETE"})]})]})}),Object(p.jsx)(ye.a,{item:!0,xs:6,md:3,children:Object(p.jsx)(ge,{label:"id u\u017cytkownika",name:"userId",value:null!==(e=null===(t=a.userId)||void 0===t?void 0:t.toString())&&void 0!==e?e:"",onChange:function(e){return c((function(t){return Object(B.a)(Object(B.a)({},t),{},{userId:e.target.value})}))}})})]})}var Ce=n(407),ze=n(409),Se=n(403),Ie=n(406),Pe=n(408),Ee=n(402),Te=n(395),Re=n(404),Me=n(28),Ae=n(405);function De(e){var t=new Date(e);return new Intl.DateTimeFormat("pl-PL",{dateStyle:"medium",timeStyle:"medium"}).format(t)}var We=new Intl.DateTimeFormat("pl-PL",{timeStyle:"medium"});function Fe(e){if(!e)return!1;var t=new Date(e);return Boolean(t.getDate())}var Ne=n(142),Ue=n.n(Ne),Be=n(141),Le=n.n(Be);function qe(e){var t=e.row,n=r.a.useState(!1),a=Object(v.a)(n,2),c=a[0],i=a[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Ee.a,{hover:!0,sx:{"& > *":{borderBottom:"unset"}},children:[Object(p.jsx)(Se.a,{children:Object(p.jsx)(Te.a,{"aria-label":"szczeg\xf3\u0142y zapytania",size:"small",onClick:function(){return i(!c)},children:c?Object(p.jsx)(Le.a,{}):Object(p.jsx)(Ue.a,{})})}),Object(p.jsx)(Se.a,{component:"th",scope:"row",children:t.id}),Object(p.jsx)(Se.a,{align:"left",children:t.endpoint}),Object(p.jsx)(Se.a,{align:"left",children:Math.fround(1e3*t.time).toPrecision(6)})]}),Object(p.jsx)(Ee.a,{children:Object(p.jsx)(Se.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(p.jsx)(Re.a,{in:c,timeout:"auto",unmountOnExit:!0,children:Object(p.jsxs)(o.a,{component:"pre",sx:{margin:1},children:[Object(p.jsx)(Ae.a,{component:Me.b,to:"/users/".concat(t.user),children:"Poka\u017c u\u017cytkownika"})," ",Object(p.jsx)("br",{}),De(t._created),"\xa0|\xa0",t.method,"\xa0",t.endpoint,Object(p.jsx)("br",{}),"czas przetwarzania: ",t.time," [s]",Object(p.jsx)("br",{}),"Cia\u0142o zapytania ",Object(p.jsx)("br",{}),JSON.stringify(JSON.parse(t.payload),void 0,3)]})})})})]})}function He(){var e=r.a.useContext(Oe).logs;return Object(p.jsx)(Ie.a,{children:Object(p.jsxs)(Ce.a,{"aria-label":"tabela log\xf3w",size:"small",children:[Object(p.jsx)(Pe.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(Se.a,{}),Object(p.jsx)(Se.a,{align:"left",children:"Id"}),Object(p.jsx)(Se.a,{align:"left",children:"Cel/endpoint"}),Object(p.jsx)(Se.a,{align:"left",children:"Czas wykonania\xa0[ms]"})]})}),Object(p.jsxs)(ze.a,{children:[0===e.length&&Object(p.jsx)(Ee.a,{children:Object(p.jsx)(Se.a,{colSpan:6,children:Object(p.jsx)(V.a,{textAlign:"center",p:"15px 0px",children:"Brak element\xf3w do wy\u015bwietlenia"})})}),e.map((function(e){return Object(p.jsx)(qe,{row:e},e.id)}))]})]})})}function _e(){return Object(p.jsx)(se,{name:"logs-query-params",default:{method:"PATCH",itemsOnPage:5},children:Object(p.jsx)(fe,{children:Object(p.jsxs)(re.a,{spacing:3,children:[Object(p.jsx)(we,{}),Object(p.jsx)(He,{}),Object(p.jsx)(xe,{})]})})})}var Ke=n(33),Ze=n(410),Ge=n(372),Qe=n(197),Je=n.n(Qe),Ve=n(106),Ye=n(394);function Xe(e){var t;return Object(p.jsxs)(Ye.a,{elevation:0,sx:Object(B.a)({p:2},e.sx),children:[(null===e||void 0===e?void 0:e.title)&&Object(p.jsx)(V.a,{variant:"body2",component:null!==(t=e.titleComponent)&&void 0!==t?t:"h2",color:"text.secondary",children:e.title}),e.children]})}var $e=["children","hidden","index"];function et(e){var t=e.children,n=e.hidden,a=e.index,c=Object(Ve.a)(e,$e);return r.a.useMemo((function(){return Object(p.jsx)(o.a,Object(B.a)(Object(B.a)({role:"tabpanel",hidden:n,id:"full-width-tabpanel-".concat(a),"aria-labelledby":"full-width-tab-".concat(a)},c),{},{children:Object(p.jsx)(Xe,{children:t})}))}),[n,a,t,c])}function tt(e){var t=Object(Ke.a)(),n=r.a.useState(0),a=Object(v.a)(n,2),c=a[0],i=a[1],s=r.a.useCallback((function(e,t){i(t)}),[]),o=r.a.useCallback((function(e){i(e)}),[]),u=r.a.useMemo((function(){return e.tabs.map((function(e,t){return Object(p.jsx)(Ze.a,Object(B.a)({label:Object(p.jsx)(V.a,{component:"h2",variant:"button",children:e.name})},function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}(t)),t)}))}),[e.tabs]),l=r.a.useMemo((function(){return e.tabs.map((function(e,n){return Object(p.jsx)(et,{index:n,hidden:c!==n,dir:t.direction,children:e.component},n)}))}),[e.tabs,c,t.direction]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(Ge.a,{allowScrollButtonsMobile:!0,value:c,onChange:s,indicatorColor:"primary",variant:"scrollable",sx:{borderBottom:2,borderColor:"divider"},children:u}),Object(p.jsx)("br",{}),Object(p.jsx)(Je.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:c,onChangeIndex:o,children:l})]})}var nt=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="/accesses",e}return Object(P.a)(n,[{key:"path",get:function(){return this._path}},{key:"getAll",value:function(){return this.get("/accesses")}},{key:"remove",value:function(e){return this.delete(e?"".concat(this.path,"/").concat(e):this.path)}},{key:"update",value:function(e,t){return this.patch("".concat(this.path,"/").concat(e),t)}},{key:"create",value:function(e){return this.post(this.path,e)}}]),n}(D),at=new nt,rt=n(411),ct=n(412),it=n(378);function st(e){return Object(p.jsxs)(V.a,{color:"text.secondary",variant:"body2",fontSize:"smaller",children:["Utworzono: ",De(e.model._created),Object(p.jsx)("br",{}),"Ostatnia aktualizacja: ",De(e.model._updated)]})}var ot=n(79),ut=n.n(ot),lt=n(101),jt=n.n(lt),dt=n(304);function bt(e){var t=e.title,n=e.subtitle,a=e.onSubmit,c=e.onCancel,i=e.children,s=r.a.useCallback((function(e){e.preventDefault(),a()}),[a]);return Object(p.jsxs)(re.a,{rowGap:3,children:[Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{variant:"h5",color:"primary.dark",children:t}),n&&Object(p.jsx)(V.a,{variant:"body2",color:"text.secondary",mt:"5px",children:n})]}),Object(p.jsxs)(ye.a,{container:!0,spacing:2,component:"form",onSubmit:s,children:[i,Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(re.a,{direction:"row",justifyContent:"space-around",mt:1.5,children:[Object(p.jsx)(dt.a,{"aria-label":"Zamknij",title:"Zamknij",startIcon:Object(p.jsx)(ut.a,{}),onClick:c,children:"Zamknij"}),Object(p.jsx)(dt.a,{"aria-label":"Zatwierd\u017a",title:"Zatwierd\u017a",startIcon:Object(p.jsx)(jt.a,{color:"inherit"}),type:"submit",color:"success",children:"Zatwierd\u017a"})]})})]})]})}var xt=n(371),pt=n(351);function mt(e){var t=e.children,n=e.open,a=e.sx,r=e.onClose;return Object(p.jsx)(xt.a,{open:n,onClose:r,closeAfterTransition:!0,BackdropComponent:Q.a,BackdropProps:{timeout:500},sx:{display:"flex",justifyContent:"center",alignItems:"flex-start",overflow:"auto"},children:Object(p.jsx)(pt.a,{in:n,children:Object(p.jsx)(Ye.a,{sx:Object(B.a)({bgcolor:"background.paper",position:"absolute",width:"95%",mt:"5vw",maxWidth:"500px",boxShadow:24,p:3},a),children:t})})})}var ht=[{name:"owner",label:"W\u0142a\u015bciciel"},{name:"accessAdmin",label:"Administrator klas dost\u0119pu"},{name:"premisesAdmin",label:"Administrator inwentarza"},{name:"keysAdmin",label:"Administrator kluczy"},{name:"reservationsAdmin",label:"Administrator rezerwacji "},{name:"reservationsAbility",label:"Mo\u017cliwo\u015b\u0107 rezerwacji"},{name:"logsAdmin",label:"Administrator log\xf3w"},{name:"statsViewer",label:"Dost\u0119p do statystyk"}];function Ot(e){var t,n=e.access,a=e.open,c=e.onClose,i=e.onSubmit,s=r.a.useState({}),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useCallback((function(e){var t;if("name"===e.target.name)t=e.target.value;else t=e.target.checked;l((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),d=r.a.useCallback((function(){c(),l({})}),[c]),b=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(n.id,u);case 2:if(!e.sent){e.next=5;break}c(),l({});case 5:case"end":return e.stop()}}),e)}))),[c,i,n.id,u]);return Object(p.jsx)(mt,{open:a,onClose:d,children:Object(p.jsxs)(bt,{onSubmit:b,onCancel:d,title:"Edycja klasy dost\u0119pu",subtitle:"Edycja klasy dost\u0119pu. Wprowadzone zmiany w spos\xf3b istotny wp\u0142ywaj\u0105 na zakres funkcji u\u017cytkownik\xf3w.",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,name:"name",label:"nazwa",id:"nazwa",value:null!==(t=u.name)&&void 0!==t?t:n.name,onChange:j})}),ht.map((function(e,t){return Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(rt.a,{labelPlacement:"start",control:Object(p.jsx)(ct.a,{id:"access-".concat(e.name),name:e.name,inputProps:{"aria-label":e.label},onChange:j,checked:e.name in u?u[e.name]:n[e.name]}),label:e.label})},t)})),Object(p.jsx)(ye.a,{item:!0,xs:12,ml:2,children:Object(p.jsx)(st,{model:n})})]})})}function ft(e){var t=e.open,n=e.onClose,a=e.onSubmit,c=r.a.useState(""),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){o(e.target.value)}),[]),l=r.a.useCallback((function(){n(),o("")}),[n]),j=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({name:s});case 2:if(!e.sent){e.next=5;break}n(),o("");case 5:case"end":return e.stop()}}),e)}))),[n,a,s]);return Object(p.jsx)(mt,{open:t,onClose:l,children:Object(p.jsx)(bt,{onSubmit:j,onCancel:l,title:"Tworzenie klasy dost\u0119pu",subtitle:"Podaj nazw\u0119 dla nowej klasy dost\u0119pu. Stworzona zostanie klasa bez \u017cadnych uprawnie\u0144 - pami\u0119taj aby dostosowa\u0107 ja do swoich potrzeb.",children:Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{autoFocus:!0,required:!0,name:"name",label:"nazwa",id:"nazwa",value:s,onChange:u})})})})}var vt=r.a.createContext(null);function yt(e){var t=S(),n=r.a.useState(!1),a=Object(v.a)(n,2),c=a[0],i=a[1],s=r.a.useState(),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useState(),d=Object(v.a)(j,2),b=d[0],x=d[1],m=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at.getAll();case 3:n=e.sent,x(n.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t(e.t0.description,"error"),x([]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);r.a.useEffect((function(){m()}),[m]);var h=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(n,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at.update(n,a);case 3:if(!e.sent){e.next=6;break}x((function(e){if(e)return e.map((function(e){return e.id===n&&(e=Object(B.a)(Object(B.a)({},e),a)),e}))})),t("Klasa dost\u0119pu zosta\u0142a zaktualizowana","success");case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[t]),y=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at.remove(n);case 3:return x((function(e){if(e)return e.filter((function(e){return e.id!==n}))})),t("Klasa dost\u0119pu zosta\u0142a usuni\u0119ta","success"),e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error");case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]),k=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,at.create(n);case 3:return a=e.sent,x((function(e){return null===e||void 0===e||e.unshift(Object(B.a)(Object(B.a)({},n),{},{id:a.data,_created:(new Date).toUTCString(),_updated:(new Date).toUTCString()})),Object.assign([],e)})),t("Klasa dost\u0119pu zosta\u0142a utworzona","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[t]),g=r.a.useMemo((function(){return null===b||void 0===b?void 0:b.find((function(e){return e.id===u}))}),[u,b]),w=r.a.useCallback((function(e){l(e),i(!0)}),[]);return b?Object(p.jsxs)(vt.Provider,{value:{accessesList:b,updateAccess:h,deleteAccess:y,createAccess:k,openAccess:w},children:[e.children,g&&Object(p.jsx)(Ot,{open:c,onSubmit:h,onClose:function(){return i(!1)},access:g})]}):null}function kt(){return r.a.useContext(vt)}var gt=n(40),wt=n.n(gt);function Ct(e){var t=e.open,n=e.onSuccess,a=e.onClose,c=e.objectName,i=S(),s=r.a.useState(""),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u===c){e.next=3;break}return i("Wpisana nazwa jest niepoprawna","error"),e.abrupt("return");case 3:n(),l("");case 5:case"end":return e.stop()}}),e)}))),[c,u,n,i]),d=r.a.useCallback((function(){l(""),a()}),[a]);return Object(p.jsx)(mt,{open:t,onClose:d,"aria-label":"Okno do usuwania obiektu",sx:{maxWidth:"400px"},children:Object(p.jsxs)(re.a,{direction:"column",spacing:3,children:[Object(p.jsx)(V.a,{variant:"h5",color:"primary.dark",children:"Usuwanie obiektu"}),Object(p.jsxs)(V.a,{variant:"body1",color:"text.secondary",children:["Tej operacji nie da si\u0119 cofn\u0105\u0107.",Object(p.jsx)("br",{}),"1. Przepisz nazw\u0119 ",Object(p.jsx)("b",{children:c}),Object(p.jsx)("br",{}),"2. Naci\u015bnij 'Zatwierd\u017a'"]}),Object(p.jsx)(it.a,{id:"resource-name",label:"nazwa",variant:"outlined",value:u,onChange:function(e){return l(e.target.value)}}),Object(p.jsxs)(re.a,{direction:"row",justifyContent:"space-around",children:[Object(p.jsx)(dt.a,{startIcon:Object(p.jsx)(ut.a,{}),onClick:d,children:"Anuluj"}),Object(p.jsx)(dt.a,{startIcon:Object(p.jsx)(wt.a,{color:"inherit"}),onClick:j,color:"error",children:"Zatwierd\u017a"})]})]})})}function zt(e){return Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{variant:"h4",component:"h2",color:"primary.dark",children:e.title}),e.subtitle&&Object(p.jsx)(V.a,{variant:"body1",color:"text.secondary",mt:"5px",children:e.subtitle})]})}var St=n(80),It=n.n(St);function Pt(e){return Object(p.jsx)(Ee.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:Object(p.jsx)(Se.a,{colSpan:12,align:"left",children:Object(p.jsx)(Te.a,{title:"Dodaj klas\u0119 dost\u0119pu","aria-label":"Dodaj klas\u0119 dost\u0119pu",onClick:e.onClick,children:Object(p.jsx)(It.a,{fontSize:"large"})})})})}var Et=n(198),Tt=n.n(Et);function Rt(e){return Object(p.jsxs)(Ee.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(p.jsx)(Se.a,{component:"th",scope:"row",children:e.id}),Object(p.jsx)(Se.a,{align:"left",children:e.name}),Object(p.jsxs)(Se.a,{align:"center",children:[Object(p.jsx)(Te.a,{title:"Usu\u0144 klas\u0119 dost\u0119pu","aria-label":"Usu\u0144 klas\u0119 dost\u0119pu",color:"error",onClick:e.onDelete,children:Object(p.jsx)(wt.a,{})}),Object(p.jsx)(Te.a,{title:"Otw\xf3rz w oknie","aria-label":"Otw\xf3rz w oknie",onClick:e.onSelect,children:Object(p.jsx)(Tt.a,{})})]})]})}function Mt(){var e,t=kt(),n=t.accessesList,a=t.openAccess,c=t.createAccess,i=t.deleteAccess,s=r.a.useState(!1),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useState(!1),d=Object(v.a)(j,2),b=d[0],x=d[1],m=r.a.useState(null),h=Object(v.a)(m,2),y=h[0],k=h[1],g=r.a.useMemo((function(){return n.map((function(e){var t=e.id,n=e.name;return Object(p.jsx)(Rt,{id:t,name:n,onSelect:function(){return a(t)},onDelete:function(){k({id:t,name:n}),x(!0)}},t)})).reverse()}),[n,a]),w=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,i(y.id);case 4:if(!e.sent){e.next=6;break}x(!1);case 6:case"end":return e.stop()}}),e)}))),[y,i]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ft,{open:u,onClose:function(){return l(!1)},onSubmit:c}),Object(p.jsx)(Ct,{objectName:null!==(e=null===y||void 0===y?void 0:y.name)&&void 0!==e?e:"",open:b,onClose:function(){k(null),x(!1)},onSuccess:w}),Object(p.jsxs)(re.a,{spacing:4,children:[Object(p.jsx)(zt,{title:"Lista klas dost\u0119pu",subtitle:"Tw\xf3rz, edytuj i usuwaj klasy dost\u0119pu."}),Object(p.jsx)(Ie.a,{children:Object(p.jsxs)(Ce.a,{sx:{maxWidth:550},size:"small","aria-label":"tabela klas dost\u0119p\xf3w",children:[Object(p.jsx)(Pe.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(Se.a,{children:"nr id"}),Object(p.jsx)(Se.a,{align:"left",children:"nazwa"}),Object(p.jsx)(Se.a,{align:"center",children:"opcje"})]})}),Object(p.jsxs)(ze.a,{children:[g,Object(p.jsx)(Pt,{onClick:function(){return l(!0)}})]})]})})]})]})}var At=[{field:"Identyfikator - id",text:"Numer identyfikacyjny klasy dost\u0119pu. Ten numer przypisujesz u\u017cytkownikowi podczas zmiany uprawnie\u0144."},{field:"Nazwa - name",text:"Nazwa klasy dost\u0119pu"},{field:"W\u0142a\u015bciciel - owner",text:Object(p.jsx)(p.Fragment,{children:"Najwy\u017cszy zestaw uprawnie\u0144. U\u017cytkownik ma mo\u017cliwo\u015b\u0107 zmiany konfiguracji platformy oraz posiada on wszystkie inne uprawnienia w\u0142\u0105czaj\u0105c w to edytowanie danych innych u\u017cytkownik\xf3w. Jest w\u0142a\u015bcicielem platformy."})},{field:"Administrator klas dost\u0119pu - accessAdmin",text:"U\u017cytkownik ma mo\u017cliwo\u015b\u0107 tworzenia, edytowania oraz usuwania klas dost\u0119pu. Jest odpowiedzialny za przydzielanie dost\u0119pu u\u017cytkownikom."},{field:"Administrator inwentarza - premisesAdmin",text:"U\u017cytkownik jest odpowiedzialny za tworzenie, edycj\u0119 i usuwanie adres\xf3w, budynk\xf3w i sal."},{field:"Administrator kluczy - keysAdmin",text:"U\u017cytkownik ma mo\u017cliwo\u015b\u0107 przypisywania i usuwania tag\xf3w RFID dla ka\u017cdej sali."},{field:"Mo\u017cliwo\u015b\u0107 rezerwacji - reservationsAbility",text:"U\u017cytkownik ma mo\u017cliwo\u015b\u0107 tworzenia rezerwacji"},{field:"Administrator rezerwacji - reservationsAdmin",text:"U\u017cytkownik ma mo\u017cliwo\u015b\u0107 edytowania oraz usuwania rezerwacji stworzonych przez innych u\u017cytkownik\xf3w."},{field:"Administrator log\xf3w - logsAdmin",text:"U\u017cytkownik ma mo\u017cliwo\u015b\u0107 przegl\u0105dania log\xf3w aplikacji."},{field:"Dost\u0119p do statystyk - statsViewer",text:"U\u017cytkownik mo\u017ce przegl\u0105da\u0107 statystyki wygenerowane dla aplikacji, u\u017cytkownika, budynku i pokoju."}];function Dt(){var e=r.a.useMemo((function(){return At.map((function(e,t){var n=e.field,a=e.text;return Object(p.jsxs)("li",{children:[Object(p.jsx)(V.a,{variant:"subtitle1",component:"h3",children:n}),Object(p.jsx)(V.a,{variant:"body2",color:"text.secondary",mb:1,children:a})]},t)}))}),[]);return Object(p.jsxs)(re.a,{spacing:3,children:[Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{component:"h1",variant:"h3",color:"primary.dark",children:"Klasy Dost\u0119pu"}),Object(p.jsxs)(V.a,{variant:"body1",color:"text.secondary",mt:"5px",children:["Dost\u0119pne tutaj opcje wp\u0142ywaj\u0105 znacz\u0105co na funkcjonowanie ca\u0142ej platformy. ",Object(p.jsx)("br",{}),"Konigurowanie klas dost\u0119pu u\u017cytkownik\xf3w to bardzo odpowiedzialne zadanie. Upewnij si\u0119 \u017ce nadajesz tylko wymagane uprawnienia. Stosuj si\u0119 do modelu ",Object(p.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://en.wikipedia.org/wiki/Principle_of_least_privilege",children:"Least Privilege"}),"."]})]}),Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{variant:"h5",component:"h2",children:"Pola u\u017cywane w klasach dost\u0119pu:"}),Object(p.jsx)("ul",{children:e})]})]})}var Wt=n(398),Ft=n(413),Nt=n(379),Ut=n(358),Bt=n(357),Lt=n(376),qt=n(356),Ht=n(199),_t=n.n(Ht),Kt=n(355),Zt=["withIcon"];function Gt(e){var t=e.withIcon,n=Object(Ve.a)(e,Zt);return Object(p.jsxs)(Ae.a,Object(B.a)(Object(B.a)({component:Me.b,underline:"hover",display:"inline-flex"},n),{},{children:[t&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Kt.a,{fontSize:"small"}),"\xa0"]}),n.children]}))}function Qt(e,t){return e.filter((function(e){return void 0===t.find((function(t){return t.id===e.id}))}))}function Jt(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function Vt(e,t){return e.filter((function(e){return t.find((function(t){return t.id===e}))}))}function Yt(){var e,t,n=kt().accessesList,r=S(),c=a.useState([]),i=Object(v.a)(c,2),s=i[0],u=i[1],l=a.useState([]),j=Object(v.a)(l,2),d=j[0],b=j[1],x=a.useState([]),m=Object(v.a)(x,2),h=m[0],y=m[1],k=a.useState({left:null===(e=n[0])||void 0===e?void 0:e.id,right:null===(t=n[1])||void 0===t?void 0:t.id}),g=Object(v.a)(k,2),w=g[0],C=g[1],z=a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.updateAccess(t.id,n);case 3:return e.abrupt("return",t);case 6:return e.prev=6,e.t0=e.catch(0),r(e.t0.description,"error"),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(a);case 3:return c=e.sent,e.abrupt("return",c.filter((function(e){return!1!==e})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r]),I=a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.getUsers({accessId:t,deleted:!1});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),r(e.t0.description,"error");case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[r]);a.useEffect((function(){I(w.left).then((function(e){return b(e)}))}),[w.left,I]),a.useEffect((function(){I(w.right).then((function(e){return y(e)}))}),[w.right,I]);var P=a.useMemo((function(){return Vt(s,d)}),[s,d]),E=a.useMemo((function(){return Vt(s,h)}),[s,h]),T=a.useCallback((function(e){return function(){u((function(t){var n=t.indexOf(e),a=Object.assign([],t);return-1===n?a.push(e):a.splice(n,1),a}))}}),[]),R=a.useCallback(Object(f.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.filter((function(e){var t=e.id;return-1!==P.indexOf(t)})),e.next=3,z(t,w.right);case 3:n=e.sent,y(h.concat(n)),b(Qt(d,n)),u(Jt(s,P));case 7:case"end":return e.stop()}}),e)}))),[P,h,d,s,w.right,z]),M=a.useCallback(Object(f.a)(O.a.mark((function e(){var t,n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.filter((function(e){var t=e.id;return-1!==E.indexOf(t)})),e.next=3,z(t,w.left);case 3:n=e.sent,b(d.concat(n)),a=Qt(h,n),console.log(a),y(a),u(Jt(s,E));case 9:case"end":return e.stop()}}),e)}))),[E,d,h,s,w.left,z]),A=a.useCallback((function(e){var t=Number(e.target.value);C((function(n){return n.left===t||n.right===t?n:Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,Number(e.target.value)))}))}),[]),D=a.useCallback((function(e,t){return Object(p.jsxs)(Ft.a,{children:[Object(p.jsx)(o.a,{sx:{p:2},children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-klase-dost\u0119pu",children:"Klasa dost\u0119pu"}),Object(p.jsx)(je.a,{labelId:"wybierz-klase-dost\u0119pu",name:e,value:w[e],label:"klasa dost\u0119pu",onChange:A,children:n.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)(de.a,{value:n,children:[t," "]},t)}))})]})}),Object(p.jsx)(qt.a,{}),Object(p.jsxs)(Wt.a,{sx:{height:550,bgcolor:"background.paper",overflow:"auto"},dense:!0,component:"div",role:"list",children:[t.map((function(e){var t="transfer-list-all-item-".concat(e.id,"-label");return Object(p.jsxs)(Nt.a,{role:"listitem",button:!0,onClick:T(e.id),children:[Object(p.jsx)(Bt.a,{children:Object(p.jsx)(Lt.a,{checked:-1!==s.indexOf(e.id),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(p.jsx)(Ut.a,{id:t,primary:e.email}),Object(p.jsx)(Bt.a,{onClick:function(e){return e.stopPropagation()},color:"primary",children:Object(p.jsx)(Gt,{to:$.toUser(e.id),children:Object(p.jsx)(_t.a,{})})})]},e.id)})),Object(p.jsx)(Nt.a,{})]})]})}),[T,s,A,w,n]);return Object(p.jsxs)(ye.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(zt,{title:"Administracja klasami dost\u0119pu",subtitle:"Wybierz stworzone klasy dost\u0119pu i przydzielaj role dla u\u017cytkownik\xf3w"})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:5,children:D("left",d)}),Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsxs)(ye.a,{container:!0,direction:"column",alignItems:"center",children:[Object(p.jsx)(dt.a,{sx:{my:.5},variant:"outlined",size:"small",onClick:R,disabled:0===P.length,"aria-label":"move selected right",children:">"}),Object(p.jsx)(dt.a,{sx:{my:.5},variant:"outlined",size:"small",onClick:M,disabled:0===E.length,"aria-label":"move selected left",children:"<"})]})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:5,children:D("right",h)})]})}function Xt(){var e=r.a.useMemo((function(){var e=[];return e.push({name:"Informacje",component:Object(p.jsx)(Dt,{})}),e.push({name:"Lista klas",component:Object(p.jsx)(Mt,{})}),e.push({name:"Administracja",component:Object(p.jsx)(Yt,{})}),e.push({name:"Logi",component:Object(p.jsx)(_e,{})}),e}),[]);return Object(p.jsx)(yt,{children:Object(p.jsx)(tt,{tabs:e})})}function $t(){return Object(a.useContext)(te)}var en=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="",e}return Object(P.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId,a=e.roomId;this._path="/addresses/".concat(t,"/buildings/").concat(n,"/rooms/").concat(a)}},{key:"getView",value:function(){return this.get(this.path)}},{key:"create",value:function(e,t){var n=e.addressId,a=e.buildingId;return this.post("/addresses/".concat(n,"/buildings/").concat(a,"/rooms"),t)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"updateRFID",value:function(e){return this.patch("".concat(this.path,"/keys"),{RFIDTag:e})}},{key:"deleteRFIDTag",value:function(){return this.delete("".concat(this.path,"/keys"))}}]),n}(D),tn=new en,nn=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="",e}return Object(P.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e){return this.post("/addresses",e)}},{key:"getBuildings",value:function(){return this.get("".concat(this.path,"/buildings"))}},{key:"getResourcesMap",value:function(){return this.get("/addresses/resources")}}]),n}(D),an=new nn,rn=r.a.createContext(null);function cn(e){var t=r.a.useState([]),n=Object(v.a)(t,2),a=n[0],c=n[1],i=r.a.useState(!1),s=Object(v.a)(i,2),o=s[0],u=s[1],l=he(3e5),j=$t().user,d=S(),b=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,an.getResourcesMap();case 3:(null===(t=e.sent)||void 0===t?void 0:t.data)&&c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d]);r.a.useEffect((function(){j&&b(),u(!0)}),[j,b,l]);var x=r.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]),m=r.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2)}),[a]),h=r.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return{name:e.name,href:e.href,id:e.id}}))})).flat(2)}),[a]),y=r.a.useMemo((function(){return a.map((function(e){return{name:e.name,href:e.href,id:e.id}}))}),[a]),k=r.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]);return!1===o?null:Object(p.jsx)(rn.Provider,{value:{resourceMap:a,reloadMap:function(){b()},allRooms:m,getRoomLink:x,getBuildingLink:k,allAddresses:y,allBuildings:h},children:e.children})}function sn(){return r.a.useContext(rn)}var on=Object(a.createContext)(null);function un(e){var t=e.children,n=sn(),a=n.getBuildingLink,c=n.reloadMap,i=S(),s=Object(y.h)(),o=r.a.useState(),u=Object(v.a)(o,2),l=u[0],j=u[1],d=he(6e4);r.a.useLayoutEffect((function(){tn.setPath(s)}),[s]);var b=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn.getView();case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)}))),[s,d]),x=r.a.useCallback((function(e){j((function(t){if(t)return Object(B.a)(Object(B.a)({},t),{},{occupied:e})}))}),[]),m=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,tn.update(t);case 5:return j((function(e){if(e)return Object(B.a)(Object(B.a)({},e),t)})),i("Sala zosta\u0142a zaktualizowana","success"),("name"in t&&t.name!==l.name||"buildingId"in t&&t.buildingId!==(null===l||void 0===l?void 0:l.building.id))&&c(),e.abrupt("return",!0);case 11:e.prev=11,e.t0=e.catch(2),i(e.t0.description,"error");case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[i,c,l]),h=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,tn.remove();case 5:c(),i("Sala zosta\u0142a usuni\u0119ta","success",(function(){return Object(p.jsx)(y.a,{to:a(l.building.id)})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i(e.t0.description,"error");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[i,l,c,a]),k=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.updateRFID(t);case 3:return j((function(e){if(e)return Object(B.a)(Object(B.a)({},e),{},{RFIDTag:t})})),i("Tag zosta\u0142 przypisany","success"),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),i(e.t0.description,"error"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[i]),g=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.deleteRFIDTag();case 3:j((function(e){if(e)return Object(B.a)(Object(B.a)({},e),{},{RFIDTag:null})})),i("Tag zosta\u0142 usuni\u0119ty","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]);return r.a.useEffect((function(){return b(),function(){}}),[b]),Boolean(l)?Object(p.jsx)(on.Provider,{value:{room:l,updateRoom:m,deleteRoom:h,updateRFIDTag:k,deleteRFIDTag:g,setOccupied:x},children:t}):null}function ln(){return r.a.useContext(on)}var jn=n(414),dn=n(384),bn=n(415),xn=n(143),pn=n.n(xn);function mn(e){var t=e.user;return Object(p.jsxs)(Ft.a,{"aria-label":"Rezerwuj\u0105cy u\u017cytkownik",sx:{minHeight:"150px"},children:[Object(p.jsx)(jn.a,{avatar:Object(p.jsx)(dn.a,{sx:{width:56,height:56},alt:"".concat(t.name," ").concat(t.surname),src:U.getLink(t.image)}),title:"".concat(t.name," ").concat(t.surname),subheader:Object(p.jsx)(Ae.a,{"aria-label":"wy\u015blij email",title:"wy\u015blij email",href:"mailto:".concat(t.email),children:t.email}),action:Object(p.jsx)(Me.b,{to:$.toUser(t.id),"aria-label":"Poka\u017c u\u017cytkownika",title:"Poka\u017c u\u017cytkownika",children:Object(p.jsx)(pn.a,{})})}),Object(p.jsx)(bn.a,{children:Object(p.jsxs)(V.a,{variant:"body2",fontSize:"smaller",color:"text.secondary","aria-label":"Data ostatniej aktywno\u015bci",title:"Data ostatniej aktywno\u015bci",children:["Ostatnia aktywno\u015b\u0107: ",De(t.lastActivity)]})})]})}var hn=n(416);function On(e){var t=e.room,n=sn(),a=n.getRoomLink,c=n.getBuildingLink,i=r.a.useMemo((function(){return a(t.id)}),[t.id,a]),s=r.a.useMemo((function(){return c(t.building)}),[t.building,c]);return Object(p.jsxs)(Ft.a,{sx:{display:"flex",minHeight:"150px"},children:[Object(p.jsx)(hn.a,{component:"img",image:U.getLink(t.image),alt:"zdj\u0119cie sali ".concat(t.name),sx:{maxWidth:"40%",maxHeight:"100%"}}),Object(p.jsxs)(o.a,{sx:{width:"60%"},children:[Object(p.jsx)(jn.a,{title:"Sala ".concat(t.name),subheader:t.roomType,sx:{pt:1,pb:0},action:Object(p.jsx)(Gt,{to:i,"aria-label":"Otw\xf3rz stron\u0119 Pokoju",title:"Otw\xf3rz stron\u0119 Pokoju",children:Object(p.jsx)(pn.a,{})})}),Object(p.jsx)(bn.a,{children:Object(p.jsxs)(V.a,{variant:"body2",color:"text.secondary",children:[Object(p.jsx)(Gt,{withIcon:!0,to:s,"aria-label":"Poka\u017c budynek",title:"Poka\u017c budynek",children:"poka\u017c budynek"})," ",Object(p.jsx)("br",{}),"Aktualnie ",t.occupied?"zaj\u0119ta":"wolna",Object(p.jsx)("br",{})]})})]})]})}var fn=n(374);function vn(){return r.a.useContext(qn)}function yn(e){var t,n,a,c,i,s=vn().updateReservation,o=sn().allRooms,u=r.a.useState({}),l=Object(v.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback((function(){e.onClose(),d({})}),[e]),x=r.a.useCallback(Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e.reservation.id,j);case 2:if(!t.sent){t.next=5;break}b(),d({});case 5:case"end":return t.stop()}}),t)}))),[e,j,b,s]),m=r.a.useCallback((function(e){d((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]);return Object(p.jsx)(mt,{open:e.open,onClose:b,"aria-label":"Okno do edycji rezerwacji",children:Object(p.jsxs)(bt,{title:"Edycja rezerwacji",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:x,onCancel:e.onClose,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(t=j.title)&&void 0!==t?t:e.reservation.title,onChange:m})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(n=j.description)&&void 0!==n?n:e.reservation.description,onChange:m})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(fn.a,{minDate:new Date,label:"Pocz\u0105tek",inputFormat:"yyyy-MM-dd HH:mm",value:null!==(a=j.plannedStart)&&void 0!==a?a:e.reservation.plannedStart,onChange:function(e){return d((function(t){return Object(B.a)(Object(B.a)({},t),{},{plannedStart:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(fn.a,{minDate:new Date,label:"Koniec",inputFormat:"yyyy-MM-dd HH:mm",value:null!==(c=j.plannedEnd)&&void 0!==c?c:e.reservation.plannedEnd,onChange:function(e){return d((function(t){return Object(B.a)(Object(B.a)({},t),{},{plannedEnd:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(p.jsx)(je.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(i=j.roomId)&&void 0!==i?i:e.reservation.room.id,label:"Sala",onChange:function(e){return d((function(t){return Object(B.a)(Object(B.a)({},t),{},{roomId:Number(e.target.value)})}))},children:o.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)(de.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}function kn(e){var t,n,a,c,i=vn().createReservation,s=sn().allRooms,u=S(),l=r.a.useState({color:"",from:new Date(e.reservation.plannedStart),to:new Date(e.reservation.plannedEnd)}),j=Object(v.a)(l,2),d=j[0],b=j[1],x=r.a.useState([]),m=Object(v.a)(x,2),h=m[0],y=m[1],k=r.a.useState({title:e.reservation.title,description:e.reservation.description,roomId:null!==(t=e.reservation.room.id)&&void 0!==t?t:0}),g=Object(v.a)(k,2),w=g[0],C=g[1],z=r.a.useCallback((function(){e.onClose()}),[e]),I=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.map(function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(B.a)(Object(B.a)({},w),{},{plannedStart:t.from,plannedEnd:t.to}));case 2:return n=e.sent,t.color=n?"green":"red",e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,y(n);case 5:case"end":return e.stop()}}),e)}))),[w,h,i]),P=r.a.useCallback((function(e){y((function(t){return t.splice(e,1),Object.assign([],t)}))}),[]),E=r.a.useCallback((function(){h.find((function(e){var t=e.from,n=e.to;return t===d.from||n===d.to}))?u("Daty powinny si\u0119 r\xf3\u017cni\u0107","error"):y((function(e){return e.push(Object(B.a)(Object(B.a)({},d),{},{color:""})),Object.assign([],e)}))}),[d,u,h]),T=r.a.useCallback((function(e){C((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]);return Object(p.jsx)(mt,{open:e.open,onClose:z,"aria-label":"Okno do kopiowania rezerwacji",children:Object(p.jsxs)(bt,{title:"Kopiowanie rezerwacji",subtitle:"Skopiuj rezerwacj\u0119 dla wybranych przez siebie nowych dat.",onSubmit:I,onCancel:e.onClose,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(n=w.title)&&void 0!==n?n:e.reservation.title,onChange:T})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(a=w.description)&&void 0!==a?a:e.reservation.description,onChange:T})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:5,children:Object(p.jsx)(fn.a,{minDate:new Date,label:"Pocz\u0105tek",inputFormat:"yyyy-MM-dd HH:mm",value:d.from,onChange:function(e){return b((function(t){return Object(B.a)(Object(B.a)({},t),{},{from:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:5,children:Object(p.jsx)(fn.a,{minDate:new Date,label:"Koniec",inputFormat:"yyyy-MM-dd HH:mm",value:d.to,onChange:function(e){return b((function(t){return Object(B.a)(Object(B.a)({},t),{},{to:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:2,children:Object(p.jsx)(dt.a,{size:"large",sx:{height:"100%",width:"100%"},variant:"outlined",onClick:E,children:"Dodaj"})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(re.a,{spacing:1,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5,bgcolor:"background.default",maxHeight:"200px",overflow:"auto"},children:[0===h.length&&Object(p.jsx)(V.a,{textAlign:"center",component:"p",children:"Brak dat"}),h.map((function(e,t){var n=e.color,a=e.from,r=e.to;return Object(p.jsxs)(o.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pl:"3px"},children:[Object(p.jsxs)(V.a,{component:"p",sx:{color:n},children:[De(a.toString()),"\xa0-\xa0",De(r.toString())]}),Object(p.jsx)(Te.a,{onClick:function(){return P(t)},children:Object(p.jsx)(wt.a,{})})]},t)}))]})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(p.jsx)(je.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(c=w.roomId)&&void 0!==c?c:e.reservation.room.id,label:"Sala",onChange:function(e){return C((function(t){return Object(B.a)(Object(B.a)({},t),{},{roomId:Number(e.target.value)})}))},children:s.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)(de.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var gn=n(123),wn=n.n(gn),Cn=n(359),zn=Object(Cn.a)("input")({position:"absolute",left:"-1000px",color:"transparent"});function Sn(e){var t=r.a.useState(""),n=Object(v.a)(t,2),a=n[0],c=n[1],i=r.a.useState("primary"),s=Object(v.a)(i,2),u=s[0],l=s[1],j=r.a.useRef(null),d=function(){var t=Object(f.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.onScan(a);case 3:t.sent?(l("success"),setTimeout(b,2e3)):l("error"),c("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){e.onClose(),c(""),l("primary")};return Object(p.jsxs)(re.a,{onClick:function(){j.current&&console.log(j.current.focus())},component:"form",direction:"column",spacing:4,onSubmit:d,children:[Object(p.jsx)(wn.a,{sx:{fontSize:140,alignSelf:"center"},color:u}),Object(p.jsx)(zn,{ref:j,autoFocus:!0,type:"text",value:a,onChange:function(e){return c(e.target.value)}}),Object(p.jsxs)(o.a,{component:"span",textAlign:"center",children:[Object(p.jsx)(V.a,{variant:"h5",color:"primary.dark",children:e.headline}),Object(p.jsx)(V.a,{variant:"body2",color:"text.secondary",mt:"5px",children:e.bodyText})]}),Object(p.jsx)(dt.a,{startIcon:Object(p.jsx)(ut.a,{}),onClick:b,color:"error",children:"Zamknij"})]})}function In(e){var t=vn().pingKeyForReservation,n=r.a.useCallback(function(){var n=Object(f.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t(e.reservationId,a));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(p.jsx)(mt,{open:e.open,onClose:e.onClose,"aria-label":"Okno do edycji rezerwacji",sx:{maxWidth:"400px"},children:Object(p.jsx)(Sn,{headline:"Wczytaj klucz z tagiem NFC",bodyText:'Przy pomocy czytnika, wczytaj wydawany klucz. Aby opu\u015bci\u0107 to okno, naci\u015bnij "Zamknij"',onScan:n,onClose:e.onClose})})}var Pn=n(202),En=n.n(Pn),Tn=n(201),Rn=n.n(Tn),Mn=n(360),An=n(223),Dn=n(200),Wn=n.n(Dn);function Fn(e){var t=r.a.useState(null),n=Object(v.a)(t,2),a=n[0],c=n[1],i=Boolean(a),s=r.a.useCallback((function(e){c(e.currentTarget)}),[]),o=function(){c(null)};return Object(p.jsxs)("div",{children:[Object(p.jsx)(Te.a,{"aria-label":"card-more-button","aria-controls":"card-menu","aria-expanded":i?"true":void 0,"aria-haspopup":"true",onClick:s,children:Object(p.jsx)(Wn.a,{})}),Object(p.jsx)(An.a,{MenuListProps:{"aria-labelledby":"card-more-button"},anchorEl:a,id:"card-menu",open:i,onClose:o,PaperProps:{style:{width:"20ch"}},children:e.options.map((function(e,t){return Object(p.jsxs)(de.a,{onClick:o,children:[Object(p.jsx)(Bt.a,{children:e.icon}),Object(p.jsx)(V.a,{onClick:e.action,children:e.label})]},t)}))})]})}function Nn(e){return Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(p.jsx)(V.a,{variant:"body1",color:"text.secondary",textAlign:"justify",children:e.children})]})}function Un(e){var t=vn().deleteReservation,n=r.a.useState(!1),a=Object(v.a)(n,2),c=a[0],i=a[1],s=r.a.useState(!1),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useState(!1),d=Object(v.a)(j,2),b=d[0],x=d[1],m=r.a.useState(!1),h=Object(v.a)(m,2),y=h[0],k=h[1],g=r.a.useCallback(Object(f.a)(O.a.mark((function n(){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(e.reservation.id);case 2:if(!n.sent){n.next=4;break}i(!1);case 4:case"end":return n.stop()}}),n)}))),[e.reservation.id,t]),w=r.a.useMemo((function(){return[{icon:Object(p.jsx)(wn.a,{color:"primary"}),label:"Odbij klucz",action:function(){return x(!0)}},{icon:Object(p.jsx)(Rn.a,{color:"primary"}),label:"Kopiuj",action:function(){return k(!0)}},{icon:Object(p.jsx)(Mn.a,{color:"primary"}),label:"Edytuj",action:function(){return l(!0)}},{icon:Object(p.jsx)(wt.a,{color:"error"}),label:"Usu\u0144",action:function(){return i(!0)}}]}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ct,{open:c,onClose:function(){return i(!1)},objectName:e.reservation.title,onSuccess:g}),Object(p.jsx)(yn,{open:u,onClose:function(){return l(!1)},reservation:e.reservation}),Object(p.jsx)(kn,{open:y,onClose:function(){return k(!1)},reservation:e.reservation}),Object(p.jsx)(In,{open:b,onClose:function(){return x(!1)},reservationId:e.reservation.id}),Object(p.jsx)(mt,{open:e.open,onClose:e.onClose,"aria-label":"Widok Rezerwacji",sx:{maxWidth:"800px",mt:"4vw"},children:Object(p.jsxs)(re.a,{spacing:4,alignItems:"stretch",children:[Object(p.jsxs)(re.a,{direction:"row",justifyContent:"space-between",children:[Object(p.jsx)(V.a,{component:"h2",variant:"h4",children:e.reservation.title}),Object(p.jsx)(Te.a,{onClick:e.onClose,children:Object(p.jsx)(En.a,{})})]}),Object(p.jsxs)(re.a,{direction:"row",justifyContent:"space-between",children:[Object(p.jsx)(dt.a,{color:"success",startIcon:Object(p.jsx)(wn.a,{}),onClick:function(){return x(!0)},title:"Odbij klucz","aria-label":"Odbij klucz",children:"Odbij klucz"}),Object(p.jsx)(Fn,{options:w})]}),Object(p.jsx)(Nn,{title:"Planowany czas:",children:"".concat(De(e.reservation.plannedStart)," - ").concat(De(e.reservation.plannedEnd))}),Object(p.jsxs)(Nn,{title:"Faktyczny czas:",children:["Rozpocz\u0119to: ",e.reservation.actualStart?De(e.reservation.actualStart):"NIE",Object(p.jsx)("br",{}),"Zako\u0144czono: ",e.reservation.actualEnd?De(e.reservation.actualEnd):"NIE"]}),Object(p.jsx)(Nn,{title:"Opis:",children:e.reservation.description}),Object(p.jsx)(ye.a,{container:!0,children:[{title:"U\u017cytkownik:",component:Object(p.jsx)(mn,{user:e.reservation.user})},{title:"Zarezerwowana sala:",component:Object(p.jsx)(On,{room:e.reservation.room})}].map((function(e,t){var n=e.title,a=e.component;return Object(p.jsxs)(ye.a,{item:!0,xs:12,lg:6,pr:"10px",children:[Object(p.jsx)(V.a,{sx:{p:"25px 0px 10px 0px",color:"text.secondary"},variant:"subtitle2",children:n}),a]},t)}))})]})})]})}var Bn=r.a.createContext({showReservation:function(e){},reservation:null});function Ln(e){var t,n=vn().reservations,a=r.a.useState(!0),c=Object(v.a)(a,2),i=c[0],s=c[1],o=r.a.useState(null),u=Object(v.a)(o,2),l=u[0],j=u[1],d=null!==(t=r.a.useMemo((function(){if(l)return n.find((function(e){return e.id===l}))}),[n,l]))&&void 0!==t?t:null,b=r.a.useCallback((function(e){j(e),s(!0)}),[]);return Object(p.jsxs)(Bn.Provider,{value:{reservation:d,showReservation:b},children:[e.children,d&&Object(p.jsx)(Un,{reservation:d,open:i,onClose:function(){return s(!1)}})]})}var qn=r.a.createContext(null);function Hn(e){var t=be(),n=t.queryParams,a=t.setQueryParams,c=S(),i=sn().getRoomLink,s=ln(),o=$t().user,u=Object(y.h)(),l=he(3e4),j=r.a.useState(),d=Object(v.a)(j,2),b=d[0],x=d[1],m=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t,r,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u,0===Object.keys(u).length&&window.location.pathname===ee.HOME&&(t={userId:"me"}),e.next=5,G.getReservations(t,n);case 5:(r=e.sent).pagination&&a((function(e){var t;return Object(B.a)(Object(B.a)({},e),{},{pagesCount:null===(t=r.pagination)||void 0===t?void 0:t.pagesCount})})),x(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c(null!==(i=e.t0.description)&&void 0!==i?i:e.t0.message,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[n.currentPage,n.itemsOnPage,n.from,n.search,a,u,c,o]);r.a.useEffect((function(){m()}),[m,l]);var h=r.a.useCallback((function(){return a((function(e){return Object.assign({},e)}))}),[a]),k=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,a=b.find((function(e){return e.id===t}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,G.pingKey(t,n);case 8:r=e.sent,x((function(e){return e&&e.forEach((function(e){e.id===t&&(e.actualStart?e.actualEnd=(new Date).toISOString():e.actualStart=(new Date).toISOString())})),Object.assign([],e)})),s&&s.setOccupied(!a.room.occupied),(null===r||void 0===r?void 0:r.data)&&c(r.data.toString(),"success"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),c(e.t0.description,"error"),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,s,c]),g=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.createOne(t);case 3:h(),c("Rezerwacja utworzona prawid\u0142owo!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[c,h]),w=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.remove(t);case 3:x((function(e){return e&&e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c]),C=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G.update(t,n);case 3:x((function(e){return e&&e.map((function(e){return e.id===t&&["plannedStart","plannedEnd","description","title"].forEach((function(t){t in n&&(e[t]=n[t])})),e}))})),"roomId"in n?n.roomId&&c("Rezerwacja zaktualizowana i przeniesiona!","success",(function(){return Object(p.jsx)(y.a,{to:i(Number(n.roomId))})})):c("Rezerwacja zaktualizowana!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,c]);return b?Object(p.jsx)(qn.Provider,{value:{reservations:b,updateReservation:C,deleteReservation:w,createReservation:g,pingKeyForReservation:k},children:Object(p.jsx)(Ln,{children:e.children})}):null}var _n=n(417);function Kn(e){var t,n=e.data,a=e.onClick,r=G.resolveStatus(n),c=r.message,i=r.color;return Object(p.jsxs)(Nt.a,{component:"li",button:!0,sx:{mb:"2px",bgcolor:i,"&:hover, &:focus":{bgcolor:i,filter:"brightness(97%)"}},onClick:a,children:[Object(p.jsx)(_n.a,{children:Object(p.jsx)(Gt,{to:$.toUser(n.user.id),children:Object(p.jsx)(dn.a,{src:U.getLink(n.user.image)})})}),Object(p.jsx)(Ut.a,{primary:n.title,secondary:De(null!==(t=n.actualStart)&&void 0!==t?t:n.plannedStart)+" - "+c})]})}function Zn(){var e=r.a.useContext(Bn).showReservation,t=vn().reservations;return Object(p.jsx)(Wt.a,{"aria-label":"lista rezerwacji",children:0===t.length?Object(p.jsx)(Nt.a,{children:Object(p.jsx)(Ut.a,{primary:"Brak rezerwacji spe\u0142niaj\u0105cych kryteria."})}):t.map((function(t,n){return Object(p.jsx)(Kn,{data:t,onClick:function(){return e(t.id)}},n)}))})}var Gn=n(393),Qn=n(373),Jn=n(385);function Vn(e){var t=e.onChange,n=e.buttons,a=e.value,c=r.a.useCallback((function(e){t(e.target.value)}),[t]),i=r.a.useMemo((function(){return n.map((function(e){var t=e.value,n=e.name;return Object(p.jsx)(rt.a,{value:t,control:Object(p.jsx)(Qn.a,{}),label:n,"aria-label":n,title:n},n)}))}),[n]);return Object(p.jsx)(ue.a,{component:"fieldset",children:Object(p.jsx)(Jn.a,{row:!0,"aria-label":"wyb\xf3r opcji",name:"wyb\xf3r zdefiniowanej opcji",value:a,onChange:c,children:i})})}var Yn=[{name:"Dzi\u015b",value:"today"},{name:"Ten tydzie\u0144",value:"this week"},{name:"Od wczoraj",value:"yesterday"}];function Xn(){var e,t,n,a=be(),c=a.setQueryParams,i=a.queryParams,s=r.a.useState(new Date(Fe(i.from)?null!==(e=i.from)&&void 0!==e?e:"xxx":Date.now())),u=Object(v.a)(s,2),l=u[0],j=u[1],d=r.a.useCallback((function(e){c((function(t){return Object(B.a)(Object(B.a)({},t),{},{from:e})}))}),[c]),b=r.a.useCallback((function(e){e.preventDefault(),c((function(e){return Object(B.a)(Object(B.a)({},e),{},{from:l.toISOString()})}))}),[l,c]),x=r.a.useCallback((function(e){c((function(t){return Object(B.a)(Object(B.a)({},t),{},{search:e.target.value})}))}),[c]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(ye.a,{container:!0,component:"form",onSubmit:b,spacing:2,alignItems:"center",children:[Object(p.jsxs)(ye.a,{item:!0,xs:12,md:12,children:[Object(p.jsx)(Vn,{onChange:d,buttons:Yn,value:Fe(i.from)?"":null!==(t=null===i||void 0===i?void 0:i.from)&&void 0!==t?t:Yn[0].value}),Object(p.jsxs)(o.a,{display:"inline-flex",children:[Object(p.jsx)(Gn.a,{label:"Od daty",inputFormat:"yyyy-MM-dd",value:l,onChange:function(e){return e&&j(e)},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)(Object(B.a)({},e),{},{size:"small"}))}}),Object(p.jsx)(dt.a,{variant:(null===i||void 0===i?void 0:i.from)===l.toISOString()?"contained":"outlined",type:"submit",sx:{ml:1},children:"OK"})]})]}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(ge,{name:"search",label:"wyszukaj",value:null!==(n=i.search)&&void 0!==n?n:"",onChange:x})})]})})}function $n(){return Object(p.jsx)(se,{name:"reservations-query-params",default:{itemsOnPage:5,currentPage:1,from:"today"},children:Object(p.jsx)(Hn,{children:Object(p.jsxs)(re.a,{rowGap:5,children:[Object(p.jsx)(Xn,{}),Object(p.jsx)(Zn,{}),Object(p.jsx)(xe,{})]})})})}var ea=r.a.createContext(null);function ta(e){var t=S(),n=sn().reloadMap,a=Object(y.h)(),c=r.a.useState(),i=Object(v.a)(c,2),s=i[0],o=i[1];r.a.useLayoutEffect((function(){an.setPath(a)}),[a]);var u=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,an.getCurrentOne();case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);r.a.useEffect((function(){u()}),[u]);var l=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,an.getBuildings();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),j=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,an.update(a);case 3:return o((function(e){return Object(B.a)(Object(B.a)({},e),a)})),n(),t("Adres zaktualizowany","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[t,n]),d=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,an.remove();case 3:n(),t("Adres zosta\u0142 usuni\u0119ty","success",(function(){return Object(p.jsx)(y.a,{to:ee.HOME})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s&&t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,s,n]);return Boolean(s)?Object(p.jsx)(ea.Provider,{value:{address:s,deleteAddress:d,getBuildingsInAddress:l,updateAddress:j},children:e.children}):null}function na(){return r.a.useContext(ea)}var aa=Object(Cn.a)("iframe")({width:"100%",height:"50vh",maxHeight:"400px",minHeight:"300px"});function ra(e){var t=e.address,n=e.sx,a=r.a.useMemo((function(){var e=t.street,n=t.number,a=t.town,r=t.country,c=new URL("https://maps.google.com/maps"),i=new URLSearchParams({q:"".concat(e+" "+n+" "+a+" "+r),ie:"UTF8",z:"14",iwloc:"",output:"embed"});return c.search=i.toString(),c.toString()}),[t]);return Object(p.jsx)(o.a,{children:Object(p.jsx)(aa,{src:a,frameBorder:"0",sx:Object(B.a)({},n)})})}var ca=n(81),ia=n.n(ca);function sa(e){var t,n,a,c,i,s=e.open,o=e.onClose,u=na(),l=u.address,j=u.updateAddress,d=r.a.useState({}),b=Object(v.a)(d,2),x=b[0],m=b[1],h=r.a.useCallback((function(){o(),m({})}),[o]),y=r.a.useCallback((function(e){m((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]),k=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(x);case 2:if(!e.sent){e.next=4;break}h();case 4:case"end":return e.stop()}}),e)}))),[x,h,j]);return Object(p.jsx)(mt,{open:s,onClose:o,"aria-label":"Okno do edycji budynku",children:Object(p.jsxs)(bt,{title:"Edycja adresu",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci adresu i zatwierd\u017a zmiany.",onSubmit:k,onCancel:o,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:null!==(t=x.country)&&void 0!==t?t:l.country,onChange:y})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{autoFocus:!0,required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",value:null!==(n=x.town)&&void 0!==n?n:l.town,onChange:y})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:null!==(a=x.postalCode)&&void 0!==a?a:l.postalCode,onChange:y})}),Object(p.jsx)(ye.a,{item:!0,xs:8,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:null!==(c=x.street)&&void 0!==c?c:l.street,onChange:y})}),Object(p.jsx)(ye.a,{item:!0,xs:4,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:null!==(i=x.number)&&void 0!==i?i:l.number,onChange:y})})]})})}var oa=n(392);function ua(e){var t=e.open,n=e.onClose,a=e.handleCreateBuilding,c=r.a.useState({name:"",openTime:new Date(0,0,0,7,0).toString(),closeTime:new Date(0,0,0,21,0).toString()}),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(B.a)(Object(B.a)({},s),{},{closeTime:We.format(new Date(s.closeTime)),openTime:We.format(new Date(s.openTime))}));case 2:e.sent&&n();case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(p.jsx)(mt,{open:t,onClose:n,"aria-label":"Okno do tworzenia budynku",children:Object(p.jsxs)(bt,{title:"Dodaj nowy budynek!",subtitle:"Wype\u0142nij dane nowego budynku i kliknij zatwierd\u017a.",onSubmit:l,onCancel:n,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(oa.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:s.openTime,onChange:function(e){return o((function(t){return Object(B.a)(Object(B.a)({},t),{},{openTime:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(oa.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:s.closeTime,onChange:function(e){return o((function(t){return Object(B.a)(Object(B.a)({},t),{},{closeTime:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})})]})})}function la(e){var t=e.open,n=e.onClose,a=S(),c=sn().reloadMap,i=r.a.useState({country:"Polska",town:"",street:"",number:"",postalCode:""}),s=Object(v.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback((function(e){u((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]),j=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,an.create(o);case 3:c(),a("Adres zosta\u0142 dodany","success"),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0.description,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[o,a,n,c]);return Object(p.jsx)(mt,{open:t,onClose:n,"aria-label":"Okno do tworzenia adresu",children:Object(p.jsxs)(bt,{title:"Dodaj nowy adres!",subtitle:"Wype\u0142nij dane nowego adresu i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:o.country,onChange:l})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",autoFocus:!0,value:o.town,onChange:l})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:o.postalCode,onChange:l})}),Object(p.jsx)(ye.a,{item:!0,xs:8,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:o.street,onChange:l})}),Object(p.jsx)(ye.a,{item:!0,xs:4,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:o.number,onChange:l})})]})})}function ja(){var e=na(),t=e.address,n=e.deleteAddress,a=r.a.useState(!1),c=Object(v.a)(a,2),i=c[0],s=c[1],o=r.a.useState(!1),u=Object(v.a)(o,2),l=u[0],j=u[1],d=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return j(!0)},icon:Object(p.jsx)(ia.a,{color:"success"})},{label:"Usu\u0144",action:function(){return s(!0)},icon:Object(p.jsx)(wt.a,{color:"error"})}]}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ct,{objectName:"".concat(t.street," ").concat(t.number),open:i,onClose:function(){return s(!1)},onSuccess:n}),Object(p.jsx)(sa,{open:l,onClose:function(){return j(!1)}}),Object(p.jsxs)(Ft.a,{elevation:0,children:[Object(p.jsx)(jn.a,{action:Object(p.jsx)(Fn,{options:d}),title:Object(p.jsxs)(p.Fragment,{children:[t.country,", ",t.town]}),subheader:Object(p.jsxs)(p.Fragment,{children:[t.street," ",t.number]})}),Object(p.jsx)(hn.a,{component:"div",children:Object(p.jsx)(ra,{address:t})}),Object(p.jsxs)(bn.a,{children:[Object(p.jsxs)(V.a,{component:"p",children:["ul. ",t.street," ",t.number,Object(p.jsx)("br",{}),t.postalCode," ",t.town,", ",Object(p.jsx)("br",{}),t.country]}),Object(p.jsx)("br",{}),Object(p.jsx)(st,{model:t})]})]})]})}var da=[{name:"tydzie\u0144",value:"1 week ago"},{name:"miesi\u0105c",value:"1 month ago"},{name:"6 miesi\u0119cy",value:"6 month ago"},{name:"rok",value:"1 year ago"}];function ba(){var e=be(),t=e.queryParams,n=e.setQueryParams,a=r.a.useState({from:new Date,to:new Date}),c=Object(v.a)(a,2),i=c[0],s=c[1],u=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({from:t,to:"now"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),l=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n({from:null===(a=i.from)||void 0===a?void 0:a.toISOString(),to:null===(r=i.to)||void 0===r?void 0:r.toISOString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i.from,i.to,n]);return Object(p.jsxs)(re.a,{direction:"column",spacing:2,children:[Object(p.jsxs)(o.a,{children:[Object(p.jsx)(V.a,{variant:"subtitle2",children:"Zakres czasu:"}),Object(p.jsx)(Vn,{onChange:u,buttons:da,value:t.from})]}),Object(p.jsxs)(o.a,{component:"form",onSubmit:l,children:[Object(p.jsx)(V.a,{variant:"subtitle2",children:"Zakres niestandardowy:\xa0"}),Object(p.jsxs)(re.a,{direction:"row",spacing:1,children:[Object(p.jsx)(Gn.a,{label:"od",inputFormat:"yyyy-MM-dd",value:i.from,onChange:function(e){return s(Object(B.a)(Object(B.a)({},i),{},{from:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)(Object(B.a)({},e),{},{size:"small"}))}}),Object(p.jsx)(Gn.a,{label:"do",inputFormat:"yyyy-MM-dd",value:i.to,onChange:function(e){return s(Object(B.a)(Object(B.a)({},i),{},{to:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)(Object(B.a)({},e),{},{size:"small"}))}}),Object(p.jsx)(dt.a,{type:"submit",variant:"outlined",children:" OK"})]})]})]})}var xa=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"preparePath",value:function(e){var t="",n=window.location.pathname;if(0===Object.keys(e).length)for(var a=0,r=Object.entries({"/settings":"/requests","/users":"/users"});a<r.length;a++){var c=Object(v.a)(r[a],2),i=c[0],s=c[1];n.includes(i)&&(t=s)}else"addressId"in e?(t+="/addresses/".concat(e.addressId,"/buildings"),"buildingId"in e&&(t+="/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&(t+="/users/".concat(e.userId));return t}},{key:"fetchData",value:function(e,t){return this.get(this.preparePath(e)+"/stats",t)}}]),n}(D),pa=new xa,ma=r.a.createContext(null);function ha(e){var t=S(),n=Object(y.h)(),a=he(6e4),c=$t().user,i=be().queryParams,s=r.a.useState({}),o=Object(v.a)(s,2),u=o[0],l=o[1],j=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,"userId"in n&&"me"===n.userId&&(a={userId:"".concat(null===c||void 0===c?void 0:c.id)}),e.prev=2,e.next=5,pa.fetchData(a,i);case 5:r=e.sent,l(r.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(e.t0.description,"error"),l({});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,i,n,null===c||void 0===c?void 0:c.id]);return r.a.useEffect((function(){j()}),[j,a]),0===Object.keys(u).length?null:Object(p.jsx)(ma.Provider,{value:{chartsData:u},children:e.children})}function Oa(){return r.a.useContext(ma)}function fa(e){return Object(p.jsx)(se,{name:"charts-query-params",default:{from:"1 month ago",to:"now"},children:Object(p.jsx)(ha,{children:Object(p.jsxs)(re.a,{spacing:4,children:[Object(p.jsx)(ba,{}),e.children]})})})}var va=n(203),ya=n.n(va);function ka(e){var t=r.a.useState(!!(null===e||void 0===e?void 0:e.defaultOpen)),n=Object(v.a)(t,2),a=n[0],c=n[1];return Object(p.jsxs)(o.a,{children:[Object(p.jsxs)(o.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(p.jsxs)(V.a,{variant:"h6",component:"h5",id:e.title.replace(" ","_"),children:[e.title,Object(p.jsx)(Te.a,{onClick:function(){return c((function(e){return!e}))},children:a?Object(p.jsx)(Le.a,{}):Object(p.jsx)(Ue.a,{})})]}),Object(p.jsx)(Te.a,{onClick:e.onClick,children:Object(p.jsx)(ya.a,{})})]}),Object(p.jsxs)(Re.a,{in:a,timeout:"auto",children:[Object(p.jsx)(ye.a,{container:!0,spacing:2,children:e.children}),Object(p.jsx)("br",{}),Object(p.jsx)(qt.a,{})]})]})}var ga=n(222),wa=n(204),Ca=n.n(wa),za=["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"];function Sa(e){var t=r.a.useMemo((function(){return{getValue:function(t){return e.resolveDay?za[Number(t.x)]:t.x},min:0}}),[e.resolveDay]),n=r.a.useMemo((function(){return[{getValue:function(e){return e.y},position:"left",elementType:"bar",minDomainLength:15,hardMin:0,scaleType:"linear",showDatumElements:!0}]}),[]),a=r.a.useMemo((function(){var t=e.y.map((function(e){return{label:e.label,data:[]}}));return e.data.forEach((function(n){e.y.forEach((function(a,r){var c=a.key;t[r].data.push({x:n[e.xKey],y:Number(n[c])})}))})),t}),[e.y,e.xKey,e.data]);return Object(p.jsxs)(ye.a,{item:!0,xs:12,lg:e.fullWidth?12:6,children:[Object(p.jsxs)(re.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(p.jsx)(V.a,{variant:"body2",component:"h4",color:"text.secondary",children:e.title}),Object(p.jsx)(Ca.a,{color:"primary"})]}),0===e.data.length?Object(p.jsx)(V.a,{component:"p",color:"text.secondary",children:"Brak danych do nakre\u015blenia wykresu"}):Object(p.jsx)(o.a,{sx:{maxHeight:"400px",height:"40vh",minHeight:"300px",width:"100%"},children:Object(p.jsx)(ga.a,{options:{data:a,primaryAxis:t,secondaryAxes:n}})})]})}function Ia(){return Object(p.jsx)(fa,{children:Object(p.jsx)(Pa,{})})}function Pa(){var e=Oa().chartsData;return Object(p.jsxs)(ka,{defaultOpen:!0,title:"Statystyki budynk\xf3w",children:[Object(p.jsx)(Sa,{fullWidth:!0,title:"Ilo\u015b\u0107 rezerwacji",data:e.allReservations,xKey:"name",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"Czas wszystkich reserwacji",data:e.allReservations,xKey:"name",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.allReservations,xKey:"name",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]})]})}var Ea=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="",e}return Object(P.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId;this._path="/addresses/".concat(t,"/buildings/").concat(n)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e,t){var n=e.addressId;return this.post("/addresses/".concat(n,"/buildings"),t)}},{key:"getRoomsInBuilding",value:function(){return this.get("".concat(this.path,"/rooms"))}}]),n}(D),Ta=new Ea;function Ra(e){return Object(p.jsx)(ae.a,{children:Object(p.jsxs)(Wt.a,{sx:{minHeight:"160px",maxHeight:"400px"},children:[Object(p.jsxs)(Nt.a,{button:!0,onClick:e.onAddItem,children:[Object(p.jsx)(Bt.a,{children:Object(p.jsx)(It.a,{color:"primary"})}),Object(p.jsx)(Ut.a,{primary:"Dodaj element"})]}),e.children]})})}var Ma=n(147),Aa=n.n(Ma);function Da(e){return Object(p.jsxs)(Nt.a,{sx:{py:"2px"},children:[Object(p.jsx)(Bt.a,{children:Object(p.jsx)(Aa.a,{})}),Object(p.jsx)(Ut.a,{primary:Object(p.jsx)(Gt,{withIcon:!0,to:e.link,children:e.primary})})]})}function Wa(){var e=na().getBuildingsInAddress,t=sn().reloadMap,n=S(),a=Object(y.h)(),c=r.a.useState(!1),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(v.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var x=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ta.create(a,r);case 3:return b(),t(),n("Nowa sala utworzona!","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,b,a]),m=r.a.useMemo((function(){return null===j||void 0===j?void 0:j.map((function(e){return Object(p.jsx)(Da,{primary:"Budynek ".concat(e.name),link:"./".concat(e.address,"/buildings/").concat(e.id)},e.id)}))}),[j]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ua,{open:s,onClose:function(){return o(!1)},handleCreateBuilding:x}),Object(p.jsx)(Xe,{title:"Budynki pod adresem",children:Object(p.jsx)(Ra,{onAddItem:function(){return o(!0)},children:m})}),Object(p.jsx)("br",{})]})}function Fa(){var e=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)($n,{})}),e.push({name:"Statystyki",component:Object(p.jsx)(Ia,{})}),e.push({name:"Logi",component:Object(p.jsx)(_e,{})}),e}),[]);return Object(p.jsx)(ta,{children:Object(p.jsxs)(ye.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(tt,{tabs:e})}),Object(p.jsxs)(ye.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(ja,{})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(Wa,{})})]})]})})}function Na(e){return Object(p.jsxs)(ka,{title:"Statystyki miesi\u0119czne",children:[Object(p.jsx)(Sa,{fullWidth:!0,title:"Ilo\u015b\u0107 rezerwacji na dzie\u0144 miesi\u0105ca",data:e.data,xKey:"day",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"Faktyczny czas wszystkich rezerwacji",data:e.data,xKey:"day",y:[{label:"Czas ca\u0142kowity [m]",key:"allTimeMinutes"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"\u015aredni czas rezerwacji",data:e.data,xKey:"day",y:[{label:"\u015aredni planowany czas [m]",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas [m]",key:"avgActualTimeMinutes"}]})]})}function Ua(e){return Object(p.jsxs)(ka,{title:"Statystyki tygodniowe",children:[Object(p.jsx)(Sa,{fullWidth:!0,resolveDay:!0,title:"Ilo\u015b\u0107 rezerwacji na dzie\u0144 tygodnia",data:e.data,xKey:"day",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(Sa,{fullWidth:!0,resolveDay:!0,title:"Faktyczny czas wszystkich rezerwacji",data:e.data,xKey:"day",y:[{label:"Czas ca\u0142kowity [m]",key:"allTimeMinutes"}]}),Object(p.jsx)(Sa,{fullWidth:!0,resolveDay:!0,title:"\u015aredni czas rezerwacji",data:e.data,xKey:"day",y:[{label:"\u015aredni planowany czas [m]",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas [m]",key:"avgActualTimeMinutes"}]})]})}function Ba(){return Object(p.jsx)(fa,{children:Object(p.jsx)(La,{})})}function La(){var e=Oa().chartsData;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ua,{data:e.weekly}),Object(p.jsx)(Na,{data:e.monthly}),Object(p.jsxs)(ka,{defaultOpen:!0,title:"Wykresy odno\u015bnie u\u017cytkownik\xf3w",children:[Object(p.jsx)(Sa,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.users,xKey:"email",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"Ilo\u015b\u0107 rezerwacji u\u017cytkownik\xf3w",data:e.users,xKey:"email",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"Czas wszystkich reserwacji danego u\u017cytkownika",data:e.users,xKey:"email",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]})]})]})}var qa=r.a.createContext(null);function Ha(e){var t=S(),n=sn().reloadMap,a=Object(y.h)(),c=r.a.useState(),i=Object(v.a)(c,2),s=i[0],o=i[1];r.a.useLayoutEffect((function(){Ta.setPath(a)}),[a]);var u=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ta.getCurrentOne();case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);r.a.useEffect((function(){u()}),[u]);var l=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ta.getRoomsInBuilding();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),j=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ta.update(a);case 3:if(!e.sent){e.next=8;break}return s&&("addressId"in a&&s.address.id!==a.addressId||"name"in a)&&n(),o((function(e){return e&&Object.keys(a).forEach((function(t){if("addressId"===t)e.address.id=Number(a[t]);else e[t]=a[t]})),Object.assign({},e)})),t("Bydynek zaktualizowany","success"),e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(e.t0.description,"error");case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t,s,n]),d=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ta.remove();case 3:s&&t("Budynek usuni\u0119ty","success",(function(){return Object(p.jsx)(y.a,{to:$.toAddress(s.address.id)})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(e.t0.description,"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[t,s]);return Boolean(s)?Object(p.jsx)(qa.Provider,{value:{building:s,deleteBuilding:d,getRoomsInBuilding:l,updateBuilding:j},children:e.children}):null}function _a(){return r.a.useContext(qa)}var Ka,Za=n(6),Ga=Object(Za.a)("input")({display:"none"}),Qa=Object(Za.a)("img")({width:"fill-available",maxHeight:"350px"});function Ja(e){var t=S(),n=Object(y.g)(),a=Object(y.h)(),c=r.a.useState(),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback(function(){var r=Object(f.a)(O.a.mark((function r(c){return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),s){r.next=4;break}return t("Najpierw za\u0142aduj nowy obraz","warning"),r.abrupt("return");case 4:return r.prev=4,r.next=7,U.upload(a,s);case 7:e.onUpload&&e.onUpload(),t("Obraz zosta\u0142 zmieniony","success",(function(){return Object(p.jsx)(y.a,{to:n.pathname})})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),t(r.t0.description,"error");case 14:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(e){return r.apply(this,arguments)}}(),[s,e,t,n,a]),l=r.a.useCallback((function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];o(t)}}),[]),j=r.a.useCallback(Object(f.a)(O.a.mark((function r(){return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,U.remove(a);case 3:e.onDelete&&e.onDelete(),t("Przywr\xf3cono domy\u015blny obraz, za\u0142aduj ponownie aby zobaczy\u0107 rezultat.","success",(function(){return Object(p.jsx)(y.a,{to:n.pathname})})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(r.t0.description,"error");case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),[e,t,n,a]);return Object(p.jsxs)(ye.a,{container:!0,component:"form",onSubmit:u,direction:"row",alignItems:"stretch",spacing:2,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,sm:9,children:Object(p.jsx)(Qa,{src:s?URL.createObjectURL(s):U.getLink(e.image),alt:"nowy obraz"})}),Object(p.jsxs)(ye.a,{item:!0,xs:12,sm:3,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[Object(p.jsxs)("label",{htmlFor:"upload-obrazu",children:[Object(p.jsx)(Ga,{accept:"*.(jpg|png)",id:"upload-obrazu",type:"file",onChange:l}),Object(p.jsx)(dt.a,{color:"primary",variant:"outlined",component:"span",children:"Wybierz zdj\u0119cie"})]}),Object(p.jsx)(dt.a,{color:"error",startIcon:Object(p.jsx)(wt.a,{}),onClick:j,children:"Usu\u0144"}),Object(p.jsx)(dt.a,{type:"submit",color:"success",startIcon:Object(p.jsx)(jt.a,{}),children:"Zapisz"})]})]})}function Va(e){var t=e.split(":"),n=Object(v.a)(t,2),a=n[0],r=n[1];return new Date(0,0,0,Number(a),Number(r))}function Ya(e){var t,n,a,c,i=e.open,s=e.onClose,o=sn().allAddresses,u=_a(),l=u.updateBuilding,j=u.building,d=r.a.useState({}),b=Object(v.a)(d,2),x=b[0],m=b[1],h=r.a.useCallback((function(){s(),m({})}),[s]),y=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);m((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),k=r.a.useCallback((function(e,t){m((function(n){return n[e]=We.format(t),Object.assign({},n)}))}),[]),g=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(x);case 2:if(!e.sent){e.next=4;break}h();case 4:case"end":return e.stop()}}),e)}))),[x,h,l]),w=r.a.useCallback((function(e){var t=e.target.value;"addressId"===e.target.name&&(t=Number(t)),e.target&&m((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]);return Object(p.jsx)(mt,{open:i,onClose:s,"aria-label":"Okno edycji budynku",children:Object(p.jsxs)(re.a,{spacing:3,children:[Object(p.jsx)(Ja,{image:j.image}),Object(p.jsx)(qt.a,{}),Object(p.jsxs)(bt,{title:"Edycja budynku",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci budynku i zatwierd\u017a zmiany.",onSubmit:g,onCancel:s,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=x.name)&&void 0!==t?t:j.name,onChange:y})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(oa.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:Va(null!==(n=x.openTime)&&void 0!==n?n:j.openTime),onChange:function(e){return k("openTime",e)},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(oa.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:Va(null!==(a=x.closeTime)&&void 0!==a?a:j.closeTime),onChange:function(e){return k("closeTime",e)},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-adres",children:"Adres"}),Object(p.jsx)(je.a,{labelId:"wybierz-adres",name:"addressId",value:null!==(c=x.addressId)&&void 0!==c?c:j.address.id,label:"Adres",onChange:w,children:o.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)(de.a,{value:n,children:[t," "]},t)}))})]})})]})]})})}function Xa(e){var t=e.open,n=e.onClose,a=e.handleCreateRoom,c=r.a.useState({name:"",roomType:Ka.LECTURE,seatsCount:50,floor:0}),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&o((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),j=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(s);case 2:if(!e.sent){e.next=4;break}n();case 4:case"end":return e.stop()}}),e)}))),[s,a,n]);return Object(p.jsx)(mt,{open:t,onClose:n,"aria-label":"Okno edycji budynku",children:Object(p.jsxs)(bt,{title:"Dodaj now\u0105 sal\u0119",subtitle:"Wype\u0142nij dane nowej sali i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"room-type",children:"Typ Sali"}),Object(p.jsx)(je.a,{required:!0,labelId:"room-type",id:"roomType",value:s.roomType,name:"roomType",label:"Typ Sali",onChange:l,children:Object.values(Ka).map((function(e){return Object(p.jsx)(de.a,{value:e,children:e},e)}))})]})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:s.seatsCount,onChange:u})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:s.floor,onChange:u})})]})})}!function(e){e.LABORATORY="Sala laboratoryjna",e.CONFERENCE="Sala konferencyjna",e.LECTURE="Sala wyk\u0142adowa"}(Ka||(Ka={}));var $a,er=n(205),tr=n.n(er),nr=n(206),ar=n.n(nr);function rr(e){var t=r.a.useState(!1),n=Object(v.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(K.isFavourite(e.data))}),[e.data]);var i=r.a.useCallback((function(){a?K.removeFavourite(e.data):K.addFavourite(e.data),c((function(e){return!e}))}),[a,e.data]);return Object(p.jsx)(Te.a,{sx:{display:"inline"},onClick:i,color:"warning",children:a?Object(p.jsx)(tr.a,{}):Object(p.jsx)(ar.a,{})})}function cr(){var e=_a(),t=e.building,n=e.deleteBuilding,a=r.a.useState(!1),c=Object(v.a)(a,2),i=c[0],s=c[1],o=r.a.useState(!1),u=Object(v.a)(o,2),l=u[0],j=u[1],d=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return j(!0)},icon:Object(p.jsx)(ia.a,{color:"success"})},{label:"Usu\u0144",action:function(){return s(!0)},icon:Object(p.jsx)(wt.a,{color:"error"})}]}),[]);return Boolean(t)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ct,{objectName:t.name,open:i,onClose:function(){return s(!1)},onSuccess:n}),Object(p.jsx)(Ya,{open:l,onClose:function(){return j(!1)}}),Object(p.jsxs)(Ft.a,{elevation:0,children:[Object(p.jsx)(jn.a,{action:Object(p.jsx)(Fn,{options:d}),title:Object(p.jsxs)(p.Fragment,{children:["Budynek ",t.name,Object(p.jsx)(rr,{data:{id:t.id,name:t.name,type:$a.Building,addressId:t.address.id}})]}),subheader:Object(p.jsxs)(p.Fragment,{children:[t.openTime," - ",t.closeTime]})}),Object(p.jsx)(hn.a,{component:"img",height:"350",image:U.getLink(t.image),alt:t.name}),Object(p.jsxs)(bn.a,{children:[Object(p.jsxs)(Gt,{withIcon:!0,to:$.toAddress(t.address.id),children:[t.address.town,",\xa0",t.address.street,"\xa0",t.address.number]}),Object(p.jsx)("br",{}),Object(p.jsx)(st,{model:t})]})]})]}):null}function ir(){var e=_a().getRoomsInBuilding,t=sn().reloadMap,n=Object(y.h)(),a=S(),c=r.a.useState(!1),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(v.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var x=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tn.create(n,r);case 3:return a("Nowa sala utworzona!","success"),b(),t(),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),a(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,t,b,n]),m=r.a.useMemo((function(){return null===j||void 0===j?void 0:j.map((function(e){return Object(p.jsx)(Da,{primary:"Sala ".concat(e.name),link:"./".concat(e.building,"/rooms/").concat(e.id)},e.id)}))}),[j]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Xa,{handleCreateRoom:x,open:s,onClose:function(){return o(!1)}}),Object(p.jsx)(Xe,{title:"Sale w budynku",children:Object(p.jsx)(Ra,{onAddItem:function(){return o(!0)},children:m})}),Object(p.jsx)("br",{})]})}function sr(){var e=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)($n,{})}),e.push({name:"Statystyki",component:Object(p.jsx)(Ba,{})}),e.push({name:"Logi",component:Object(p.jsx)(_e,{})}),e}),[]);return Object(p.jsx)(Ha,{children:Object(p.jsxs)(ye.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(tt,{tabs:e})}),Object(p.jsxs)(ye.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(cr,{})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(ir,{})})]})]})})}function or(){var e=$t().user,t=r.a.useState(),n=Object(v.a)(t,2),a=n[0],c=n[1];return r.a.useEffect((function(){c(K.favourites)}),[e]),Object(p.jsx)(Xe,{title:"Ulubione",children:Object(p.jsxs)(Wt.a,{children:[null===a||void 0===a?void 0:a.map((function(e){return function(e){switch(e.type){case $a.Building:var t=e,n=t.addressId,a=t.id,r=t.name;return Object(p.jsx)(Ut.a,{primary:Object(p.jsxs)(Gt,{withIcon:!0,to:$.toBuilding(n,a),children:["Budynek ",r]})},r+a);case $a.Room:var c=e,i=c.addressId,s=c.buildingId,o=c.id,u=c.name;return Object(p.jsx)(Ut.a,{primary:Object(p.jsxs)(Gt,{withIcon:!0,to:$.toRoom(i,s,o),children:["Sala ",u]})},u+o);default:return null}}(e)})),0===(null===a||void 0===a?void 0:a.length)&&Object(p.jsx)(Ut.a,{color:"text.secondary",primary:"Brak ulubionych"})]})})}function ur(){var e,t=S(),n=r.a.useState(),a=Object(v.a)(n,2),c=a[0],i=a[1];r.a.useEffect((function(){i(K.notes)}),[]);var s=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c){e.next=3;break}return e.abrupt("return");case 3:try{K.notes=c,t("Notatki zosta\u0142y zapisane","success"),i(void 0)}catch(a){t(a.description,"error")}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),o=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(p.jsx)(Xe,{title:"Notatnik",children:Object(p.jsxs)(ae.a,{component:"form",onSubmit:s,sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:[Object(p.jsx)(ke.c,{"aria-label":"twoje notatki",title:"twoje notatki",multiline:!0,minRows:3,maxRows:10,name:"search",value:null!==(e=null!==c&&void 0!==c?c:K.notes)&&void 0!==e?e:"",onChange:o,placeholder:"Twoje notatki",sx:{width:"100%",height:"100%",p:1,bgcolor:"background.default"},inputProps:{"aria-label":"Twoje notatki"}}),Object(p.jsx)(dt.a,{title:"Zapisz notatki","aria-label":"Zapisz notatki",sx:{mr:"0px",ml:"auto"},startIcon:Object(p.jsx)(jt.a,{}),type:"submit",children:"Zapisz"})]})})}function lr(){return Object(p.jsx)(Xe,{title:"Rezerwacje",children:Object(p.jsx)($n,{})})}function jr(){return Object(p.jsxs)(ye.a,{container:!0,spacing:2,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,lg:8,children:Object(p.jsx)(lr,{})}),Object(p.jsxs)(ye.a,{item:!0,container:!0,spacing:2,xs:12,lg:4,alignContent:"flex-start",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(ur,{})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(or,{})})]})]})}!function(e){e.Building="building-item",e.Room="room-item"}($a||($a={}));var dr=n(386),br=n(207),xr=n.n(br),pr=["value"];function mr(e){var t=e.value,n=Object(Ve.a)(e,pr);return t?Object(p.jsx)(xr.a,Object(B.a)({color:"success"},n)):Object(p.jsx)(ut.a,Object(B.a)({sx:{color:"red"}},n))}function hr(e){var t,n,r,c,i,s,o=e.open,u=e.onClose,l=ln(),j=l.room,d=l.updateRoom,b=sn().allBuildings,x=a.useState({}),m=Object(v.a)(x,2),h=m[0],y=m[1],k=a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"name":t=String(t);break;case"blocked":t=!e.target.checked;break;default:t=Number(t)}y((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),g=a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&y((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[]),w=a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h);case 2:if(!e.sent){e.next=4;break}u();case 4:case"end":return e.stop()}}),e)}))),[h,d,u]);return Object(p.jsx)(mt,{open:o,onClose:u,"aria-label":"Okno usuwania obiektu",sx:{maxWidth:"450px"},children:Object(p.jsxs)(re.a,{spacing:2,children:[Object(p.jsx)(Ja,{image:j.image}),Object(p.jsx)(qt.a,{}),Object(p.jsxs)(bt,{title:"Edycja sali",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:w,onCancel:u,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=h.name)&&void 0!==t?t:j.name,onChange:k})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"room-type",children:"Typ Sali"}),Object(p.jsx)(je.a,{labelId:"room-type",id:"roomType",value:null!==(n=h.roomType)&&void 0!==n?n:j.roomType,name:"roomType",label:"Typ Sali",onChange:g,children:Object.values(Ka).map((function(e){return Object(p.jsx)(de.a,{value:e,children:e},e)}))})]})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:null!==(r=h.seatsCount)&&void 0!==r?r:j.seatsCount,onChange:k})}),Object(p.jsx)(ye.a,{item:!0,xs:6,children:Object(p.jsx)(it.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:null!==(c=h.floor)&&void 0!==c?c:j.floor,onChange:k})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-budynek",children:"Budynek"}),Object(p.jsx)(je.a,{labelId:"wybierz-budynek",name:"buildingId",value:null!==(i=h.buildingId)&&void 0!==i?i:j.building.id,label:"Budynek",onChange:g,children:b.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)(de.a,{value:n,children:["Budynek \xa0",t," "]},t)}))})]})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(rt.a,{labelPlacement:"start",control:Object(p.jsx)(ct.a,{id:"room-blocked",name:"blocked",inputProps:{"aria-label":"controlled"},onChange:k,checked:!(null!==(s=h.blocked)&&void 0!==s?s:j.blocked)}),label:"Dost\u0119pno\u015b\u0107 Sali"})})]})]})})}function Or(e){var t=ln().updateRFIDTag;return Object(p.jsx)(mt,{open:e.open,onClose:e.onClose,"aria-label":"Okno przypisania tagu RFID",sx:{maxWidth:"400px"},children:Object(p.jsx)(Sn,{headline:"U\u017cyj czytnika, aby wprowadzi\u0107 tag.",bodyText:'Je\u015bli nie chcesz wprowadza\u0107 zmian, naci\u015bnij "Zamknij"',onScan:t,onClose:e.onClose})})}function fr(e){var t=e.room,n=e.deleteTag,a=sn().getBuildingLink,c=r.a.useState(!1),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useMemo((function(){return[{label:"Ilo\u015b\u0107 miejsc",value:t.seatsCount},{label:"Pi\u0119tro",value:0===t.floor?"parter":t.floor},{label:"Ilo\u015b\u0107 miejsc",value:t.seatsCount},{label:"Budynek",value:Object(p.jsxs)(Gt,{withIcon:!0,to:a(t.building.id),children:[" ",t.building.name," "]})},{label:"Aktualnie wolny",value:Object(p.jsx)(mr,{value:!t.occupied})},{label:"Tag RFID",value:t.RFIDTag?Object(p.jsx)(dr.a,{label:t.RFIDTag,onDelete:n}):Object(p.jsx)(Te.a,{size:"small",onClick:function(){return o(!0)},sx:{p:"0px"},children:Object(p.jsx)(It.a,{})})},{label:"Dost\u0119pny do rezerwacji",value:Object(p.jsx)(mr,{value:!t.blocked})}]}),[t,n,a]),l=r.a.useMemo((function(){return u.map((function(e,t){var n=e.label,a=e.value;return Object(p.jsxs)(Ee.a,{hover:!0,children:[Object(p.jsx)(Se.a,{sx:{color:"text.secondary"},align:"left",children:n}),Object(p.jsx)(Se.a,{sx:{color:"primary.main",fontWeight:"bold"},align:"left",children:a})]},t)}))}),[u]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Or,{open:s,onClose:function(){return o(!1)}}),Object(p.jsx)(Ie.a,{children:Object(p.jsxs)(Ce.a,{"aria-label":"room-info-table",size:"small",children:[Object(p.jsx)(Pe.a,{sx:{display:"none"},children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(Se.a,{align:"left",children:"W\u0142a\u015bciwo\u015b\u0107"}),Object(p.jsx)(Se.a,{align:"left",children:"stan"})]})}),Object(p.jsx)(ze.a,{children:l})]})})]})}function vr(){return Object(p.jsx)(o.a,{sx:{display:"flex"},children:Object(p.jsx)(J.a,{})})}function yr(e){var t,n=S(),a=sn().allRooms,c=r.a.useState({title:"",description:"",plannedStart:new Date,plannedEnd:new Date,roomId:null!==(t=e.roomId)&&void 0!==t?t:0}),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){o((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]),l=r.a.useCallback(Object(f.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G.createOne(s);case 3:n("Rezerwacja utworzona prawid\u0142owo!","success"),e.onCancel(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(t.t0.description,"error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[s,n,e]);return Object(p.jsxs)(bt,{title:"Tworzenie rezerwacji",subtitle:"Stw\xf3rz rezerwacj\u0119 w wybranym przez siebie pokoju. Aby zobaczy\u0107 zmiany, prze\u0142adu.",onSubmit:l,onCancel:e.onCancel,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{title:"Tytu\u0142 rezerwacji",inputProps:{title:"Tytu\u0142 rezerwacji"},autoFocus:!0,required:!0,fullWidth:!0,maxRows:4,label:"Tytu\u0142",id:"outlined-multiline-flexible",name:"title",value:s.title,onChange:u})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,multiline:!0,maxRows:20,label:"Opis",id:"outlined-multiline-flexible",name:"description",value:s.description,onChange:u})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(fn.a,{minDate:new Date,label:"Pocz\u0105tek",inputFormat:"yyyy-MM-dd HH:mm",value:s.plannedStart,onChange:function(e){return o((function(t){return Object(B.a)(Object(B.a)({},t),{},{plannedStart:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(fn.a,{minDate:new Date,label:"Koniec",inputFormat:"yyyy-MM-dd HH:mm",value:s.plannedEnd,onChange:function(e){return o((function(t){return Object(B.a)(Object(B.a)({},t),{},{plannedEnd:e})}))},renderInput:function(e){return Object(p.jsx)(it.a,Object(B.a)({sx:{width:"100%"}},e))}})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsxs)(ue.a,{fullWidth:!0,children:[Object(p.jsx)(le.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(p.jsx)(je.a,{required:!0,labelId:"wybierz-budynek",name:"buildingId",value:s.roomId,label:"Budynek",onChange:function(e){return o((function(t){return Object(B.a)(Object(B.a)({},t),{},{roomId:Number(e.target.value)})}))},children:a.map((function(e){var t=e.name,n=e.id;return Object(p.jsxs)(de.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})}function kr(e){return Object(p.jsx)(mt,{open:e.open,"aria-label":"Okno do tworzenia rezerwacji",onClose:e.onClose,children:Object(p.jsx)(yr,{roomId:e.roomId,onCancel:e.onClose})})}function gr(){var e=ln(),t=e.room,n=e.deleteRoom,a=e.deleteRFIDTag,c=r.a.useState(!1),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(v.a)(u,2),j=l[0],d=l[1],b=r.a.useState(!1),x=Object(v.a)(b,2),m=x[0],h=x[1],O=r.a.useMemo((function(){return[{label:"Zarezerwuj",icon:Object(p.jsx)(It.a,{color:"primary"}),action:function(){return h(!0)}},{label:"Edytuj",action:function(){return d(!0)},icon:Object(p.jsx)(ia.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(p.jsx)(wt.a,{color:"error"})}]}),[]);return Boolean(t)?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ct,{objectName:t.name,open:s,onClose:function(){return o(!1)},onSuccess:n}),Object(p.jsx)(hr,{open:j,onClose:function(){return d(!1)}}),Object(p.jsx)(kr,{roomId:t&&t.id,open:m,onClose:function(){return h(!1)}}),Object(p.jsxs)(Ft.a,{elevation:0,children:[Object(p.jsx)(jn.a,{action:Object(p.jsx)(Fn,{options:O}),title:Object(p.jsxs)(p.Fragment,{children:[t.name,Object(p.jsx)(rr,{data:{id:t.id,name:t.name,type:$a.Room,addressId:t.building.address,buildingId:t.building.id}})]}),subheader:Object(p.jsx)(p.Fragment,{children:t.roomType})}),Object(p.jsx)(hn.a,{component:"img",height:"350",image:U.getLink(t.image),alt:t.name}),Object(p.jsxs)(bn.a,{children:[Object(p.jsx)(fr,{room:t,deleteTag:a}),Object(p.jsx)("br",{}),Object(p.jsx)(st,{model:t})]})]})]}):Object(p.jsx)(vr,{})}function wr(){var e=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)($n,{})}),e.push({name:"Statystyki",component:Object(p.jsx)(Ba,{})}),e.push({name:"Logi",component:Object(p.jsx)(_e,{})}),e}),[]);return Object(p.jsx)(un,{children:Object(p.jsxs)(ye.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(tt,{tabs:e})}),Object(p.jsx)(ye.a,{item:!0,xs:12,md:5,lg:4,children:Object(p.jsx)(gr,{})})]})})}var Cr=function(e){Object(E.a)(n,e);var t=Object(T.a)(n);function n(){return Object(I.a)(this,n),t.apply(this,arguments)}return Object(P.a)(n,[{key:"getAll",value:function(){return this.get("/configurations")}},{key:"update",value:function(e){return this.patch("/configurations",e)}}]),n}(D),zr=new Cr,Sr=r.a.createContext(null);function Ir(e){var t=S(),n=r.a.useState(),a=Object(v.a)(n,2),c=a[0],i=a[1],s=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zr.getAll();case 3:n=e.sent,i(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);r.a.useEffect((function(){s()}),[s]);var o=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zr.update(n);case 3:return i((function(e){return Object(B.a)(Object(B.a)({},e),n)})),t("Ustawienia zosta\u0142y zaktualizowane","success"),e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error");case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return c?Object(p.jsx)(Sr.Provider,{value:{settings:c,updateSettings:o},children:e.children}):null}var Pr=n(388),Er=n(387),Tr=n(362),Rr=[{id:"method",numeric:!1,disablePadding:!0,label:"Metoda"},{id:"generalEndpoint",numeric:!1,disablePadding:!1,label:"\u015acie\u017cka"},{id:"calls",numeric:!0,disablePadding:!1,label:"Liczba zapyta\u0144"},{id:"timeForEndpoint",numeric:!0,disablePadding:!1,label:"Ca\u0142kowity czas"},{id:"avgTime",numeric:!0,disablePadding:!1,label:"\u015ar. czas wykonania"}];function Mr(e){var t=e.order,n=e.orderBy,a=e.onRequestSort;return Object(p.jsx)(Pe.a,{children:Object(p.jsx)(Ee.a,{children:Rr.map((function(e){return Object(p.jsx)(Se.a,{padding:"normal",sortDirection:n===e.id&&t,children:Object(p.jsxs)(Er.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(r=e.id,function(e){a(e,r)}),children:[e.label,n===e.id?Object(p.jsx)(o.a,{component:"span",sx:Tr.a,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var r}))})})}function Ar(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Dr(e,t){return"desc"===e?function(e,n){return Ar(e,n,t)}:function(e,n){return-Ar(e,n,t)}}function Wr(){var e=Oa().chartsData,t=a.useState(5),n=Object(v.a)(t,2),r=n[0],c=n[1],i=a.useState(0),s=Object(v.a)(i,2),o=s[0],u=s[1],l=a.useState("asc"),j=Object(v.a)(l,2),d=j[0],b=j[1],x=a.useState("generalEndpoint"),m=Object(v.a)(x,2),h=m[0],O=m[1];return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ie.a,{children:Object(p.jsxs)(Ce.a,{sx:{minWidth:550},"aria-labelledby":"Endpointy aplikacji",size:"medium",children:[Object(p.jsx)(Mr,{order:d,orderBy:h,onRequestSort:function(e,t){b(h===t&&"asc"===d?"desc":"asc"),O(t)}}),Object(p.jsx)(ze.a,{children:e.endpoints.slice().sort(Dr(d,h)).slice(o*r,o*r+r).map((function(e,t){return Object(p.jsxs)(Ee.a,{hover:!0,children:[Object(p.jsx)(Se.a,{children:e.method}),Object(p.jsx)(Se.a,{children:e.generalEndpoint}),Object(p.jsx)(Se.a,{children:e.calls}),Object(p.jsx)(Se.a,{children:Math.round(1e3*e.timeForEndpoint)/1e3}),Object(p.jsx)(Se.a,{children:Math.round(1e3*e.avgTime)/1e3})]},t)}))})]})}),Object(p.jsx)(Pr.a,{rowsPerPageOptions:[5,10,25],component:"div",count:e.endpoints.length,rowsPerPage:r,page:o,onPageChange:function(e,t){u(t)},onRowsPerPageChange:function(e){c(parseInt(e.target.value,10)),u(0)}})]})}function Fr(){return Object(p.jsx)(o.a,{sx:{width:"100%"},children:Object(p.jsxs)(ha,{children:[Object(p.jsx)(zt,{title:"Parametry endpoint\xf3w",subtitle:"Wylistowane s\u0105 wszystkie \u015bcie\u017cki na jakie aplikacja serwerowa dostaje zapytania od wszystkich aplikacji klienckich. Parametry wydajno\u015bciowe dla ka\u017cdej z nich mog\u0105 by\u0107 pomocne w konfigurowaniu oraz planowaniu rozwoju aplikacji."}),Object(p.jsx)(Wr,{})]})})}function Nr(e){return Object(p.jsxs)(o.a,{mr:1,children:[Object(p.jsx)(V.a,{variant:"body2",children:e.text}),Object(p.jsx)(it.a,{required:!0,type:"number",margin:"dense",name:e.name,id:"".concat(e.label,"-name"),label:e.label,value:e.value,onChange:e.onChange})]})}function Ur(){var e,t,n,a,c,i,s=r.a.useContext(Sr),o=s.settings,u=s.updateSettings,l=r.a.useState({}),j=Object(v.a)(l,2),d=j[0],b=j[1],x=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u(d);case 3:b({});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,u]),m=r.a.useCallback((function(e){b((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,Number(e.target.value)))}))}),[]);return Object(p.jsx)("span",{children:Object(p.jsxs)(re.a,{spacing:3,component:"form",onSubmit:x,children:[Object(p.jsx)(V.a,{component:"h2",variant:"h5",children:"Formularz:"}),Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{component:"h3",variant:"h6",mb:1,children:"Ustawienia zdj\u0119\u0107"}),Object(p.jsx)(Nr,{text:Object(p.jsxs)(p.Fragment,{children:["Maksymalny rozmiar zdjecia (podawany ",Object(p.jsx)("b",{children:"w bajtach"}),") \u0142adowanego przez u\u017cytkownika do aplikacji."]}),name:"maxImageSize",label:"max. rozmiar",value:null!==(e=d.maxImageSize)&&void 0!==e?e:o.maxImageSize,onChange:m})]}),Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{component:"h3",variant:"h6",mb:1,children:"U\u017cytkownicy"}),Object(p.jsx)(Nr,{text:Object(p.jsxs)(p.Fragment,{children:["Domy\u015blny numer identyfikacyjny klasy deost\u0119powej przypisywany dla ka\u017cdego nowego u\u017cytkownika.",Object(p.jsx)(Gt,{withIcon:!0,to:ee.ACCESS,children:"klasy dost\u0119pu"})]}),name:"defaultUserAccess",label:"numer ID",value:null!==(t=d.defaultUserAccess)&&void 0!==t?t:o.defaultUserAccess,onChange:m})]}),Object(p.jsxs)(ye.a,{container:!0,rowSpacing:2,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{component:"h3",variant:"h6",children:"Czas trwania rezerwacji:"})}),Object(p.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(Nr,{text:Object(p.jsxs)(p.Fragment,{children:["Maksymalny czas trwania rezerwacji ",Object(p.jsx)("b",{children:"w minutach"}),". Stworzone wcze\u015bniej rezerwacje pozostan\u0105 niezmienione."]}),name:"maxReservationTime",label:"max. czas",value:null!==(n=d.maxReservationTime)&&void 0!==n?n:o.maxReservationTime,onChange:m})}),Object(p.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(Nr,{text:Object(p.jsxs)(p.Fragment,{children:["Minimalny czas trwania rezerwacji ",Object(p.jsx)("b",{children:"w minutach"}),". Stworzone wcze\u015bniej rezerwacje pozostan\u0105 niezmienione."]}),name:"minReservationTime",label:"min. czas",value:null!==(a=d.minReservationTime)&&void 0!==a?a:o.minReservationTime,onChange:m})})]}),Object(p.jsxs)(ye.a,{container:!0,rowSpacing:2,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(V.a,{component:"h3",variant:"h6",children:"Czas przechowywania danych:"})}),Object(p.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(Nr,{text:Object(p.jsxs)(p.Fragment,{children:["Ilo\u015b\u0107 czasu ",Object(p.jsx)("b",{children:"w dniach"})," po kt\xf3rym historia rezerwacji ma zosta\u0107 usuni\u0119ta. Zmiana tego parametru wp\u0142ywa bezpo\u015brednio na statystyki."]}),name:"reservationHistory",label:"Ilo\u015b\u0107 dni",value:null!==(c=d.reservationHistory)&&void 0!==c?c:o.reservationHistory,onChange:m})}),Object(p.jsx)(ye.a,{item:!0,xs:12,md:6,children:Object(p.jsx)(Nr,{text:Object(p.jsxs)(p.Fragment,{children:["Ilo\u015b\u0107 czasu ",Object(p.jsx)("b",{children:"w dniach"})," po kt\xf3rym logi zostan\u0105 usuni\u0119te."]}),name:"requestHistory",label:"Ilo\u015b\u0107 dni",value:null!==(i=d.requestHistory)&&void 0!==i?i:o.requestHistory,onChange:m})})]}),Object(p.jsxs)(re.a,{direction:"row",justifyContent:"space-around",mt:1.5,children:[Object(p.jsx)(dt.a,{color:"error",children:"Przywr\xf3\u0107"}),Object(p.jsx)(dt.a,{color:"success",type:"submit",children:"Zatwierd\u017a"})]})]})})}function Br(){return Object(p.jsxs)(re.a,{spacing:3,children:[Object(p.jsxs)("span",{children:[Object(p.jsx)(V.a,{component:"h1",variant:"h3",color:"primary.dark",children:"Ustawienia platformy"}),Object(p.jsxs)(V.a,{variant:"body1",color:"text.secondary",mt:"5px",children:["Dost\u0119pne tutaj opcje wp\u0142ywaj\u0105 znacz\u0105co na funkcjonowanie ca\u0142ej platformy. ",Object(p.jsx)("br",{}),"Post\u0119puj racjonalnie podczas modyfikacji znajduj\u0105cych si\u0119 tutaj parametr\xf3w."]})]}),Object(p.jsx)(Ur,{})]})}function Lr(){var e=r.a.useMemo((function(){return[{name:"Ustawienia",component:Object(p.jsx)(Br,{})},{name:"Logi",component:Object(p.jsx)(_e,{})},{name:"Endpointy",component:Object(p.jsx)(Fr,{})}]}),[]);return Object(p.jsx)(Ir,{children:Object(p.jsx)(tt,{tabs:e})})}var qr=r.a.createContext(null);function Hr(e){var t=Object(y.h)(),n=S(),a=$t(),c=r.a.useState(),i=Object(v.a)(c,2),s=i[0],o=i[1];r.a.useLayoutEffect((function(){var e="me"===t.userId&&a.user?{userId:a.user.id.toString()}:t;H.setPath(e)}),[t,a]);var u=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.getCurrentOne();case 3:t=e.sent,o(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);r.a.useEffect((function(){u()}),[u]);var l=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.remove();case 3:return r=function(){return null},a&&(null===(t=a.user)||void 0===t?void 0:t.id)===(null===s||void 0===s?void 0:s.id)?a.logout():r=function(){return Object(p.jsx)(y.a,{to:ee.USERS})},n("U\u017cytkownik zosta\u0142 usuni\u0119ty","success",r),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[n,a,null===s||void 0===s?void 0:s.id]),j=r.a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.update(t);case 3:if(!e.sent){e.next=6;break}o((function(e){return Object(B.a)(Object(B.a)({},e),t)})),n("U\u017cytkownik zosta\u0142 zaktualizowany","success");case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return s?Object(p.jsx)(qr.Provider,{value:{user:s,deleteUser:l,updateUser:j},children:e.children}):null}function _r(){return r.a.useContext(qr)}var Kr=n(209),Zr=n.n(Kr),Gr=n(208),Qr=n.n(Gr);function Jr(e,t){switch(t.statusCode){case 200:case 201:return{success:!0,message:"Kod zosta\u0142 wys\u0142any na podany email"};case 403:case 401:case 400:default:return{success:!1,message:t.payload};case 404:return{success:!1,message:"Taki u\u017cytkownik nie istnieje."};case 422:return{success:!1,message:"Adres email jest niepoprawny"};case"NO_ADDRESS":return{success:!1,message:"Musisz poda\u0107 adres email"}}}function Vr(e){var t,n=r.a.useReducer(Jr,{success:null,message:e.text}),a=Object(v.a)(n,2),c=a[0],i=a[1],s=function(){var t=Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.email||i({statusCode:"NO_ADDRESS"}),t.prev=1,t.next=4,H.generateKey(e.email);case 4:n=t.sent,i(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),i({statusCode:t.t0.code,payload:t.t0.description});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(ae.a,{component:"div",display:"flex",children:[Object(p.jsx)(dt.a,{sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},onClick:s,children:Object(p.jsx)(Qr.a,{fontSize:"large"})}),Object(p.jsx)(ae.a,{sx:{display:"flex",alignItems:"center",ml:1},children:Object(p.jsx)(V.a,{variant:"body2",component:"p",color:(t=c.success,null===t?"inherit":!0===t?"green":"error"),children:c.message})})]})}function Yr(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(V.a,{variant:"h5",sx:{mt:3},children:e.title}),Object(p.jsx)(V.a,{variant:"body2",sx:{mt:1},children:e.text}),e.children]})}function Xr(e){var t,n,a=S(),c=r.a.useState({email:null!==(t=null===(n=localStorage.getItem("email"))||void 0===n?void 0:n.toString())&&void 0!==t?t:"",newPassword:"",code:""}),i=Object(v.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){o((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]),l=r.a.useCallback(function(){var t=Object(f.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,H.changePassword(s);case 4:a("Has\u0142o zosta\u0142o zmienione","success",(function(){return setTimeout((function(){return e.onSuccess&&e.onSuccess(),Object(p.jsx)(y.a,{to:ee.LOGIN})}),2e3)})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),r=t.t0.description,404===t.t0.code&&(r="Taki u\u017cytkownik nie istnieje"),a(r,"error");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),[s,a,e]);return Object(p.jsxs)(ae.a,{component:"form",onSubmit:l,sx:{mt:1},children:[Object(p.jsxs)(Yr,{title:"1. Wygeneruj Kod",text:"Podaj sw\xf3j aders email i naci\u015bnij przycisk by otrzyma\u0107 email i kodem.",children:[Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email",autoFocus:!0,value:s.email,onChange:u}),Object(p.jsx)(Vr,{text:"Kliknij przycisk by otrzyma\u0107 kod.",email:s.email})]}),Object(p.jsxs)(Yr,{title:"2. Podaj nowe has\u0142o i kod",text:"Podaj nowe has\u0142o i kod kt\xf3ry otrzyma\u0142e\u015b (je\u015bli nie, powt\xf3rz krok nr 1)",children:[Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"Has\u0142o",type:"password",id:"password",value:s.newPassword,onChange:u,autoComplete:"current-password"}),Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Kod",type:"text",id:"code",value:s.code,onChange:u,autoComplete:"email-code"})]}),Object(p.jsx)(dt.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"3. Zmie\u0144 Has\u0142o"}),Object(p.jsx)(ye.a,{container:!0,justifyContent:"flex-end",children:Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Gt,{to:ee.LOGIN,children:"Has\u0142o zmienione? Zaloguj si\u0119!"})})})]})}function $r(e){var t=e.open,n=e.onClose,a=$t().logout,c=r.a.useCallback((function(){n()}),[n]),i=r.a.useCallback((function(){a()}),[a]);return Object(p.jsx)(mt,{open:t,onClose:c,sx:{maxWidth:"450px"},children:Object(p.jsx)(Xr,{onSuccess:i})})}function ec(e){var t,n,a=e.open,c=e.onClose,i=e.user,s=_r().updateUser,o=r.a.useState({}),u=Object(v.a)(o,2),l=u[0],j=u[1],d=r.a.useCallback((function(){c(),j({})}),[c]),b=r.a.useCallback(Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l);case 2:if(!e.sent){e.next=4;break}d();case 4:case"end":return e.stop()}}),e)}))),[l,d,s]),x=r.a.useCallback((function(e){j((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]);return Object(p.jsx)(mt,{open:a,onClose:d,sx:{maxWidth:"450px"},children:Object(p.jsxs)(re.a,{spacing:3,children:[Object(p.jsx)(Ja,{image:i.image}),Object(p.jsx)(qt.a,{}),Object(p.jsxs)(bt,{title:"Edycja u\u017cytkownika",subtitle:"Zmie\u0144 dane u\u017cytkownika. Zmiany w ca\u0142ej aplikacji b\u0119d\u0105 widoczne po ponownym prze\u0142adowaniu aplikacji.",onSubmit:b,onCancel:d,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"name",label:"Imi\u0119",name:"name",autoFocus:!0,value:null!==(t=l.name)&&void 0!==t?t:i.name,onChange:x})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"surname",label:"Nazwisko",name:"surname",value:null!==(n=l.surname)&&void 0!==n?n:i.surname,onChange:x})})]})]})})}function tc(){var e=_r(),t=e.user,n=e.deleteUser,a=r.a.useState(!1),c=Object(v.a)(a,2),i=c[0],s=c[1],o=r.a.useState(!1),u=Object(v.a)(o,2),l=u[0],j=u[1],d=r.a.useState(!1),b=Object(v.a)(d,2),x=b[0],m=b[1],h=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return s(!0)},icon:Object(p.jsx)(ia.a,{color:"success"})},{label:"Zmie\u0144 has\u0142o",action:function(){return j(!0)},icon:Object(p.jsx)(Zr.a,{color:"warning"})},{label:"Usu\u0144 konto",action:function(){return m(!0)},icon:Object(p.jsx)(wt.a,{color:"error"})}]}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Ct,{objectName:"".concat(t.email),open:x,onClose:function(){return m(!1)},onSuccess:n}),Object(p.jsx)(ec,{user:t,open:i,onClose:function(){return s(!1)}}),Object(p.jsx)($r,{open:l,onClose:function(){return j(!1)}}),Object(p.jsxs)(Ft.a,{elevation:0,children:[Object(p.jsx)(jn.a,{action:Object(p.jsx)(Fn,{options:h}),title:Object(p.jsxs)(p.Fragment,{children:[t.name," ",t.surname]}),subheader:Object(p.jsx)(Ae.a,{href:"mailto:".concat(t.email),children:t.email})}),Object(p.jsx)(hn.a,{component:"img",height:"350",image:U.getLink(t.image),alt:t.email}),Object(p.jsxs)(bn.a,{children:[Object(p.jsxs)(V.a,{color:"text.secondary",variant:"subtitle1",children:["Ostatnio aktywny: ",De(t.lastActivity),Object(p.jsx)("br",{}),"Klasa dost\u0119pu: ",Object(p.jsx)(Gt,{to:ee.ACCESS,children:t.access.name})]}),Object(p.jsx)("br",{}),Object(p.jsx)(st,{model:t})]})]})]})}function nc(){return Object(p.jsx)(fa,{children:Object(p.jsx)(ac,{})})}function ac(){var e=Oa().chartsData;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(ka,{defaultOpen:!0,title:"Rezerwowane Sale",children:[Object(p.jsx)(Sa,{fullWidth:!0,title:"Ilo\u015b\u0107 rezerwacji w rezerwowanych salach",data:e.reservedRooms,xKey:"roomName",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.reservedRooms,xKey:"roomName",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"Czas wszystkich rezerwacji w danej sali",data:e.reservedRooms,xKey:"roomName",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]})]}),Object(p.jsx)(Ua,{data:e.weekly}),Object(p.jsx)(Na,{data:e.monthly})]})}function rc(){var e=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(p.jsx)($n,{})}),e.push({name:"Statystyki",component:Object(p.jsx)(nc,{})}),e.push({name:"Logi",component:Object(p.jsx)(_e,{})}),e}),[]);return Object(p.jsx)(Hr,{children:Object(p.jsxs)(ye.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(p.jsx)(ye.a,{item:!0,xs:12,md:7,lg:8,children:Object(p.jsx)(tt,{tabs:e})}),Object(p.jsx)(ye.a,{item:!0,xs:12,md:5,lg:4,children:Object(p.jsx)(tc,{})})]})})}var cc=r.a.createContext(null);function ic(e){var t=S(),n=be(),a=n.queryParams,c=n.setQueryParams,i=r.a.useState(),s=Object(v.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback(Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.getUsers(a);case 3:n=e.sent,c((function(e){var t;return Object(B.a)(Object(B.a)({},e),{},{pagesCount:null===(t=n.pagination)||void 0===t?void 0:t.pagesCount})})),u(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error"),u([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t,a.itemsOnPage,a.currentPage,a.search,a.deleted,a.activated]);return r.a.useEffect((function(){l()}),[l]),o?Object(p.jsx)(cc.Provider,{value:{users:o},children:e.children}):null}function sc(){var e,t=be(),n=t.setQueryParams,a=t.queryParams,c=r.a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"deleted":case"activated":t=Boolean(e.target.checked)}n((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(ve.a)({},e.target.name,t))}))}),[n]);return Object(p.jsxs)(ye.a,{container:!0,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,md:8,children:Object(p.jsx)(ge,{label:"wyszukaj",name:"search",value:null!==(e=a.search)&&void 0!==e?e:"",onChange:c})}),Object(p.jsxs)(ye.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"start",flexWrap:"wrap",color:"text.secondary",children:[Object(p.jsx)(rt.a,{labelPlacement:"start",control:Object(p.jsx)(ct.a,{id:"aktywni-u\u017cytkownicy",name:"activated",inputProps:{"aria-label":"aktywni-u\u017cytkownicy"},onChange:c,checked:a.activated}),label:"Aktywne konta"}),Object(p.jsx)(rt.a,{labelPlacement:"start",control:Object(p.jsx)(ct.a,{id:"unsuni\u0119ci-u\u017cytkownicy",name:"deleted",inputProps:{"aria-label":"unsuni\u0119ci-u\u017cytkownicy"},onChange:c,checked:a.deleted}),label:"Usuni\u0119te konta"})]})]})}function oc(e){var t=e.user;return Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(Se.a,{align:"left",children:Object(p.jsxs)(Nt.a,{component:"div",children:[Object(p.jsx)(_n.a,{title:t.email,"aria-label":t.email,children:Object(p.jsx)(Gt,{to:$.toUser(t.id),children:Object(p.jsx)(dn.a,{src:U.getLink(t.image)})})}),Object(p.jsx)(Ut.a,{primary:Object(p.jsxs)(Gt,{to:$.toUser(t.id),children:[t.name," ",t.surname]}),secondary:t.email})]})}),Object(p.jsx)(Se.a,{sx:{width:"fit-content"},children:De(t.lastActivity)})]})}function uc(){var e=r.a.useContext(cc).users;return Object(p.jsx)(Ie.a,{component:o.a,children:Object(p.jsxs)(Ce.a,{"aria-label":"Tabela rezerwacji",size:"small",children:[Object(p.jsx)(Pe.a,{children:Object(p.jsxs)(Ee.a,{children:[Object(p.jsx)(Se.a,{children:"U\u017cytkownicy"}),Object(p.jsx)(Se.a,{children:"Aktywno\u015b\u0107"})]})}),Object(p.jsxs)(ze.a,{children:[0===e.length&&Object(p.jsx)(Ee.a,{children:Object(p.jsx)(Se.a,{colSpan:12,children:Object(p.jsx)(V.a,{textAlign:"center",children:"Brak u\u017cytkownik\xf3w spe\u0142niaj\u0105cych kryteria"})})}),e.map((function(e,t){return Object(p.jsx)(oc,{user:e},t)}))]})]})})}function lc(){return Object(p.jsxs)(re.a,{spacing:3,children:[Object(p.jsx)(zt,{title:"Lista u\u017cytkownik\xf3w",subtitle:"Wyszukuj u\u017cytkownik\xf3w wed\u0142ug podanych kryteri\xf3w."}),Object(p.jsx)(sc,{}),Object(p.jsx)(uc,{}),Object(p.jsx)(xe,{})]})}function jc(){return Object(p.jsx)(fa,{children:Object(p.jsx)(dc,{})})}function dc(){var e=Oa().chartsData;return Object(p.jsxs)(ka,{defaultOpen:!0,title:"Statystyki u\u017cytkownik\xf3w",children:[Object(p.jsx)(Sa,{fullWidth:e.users.length>=6,title:"Ilo\u015b\u0107 rezerwacji na u\u017cytkownika",data:e.users,xKey:"email",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(p.jsx)(Sa,{fullWidth:e.users.length>=6,title:"Czas wszystkich reserwacji w dany dzie\u0144",data:e.users,xKey:"email",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]}),Object(p.jsx)(Sa,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.users,xKey:"email",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]})]})}function bc(){var e=r.a.useMemo((function(){var e=[];return e.push({name:"U\u017cytkownicy",component:Object(p.jsx)(lc,{})}),e.push({name:"Statystyki",component:Object(p.jsx)(jc,{})}),e}),[]);return Object(p.jsx)(se,{name:"users-query-params",default:{deleted:!1,activated:!0,search:"",itemsOnPage:10,currentPage:1},children:Object(p.jsx)(ic,{children:Object(p.jsx)(tt,{tabs:e})})})}function xc(){return Object(p.jsxs)(y.d,{children:[Object(p.jsx)(y.b,{path:ee.ROOM,component:wr}),Object(p.jsx)(y.b,{path:ee.BUILDING,component:sr}),Object(p.jsx)(y.b,{path:ee.ADDRESS,component:Fa}),Object(p.jsx)(y.b,{path:ee.SETTINGS,component:Lr}),Object(p.jsx)(y.b,{path:ee.ACCESS,component:Xt}),Object(p.jsx)(y.b,{path:ee.USER,component:rc}),Object(p.jsx)(y.b,{path:ee.USERS,component:bc}),Object(p.jsx)(y.b,{path:ee.HOME,component:jr}),Object(p.jsx)(y.b,{path:ee.INFRASTRUCTURE,children:"Zasoby"}),Object(p.jsx)(y.b,{path:ee.HOME+"/*",children:Object(p.jsx)(y.a,{to:ee.HOME})})]})}function pc(e){return Object(p.jsx)(u.a,{component:"div",maxWidth:"xs",children:Object(p.jsxs)(ae.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"background.paper",padding:"35px",borderRadius:"10px"},children:[Object(p.jsx)(dn.a,{sx:{m:1,bgcolor:"primary.main"},children:e.icon}),Object(p.jsx)(V.a,{component:"h1",variant:"h5",children:e.title}),e.children]})})}var mc=n(210),hc=n.n(mc);function Oc(){var e,t,n=S(),r=a.useState({email:null!==(e=null===(t=localStorage.getItem("email"))||void 0===t?void 0:t.toString())&&void 0!==e?e:"",password:"",code:""}),c=Object(v.a)(r,2),i=c[0],s=c[1],u=a.useCallback(function(){var e=Object(f.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,H.activate(i);case 4:n("Twoje konto zosta\u0142o aktywowane","success",(function(){return setTimeout((function(){return Object(p.jsx)(y.a,{to:ee.LOGIN})}),2e3)})),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(1),a=e.t0.description,404===e.t0.code&&(a="Taki u\u017cytkownik nie istnieje"),n(a,"error");case 12:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),[n,i]),l=a.useCallback((function(e){s((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]);return Object(p.jsxs)(o.a,{component:"form",onSubmit:u,sx:{mt:1},children:[Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adress Email",name:"email",autoComplete:"email",autoFocus:!0,value:i.email,onChange:l}),Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",value:i.password,onChange:l,autoComplete:"current-password"}),Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Kod",type:"text",id:"code",value:i.code,onChange:l,autoComplete:"email-code"}),Object(p.jsx)(Vr,{email:i.email,text:"Je\u017celi nie otrzyma\u0142e\u015b kodu mailem, naci\u015bnij przycisk."}),Object(p.jsx)(dt.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Aktywuj"}),Object(p.jsx)(ye.a,{container:!0,justifyContent:"flex-end",children:Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Ae.a,{component:Me.b,to:ee.LOGIN,variant:"body2",children:"Masz ju\u017c konto? Zaloguj si\u0119!"})})})]})}function fc(){return Object(p.jsx)(pc,{title:"Aktywacja konta",icon:Object(p.jsx)(hc.a,{}),children:Object(p.jsx)(Oc,{})})}function vc(){var e,t,n=$t().login,r=a.useState(!0),c=Object(v.a)(r,2),i=c[0],s=c[1],u=a.useState({email:null!==(e=null===(t=localStorage.getItem("email"))||void 0===t?void 0:t.toString())&&void 0!==e?e:"",password:""}),l=Object(v.a)(u,2),j=l[0],d=l[1],b=a.useCallback((function(e){d((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]),x=a.useCallback((function(e){e.preventDefault(),i&&localStorage.setItem("email",j.email),n(j)}),[j,n,i]);return Object(p.jsxs)(o.a,{component:"form",onSubmit:x,sx:{mt:1},children:[Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres Email",name:"email",autoComplete:"email",autoFocus:!0,value:j.email,onChange:b}),Object(p.jsx)(it.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",value:j.password,onChange:b,autoComplete:"current-password"}),Object(p.jsx)(rt.a,{control:Object(p.jsx)(Lt.a,{onChange:function(){return s(!i)},name:"remember",checked:i,color:"primary"}),label:"Zapami\u0119taj mnie"}),Object(p.jsx)(dt.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Zaloguj"}),Object(p.jsxs)(ye.a,{container:!0,children:[Object(p.jsx)(ye.a,{item:!0,xs:!0,children:Object(p.jsx)(Ae.a,{component:Me.b,to:ee.REMIND_PASSWORD,variant:"body2",children:"Zapomnia\u0142e\u015b has\u0142a?"})}),Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Ae.a,{component:Me.b,to:ee.REGISTER,variant:"body2",children:"Zarejestruj si\u0119!"})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(Ae.a,{component:Me.b,to:ee.ACTIVATE,variant:"body2",children:"Aktywuj konto"})})]})]})}var yc=n(211),kc=n.n(yc);function gc(){return Object(p.jsx)(pc,{title:"Logowanie",icon:Object(p.jsx)(kc.a,{}),children:Object(p.jsx)(vc,{})})}var wc=n(148),Cc=n.n(wc);function zc(){var e=S(),t=a.useState({email:"",password:"",name:"",surname:""}),n=Object(v.a)(t,2),r=n[0],c=n[1],i=a.useCallback((function(e){c((function(t){return Object(B.a)(Object(B.a)({},t),{},Object(ve.a)({},e.target.name,e.target.value))}))}),[]),s=a.useCallback(function(){var t=Object(f.a)(O.a.mark((function t(n){var a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,H.register(r);case 4:e("Zarejestrowano","success",(function(){return Object(p.jsx)(y.a,{to:ee.ACTIVATE})})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),a=t.t0.description,e(a,"error");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),[r,e]);return Object(p.jsxs)(o.a,{component:"form",onSubmit:s,sx:{mt:3},children:[Object(p.jsxs)(ye.a,{container:!0,spacing:2,children:[Object(p.jsx)(ye.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(it.a,{autoComplete:"given-name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Imi\u0119",autoFocus:!0,value:r.name,onChange:i})}),Object(p.jsx)(ye.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"surname",label:"Nazwisko",name:"surname",autoComplete:"family-name",value:r.surname,onChange:i})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,id:"email",label:"Adres Email",name:"email",autoComplete:"email",value:r.email,onChange:i})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(it.a,{required:!0,fullWidth:!0,name:"password",label:"Has\u0142o",type:"password",id:"password",autoComplete:"new-password",value:r.password,onChange:i})}),Object(p.jsx)(ye.a,{item:!0,xs:12,children:Object(p.jsx)(rt.a,{control:Object(p.jsx)(Lt.a,{required:!0,value:"allowExtraEmails",color:"primary"}),label:"Akceptuj\u0119 warunki"})})]}),Object(p.jsx)(dt.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Za\u0142\xf3\u017c konto!"}),Object(p.jsx)(ye.a,{container:!0,justifyContent:"flex-end",children:Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Ae.a,{component:Me.b,to:ee.LOGIN,variant:"body2",children:"Masz ju\u017c konto? Zaloguj si\u0119!"})})})]})}function Sc(){return Object(p.jsx)(pc,{title:"Rejestracja",icon:Object(p.jsx)(Cc.a,{}),children:Object(p.jsx)(zc,{})})}var Ic=n(212),Pc=n.n(Ic);function Ec(){return Object(p.jsx)(pc,{title:"Zmiana Has\u0142a",icon:Object(p.jsx)(Pc.a,{}),children:Object(p.jsx)(Xr,{})})}function Tc(){return Object(p.jsx)(p.Fragment,{children:"Welcome page"})}function Rc(){return Object(p.jsxs)(y.d,{children:[Object(p.jsx)(y.b,{path:ee.LOGIN,component:gc}),Object(p.jsx)(y.b,{path:ee.REGISTER,component:Sc}),Object(p.jsx)(y.b,{path:ee.ACTIVATE,component:fc}),Object(p.jsx)(y.b,{path:ee.REMIND_PASSWORD,component:Ec}),Object(p.jsx)(y.b,{path:ee.PUBLIC,component:Tc}),Object(p.jsx)(y.b,{path:"*",children:Object(p.jsx)(y.a,{to:ee.PUBLIC})})]})}var Mc={minHeight:"80vh",padding:"1.5vh 0px"};function Ac(){return Object(p.jsx)(ae.a,{sx:Mc,children:Object(p.jsxs)(y.d,{children:[Object(p.jsx)(y.b,{path:ee.HOME,component:xc}),Object(p.jsx)(y.b,{path:ee.PUBLIC,component:Rc}),Object(p.jsx)(y.b,{path:ee.FAQ,children:"Cz\u0119ste pytania i odpowiedzi FAQ"}),Object(p.jsx)(y.b,{path:"*",children:Object(p.jsx)(y.a,{to:ee.PUBLIC})})]})})}function Dc(){return Object(p.jsx)(V.a,{align:"center",sx:{backgroundColor:"primary.dark",padding:2,color:"primary.light"},children:"\xa9 Szymon Ryka\u0142a 2021"})}var Wc=[[{name:"FAQ",link:ee.FAQ},{name:"Logowanie",link:ee.LOGIN},{name:"Rejestracja",link:ee.REGISTER},{name:"Aktywacja Konta",link:ee.ACTIVATE}],[{name:"Home",link:ee.HOME},{name:"Profil",link:ee.MY_PROFILE},{name:"Zasoby",link:ee.INFRASTRUCTURE}]];function Fc(){var e=r.a.useMemo((function(){return Wc.map((function(e,t){return Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Wt.a,{children:e.map((function(e){var t=e.name,n=e.link;return Object(p.jsx)(Nt.a,{children:Object(p.jsx)(Gt,{to:n,withIcon:!0,sx:{color:"background.default"},children:t})},t)}))})},t)}))}),[]);return Object(p.jsx)(ye.a,{sx:{backgroundColor:"primary.main"},container:!0,direction:"row",justifyContent:"space-evenly",alignItems:"flex-start",children:e})}function Nc(){return Object(p.jsx)(ae.a,{children:Object(p.jsxs)(ye.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Fc,{})}),Object(p.jsx)(ye.a,{item:!0,children:Object(p.jsx)(Dc,{})})]})})}var Uc=n(367),Bc=n(302),Lc=n(389),qc=n(363),Hc=n(213),_c=n.n(Hc),Kc=n(214),Zc=n.n(Kc),Gc=n(215),Qc=n.n(Gc),Jc=n(216),Vc=n.n(Jc),Yc=[{label:"Panel G\u0142\xf3wny",href:ee.HOME,icon:_c.a},{label:"Moje Konto",href:ee.MY_PROFILE,icon:Cc.a}],Xc={label:"Ustawienia Platformy",href:ee.SETTINGS,icon:Zc.a},$c={label:"Klasy dost\u0119pu",href:ee.ACCESS,icon:Qc.a},ei={label:"U\u017cytkownicy",href:ee.USERS,icon:Vc.a};function ti(e){var t=r.a.useMemo((function(){var e=Object.assign([],Yc);return e.push(ei),e.push($c),e.push(Xc),e}),[]);return Object(p.jsx)(Wt.a,{children:t.map((function(e,t){return Object(p.jsxs)(qc.a,{component:"li",children:[Object(p.jsx)(Bt.a,{color:"primary",children:Object(p.jsx)(e.icon,{color:"primary"})}),Object(p.jsx)(Ut.a,{primary:Object(p.jsx)(Gt,{color:"text.primary",to:e.href,children:e.label})})]},t)}))})}function ni(e){var t=e.children,n=e.toggleOpen;return Object(p.jsx)(o.a,{sx:{width:320},role:"presentation",onClick:n,onKeyDown:n,children:t})}function ai(e){var t=e.user;return Object(p.jsxs)(ae.a,{onClick:function(e){return e.stopPropagation()},sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2,color:"primary.dark"},children:[Object(p.jsx)(dn.a,{alt:"".concat(null===t||void 0===t?void 0:t.name," ").concat(null===t||void 0===t?void 0:t.surname),src:U.getLink(null===t||void 0===t?void 0:t.image),sx:{width:"120px",height:"120px",fontSize:"36px",mt:2,mb:2}}),Object(p.jsxs)(V.a,{children:[null===t||void 0===t?void 0:t.name,"\xa0",null===t||void 0===t?void 0:t.surname]}),Object(p.jsx)(V.a,{children:Object(p.jsx)(Ae.a,{href:"mailto:".concat(null===t||void 0===t?void 0:t.email),children:null===t||void 0===t?void 0:t.email})})]})}var ri=n(218),ci=n.n(ri),ii=n(217),si=n.n(ii),oi=n(364),ui=n(365);function li(e){var t=r.a.useState(!1),n=Object(v.a)(t,2),a=n[0],c=n[1],i=r.a.useMemo((function(){return"".concat(e.name,"-nav-item")}),[e.name]);r.a.useEffect((function(){c(L.read(i))}),[i]);var s=e.href?Object(p.jsx)(Gt,{to:e.href,sx:{color:"text.primary"},children:e.name}):e.name;return Object(p.jsxs)(Nt.a,{disablePadding:!0,component:"li",sx:{flexDirection:"column",alignItems:"flex-start"},children:[Object(p.jsxs)(qc.a,{sx:e.sx,children:[e.icon&&Object(p.jsx)(Bt.a,{children:e.icon}),Object(p.jsx)(Ut.a,{primary:s}),Object(p.jsx)(o.a,{component:"span",onClick:function(e){e.stopPropagation(),L.save(i,!a),c((function(e){return!e}))},children:a?Object(p.jsx)(oi.a,{}):Object(p.jsx)(ui.a,{})})]}),Object(p.jsx)(Re.a,{in:a,timeout:"auto",sx:e.sx,children:Object(p.jsx)(Wt.a,{disablePadding:!0,children:e.children})})]})}function ji(e){return Object(p.jsx)(qc.a,{component:"li",children:Object(p.jsxs)(o.a,{sx:{width:"100%"},component:Gt,to:"".concat(ee.HOME).concat(e.href),children:[Object(p.jsx)(Bt.a,{children:Object(p.jsx)(Aa.a,{})}),e.name]})})}function di(){var e=sn().resourceMap,t=r.a.useMemo((function(){return null===e||void 0===e?void 0:e.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.buildings;return Object(p.jsx)(li,{name:n,href:"".concat(ee.HOME).concat(a),icon:Object(p.jsx)(si.a,{color:"primary"}),sx:{width:"100%"},children:r.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.rooms;return Object(p.jsx)(li,{name:n,href:"".concat(ee.HOME).concat(a),icon:Object(p.jsx)(ci.a,{color:"primary"}),sx:{pl:6,width:"inherit",backgroundColor:"background.default"},children:r.map((function(e,t){return Object(p.jsx)(ji,Object(B.a)({},e),t)}))},t)}))},t)}))}),[e]);return Object(p.jsx)(Wt.a,{children:t})}var bi=n(219),xi=n.n(bi);function pi(){var e=r.a.useState(!1),t=Object(v.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){e.stopPropagation(),a(!0)}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(la,{open:n,onClose:function(){return a(!1)}}),Object(p.jsx)(Nt.a,{component:"div",disablePadding:!0,onClick:c,sx:{color:"primary.dark"},children:Object(p.jsxs)(qc.a,{children:[Object(p.jsx)(Bt.a,{children:Object(p.jsx)(xi.a,{color:"primary"})}),"Dodaj adres"]})})]})}function mi(e){var t=e.toggleOpen,n=e.open,a=$t().user;return Object(p.jsxs)(Lc.a,{variant:"temporary",ModalProps:{keepMounted:!0},anchor:"left",open:n,onClose:t,children:[Object(p.jsxs)(ni,{toggleOpen:t,children:[Object(p.jsx)(ai,{user:a}),Object(p.jsx)(qt.a,{}),Object(p.jsx)(ti,{access:null===a||void 0===a?void 0:a.access}),Object(p.jsx)(qt.a,{}),Object(p.jsx)(Nt.a,{onClick:function(e){return e.stopPropagation()},component:"div",sx:{pb:0,color:"text.disabled"},children:Object(p.jsx)(Ut.a,{children:"Zasoby:"})}),Object(p.jsx)(di,{})]}),Object(p.jsx)(pi,{})]})}var hi=n(420),Oi=n(418),fi=n(220),vi=n.n(fi),yi=[{name:"M\xf3j Profil",link:ee.MY_PROFILE},{name:"Panel G\u0142\xf3wny",link:ee.HOME}];function ki(e){var t=e.trigger,n=e.handleClose,a=$t().logout,c=r.a.useMemo((function(){return yi.map((function(e,t){var a=e.name,r=e.link;return Object(p.jsx)(de.a,{onClick:n,children:Object(p.jsx)(Gt,{to:r,children:a})},t)}))}),[n]);return Object(p.jsxs)(An.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:n,children:[c,Object(p.jsx)(de.a,{onClick:function(){n(),a()},children:"Wyloguj"})]})}function gi(e){var t=$t().user,n=a.useState(null),r=Object(v.a)(n,2),c=r[0],i=r[1],s=a.useCallback((function(e){i(e.currentTarget)}),[]),u=a.useCallback((function(){i(null)}),[]);return Object(p.jsx)(o.a,{sx:{flexGrow:1},children:Object(p.jsx)(hi.a,{position:"static",children:Object(p.jsxs)(Oi.a,{children:[t&&Object(p.jsx)(Te.a,{onClick:e.toggleDrawer,size:"large",edge:"start","aria-label":"menu",sx:{mr:2,color:"background.default"},children:Object(p.jsx)(vi.a,{color:"inherit"})}),Object(p.jsx)(V.a,{variant:"h4",component:"span",sx:{flexGrow:1,fontFamily:"Dancing Script, cursive"},children:Object(p.jsx)(Gt,{to:t?ee.HOME:ee.PUBLIC,sx:{width:"fit-content",color:"background.default","&:hover":{textDecoration:"none"}},children:"Rav System"})}),t&&Object(p.jsxs)("div",{children:[Object(p.jsx)(Te.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:s,color:"inherit",children:Object(p.jsx)(dn.a,{alt:t.name,src:U.getLink(t.image),sx:{width:42,height:42}})}),Object(p.jsx)(ki,{trigger:c,handleClose:u})]})]})})})}function wi(){var e=r.a.useState(!1),t=Object(v.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.stopPropagation(),(!t||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a((function(e){return!e}))}),[]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(gi,{toggleDrawer:c}),Object(p.jsx)(mi,{open:n,toggleOpen:c})]})}var Ci=function(){return Object(p.jsx)(m,{children:Object(p.jsxs)(Bc.b,{dateAdapter:Uc.a,children:[Object(p.jsx)(s.a,{}),Object(p.jsx)(o.a,{component:"div",className:"App",sx:{backgroundColor:"background.default"},children:Object(p.jsx)(Me.a,{basename:"/",children:Object(p.jsx)(z,{children:Object(p.jsx)(ne,{children:Object(p.jsxs)(cn,{children:[Object(p.jsx)(wi,{}),Object(p.jsx)(u.a,{children:Object(p.jsx)(Ac,{})}),Object(p.jsx)(Nc,{})]})})})})})]})})};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(Ci,{})}),document.getElementById("root"))}},[[291,1,2]]]);
//# sourceMappingURL=main.0bc3ea8d.chunk.js.map