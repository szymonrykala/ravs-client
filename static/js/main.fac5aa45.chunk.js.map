{"version":3,"sources":["shared/Theme/theme.ts","shared/Theme/index.tsx","contexts/NotificationContext/NotificationContextValue.ts","contexts/NotificationContext/NotificationContextProvider.tsx","contexts/NotificationContext/useNotification.ts","services/ReservationService.ts","services/APIServiceError.ts","services/Service.ts","services/AuthService.ts","services/ImageService.ts","services/LogService.ts","services/StorageService.ts","services/UserService.ts","services/MetadataService.ts","shared/components/LoadingView.tsx","shared/path.ts","auth/sessionProvider.tsx","contexts/QueryParamsContext/QueryParamsContextValue.tsx","contexts/QueryParamsContext/QueryParamsContextProvider.tsx","contexts/QueryParamsContext/userQueryParams.ts","components/pages/protected/components/ListPagination.tsx","components/pages/protected/hooks/useTrigger.ts","components/pages/protected/components/GenericLogsTab/LogsContext/LogsContextProvider.tsx","components/pages/protected/components/LazyInput.tsx","components/pages/protected/components/GenericLogsTab/LogsTabBar.tsx","shared/utils.ts","components/pages/protected/components/GenericLogsTab/LogRow.tsx","components/pages/protected/components/GenericLogsTab/LogsTable.tsx","components/pages/protected/components/GenericLogsTab/LogsContext/useLogs.ts","components/pages/protected/components/GenericLogsTab/GenericLogsTab.tsx","components/pages/protected/components/SmallCard.tsx","components/pages/protected/components/SwipeableTabs/SwipeablePanel.tsx","components/pages/protected/components/SwipeableTabs/SwipeableTabs.tsx","services/AccessService.ts","shared/components/FormGridContainer.tsx","components/pages/protected/components/GenericModal.tsx","components/pages/protected/components/DatesFooter.tsx","components/pages/protected/AccessPage/Forms/AccessEditModal.tsx","components/pages/protected/AccessPage/Forms/CreateAccessModal.tsx","components/pages/protected/AccessPage/AccessContext/AccessContextProvider.tsx","components/pages/protected/AccessPage/AccessContext/useAccess.ts","components/pages/protected/components/DeleteModal/DeleteModal.tsx","shared/components/TabHeadLine.tsx","components/pages/protected/AccessPage/components/AccessesList/AddItem.tsx","components/pages/protected/AccessPage/components/AccessesList/RowItem.tsx","components/pages/protected/AccessPage/components/AccessesList/AccessesList.tsx","components/pages/protected/AccessPage/components/AccessInfo.tsx","shared/components/AppLink.tsx","components/pages/protected/AccessPage/components/EditUsersAccess/EditUsersAccess.tsx","components/pages/protected/AccessPage/AccessPage.tsx","auth/useSession.ts","services/RoomService.ts","services/AddressService.ts","contexts/ResourceMapContext/ResourceMapContextProvider.tsx","contexts/ResourceMapContext/useResourceMap.ts","components/pages/protected/RoomPage/RoomContext/RoomContextProvider.tsx","components/pages/protected/RoomPage/RoomContext/useRoomContext.ts","components/pages/protected/components/ReservationViewModal/ReservationUserCard.tsx","components/pages/protected/components/ReservationViewModal/ReservationRoomCard.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/useReservations.ts","components/pages/protected/components/DateTimePicker.tsx","components/pages/protected/components/ReservationViewModal/ModalForms/EditModalForm.tsx","components/pages/protected/components/ReservationViewModal/ModalForms/CopyModalForm.tsx","components/pages/protected/components/RfidForm.tsx","components/pages/protected/components/ReservationViewModal/ModalForms/PingKeyModalForm.tsx","components/pages/protected/components/MoreVertMenu.tsx","components/pages/protected/components/ReservationViewModal/ReservationViewModal.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/ModalContext/ModalContextProvider.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/ReservationsContextProvider.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsList/ReservationsListItem.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsList/ReservationsList.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/ModalContext/useReservationModalContext.ts","components/pages/protected/components/SelectButtonGroup.tsx","components/pages/protected/components/GenericReservationsTab/ReservationTabBar.tsx","components/pages/protected/components/GenericReservationsTab/GenericReservationsTab.tsx","components/pages/protected/AddressPage/AddressContext/AddressContextProvider.tsx","components/pages/protected/AddressPage/AddressContext/useAddress.ts","components/pages/protected/AddressPage/components/Map.tsx","components/pages/protected/AddressPage/Forms/AddressEditForm.tsx","components/pages/protected/AddressPage/Forms/CreateBuildingForm.tsx","components/pages/protected/AddressPage/Forms/CreateAddressForm.tsx","components/pages/protected/AddressPage/components/AddressCard.tsx","components/pages/protected/components/Charts/ChartOptionsBar.tsx","services/ChartService.ts","components/pages/protected/components/Charts/ChartsContext/ChartsContextProvider.tsx","components/pages/protected/components/Charts/ChartsContext/useCharts.ts","components/pages/protected/components/Charts/ChartsTab.tsx","components/pages/protected/components/Charts/ChartSection.tsx","components/pages/protected/components/Charts/Chart.tsx","components/pages/protected/AddressPage/components/AddressCharts.tsx","services/BuildingService.ts","components/pages/protected/components/ScrollableList/ScrollableList.tsx","components/pages/protected/components/ScrollableList/ScrollableListItem.tsx","components/pages/protected/AddressPage/components/BuildingsList.tsx","components/pages/protected/AddressPage/AddressPage.tsx","components/pages/protected/components/MonthlyChartsSection.tsx","components/pages/protected/components/WeeklyChartsSection.tsx","components/pages/protected/components/RoomOrBuildingChartTab.tsx","components/pages/protected/BuildingPage/BuildingContext/BuildingContextProvider.tsx","components/pages/protected/BuildingPage/BuildingContext/useBuilding.ts","models/Room.ts","components/pages/protected/components/ImageUploadField.tsx","components/pages/protected/BuildingPage/Forms/BuildingEditForm.tsx","components/pages/protected/BuildingPage/Forms/CreateRoomForm.tsx","models/Metadata.ts","components/pages/protected/components/FavouriteButton.tsx","components/pages/protected/BuildingPage/components/BuildingCard.tsx","components/pages/protected/BuildingPage/components/RoomsList.tsx","components/pages/protected/BuildingPage/BuildingPage.tsx","components/pages/protected/HomePage/Favourites.tsx","components/pages/protected/HomePage/Notebook.tsx","components/pages/protected/HomePage/HomeReservations.tsx","components/pages/protected/HomePage/HomePage.tsx","components/pages/protected/RoomPage/Forms/RoomEditForm.tsx","components/pages/protected/RoomPage/Forms/RfidModalForm.tsx","components/pages/protected/RoomPage/components/YesNoIcon.tsx","components/pages/protected/RoomPage/components/RoomTableInfo.tsx","shared/components/Loading.tsx","components/pages/protected/components/CreateReservationModal/CreateReservationForm.tsx","components/pages/protected/components/CreateReservationModal/CreateReservationModal.tsx","components/pages/protected/RoomPage/components/RoomCard.tsx","components/pages/protected/RoomPage/RoomPage.tsx","services/SettingsService.ts","components/pages/protected/SettingsPage/SettingsContext/SettingsContextProvider.tsx","components/pages/protected/SettingsPage/components/EndpointsStats/EnhancedTableHead.tsx","components/pages/protected/SettingsPage/components/EndpointsStats/SortableTable.tsx","components/pages/protected/SettingsPage/components/EndpointsStats/EndpointsStats.tsx","components/pages/protected/SettingsPage/components/SettingsForm.tsx","components/pages/protected/SettingsPage/SettingsContext/useSettings.ts","components/pages/protected/SettingsPage/components/SettingsMain.tsx","components/pages/protected/SettingsPage/SettingsPage.tsx","components/pages/protected/UserPage/UserContext/UserContextProvider.tsx","components/pages/protected/UserPage/UserContext/useUser.tsx","shared/components/UniqueCodeButton/statusReducer.ts","shared/components/UniqueCodeButton/index.tsx","components/pages/public/ChangePassword/FormStep.tsx","components/pages/public/ChangePassword/Form.tsx","components/pages/protected/UserPage/Forms/PasswordChangeModal.tsx","components/pages/protected/UserPage/Forms/EditUserForm.tsx","components/pages/protected/UserPage/components/UserCard.tsx","components/pages/protected/UserPage/components/UserCharts.tsx","components/pages/protected/UserPage/UserPage.tsx","components/pages/protected/UsersPage/UsersContext/UsersContextProvider.tsx","components/pages/protected/UsersPage/components/UsersView/SearchBar.tsx","components/pages/protected/UsersPage/components/UsersView/UsersList/UserListItem.tsx","components/pages/protected/UsersPage/components/UsersView/UsersList/UsersList.tsx","components/pages/protected/UsersPage/UsersContext/useUsers.ts","components/pages/protected/UsersPage/components/UsersView/UsersView.tsx","components/pages/protected/UsersPage/components/UsersCharts.tsx","components/pages/protected/UsersPage/UsersPage.tsx","components/pages/protected/index.tsx","components/pages/public/FormPage.tsx","components/pages/public/Activation/Form.tsx","components/pages/public/Activation/Activation.tsx","components/pages/public/Login/Form.tsx","components/pages/public/Login/Login.tsx","components/pages/public/Register/Form.tsx","components/pages/public/Register/Register.tsx","components/pages/public/ChangePassword/ChangePassword.tsx","components/pages/public/Welcome/Welcome.tsx","components/pages/public/PublicPages.tsx","components/pages/index.tsx","components/Footer/Copyrights.tsx","components/Footer/Links.tsx","components/Footer/index.tsx","components/Navigation/Drawer/MainDrawerList.tsx","components/Navigation/Drawer/DrawerPanel.tsx","components/Navigation/Drawer/AvatarView.tsx","components/Navigation/Drawer/ResourcesList/CollapseableListItem.tsx","components/Navigation/Drawer/ResourcesList/RoomListItem.tsx","components/Navigation/Drawer/ResourcesList/ResourceList.tsx","components/Navigation/Drawer/CreateAddressButton.tsx","components/Navigation/Drawer/index.tsx","components/Navigation/NavigationBar/AccountMenu.tsx","components/Navigation/NavigationBar/index.tsx","components/Navigation/Navigation.tsx","App.tsx","index.tsx"],"names":["theme","createTheme","palette","primary","indigo","secondary","dark","main","light","background","default","paper","shape","borderRadius","components","MuiCssBaseline","styleOverrides","body","scrollbar","track","thumb","active","MuiTextField","defaultProps","size","variant","MuiSelect","MuiButton","sx","Number","MuiSvgIcon","color","MuiIconButton","Theme","props","ThemeProvider","children","NotificationContextDefault","message","notificationContext","createContext","NotificationContextProvider","React","useState","setMessage","open","setOpen","severity","setSeverity","component","setComponent","closeSnack","useCallback","event","reason","setSnack","_severity","componentCallback","Provider","value","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","Alert","width","useNotification","useContext","Colors","APIServiceError","data","error","description","this","statusCode","Error","Service","_BASE_URL","process","_TOKEN_NAME","_userId","window","localStorage","getItem","fetchObject","fetch","endpoint","method","cache","mode","headers","authToken","JSON","stringify","response","json","console","debug","status","match","location","reload","ok","type","urlParams","endp","url","toString","Object","keys","length","entries","path","newPath","includes","addressId","buildingId","roomId","userId","query","_fetch","URLSearchParams","AuthService","a","post","email","password","setItem","removeItem","Boolean","hasToken","get","ImageService","formBody","resp","image","slice","formData","FormData","append","sendImage","preparePath","delete","LogService","queryParams","id","name","btoa","encodeURI","str","codeName","parse","UserService","_path","patch","accessId","MetadataService","STORAGE_NAME","StorageService","read","notes","favourites","save","setPath","update","metadata","item","push","sort","b","log","find","filter","ReservationService","mess","key","RFIDTag","reservation","nowTimestamp","Date","now","now_minus15","now_plus15","actualStart","plannedStart","actualEnd","plannedEnd","start","end","emitStatus","warning","info","inert","end_plus15","success","LoadingView","Backdrop","display","flexDirection","zIndex","drawer","backgroundColor","Typography","pb","text","CircularProgress","paths","PUBLIC","FAQ","HOME","LOGIN","REGISTER","ACTIVATE","REMIND_PASSWORD","ACCESS","SETTINGS","USERS","USER","MY_PROFILE","INFRASTRUCTURE","ADDRESS","BUILDING","ROOM","dynamicPaths","toAddress","toBuilding","toRoom","toUser","sessionContext","SessionProvider","notify","loading","setLoading","user","setUser","setUpUser","setIdentity","checkIfUserHasSession","hasSession","getMe","sessionUser","to","WELCOME","useEffect","login","code","logout","queryParamsContextDefaults","q","setQueryParams","param","queryParamsContext","QueryParamsContextProvider","keyName","defaultValue","useQueryParams","ListPagination","handlePageChange","old","currentPage","handleCountChange","child","itemsOnPage","target","Stack","spacing","flexWrap","justifyContent","alignContent","alignItems","Pagination","count","pagesCount","page","onChange","FormControl","fullWidth","maxWidth","InputLabel","Select","labelId","label","map","num","MenuItem","useTrigger","timeInterval","trigger","setTrigger","int","setInterval","clearInterval","logsContext","LogsContextProvider","useParams","refresh","logs","setLogs","load","pagination","LazyInput","setStr","handleSearchFieldChange","evt","clearTimeout","timer","setTimeout","InputBase","placeholder","p","bgcolor","inputProps","LogsTabBar","handleChange","preventDefault","Grid","container","xs","md","displayDate","dateString","date","Intl","DateTimeFormat","dateStyle","timeStyle","format","timeFormat","isDate","getDate","LogRow","row","TableRow","hover","borderBottom","TableCell","IconButton","onClick","scope","align","Math","fround","time","toPrecision","style","paddingBottom","paddingTop","colSpan","Collapse","in","timeout","unmountOnExit","Box","margin","Link","RouterLink","_created","payload","undefined","LogsTable","TableContainer","Table","TableHead","TableBody","textAlign","GenericLogsTab","SmallCard","Paper","elevation","title","titleComponent","SwipeablePanel","hidden","index","other","useMemo","role","SwipeableTabs","useTheme","tabIndex","setTabIndex","handleTabChange","newValue","handleChangeIndex","renderedTabs","tabs","Tab","a11yProps","renderedTabPanels","dir","direction","Tabs","allowScrollButtonsMobile","indicatorColor","borderColor","axis","onChangeIndex","AccessService","FormGridContainer","subtitle","onSubmit","onCancel","handleSubmit","rowGap","mt","Button","startIcon","GenericModal","Modal","closeAfterTransition","BackdropComponent","BackdropProps","overflow","Fade","position","boxShadow","DatesFooter","fontSize","model","_updated","fields","AccessEditModal","access","setData","checked","close","TextField","required","field","FormControlLabel","labelPlacement","control","Switch","ml","CreateAccessModal","setName","autoFocus","accessContext","AccessContextProvider","modalOpen","setModalOpen","selectedAccessId","setSelectedAccessId","accessesList","setAccessesList","getAll","updateAccess","deleteAccess","remove","createAccess","create","unshift","toUTCString","assign","selectedAccess","openAccess","useAccess","DeleteModal","onSuccess","objectName","input","setInput","handleConfirm","TabHeadLine","AddItem","border","RowItem","onDelete","onSelect","AccessesList","createModalOpen","setCreateModalOpen","deleteModalOpen","setDeleteModalOpen","toDelete","setToDelete","renderedRows","reverse","handleDelete","explonations","AccessInfo","rendered","mb","rel","href","AppLink","withIcon","restProps","underline","usersNotUsers","ai","bi","notNumNum","indexOf","intersection","EditUsersAccess","setChecked","leftUsers","setLeftUsers","rightUsers","setRightUsers","left","right","setAccess","updateUsersAccess","users","calls","Promise","all","results","loadUsers","getUsers","deleted","then","leftChecked","rightChecked","handleToggle","currentIndex","splice","handleCheckedRight","usersToMove","moved","concat","handleCheckedLeft","l","handleSelectChange","customList","Card","Divider","List","height","dense","ListItem","button","ListItemIcon","Checkbox","disableRipple","ListItemText","ev","stopPropagation","sm","my","disabled","AccessPage","pages","arr","useSession","RoomService","AddressService","params","resourceMapContext","ResourceMapContextProvider","resourceMap","setResources","loaded","setLoaded","loadResourceMap","getResourcesMap","getRoomLink","addr","buildings","bld","rooms","flat","allRooms","allBuildings","allAddresses","getBuildingLink","reloadMap","useResourceMap","RoomContext","RoomContextProvider","room","setRoom","useLayoutEffect","getRoom","getView","setOccupied","state","occupied","updateRoom","building","deleteRoom","updateRFIDTag","updateRFID","deleteRFIDTag","useRoomContext","ReservationUserCard","minHeight","CardHeader","avatar","Avatar","alt","surname","src","getLink","subheader","action","CardContent","lastActivity","ReservationRoomCard","roomLink","buildingLink","CardMedia","maxHeight","roomType","pt","useReservations","reservationsContext","DateTimePicker","dateVal","setDateVal","toLocaleString","MobileDateTimePicker","minDate","inputFormat","renderInput","EditModalForm","updateReservation","closeForm","handleDateChange","multiline","maxRows","CopyModalForm","createReservation","from","dates","setDates","copyDates","setCopyDates","createCalls","processed","handleDeleteCopyDate","handleAddDate","padding","pl","HiddenInput","styled","RfidForm","setText","setColor","useRef","onScan","handleDecline","current","focus","alignSelf","ref","headline","bodyText","PingKeyModalForm","pingKeyForReservation","handleKeyScan","reservationId","MoreVertMenu","anchorEl","setAnchorEl","handleClick","currentTarget","handleClose","Menu","MenuListProps","PaperProps","options","opt","icon","TextSection","ReservationViewModal","deleteReservation","editModalOpen","setEditModalOpen","nfcModalOpen","setNFCModalOpen","copyModalOpen","setCopyModalOpen","menuOptions","Edit","lg","pr","ReservationModalViewContext","showReservation","ModalContextProvider","reservations","setReservationId","ReservationsContextProvider","roomContext","setReservations","pathname","getReservations","search","triggerReload","pingKey","forEach","createOne","ReservationListItem","resolveStatus","ListItemAvatar","ReservationsList","SelectButtonGroup","buttons","renderedButtons","Radio","RadioGroup","ReservationTabBar","customDate","setCustomDate","handleButtonChange","handleSubmitCustomDate","toISOString","MobileDatePicker","GenericReservationsTab","addressContext","AddressContextProvider","address","setAddress","getAddress","getCurrentOne","getBuildingsInAddress","getBuildings","updateAddress","deleteAddress","useAddress","StyledIframe","Map","street","number","town","country","base","URL","ie","z","iwloc","output","frameBorder","AddressEditForm","postalCode","CreateBuildingForm","handleCreateBuilding","openTime","closeTime","String","MobileTimePicker","CreateAddressForm","AddressCard","predefinedButtons","ChartOptionsBar","customDates","setCustomDates","buttonValue","ChartService","chartsContext","ChartsContextProvider","chartsData","fetchData","useCharts","ChartsTab","ChartSection","defaultOpen","replace","weekDays","Chart","primaryAxis","getValue","resolveDay","x","min","secondaryAxes","y","elementType","minDomainLength","hardMin","scaleType","showDatumElements","obj","xKey","AddressCharts","ActualLoader","allReservations","BuildingService","ScrollableList","onAddItem","ScrollableListItem","py","link","BuildingsList","createBuildingModalOpen","setCreateBuildingModalOpen","setBuildings","createBuilding","renderedBuildings","AddressPage","MonthlyChartsSection","WeeklyChartsSection","RoomOrBuildingChartTab","weekly","monthly","buildingContext","BuildingContextProvider","setBuilding","getBuilding","getRoomsInBuilding","updateBuilding","deleteBuilding","useBuilding","RoomTypes","Input","StyledImage","ImageUploadField","useLocation","uploadedImage","setUploadedImage","upload","onUpload","handleImageUpload","files","img","handleRemoveImgae","createObjectURL","htmlFor","accept","timeToDate","split","h","m","BuildingEditForm","handleTime","CreateRoomForm","handleCreateRoom","LECTURE","seatsCount","floor","values","val","FavType","FavouriteButton","marked","setMarked","isFavourite","addToFavourites","removeFavourite","addFavourite","BuildingView","Building","RoomsList","createRoomModalOpen","setCreateRoomModalOpen","setRooms","createRoom","renderedRooms","BuildingPage","Favourites","Room","getCorrectListItem","Notebook","err","minRows","mr","HomeReservations","HomePage","RoomEditForm","blocked","RfidModalRorm","YesNoIcon","rest","RoomTableInfo","deleteTag","rfidTagModalOpen","setRfidTagModalOpen","tableRows","Chip","RenderedRows","fontWeight","Loading","CreateReservationForm","CreateReservationModal","RoomCard","createReservationModalOpen","setCreateReservationModalOpen","RoomPage","SettingsService","settingsContext","SettingsContextProvider","settings","setSettings","updateSettings","headCells","numeric","disablePadding","EnhancedTableHead","order","orderBy","onRequestSort","headCell","sortDirection","TableSortLabel","property","visuallyHidden","descendingComparator","getComparator","SortableTable","rowsPerPage","setRowsPerPage","setPage","setOrder","setOrderBy","minWidth","endpoints","generalEndpoint","round","timeForEndpoint","avgTime","TablePagination","rowsPerPageOptions","onPageChange","newPage","onRowsPerPageChange","parseInt","EndpointsStats","FormField","SettingsForm","maxImageSize","defaultUserAccess","rowSpacing","maxReservationTime","minReservationTime","reservationHistory","requestHistory","SettingsMain","SettingsPage","userContext","UserContextProvider","session","deleteUser","updateUser","useUser","statusReducer","UniqueCodeButton","useReducer","result","dispatchResult","generateKey","FormStep","Form","newPassword","e","changePassword","autoComplete","PasswordChangeModal","EditUserForm","UserCard","editModal","setEditModal","passModal","setPassModal","deleteModal","setDeleteModal","UserCharts","reservedRooms","UserPage","usersContext","UsersContextProvider","setUsers","activated","SearchBar","UserListItem","UsersList","UsersView","UsersCharts","UsersPage","ProtectedPages","FormPage","Container","marginTop","activate","ReactRouterLink","ActivationPage","remember","setRemember","Login","register","Register","ChangePassword","Welcome","PublicPages","Activation","tabStyle","Copyright","linksList","Links","links","list","Footer","navListItems","HomeIcon","AccountIcon","settingsItem","SettingsIcon","accessLinkItem","VerifiedUserIcon","usersLinkItem","PeopleIcon","MainDrawerList","ListItemButton","DrawerPanel","toggleOpen","onKeyDown","AvatarView","CollapseableListItem","OPENED_NAME","ExpandLess","ExpandMore","RoomListItem","ResourcesList","roomEntry","CreateAddressButton","formOpen","setFormOpen","AppDrawer","Drawer","ModalProps","keepMounted","anchor","AccountMenu","linksComp","i","transformOrigin","NavigationBar","handleMenu","flexGrow","AppBar","Toolbar","toggleDrawer","edge","fontFamily","textDecoration","Navigation","shouldWork","App","LocalizationProvider","dateAdapter","AdapterDateFns","CssBaseline","className","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fac5aa45.chunk.js","sourcesContent":["import { createTheme } from '@mui/material/styles';\nimport { indigo } from '@mui/material/colors';\nimport { darkScrollbar as scrollbar } from '@mui/material';\n\n\nconst light = {\n  track: '#f5f5f5',\n  thumb: '#adadad',\n  active: '#959595'\n};\n\nconst theme = createTheme({\n  palette: {\n    primary: indigo,\n    secondary: {\n      dark: \"#f5f5f5\",\n      main: \"#304ffe\",\n      light: \"#fff\"\n    },\n    background: {\n      default: '#f5f5f5',\n      paper: '#fff'\n    }\n  },\n  // spacing: 10,\n  shape: {\n    borderRadius: 4\n  },\n  components: {\n    MuiCssBaseline: {\n      styleOverrides: {\n        body: scrollbar(light),\n      },\n    },\n    MuiTextField: {\n      defaultProps: {\n        size: 'medium',\n        variant: 'outlined',\n      }\n    },\n    MuiSelect: {\n      defaultProps: {\n        size: 'medium'\n      }\n    },\n    MuiButton: {\n      defaultProps: {\n        sx: {\n          borderRadius: ({ shape }) => Number(shape.borderRadius)/2\n        }\n      },\n    },\n\n    MuiSvgIcon: {\n      defaultProps: {\n        color: 'inherit',\n      }\n    },\n    MuiIconButton: {\n      defaultProps: {\n        color: 'primary'\n      }\n    }\n  },\n  // typography:{\n\n  // }\n})\n\nexport default theme;","import React from 'react';\nimport { ThemeProvider } from '@mui/material/styles';\n\n\nimport theme from './theme';\n\n\ninterface ThemeProps {\n    children: React.ReactNode\n}\n\n\nexport default function Theme(props: ThemeProps) {\n    return (\n        <ThemeProvider theme={theme}>\n            {props.children}\n        </ThemeProvider>\n    );\n}","import { AlertProps } from \"@mui/material/Alert\";\n\ntype NotificationContextValue = (message: string,\n    _severity: AlertProps[\"severity\"],\n    componentCallback?: () => null | React.ReactNode\n) => void;\n\nexport default NotificationContextValue;\n\n\nexport const NotificationContextDefault = (\n    message: string,\n    _severity: AlertProps[\"severity\"] = \"error\",\n    componentCallback: () => null | React.ReactNode = () => null\n) => { }","import { Alert, AlertProps, Snackbar, SnackbarCloseReason } from \"@mui/material\";\nimport React, { createContext } from \"react\";\nimport NotificationContextValue, { NotificationContextDefault } from \"./NotificationContextValue\";\n\n\n\ninterface NotificationContextProviderProps {\n    children?: React.ReactChild\n}\n\n\nexport const notificationContext: any = createContext<NotificationContextValue>(NotificationContextDefault);\n\n\nexport default function NotificationContextProvider({\n    children\n}: NotificationContextProviderProps) {\n    const [message, setMessage] = React.useState<string | null>();\n    const [open, setOpen] = React.useState<boolean>(false);\n    const [severity, setSeverity] = React.useState<AlertProps[\"severity\"]>(\"error\");\n    const [component, setComponent] = React.useState<React.ReactNode>();\n\n\n    const closeSnack = React.useCallback((\n        event?: Event | React.SyntheticEvent<any, Event>,\n        reason?: SnackbarCloseReason\n    ) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpen(false);\n        setMessage('');\n        setComponent(null);\n    }, []);\n\n\n    const setSnack = React.useCallback((\n        message: string,\n        _severity: AlertProps[\"severity\"] = \"error\",\n        componentCallback: () => null | React.ReactNode = () => null\n    ) => {\n        setSeverity(_severity);\n        setMessage(message);\n        setOpen(true);\n        setComponent(componentCallback());\n    }, []);\n\n\n    return (\n        <notificationContext.Provider value={setSnack}>\n            {children}\n\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}\n                open={open} autoHideDuration={6000} onClose={closeSnack}>\n                <Alert onClose={closeSnack} severity={severity} sx={{ width: '100%' }}>\n                    {message}\n                </Alert>\n            </Snackbar>\n\n            {component}\n        </notificationContext.Provider>\n    );\n}","import { useContext } from \"react\";\nimport { notificationContext } from \"./NotificationContextProvider\";\nimport NotificationContextValue from \"./NotificationContextValue\";\n\n\n\nexport default function useNotification() {\n    return useContext(notificationContext) as NotificationContextValue;\n}","import Reservation from \"../models/Reservation\";\nimport { AppURLParams, PaginationQueryParams } from \"./interfaces\";\nimport Service from \"./Service\";\n\n\nexport interface ReservationsQueryParams extends PaginationQueryParams {\n    from?: string,\n    search?: string\n}\n\nexport interface CreateReservationData {\n    title: string,\n    description: string,\n    plannedStart: string,\n    plannedEnd: string,\n    roomId?: number\n}\n\nexport interface UpdateReservationData {\n    [index: string]: any,\n    title?: string,\n    description?: string,\n    plannedStart?: string,\n    plannedEnd?: string,\n    roomId?: number\n}\n\nenum Colors {\n    success = '#edf7ed',\n    error = '#fdeded',\n    info = '#e5f6fd',\n    warning = '#fff4e5',\n    inert = '#f5f5f5'\n}\n\ninterface ReservationStatus {\n    message: string,\n    color: Colors\n}\n\n\n\nclass ReservationService extends Service {\n\n    private emitStatus(mess: string, color: Colors): ReservationStatus {\n        return { message: mess, color: color };\n    }\n\n    public getReservations(\n        urlParams: AppURLParams,\n        queryParams: ReservationsQueryParams\n    ) {\n        return this.get(`${this.preparePath(urlParams)}/reservations`, queryParams);\n    }\n\n\n    public createOne(data: CreateReservationData) {\n        return this.post('/reservations', data)\n    }\n\n    public update(id: number, data: UpdateReservationData) {\n        return this.patch(`/reservations/${id}`, data);\n    }\n\n    public pingKey(id: number, key: string) {\n        return this.patch(`/reservations/${id}/keys`, {\n            RFIDTag: key\n        });\n    }\n\n    public remove(id: number) {\n        return this.delete(`/reservations/${id}`);\n    }\n\n    public resolveStatus(reservation: Reservation): ReservationStatus {\n\n        const nowTimestamp = Date.now();\n\n        const now = new Date(nowTimestamp);\n        const now_minus15 = new Date(nowTimestamp - 900_000);\n        const now_plus15 = new Date(nowTimestamp + 900_000);\n        const { actualStart, plannedStart, actualEnd, plannedEnd } = reservation;\n\n\n        const start = new Date(actualStart ? actualStart : plannedStart);\n        const end = new Date(actualEnd ? actualEnd : plannedEnd);\n\n\n        // nie rozpoczęła się\n        if (!actualStart) {\n            // jest już po czasie, i czeka do +15 minut na odbiór\n            if (start < now && start > now_minus15) return this.emitStatus('Powinna zostać już odebrana', Colors.warning);\n\n            // za 15 minut zaczyna się rezerwacja\n            if (start > now && start < now_plus15) return this.emitStatus('Za chwilę zostanie odebrana', Colors.info);\n\n            // nie została odbrana w czasie <planowany start + 15 minut>\n            if (start < now_plus15) return this.emitStatus('Nieodebrana.', Colors.error)\n\n            return this.emitStatus('Oczekuje', Colors.inert)\n\n            // rozpoczęła się\n        } else if (actualStart) {\n            // zakończyła się\n            if (actualEnd) return this.emitStatus('Rezerwacja zakończona.', Colors.inert);\n\n            // nie zakończyła się\n            if (!actualEnd) {\n                // kończy się w ciągu 15 minut\n                if (now < end && now_plus15 > end) return this.emitStatus('Za chwilę się kończy.', Colors.info);\n\n                // czas zakończenia już minął\n                if (now > end) {\n                    const end_plus15 = new Date(Date.parse(end.toString()) + 900_000)\n\n                    // dodajemy 15 minut\n                    if (now < end_plus15) return this.emitStatus('Powinna się zakończyć.', Colors.warning);\n\n                    // dodane 15 minut już minęło\n                    if (now > end_plus15) return this.emitStatus('Czas minął, klucz nie oddany.', Colors.error);\n                }\n\n                return this.emitStatus('Rezerwacja trwa.', Colors.success);\n            }\n        }\n\n        return this.emitStatus(\"Status nieznany\", Colors.warning);\n    }\n}\n\nexport default new ReservationService()","import { ResponseData } from \"./Service\";\n\n\n\n\nexport default class APIServiceError extends Error {\n\n    private data: ResponseData;\n\n    get code() {\n        return this.data.statusCode;\n    }\n\n    get description() {\n        return this.data.error?.description;\n    }\n\n    constructor(data: ResponseData) {\n        super(data.error?.description);\n        this.data = data;\n    }\n}\n","import APIServiceError from \"./APIServiceError\";\nimport { APIResponse, AppURLParams } from \"./interfaces\";\n\n\nexport interface ServiceFormData {\n    [index: string]: string | number | boolean | undefined | object\n}\n\n\n\n\ninterface FetchData {\n    endpoint: string\n    method: string,\n    body?: object\n}\n\ninterface ErrorData {\n    type: string,\n    description: string\n}\n\nexport interface ResponseData {\n    statusCode: number,\n    data?: any,\n    error?: ErrorData\n}\n\n\n\nexport interface StatusMessages {\n    [index: number]: string\n}\n\n\nexport default abstract class Service {\n\n    _BASE_URL: string = process.env.REACT_APP_API_URL as string;\n    _TOKEN_NAME: string = 'auth_token';\n    _userId: number = -1;\n\n    public set userId(value: number) {\n        this._userId = value\n    }\n\n    public get userId(): number {\n        if (this._userId === -1)\n            throw Error('user id was not set');\n\n        return this._userId;\n    }\n\n    protected get authToken() {\n        return 'Bearer ' + window.localStorage.getItem(this._TOKEN_NAME);\n    }\n\n    private async _fetch(fetchObject: FetchData): Promise<APIResponse> {\n        const response = await fetch(\n            this._BASE_URL + fetchObject.endpoint,\n            {\n                method: fetchObject.method,\n                cache: 'no-cache',\n                mode: 'cors',\n                // credentials: 'omit',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': this.authToken,\n                    // 'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: JSON.stringify(fetchObject.body)\n            }\n        );\n        const data = await response.json() as ResponseData;\n\n        console.debug(data);\n\n        // if user is not authenticated - \n        // redirect to let sessionContext to resolve redirections\n        if (response.status === 401 && !fetchObject.endpoint.match('/auth|me|activate')) {\n            window.location.reload();\n        }\n\n        if (!response.ok) {\n            console.error(`${response.status} ${data?.error?.type} ${data?.error?.description}`);\n            throw new APIServiceError(data);\n        }\n\n        return data as APIResponse;\n    }\n\n    protected preparePath(urlParams: AppURLParams): string {\n        let endp = '';\n        let url = window.location.toString();\n        const map = {\n            '/accesses': '/accesses',\n            '/settings': '/configurations',\n            '/users': '/users'\n        }\n\n        if (Object.keys(urlParams).length === 0) {\n            for (const [path, newPath] of Object.entries(map)) {\n                if (url.includes(path)) {\n                    endp = newPath;\n                }\n            }\n        } else if ('addressId' in urlParams) {\n            endp += `/addresses/${urlParams.addressId}`;\n\n            if ('buildingId' in urlParams) {\n                endp += `/buildings/${urlParams.buildingId}`;\n\n                if ('roomId' in urlParams) endp += `/rooms/${urlParams.roomId}`;\n            }\n        } else if ('userId' in urlParams) {\n            if (urlParams.userId === 'me') {\n                endp += '/users/' + this.userId.toString();\n            } else {\n                endp += '/users/' + urlParams.userId;\n            }\n        }\n        return endp;\n    }\n\n    protected get(endpoint: string, query = {}) {\n        return this._fetch({\n            method: 'GET',\n            endpoint: endpoint + '?' + new URLSearchParams(query).toString()\n        });\n    }\n\n    protected post(endpoint: string, body: object) {\n        return this._fetch({\n            method: 'POST',\n            endpoint: endpoint,\n            body: body\n        });\n    }\n\n    protected patch(endpoint: string, body: object) {\n        if (Object.keys(body).length === 0) return;\n\n        return this._fetch({\n            method: 'PATCH',\n            endpoint: endpoint,\n            body: body\n        });\n    }\n\n    protected delete(endpoint: string) {\n        return this._fetch({\n            method: 'DELETE',\n            endpoint: endpoint\n        });\n    }\n}","import { APIResponse } from \"./interfaces\";\nimport Service, { ServiceFormData } from \"./Service\";\n\n\n\nexport interface LoginFormData extends ServiceFormData {\n    email: string,\n    password: string\n}\n\n\n\nclass AuthService extends Service {\n\n    async login(data: LoginFormData): Promise<APIResponse> {\n        const response = await this.post(\n            '/users/auth',\n            {\n                'email': data.email,\n                'password': data.password\n            }\n        );\n\n        // set the token to local storage\n        if (response.data) {\n            localStorage.setItem(this._TOKEN_NAME, response.data.toString());\n        }\n\n        return response;\n    }\n\n    logout(): void {\n        localStorage.removeItem(this._TOKEN_NAME);\n    }\n\n    hasToken(): boolean {\n        return Boolean(localStorage.getItem(this._TOKEN_NAME));\n    }\n\n    async hasSession(): Promise<boolean> {\n        try {\n            if (this.hasToken()) {\n                await this.get('/users/me'); // change to ping\n                return true\n            }\n        } catch (err: any) {\n            // localStorage.removeItem(this._TOKEN_NAME);\n            \n        }\n        return false\n    }\n}\n\nexport default new AuthService();","import Image from \"../models/Image\";\nimport APIServiceError from \"./APIServiceError\";\nimport { BuildingViewParams } from \"./BuildingService\";\nimport { APIResponse } from \"./interfaces\";\nimport { RoomViewParams } from \"./RoomService\";\nimport Service, { ResponseData } from \"./Service\";\nimport { UserViewParams } from \"./UserService\";\n\n\n\nclass ImageService extends Service {\n\n    private async sendImage(endpoint: string, formBody: FormData) {\n        const resp = await fetch(\n            this._BASE_URL + endpoint,\n            {\n                method: \"POST\",\n                cache: 'no-cache',\n                mode: 'cors',\n                body: formBody,\n                headers: {\n                    'Authorization': this.authToken,\n                }\n            }\n        );\n\n        const data = await resp.json() as ResponseData;\n        console.debug(data);\n\n        if (!resp.ok) {\n            console.error(`${resp.status}\\t${data?.error?.type}\\t${data?.error?.description}`);\n            throw new APIServiceError(data);\n        }\n\n        return data as APIResponse;\n    }\n\n    public getLink(image?: Image): string {\n        if (image?.url.includes('http')) return image.url;\n\n        return this._BASE_URL.slice(0, this._BASE_URL.length - 3) + image?.url;\n    }\n\n    public upload(\n        urlParams: (UserViewParams | BuildingViewParams | RoomViewParams),\n        image: Blob\n    ) {\n        const formData = new FormData();\n        formData.append(\n            'file',\n            image\n        );\n        return this.sendImage(this.preparePath(urlParams) + '/image', formData);\n    }\n\n    public remove(urlParams: (UserViewParams | BuildingViewParams | RoomViewParams)) {\n        return this.delete(this.preparePath(urlParams) + '/image');\n    }\n}\n\n\nexport default new ImageService();","import { AppURLParams, PaginationQueryParams } from \"./interfaces\";\nimport Service from \"./Service\";\n\n\nexport interface LogsQueryParams extends PaginationQueryParams {\n    method?: \"GET\" | \"POST\" | \"PATCH\" | \"DELETE\",\n    userId?: string | number\n}\n\n\nclass LogService extends Service {\n\n    fetch(urlParams: AppURLParams, queryParams: LogsQueryParams) {\n        return this.get(\n            this.preparePath(urlParams) + '/requests',\n            queryParams\n        );\n    }\n\n    async getStats() {\n        return await this.get(`/requests/stats`);\n    }\n}\n\n\nexport default new LogService();","\n\n\nclass StorageService {\n\n    private id: string = '';\n\n    public setIdentity(value: string | number) {\n        this.id = value.toString();\n    }\n\n    private codeName(name: string) {\n        return btoa(encodeURI(name + this.id));\n    }\n\n    public save(name: string, value: any) {\n        const str = JSON.stringify(value);\n        localStorage.setItem(this.codeName(name), str);\n    }\n\n    public delete(name: string) {\n        localStorage.removeItem(this.codeName(name));\n    }\n\n    public read(name: string) {\n        const str = localStorage.getItem(this.codeName(name));\n        if (!str) return null;\n\n        try {\n            return JSON.parse(str);\n        } catch {\n            return null;\n        }\n    }\n\n}\n\nexport default new StorageService();","import { SessionUser } from \"../models/User\";\nimport { PaginationQueryParams } from \"./interfaces\";\nimport Service, { ServiceFormData } from \"./Service\";\n\n\nexport interface RegisterUserData extends ServiceFormData {\n    email: string,\n    password: string,\n    name: string,\n    surname: string\n}\n\nexport interface ActivationData extends ServiceFormData {\n    email: string,\n    password: string,\n    code: string,\n}\n\nexport interface ChangePasswordData extends ServiceFormData {\n    code: string,\n    newPassword: string,\n    email: string\n}\n\nexport interface UpdateUserParams extends ServiceFormData {\n    name?: string,\n    surname?: string,\n    metadata?: object\n}\n\nexport interface UserViewParams {\n    userId: string;\n}\n\nexport interface UserQueryParams extends PaginationQueryParams {\n    [index: string]: any,\n    accessId?: number,\n    deleted?: boolean,\n    search?: string,\n    activated?: boolean,\n}\n\n\nclass UserService extends Service {\n    _path = '/users';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath(urlParams: UserViewParams) {\n        this._path = this.preparePath(urlParams);\n    }\n\n    public getCurrentOne() {\n        return this.get(this.path);\n    }\n\n    public async getMe() {\n        const resp = await this.get('/users/me');\n        return resp.data as SessionUser;\n    }\n\n    public getUsers(data?: UserQueryParams) {\n        return this.get('/users', data);\n    }\n\n    public register(data: RegisterUserData) {\n        return this.post('/users', data);\n    }\n\n    public activate(data: ActivationData) {\n        return this.patch('/users/activate', data);\n    }\n\n    public generateKey(email: string) {\n        return this.post('/users/key', {\n            email: email\n        });\n    }\n\n    public updateAccess(userId: number, accessId: number) {\n        return this.patch(`/users/${userId}/access`, {\n            accessId: accessId\n        })\n    }\n\n    public update(data: UpdateUserParams) {\n        return this.patch(this.path, data);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public changePassword(data: ChangePasswordData) {\n        return this.patch('/users/password', data);\n    }\n}\n\n\nexport default new UserService();","import Metadata, { FavouriteBuilding, FavouriteRoom } from \"../models/Metadata\";\nimport StorageService from \"./StorageService\";\nimport UserService from \"./UserService\";\n\n\n\n\nclass MetadataService {\n    private STORAGE_NAME = 'user-metadata';\n\n    private data: Metadata;\n    private _userId: number | undefined;\n\n\n    constructor() {\n        this.data = StorageService.read(this.STORAGE_NAME) ?? {\n            notes: '',\n            favourites: []\n        };\n    }\n\n    private async save(): Promise<void> {\n        StorageService.save(this.STORAGE_NAME, this.data);\n\n        if (!this._userId) return;\n\n        UserService.setPath({ userId: this._userId?.toString() });\n        try {\n            await UserService.update({\n                metadata: this.data\n            });\n        } catch (err: any) { console.error(err) }\n    }\n\n    public set userId(id: number) {\n        this._userId = id;\n    }\n\n    public set metadata(value: Metadata) {\n        this.data = {\n            ...this.data,\n            ...value\n        };\n    }\n\n    public get notes() {\n        return this.data.notes ?? '';\n    }\n\n    public get favourites() {\n        return this.data.favourites ?? [];\n    }\n\n    public set notes(value: string) {\n        this.data.notes = value;\n        this.save();\n    }\n\n    public addFavourite(item: FavouriteBuilding | FavouriteRoom): void {\n        this.data.favourites?.push(item);\n        this.data.favourites?.sort((a, b) => {\n            if (a.type >= b.type) {\n                if (a.type === b.type) {\n                    return a.name > b.name ? 1 : -1;\n                }\n                return 1;\n            }\n            return -1;\n        });\n        console.log(this.data);\n        this.save();\n    }\n\n    public isFavourite(item: FavouriteBuilding | FavouriteRoom): boolean {\n        return Boolean(this.data.favourites?.find(({ id, type }) => (type === item.type && id === item.id)));\n    }\n\n    public removeFavourite(item: FavouriteBuilding | FavouriteRoom): void {\n        this.data.favourites = this.data.favourites?.filter(({ id, type }) => id + type !== item.id + item.type)\n        this.save();\n    }\n}\n\n\nexport default new MetadataService();","import Backdrop from \"@mui/material/Backdrop\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Typography from \"@mui/material/Typography\";\nimport { SxProps } from \"@mui/system\";\n\n\ninterface ContextLoaderProps {\n    open: boolean,\n    text?: string,\n    sx?: SxProps\n}\n\nexport default function LoadingView(props: ContextLoaderProps) {\n    return (\n        <Backdrop\n            sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                color: 'primary.main',\n                zIndex: (theme) => theme.zIndex.drawer + 1,\n                backgroundColor:'background.default',\n                ...props.sx\n            }}\n            open={props.open}\n        >\n            <Typography variant=\"h5\" pb={2}>\n                {props.text}\n            </Typography>\n            <CircularProgress color=\"inherit\" />\n        </Backdrop>\n    );\n}","\ninterface AppPathsInterface {\n    readonly [index: string]: string\n    PUBLIC: string,\n    LOGIN: string,\n    REGISTER: string,\n    ACTIVATE: string,\n    REMIND_PASSWORD: string,\n    FAQ: string,\n\n    HOME: string,\n    SETTINGS: string,\n    MY_PROFILE: string,\n    INFRASTRUCTURE: string,\n    ADDRESS: string,\n    BUILDING: string,\n    ROOM: string,\n    USERS: string,\n    ACCESS: string,\n};\n\n\ninterface AppDynamicPaths {\n    readonly [indes: string]: (...params: any) => string,\n\n    toRoom: (addressId: number, buildingId: number, roomId: number) => string,\n    toBuilding: (addressId: number, buildingId: number) => string,\n    toAddress: (addressId: number) => string,\n    toUser: (userId: number) => string\n}\n\n\nconst paths: { [index: string]: string } = {\n    PUBLIC: '/public',\n    FAQ: '/faq',\n    HOME: '/app',\n}\n\n\npaths.LOGIN = paths.PUBLIC + '/login';\npaths.REGISTER = paths.PUBLIC + '/register';\npaths.ACTIVATE = paths.PUBLIC + '/activate';\npaths.REMIND_PASSWORD = paths.PUBLIC + '/passwd';\n\npaths.ACCESS = paths.HOME + '/accesses'\npaths.SETTINGS = paths.HOME + '/settings';\n\npaths.USERS = paths.HOME + '/users';\npaths.USER = paths.USERS + '/:userId';\npaths.MY_PROFILE = paths.USERS + '/me';\npaths.INFRASTRUCTURE = paths.HOME + '/infrastructure';\npaths.ADDRESS = paths.HOME + '/addresses/:addressId';\npaths.BUILDING = paths.ADDRESS + '/buildings/:buildingId';\npaths.ROOM = paths.BUILDING + '/rooms/:roomId';\n\n\nexport const dynamicPaths: AppDynamicPaths = {\n    toAddress: (addressId: number) => `/app/addresses/${addressId}`,\n    toBuilding: (addressId: number, buildingId: number) => dynamicPaths.toAddress(addressId) + `/buildings/${buildingId}`,\n    toRoom: (addressId: number, buildingId: number, roomId: number) => dynamicPaths.toBuilding(addressId, buildingId) + `/rooms/${roomId}`,\n    toUser: (userId: number) => paths.USERS + `/${userId}`\n}\n\nexport default paths as AppPathsInterface;","import React, { createContext, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport useNotification from \"../contexts/NotificationContext/useNotification\";\n\nimport { SessionUser } from \"../models/User\";\n\nimport AuthService, { LoginFormData } from \"../services/AuthService\";\nimport ImageService from \"../services/ImageService\";\nimport LogService from \"../services/LogService\";\nimport MetadataService from \"../services/MetadataService\";\nimport ReservationService from \"../services/ReservationService\";\nimport StorageService from \"../services/StorageService\";\nimport UserService from \"../services/UserService\";\nimport LoadingView from \"../shared/components/LoadingView\";\nimport paths from \"../shared/path\";\nimport SessionValue from \"./SessionValue\";\n\n\ninterface SessionProviderProps {\n    children?: React.ReactNode\n}\n\n\nexport const sessionContext: any = createContext(null);\n\n\nexport default function SessionProvider({ children }: SessionProviderProps) {\n    const notify = useNotification();\n    const [loading, setLoading] = React.useState(true);\n    const [user, setUser] = useState<SessionUser | null>(null);\n\n\n    const setUpUser = React.useCallback((user: SessionUser) => {\n        setUser(user);\n\n        // config services which require identity data\n        StorageService.setIdentity(user.id);\n        MetadataService.metadata = user.metadata;\n        MetadataService.userId = user.id;\n        ReservationService.userId = user.id;\n        LogService.userId = user.id;\n        ImageService.userId = user.id;\n        UserService.userId = user.id;\n    }, []);\n\n\n    const checkIfUserHasSession = React.useCallback(async () => {\n        setLoading(true);\n        if (AuthService.hasToken()) {\n            try {\n                if (await AuthService.hasSession()) {\n                    const sessionUser = await UserService.getMe();\n                    setUpUser(sessionUser);\n                    notify(\"Witaj ponownie!\", 'info');\n                } else {\n                    notify('Twoja sesja wygasła', 'info', () => <Redirect to={paths.LOGIN} />);\n                }\n            } catch (err: any) {\n                notify(err.description, 'error', () => <Redirect to={paths.WELCOME} />);\n            }\n        } else {\n            notify('Witaj!', 'info', () => <Redirect to={paths.WELCOME} />);\n        }\n        setLoading(false)\n    }, [\n        notify,\n        setUpUser\n    ]);\n\n\n    React.useEffect(() => {\n        checkIfUserHasSession();\n        return () => { }\n    }, [checkIfUserHasSession]);\n\n\n    const login = React.useCallback(async (data: LoginFormData): Promise<void> => {\n        try {\n            await AuthService.login(data);\n            const sessionUser = await UserService.getMe();\n            setUpUser(sessionUser);\n\n            notify(\"Pomyślnie zalogowano!\", \"success\", () => <Redirect to={paths.HOME} />);\n\n        } catch (err: any) {\n            let message = err.description;\n\n            if (err.code === 404) message = \"Użytkownik nie istnieje\";\n\n            notify(message, \"error\");\n        }\n    }, [\n        notify,\n        setUpUser\n    ]);\n\n\n    const logout = React.useCallback(() => {\n        notify(\"Pomyślnie wylogowano!\", \"success\", () => <Redirect to={paths.WELCOME} />);\n        AuthService.logout();\n        setUser(null);\n    }, [notify]);\n\n\n    return (\n        <>\n            <LoadingView\n                open={loading}\n                text=\"Ładowanie Sesji...\"\n            />\n            <sessionContext.Provider value={{ user, login, logout } as SessionValue}>\n                {!loading && children}\n            </sessionContext.Provider>\n        </>\n    );\n}\n","\nexport default interface QueryParamsContextValue<T> {\n    setQueryParams: React.Dispatch<React.SetStateAction<T>>\n    queryParams: T,\n}\n\n\nexport const queryParamsContextDefaults = {\n    queryParams: { q: 1 },\n    setQueryParams: (param: { q: number }) => { }\n}","import React from \"react\";\nimport StorageService from \"../../services/StorageService\";\nimport QueryParamsContextValue, { queryParamsContextDefaults } from \"./QueryParamsContextValue\";\n\n\nexport const queryParamsContext = React.createContext<QueryParamsContextValue<any>>(queryParamsContextDefaults);\n\n\nfunction initQueryParams<T>(keyName: string, defaultValue: T): T {\n    const confString = StorageService.read(keyName);\n    if (confString) {\n        return confString;\n    }\n    return defaultValue;\n};\n\n\ninterface QueryParamsContextProviderProps<T> {\n    default: T,\n    name: string,\n    children: React.ReactNode[] | React.ReactNode\n}\n\n\nexport default function QueryParamsContextProvider<T>(props: QueryParamsContextProviderProps<T>) {\n\n    const [queryParams, setQueryParams] = React.useState<T>(\n       ()=> initQueryParams<T>(props.name, props.default)\n    );\n\n    React.useEffect(() => {\n        StorageService.save(props.name, queryParams);\n    }, [queryParams, props.name]);\n\n    if(!queryParams) return null;\n\n    return (\n        <queryParamsContext.Provider value={{ queryParams, setQueryParams }}>\n            {props.children}\n        </queryParamsContext.Provider>\n    );\n}","import React from \"react\";\nimport { queryParamsContext } from \"./QueryParamsContextProvider\";\nimport QueryParamsContextValue from \"./QueryParamsContextValue\";\n\n\nexport default function useQueryParams<T>() {\n    return React.useContext(queryParamsContext) as QueryParamsContextValue<T>;\n}","import * as React from 'react';\nimport Pagination from '@mui/material/Pagination';\nimport Stack from '@mui/material/Stack';\nimport { FormControl, InputLabel, MenuItem, Select, SelectChangeEvent } from '@mui/material';\nimport { useQueryParams } from '../../../../contexts/QueryParamsContext';\nimport { APIPagination } from '../../../../services/interfaces';\n\n\nexport default function ListPagination() {\n    const { queryParams, setQueryParams } = useQueryParams<APIPagination>();\n\n\n    const handlePageChange = React.useCallback((event: React.ChangeEvent<unknown>, value: number) => {\n        setQueryParams(old => ({\n            ...old,\n            currentPage: value\n        }));\n    }, [\n        setQueryParams\n    ]);\n\n    const handleCountChange = React.useCallback((event: SelectChangeEvent<number>, child: React.ReactNode) => {\n        setQueryParams(old => ({\n            ...old,\n            itemsOnPage: Number(event.target.value)\n        }));\n    }, [\n        setQueryParams\n    ]);\n\n\n    return (\n        <Stack spacing={2} sx={{\n            flexWrap: 'wrap',\n            flexDirection: 'row',\n            justifyContent: 'center',\n            alignContent: 'center',\n            alignItems: 'center'\n        }}>\n            <Pagination\n                count={queryParams.pagesCount}\n                size='small'\n                page={queryParams.currentPage}\n                onChange={handlePageChange}\n            />\n            <FormControl fullWidth sx={{ maxWidth: '100px' }}>\n                <InputLabel id=\"items-on-page-label\">Na stronie</InputLabel>\n                <Select\n                    size='small'\n                    labelId=\"items-on-page-label\"\n                    id=\"items-on-page\"\n                    label=\"Na stronie\"\n                    value={queryParams.itemsOnPage ?? 5}\n                    onChange={handleCountChange}\n                >\n                    {\n                        [5, 10, 15, 20].map(num => <MenuItem key={num} value={num}>{num}</MenuItem>)\n                    }\n                    <MenuItem value={10000}>wszystko</MenuItem>\n                </Select>\n            </FormControl>\n        </Stack>\n    );\n}\n","import React from \"react\";\n\n\nexport default function useTrigger(timeInterval: number) {\n    const [trigger, setTrigger] = React.useState<boolean>();\n\n\n    React.useEffect(() => {\n        const int = setInterval(() => setTrigger(old => !old), timeInterval);\n\n        return () => clearInterval(int);\n    }, [\n        timeInterval\n    ]);\n\n    return trigger;\n}","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport Log from \"../../../../../../models/Log\";\nimport LogService, { LogsQueryParams } from \"../../../../../../services/LogService\";\nimport useTrigger from \"../../../hooks/useTrigger\";\nimport LogsContextValue from \"./LogsContextValue\";\n\n\n\n\nexport const logsContext: any = React.createContext(null);\n\n\ninterface LogsContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function LogsContextProvider(props: LogsContextProviderProps) {\n    const urlParams = useParams();\n    const { queryParams, setQueryParams } = useQueryParams<LogsQueryParams>();\n    const notify = useNotification();\n    const refresh = useTrigger(60_000);\n\n    const [logs, setLogs] = React.useState<Log[]>();\n\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await LogService.fetch(urlParams, queryParams);\n            setLogs(resp.data as Log[]);\n\n            resp.pagination && setQueryParams(old => ({\n                ...old,\n                pagesCount: resp.pagination?.pagesCount,\n            }));\n        } catch (err: any) {\n            notify(err.description, 'error');\n            setLogs([]);\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        setQueryParams,\n        queryParams.currentPage,\n        queryParams.itemsOnPage,\n        queryParams.method,\n        queryParams.userId,\n        notify,\n        urlParams,\n    ]);\n\n\n    React.useEffect(() => {\n        load()\n    }, [\n        load,\n        refresh\n    ])\n\n\n    if (!logs) return null;\n\n    return (\n        <logsContext.Provider value={{\n            logs\n        } as LogsContextValue}>\n            {props.children}\n        </logsContext.Provider>\n    )\n}","import InputBase from \"@mui/material/InputBase\";\nimport { SxProps } from \"@mui/system\";\nimport React from \"react\";\n\n\ninterface SimpleInputProps {\n    value: string,\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void,\n    label: string,\n    name: string,\n    sx?: SxProps\n}\n\nexport default function LazyInput({\n    value,\n    onChange,\n    label,\n    name,\n    sx,\n}: SimpleInputProps) {\n    const [trigger, setTrigger] = React.useState<any>();\n    const [str, setStr] = React.useState<string>(value);\n\n\n    const handleSearchFieldChange = React.useCallback((evt) => {\n        setStr(evt.target.value);\n        clearTimeout(trigger);\n\n        let timer = setTimeout(() => {\n            onChange(evt);\n        }, 1000);\n        setTrigger(timer);\n    }, [\n        trigger,\n        onChange,\n    ]);\n\n\n    return <InputBase\n        name={name}\n        value={str}\n        onChange={handleSearchFieldChange}\n        placeholder={label}\n        sx={{\n            width: '100%',\n            maxWidth: '600px',\n            p: 1,\n            bgcolor: 'background.default',\n            ...sx\n        }}\n        inputProps={{ 'aria-label': label }}\n    />;\n}","import { Grid, FormControl, InputLabel, Select, MenuItem } from \"@mui/material\";\nimport React from \"react\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport { LogsQueryParams } from \"../../../../../services/LogService\";\nimport LazyInput from \"../../components/LazyInput\";\n\n\n\nexport function LogsTabBar() {\n    const { queryParams, setQueryParams } = useQueryParams<LogsQueryParams>();\n\n\n    const handleChange = React.useCallback((evt: any) => {\n        evt.preventDefault();\n        setQueryParams(old => ({ ...old, [evt.target.name]: evt.target.value }));\n    }, [setQueryParams])\n\n\n    return (\n        <Grid container component=\"form\" spacing={3}>\n            <Grid item xs={6} md={2}>\n                <FormControl fullWidth>\n                    <InputLabel id=\"wybierz-metode\">Metoda</InputLabel>\n                    <Select\n                        size=\"small\"\n                        labelId=\"wybierz-metode\"\n                        id=\"metoda\"\n                        value={queryParams.method}\n                        name=\"method\"\n                        label=\"wybierz-metode\"\n                        onChange={handleChange}\n                    >\n                        <MenuItem value=\"\">brak</MenuItem>\n                        <MenuItem value=\"GET\">GET</MenuItem>\n                        <MenuItem value=\"POST\">POST</MenuItem>\n                        <MenuItem value=\"PATCH\">PATCH</MenuItem>\n                        <MenuItem value=\"DELETE\">DELETE</MenuItem>\n                    </Select>\n                </FormControl>\n            </Grid>\n            <Grid item xs={6} md={3}>\n                <LazyInput\n                    label=\"id użytkownika\"\n                    name='userId'\n                    value={queryParams.userId?.toString() ?? ''}\n                    onChange={(evt) => setQueryParams(old => ({ ...old, userId: evt.target.value }))}\n                />\n            </Grid>\n        </Grid>\n    );\n}\n\n","\n\n\nexport function displayDate(dateString: string): string {\n    const date = new Date(dateString);\n    const format = new Intl.DateTimeFormat('pl-PL', {\n        dateStyle: \"medium\",\n        timeStyle: \"medium\"\n    })\n\n    return format.format(date);\n}\n\n\nexport const timeFormat = new Intl.DateTimeFormat('pl-PL', {\n    timeStyle: \"medium\"\n});\n\n\nexport function isDate(str: string | undefined): boolean {\n    if (!str) return false;\n\n    let date = new Date(str);\n    return Boolean(date.getDate())\n}\n\nexport function urlToId(): string {\n    let url = window.location.pathname.toLocaleLowerCase()\n    return url.replaceAll(/\\d/gi, '*')\n}","import { TableRow, TableCell, IconButton, Collapse, Box } from \"@mui/material\";\nimport React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { Link } from \"@mui/material\";\nimport Log from \"../../../../../models/Log\";\nimport { displayDate } from \"../../../../../shared/utils\";\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\n\n\ninterface LogRowProps {\n    row: Log\n}\n\nexport default function LogRow(props: LogRowProps) {\n    const { row } = props;\n    const [open, setOpen] = React.useState(false);\n\n    return (\n        <>\n            <TableRow hover sx={{ '& > *': { borderBottom: 'unset' } }}>\n                <TableCell>\n                    <IconButton\n                        aria-label=\"szczegóły zapytania\"\n                        size=\"small\"\n                        onClick={() => setOpen(!open)}\n                    >\n                        {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                    </IconButton>\n                </TableCell>\n                <TableCell component=\"th\" scope=\"row\">{row.id}</TableCell>\n                {/* <TableCell align=\"left\">{row.method}</TableCell> */}\n                <TableCell align=\"left\">{row.endpoint}</TableCell>\n                <TableCell align=\"left\">{Math.fround(row.time * 1000).toPrecision(6)}</TableCell>\n            </TableRow>\n            <TableRow>\n                <TableCell style={{ paddingBottom: 0, paddingTop: 0 }} colSpan={6}>\n                    <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                        <Box component=\"pre\" sx={{ margin: 1 }}>\n                            <Link component={RouterLink} to={`/users/${row.user}`}>Pokaż użytkownika</Link> <br />\n                            {displayDate(row._created)}&nbsp;|&nbsp;{row.method}&nbsp;{row.endpoint}<br />\n                            czas przetwarzania: {row.time} [s]<br />\n                            Ciało zapytania <br />\n                            {JSON.stringify(\n                                JSON.parse(row.payload),\n                                undefined,\n                                3\n                            )}\n                        </Box>\n                    </Collapse>\n                </TableCell>\n            </TableRow>\n        </>\n    );\n}","import Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport { Typography } from '@mui/material';\nimport LogRow from './LogRow';\nimport { useLogs } from './LogsContext';\n\n\n\n\nexport default function LogsTable() {\n    const { logs } = useLogs();\n\n    return (\n        <TableContainer>\n            <Table aria-label=\"tabela logów\" size=\"small\">\n                <TableHead>\n                    <TableRow>\n                        <TableCell />\n                        <TableCell align=\"left\">Id</TableCell>\n                        {/* <TableCell align=\"left\">Metoda</TableCell> */}\n                        <TableCell align=\"left\">Cel/endpoint</TableCell>\n                        <TableCell align=\"left\">Czas wykonania&nbsp;[ms]</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {logs.length === 0 &&\n                        <TableRow>\n                            <TableCell colSpan={6}>\n                                <Typography textAlign=\"center\" p=\"15px 0px\">\n                                    Brak elementów do wyświetlenia\n                                </Typography>\n                            </TableCell>\n                        </TableRow>\n                    }\n\n                    {logs.map((log) => <LogRow key={log.id} row={log} />)}\n                </TableBody>\n            </Table>\n        </TableContainer>\n\n    );\n}\n\n\n\n\n","import React from \"react\";\nimport { logsContext } from \"./LogsContextProvider\";\nimport LogsContextValue from \"./LogsContextValue\";\n\nexport default function useLogs() {\n    return React.useContext(logsContext) as LogsContextValue;\n}","import Stack from \"@mui/material/Stack\";\nimport QueryParamsContextProvider from \"../../../../../contexts/QueryParamsContext/QueryParamsContextProvider\";\nimport ListPagination from \"../../components/ListPagination\";\nimport { LogsContext } from \"./LogsContext\";\nimport { LogsTabBar } from \"./LogsTabBar\";\nimport LogsTable from \"./LogsTable\";\n\n\n\nexport default function GenericLogsTab() {\n    return (\n        <QueryParamsContextProvider name=\"logs-query-params\" default={{ method: 'PATCH', itemsOnPage: 5 }}>\n            <LogsContext>\n                <Stack spacing={3}>\n                    <LogsTabBar />\n                    <LogsTable />\n                    <ListPagination />\n                </Stack>\n            </LogsContext>\n        </QueryParamsContextProvider>\n    );\n}","import Paper from \"@mui/material/Paper\";\nimport Typography from \"@mui/material/Typography\";\nimport { SxProps } from \"@mui/system\";\n\n\n\ninterface SmallCardProps {\n    children: React.ReactNode | React.ReactNode[];\n    title?: string,\n    titleComponent?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6',\n    sx?: SxProps\n}\n\n\nexport default function SmallCard(props: SmallCardProps) {\n    return (\n        <Paper elevation={0} sx={{\n            p: 2,\n            ...props.sx\n        }}>\n            {props?.title && <Typography variant='body2' component={props.titleComponent ?? 'h2'} color='text.secondary'>\n                {props.title}\n            </Typography>}\n            {props.children}\n        </Paper>\n    )\n}","import { Box } from \"@mui/material\";\nimport React from \"react\";\nimport SmallCard from \"../../components/SmallCard\";\n\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    dir?: string;\n    hidden: boolean,\n    index: number\n}\n\n\nexport default function SwipeablePanel(props: TabPanelProps) {\n    const { children, hidden, index, ...other } = props;\n\n    // should component update\n    const render = React.useMemo(() =>\n        <Box\n            role=\"tabpanel\"\n            hidden={hidden}\n            id={`full-width-tabpanel-${index}`}\n            aria-labelledby={`full-width-tab-${index}`}\n            {...other}\n        >\n            <SmallCard>{children}</SmallCard>\n        </Box>\n        , [hidden, index, children, other]);\n\n    return render;\n}","import { Tab, Tabs, Typography, useTheme } from \"@mui/material\";\nimport React from \"react\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport SwipeablePanel from \"./SwipeablePanel\";\n\n\ninterface SwipeableTabsProps {\n    tabs: { name: string, component: React.ReactNode }[],\n}\n\n\nfunction a11yProps(index: number) {\n    return {\n        id: `full-width-tab-${index}`,\n        'aria-controls': `full-width-tabpanel-${index}`,\n    };\n}\n\n\nexport default function SwipeableTabs(props: SwipeableTabsProps) {\n    const theme = useTheme();\n    const [tabIndex, setTabIndex] = React.useState(0);\n\n\n    const handleTabChange = React.useCallback((event: React.SyntheticEvent, newValue: number) => {\n        setTabIndex(newValue);\n    }, []);\n\n\n    const handleChangeIndex = React.useCallback((index: number) => {\n        setTabIndex(index);\n    }, []);\n\n\n    const renderedTabs = React.useMemo(() => {\n        return props.tabs.map((page, index) => <Tab\n            key={index}\n            label={<Typography component='h2' variant='button'>{page.name}</Typography>}\n            {...a11yProps(index)}\n        />)\n    }, [props.tabs]);\n\n\n    const renderedTabPanels = React.useMemo(() => {\n        return props.tabs.map((page, index) => <SwipeablePanel\n            key={index}\n            index={index}\n            hidden={tabIndex !== index}\n            dir={theme.direction}\n        >\n            {page.component}\n        </SwipeablePanel>)\n    }, [\n        props.tabs,\n        tabIndex,\n        theme.direction,\n    ]);\n\n\n    return (\n        <div>\n            <Tabs\n                allowScrollButtonsMobile\n                value={tabIndex}\n                onChange={handleTabChange}\n                indicatorColor=\"primary\"\n                variant=\"scrollable\"\n                sx={{ borderBottom: 2, borderColor: 'divider' }}\n            >\n                {renderedTabs}\n            </Tabs>\n            <br />\n            <SwipeableViews\n                axis={theme.direction === 'rtl' ? 'x-reverse' : 'x'}\n                index={tabIndex}\n                onChangeIndex={handleChangeIndex}\n            >\n                {renderedTabPanels}\n            </SwipeableViews>\n        </div>\n    );\n}","import Service from \"./Service\";\n\n\n\nexport interface AccessViewParams {\n    addressId: string,\n}\n\n\nexport interface AccessUpdateParams {\n    [index: string]: string | boolean | undefined,\n    name?: string,\n    owner?: boolean,\n    accessAdmin?: boolean,\n    premisesAdmin?: boolean,\n    keysAdmin?: boolean,\n    reservationsAdmin?: boolean,\n    reservationsAbility?: boolean,\n    logsAdmin?: boolean,\n    statsViewer?: boolean,\n}\n\nexport interface AccessCreateParams {\n    name: string,\n}\n\n\nclass AccessService extends Service {\n    _path = '/accesses';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public getAll() {\n        return this.get('/accesses');\n    }\n\n    public remove(id?: number) {\n        return this.delete(\n            id ? `${this.path}/${id}` : this.path\n        );\n    }\n\n    public update(id: number, data: AccessUpdateParams) {\n        return this.patch(`${this.path}/${id}`, data);\n    }\n\n    public create(data: AccessCreateParams) {\n        return this.post(this.path, data)\n    }\n}\n\nexport default new AccessService()","import Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport SaveIcon from '@mui/icons-material/Save';\nimport Stack from \"@mui/material/Stack\";\nimport Button from \"@mui/material/Button\";\n\n\n\ninterface FormGridContainerProps {\n    title: string,\n    subtitle?: string,\n    onSubmit: () => void,\n    onCancel: () => void,\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function FormGridContainer({\n    title,\n    subtitle,\n    onSubmit,\n    onCancel,\n    children,\n}: FormGridContainerProps) {\n\n\n    const handleSubmit = React.useCallback((event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        onSubmit();\n    }, [\n        onSubmit\n    ]);\n\n\n    return (\n        <Stack rowGap={3}>\n            <span>\n                <Typography variant=\"h5\" color='primary.dark'>\n                    {title}\n                </Typography>\n\n                {subtitle && <Typography variant=\"body2\" color='text.secondary' mt='5px'>\n                    {subtitle}\n                </Typography>}\n            </span>\n\n            <Grid container spacing={2} component=\"form\" onSubmit={handleSubmit} >\n                {children}\n                <Grid item xs={12}>\n                    <Stack direction=\"row\" justifyContent=\"space-around\" mt={1.5}>\n                        <Button\n                            aria-label=\"Zamknij\"\n                            title='Zamknij'\n                            startIcon={<CancelIcon />}\n                            onClick={onCancel}\n                        >\n                            Zamknij\n                        </Button>\n                        <Button\n                            aria-label=\"Zatwierdź\"\n                            title='Zatwierdź'\n                            startIcon={<SaveIcon color='inherit' />}\n                            type=\"submit\"\n                            color=\"success\"\n                        >\n                            Zatwierdź\n                        </Button>\n                    </Stack>\n                </Grid>\n            </Grid>\n        </Stack>\n    );\n}","import * as React from 'react';\nimport Backdrop from '@mui/material/Backdrop';\nimport Modal from '@mui/material/Modal';\nimport Fade from '@mui/material/Fade';\nimport { SxProps } from '@mui/system';\nimport { Paper } from '@mui/material';\n\n\ninterface GenericModalProps {\n  children: React.ReactNode | React.ReactNode[],\n  open: boolean,\n  sx?: SxProps,\n  onClose: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nexport default function GenericModal({\n  children, open, sx, onClose\n}: GenericModalProps) {\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n      sx={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'flex-start',\n        overflow: 'auto'\n      }}\n    >\n      <Fade in={open}>\n        <Paper sx={{\n          bgcolor: 'background.paper',\n          position: 'absolute' as 'absolute',\n          // borderRadius: (theme) => theme.shape.borderRadius,\n          width: '95%',\n          mt: '5vw',\n          maxWidth: '500px',\n          // overflow: 'auto',\n          boxShadow: 24,\n          p: 3,\n          ...sx\n        }}>\n          {children}\n        </Paper>\n      </Fade>\n    </Modal >\n  );\n}\n","import Typography from \"@mui/material/Typography\";\nimport Model from \"../../../../models/Model\";\nimport { displayDate } from \"../../../../shared/utils\";\n\n\n\ninterface DatesFooterProps {\n    model: Model\n}\n\nexport default function DatesFooter(props: DatesFooterProps) {\n    return (\n        <Typography color=\"text.secondary\" variant='body2' fontSize='smaller'>\n            Utworzono: {displayDate(props.model._created)}<br />\n            Ostatnia aktualizacja: {displayDate(props.model._updated)}\n        </Typography>\n    )\n}","import FormControlLabel from \"@mui/material/FormControlLabel\";\nimport Grid from \"@mui/material/Grid\";\nimport Switch from \"@mui/material/Switch\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport Access from \"../../../../../models/Access\";\nimport { AccessUpdateParams } from \"../../../../../services/AccessService\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\nimport GenericModal from \"../../components/GenericModal\";\nimport DatesFooter from \"../../components/DatesFooter\";\n\n\n\ninterface AccessEditModalProps {\n    access: Access,\n    open: boolean,\n    onClose: () => void,\n    onSubmit: (accessId: number, data: AccessUpdateParams) => Promise<boolean>\n}\n\n\nconst fields = [\n    {\n        name: 'owner',\n        label: 'Właściciel'\n    }, {\n        name: 'accessAdmin',\n        label: 'Administrator klas dostępu'\n    }, {\n        name: 'premisesAdmin',\n        label: 'Administrator inwentarza'\n    }, {\n        name: 'keysAdmin',\n        label: 'Administrator kluczy'\n    }, {\n        name: 'reservationsAdmin',\n        label: 'Administrator rezerwacji '\n    }, {\n        name: 'reservationsAbility',\n        label: 'Możliwość rezerwacji'\n    }, {\n        name: 'logsAdmin',\n        label: 'Administrator logów'\n    }, {\n        name: 'statsViewer',\n        label: 'Dostęp do statystyk'\n    },\n];\n\n\nexport default function AccessEditModal({\n    access,\n    open,\n    onClose,\n    onSubmit,\n}: AccessEditModalProps) {\n\n    const [data, setData] = React.useState<AccessUpdateParams>({});\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | boolean;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = event.target.value;\n                break;\n            default:\n                value = event.target.checked;\n                break;\n        }\n\n        setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await onSubmit(access.id, data)) {\n            onClose();\n            setData({});\n        }\n    }, [\n        onClose,\n        onSubmit,\n        access.id,\n        data\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n        >\n            <FormGridContainer\n                onSubmit={handleSubmit}\n                onCancel={close}\n                title=\"Edycja klasy dostępu\"\n                subtitle=\"Edycja klasy dostępu. Wprowadzone zmiany w sposób istotny wpływają na zakres funkcji użytkowników.\"\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        name=\"name\"\n                        label=\"nazwa\"\n                        id=\"nazwa\"\n                        value={data.name ?? access.name}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                {\n                    fields.map((field, index) =>\n                        <Grid item xs={12} key={index}>\n                            <FormControlLabel\n                                labelPlacement=\"start\"\n                                control={<Switch\n                                    id={`access-${field.name}`}\n                                    name={field.name}\n                                    inputProps={{ 'aria-label': field.label }}\n                                    onChange={handleChange}\n                                    checked={(field.name in data) ? data[field.name] : (access[field.name])}\n                                />}\n                                label={field.label}\n                            />\n                        </Grid>\n                    )\n                }\n                <Grid item xs={12} ml={2}>\n                    <DatesFooter model={access} />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    )\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { AccessCreateParams } from \"../../../../../services/AccessService\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\nimport GenericModal from \"../../components/GenericModal\";\n\n\n\ninterface CreateAccessModalProps {\n    open: boolean,\n    onClose: () => void,\n    onSubmit: (data: AccessCreateParams) => Promise<boolean>\n}\n\n\nexport default function CreateAccessModal({\n    open,\n    onClose,\n    onSubmit,\n}: CreateAccessModalProps) {\n\n    const [name, setName] = React.useState<string>('');\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setName(event.target.value);\n    }, []);\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setName('');\n    }, [\n        onClose\n    ]);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await onSubmit({\n            name: name\n        })) {\n            onClose();\n            setName('');\n        }\n    }, [\n        onClose,\n        onSubmit,\n        name\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n        >\n            <FormGridContainer\n                onSubmit={handleSubmit}\n                onCancel={close}\n                title=\"Tworzenie klasy dostępu\"\n                subtitle=\"Podaj nazwę dla nowej klasy dostępu. Stworzona zostanie klasa bez żadnych uprawnień - pamiętaj aby dostosować ja do swoich potrzeb.\"\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        autoFocus\n                        required\n                        name=\"name\"\n                        label=\"nazwa\"\n                        id=\"nazwa\"\n                        value={name}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n            </FormGridContainer>\n        </GenericModal>\n    )\n}","import React from \"react\";\nimport { AccessContextValue } from \".\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport Access from \"../../../../../models/Access\";\nimport AccessService, { AccessCreateParams, AccessUpdateParams } from \"../../../../../services/AccessService\";\nimport { EditForm } from \"../Forms\";\n\n\n\nexport const accessContext: any = React.createContext(null);\n\n\ninterface AccessContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function AccessContextProvider(props: AccessContextProviderProps) {\n    const notify = useNotification();\n\n    const [modalOpen, setModalOpen] = React.useState<boolean>(false);\n    const [selectedAccessId, setSelectedAccessId] = React.useState<number>();\n    const [accessesList, setAccessesList] = React.useState<Access[]>();\n\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await AccessService.getAll();\n            setAccessesList(resp.data as Access[]);\n        } catch (err: any) {\n            notify(err.description, 'error');\n            setAccessesList([]);\n        }\n    }, [notify]);\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    const updateAccess = React.useCallback(async (accessId: number, data: AccessUpdateParams) => {\n        try {\n            if (await AccessService.update(accessId, data)) {\n                setAccessesList(old => {\n                    if (old)\n                        return old.map(access => {\n                            if (access.id === accessId) {\n                                access = {\n                                    ...access,\n                                    ...data\n                                }\n                            }\n                            return access;\n                        });\n\n                });\n                notify('Klasa dostępu została zaktualizowana', 'success');\n            }\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify]);\n\n\n    const deleteAccess = React.useCallback(async (id?: number) => {\n        try {\n            await AccessService.remove(id);\n\n            setAccessesList(old => {\n                if (!old) return;\n                return old.filter(access => access.id !== id);\n            });\n\n            notify('Klasa dostępu została usunięta', 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify]);\n\n\n    const createAccess = React.useCallback(async (data: AccessCreateParams) => {\n        try {\n            const resp = await AccessService.create(data);\n\n            setAccessesList(old => {\n                old?.unshift({\n                    ...data,\n                    id: resp.data,\n                    _created: (new Date()).toUTCString(),\n                    _updated: (new Date()).toUTCString(),\n                } as Access)\n                return Object.assign([], old);\n            });\n\n            notify('Klasa dostępu została utworzona', 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify]);\n\n\n    const selectedAccess = React.useMemo(() => {\n        return accessesList?.find(({ id }) => id === selectedAccessId);\n    }, [selectedAccessId, accessesList]);\n\n\n    const openAccess = React.useCallback((id: number) => {\n        setSelectedAccessId(id);\n        setModalOpen(true);\n    }, []);\n\n\n    if (!accessesList) return null;\n\n    return (\n        <accessContext.Provider value={{\n            accessesList,\n            updateAccess,\n            deleteAccess,\n            createAccess,\n            openAccess,\n        } as AccessContextValue}>\n            {props.children}\n            {\n                selectedAccess &&\n                <EditForm\n                    open={modalOpen}\n                    onSubmit={updateAccess}\n                    onClose={() => setModalOpen(false)}\n                    access={selectedAccess}\n                />\n            }\n        </accessContext.Provider>\n    );\n}","import React from \"react\";\nimport { accessContext } from \"./AccessContextProvider\";\nimport AccessContextValue from \"./AccessContextValue\";\n\n\nexport default function useAccess() {\n    return React.useContext(accessContext) as AccessContextValue;\n}","import { Button, Stack, TextField, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport GenericModal from \"../../components/GenericModal\";\n\n\ninterface DeleteModalProps {\n    open: boolean,\n    onClose: () => void,\n    objectName: string,\n    onSuccess: () => void\n}\n\nexport default function DeleteModal({\n    open, onSuccess, onClose, objectName\n}: DeleteModalProps) {\n    const notify = useNotification();\n    const [input, setInput] = React.useState<string>('');\n\n\n    const handleConfirm = React.useCallback(async () => {\n        if (input !== objectName) {\n            notify(\"Wpisana nazwa jest niepoprawna\", 'error');\n            return;\n        }\n        onSuccess();\n        setInput('');\n    }, [objectName, input, onSuccess, notify]);\n\n\n    const close = React.useCallback(() => {\n        setInput('');\n        onClose();\n    }, [onClose]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n            aria-label=\"Okno do usuwania obiektu\"\n            sx={{\n                maxWidth: \"400px\",\n            }}\n        >\n            <Stack direction=\"column\" spacing={3}>\n                <Typography variant=\"h5\" color='primary.dark'>\n                    Usuwanie obiektu\n                </Typography>\n                <Typography variant=\"body1\" color='text.secondary'>\n                    Tej operacji nie da się cofnąć.\n                    <br />\n                    1. Przepisz nazwę <b>{objectName}</b><br />\n                    2. Naciśnij 'Zatwierdź'\n                </Typography>\n                <TextField\n                    id=\"resource-name\"\n                    label=\"nazwa\"\n                    variant=\"outlined\"\n                    value={input}\n                    onChange={(evt) => setInput(evt.target.value)}\n                />\n                <Stack direction=\"row\" justifyContent=\"space-around\">\n                    <Button startIcon={<CancelIcon />} onClick={close}>Anuluj</Button>\n                    <Button startIcon={<DeleteIcon color=\"inherit\" />} onClick={handleConfirm} color=\"error\">Zatwierdź</Button>\n                </Stack>\n            </Stack>\n        </GenericModal>\n    );\n}","import Typography from \"@mui/material/Typography\";\n\n\n\ninterface TabHeadLineProps {\n    title: string | React.ReactNode,\n    subtitle?: string | React.ReactNode,\n}\n\n\nexport default function TabHeadLine(props: TabHeadLineProps) {\n    return (\n        <span>\n            <Typography variant='h4' component='h2' color='primary.dark'>\n                {props.title}\n            </Typography>\n            {\n                props.subtitle &&\n                <Typography variant=\"body1\" color='text.secondary' mt='5px'>\n                    {props.subtitle}\n                </Typography>\n            }\n        </span>\n    )\n}","import TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport IconButton from '@mui/material/IconButton';\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\n\n\n\ninterface AddItemProps {\n    onClick: () => void\n}\n\n\nexport default function AddItem(props: AddItemProps) {\n    return (\n        <TableRow\n            sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n        >\n            <TableCell colSpan={12} align=\"left\">\n                <IconButton\n                    title=\"Dodaj klasę dostępu\"\n                    aria-label='Dodaj klasę dostępu'\n                    onClick={props.onClick}\n                >\n                    <AddCircleIcon fontSize='large' />\n                </IconButton>\n            </TableCell>\n        </TableRow>\n    );\n}","import TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport IconButton from '@mui/material/IconButton';\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew';\nimport DeleteIcon from '@mui/icons-material/Delete';\n\n\n\ninterface RowItemProps {\n    id: number,\n    name: string,\n    onSelect: () => void,\n    onDelete: () => void\n}\n\n\nexport default function RowItem(props: RowItemProps) {\n    return (\n        <TableRow\n            sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n        >\n            <TableCell component=\"th\" scope=\"row\">{props.id}</TableCell>\n            <TableCell align=\"left\">{props.name}</TableCell>\n            <TableCell align=\"center\">\n                <IconButton \n                title='Usuń klasę dostępu'\n                aria-label='Usuń klasę dostępu'\n                color='error' \n                onClick={props.onDelete}\n                >\n                    <DeleteIcon />\n                </IconButton>\n                <IconButton\n                    title='Otwórz w oknie'\n                    aria-label='Otwórz w oknie'\n                    onClick={props.onSelect}\n                >\n                    <OpenInNewIcon />\n                </IconButton>\n            </TableCell>\n        </TableRow>\n    );\n}","import Stack from \"@mui/material/Stack\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport React from \"react\";\nimport DeleteModal from \"../../../components/DeleteModal\";\nimport TabHeadLine from \"../../../../../../shared/components/TabHeadLine\";\n\nimport { useAccess } from \"../../AccessContext\";\nimport { CreateForm } from \"../../Forms\";\nimport AddItem from \"./AddItem\";\nimport RowItem from \"./RowItem\";\n\n\n\nexport default function AccessesList() {\n    const { accessesList, openAccess, createAccess, deleteAccess } = useAccess();\n\n    const [createModalOpen, setCreateModalOpen] = React.useState(false);\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState(false);\n\n    const [toDelete, setToDelete] = React.useState<{ id: number, name: string } | null>(null);\n\n    const renderedRows = React.useMemo(() => {\n        return accessesList.map(({ id, name }) =>\n            <RowItem\n                key={id}\n                id={id}\n                name={name}\n                onSelect={() => openAccess(id)}\n                onDelete={() => {\n                    setToDelete({ id: id, name: name })\n                    setDeleteModalOpen(true);\n                }}\n            />).reverse();\n\n    }, [\n        accessesList,\n        openAccess,\n    ]);\n\n\n    const handleDelete = React.useCallback(async () => {\n        if (!toDelete) return;\n\n        if (await deleteAccess(toDelete.id)) {\n            setDeleteModalOpen(false);\n        }\n    }, [toDelete, deleteAccess]);\n\n\n    return (\n        <>\n\n            <CreateForm\n                open={createModalOpen}\n                onClose={() => setCreateModalOpen(false)}\n                onSubmit={createAccess}\n            />\n\n            <DeleteModal\n                objectName={toDelete?.name ?? ''}\n                open={deleteModalOpen}\n                onClose={() => {\n                    setToDelete(null);\n                    setDeleteModalOpen(false);\n                }}\n                onSuccess={handleDelete}\n            />\n\n            <Stack spacing={4}>\n                <TabHeadLine\n                    title=\"Lista klas dostępu\"\n                    subtitle=\"Twórz, edytuj i usuwaj klasy dostępu.\"\n                />\n\n                <TableContainer>\n                    <Table sx={{ maxWidth: 550 }} size=\"small\" aria-label=\"tabela klas dostępów\">\n                        <TableHead>\n                            <TableRow>\n                                <TableCell>nr id</TableCell>\n                                <TableCell align=\"left\">nazwa</TableCell>\n                                <TableCell align=\"center\">opcje</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n\n                            {renderedRows}\n\n                            <AddItem onClick={() => setCreateModalOpen(true)} />\n                        </TableBody>\n                    </Table>\n                </TableContainer>\n\n            </Stack >\n        </>\n    );\n}","import Stack from \"@mui/material/Stack\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\n\n\nconst explonations = [\n    {\n        field: 'Identyfikator - id',\n        text: 'Numer identyfikacyjny klasy dostępu. Ten numer przypisujesz użytkownikowi podczas zmiany uprawnień.'\n    },\n    {\n        field: 'Nazwa - name',\n        text: 'Nazwa klasy dostępu'\n    }, {\n        field: 'Właściciel - owner',\n        text: <>Najwyższy zestaw uprawnień.\n            Użytkownik ma możliwość zmiany konfiguracji platformy oraz posiada on wszystkie inne uprawnienia włączając w to edytowanie danych innych użytkowników.\n            Jest właścicielem platformy.</>\n    }, {\n        field: 'Administrator klas dostępu - accessAdmin',\n        text: 'Użytkownik ma możliwość tworzenia, edytowania oraz usuwania klas dostępu. Jest odpowiedzialny za przydzielanie dostępu użytkownikom.'\n    }, {\n        field: 'Administrator inwentarza - premisesAdmin',\n        text: 'Użytkownik jest odpowiedzialny za tworzenie, edycję i usuwanie adresów, budynków i sal.'\n    }, {\n        field: 'Administrator kluczy - keysAdmin',\n        text: 'Użytkownik ma możliwość przypisywania i usuwania tagów RFID dla każdej sali.'\n    }, {\n        field: 'Możliwość rezerwacji - reservationsAbility',\n        text: 'Użytkownik ma możliwość tworzenia rezerwacji'\n    }, {\n        field: 'Administrator rezerwacji - reservationsAdmin',\n        text: 'Użytkownik ma możliwość edytowania oraz usuwania rezerwacji stworzonych przez innych użytkowników.'\n    }, {\n        field: 'Administrator logów - logsAdmin',\n        text: 'Użytkownik ma możliwość przeglądania logów aplikacji.'\n    }, {\n        field: 'Dostęp do statystyk - statsViewer',\n        text: 'Użytkownik może przeglądać statystyki wygenerowane dla aplikacji, użytkownika, budynku i pokoju.'\n    },\n];\n\n\n\nexport default function AccessInfo() {\n\n\n\n    const rendered = React.useMemo(() => {\n        return explonations.map(({ field, text }, id) =>\n            <li key={id}>\n                <Typography variant='subtitle1' component='h3'>\n                    {field}\n                </Typography>\n                <Typography variant='body2' color='text.secondary' mb={1}>\n                    {text}\n                </Typography>\n            </li>\n        );\n    }, []);\n\n\n    return (\n        <Stack spacing={3}>\n            <span>\n                <Typography component='h1' variant='h3' color='primary.dark'>\n                    Klasy Dostępu\n                </Typography>\n                <Typography variant='body1' color=\"text.secondary\" mt=\"5px\">\n                    Dostępne tutaj opcje wpływają znacząco na funkcjonowanie całej platformy. <br />\n                    Konigurowanie klas dostępu użytkowników to bardzo odpowiedzialne zadanie. Upewnij się że nadajesz tylko wymagane uprawnienia.\n                    Stosuj się do modelu <a target='_blank' rel=\"noreferrer\" href='https://en.wikipedia.org/wiki/Principle_of_least_privilege'>Least Privilege</a>.\n                </Typography>\n            </span>\n\n\n            <span>\n                <Typography variant='h5' component='h2'>\n                    Pola używane w klasach dostępu:\n                </Typography>\n                <ul>\n                    {rendered}\n\n                </ul>\n            </span>\n\n\n        </Stack>\n    );\n}","import { Link as RouterLink } from \"react-router-dom\";\nimport { Link as LinkIcon } from \"@mui/icons-material\";\nimport { Link, LinkProps } from \"@mui/material\";\n\n\ninterface AppLinkProps extends LinkProps {\n    to: string,\n    withIcon?: boolean,\n}\n\nexport default function AppLink(props: AppLinkProps) {\n    const { withIcon, ...restProps } = props;\n    return (\n        <Link\n            component={RouterLink}\n            underline=\"hover\"\n            display='inline-flex'\n            {...restProps}\n        >\n            {withIcon && <><LinkIcon fontSize=\"small\" />&nbsp;</>}\n            {restProps.children}\n        </Link >\n    );\n}","import * as React from 'react';\nimport Grid from '@mui/material/Grid';\nimport List from '@mui/material/List';\nimport Card from '@mui/material/Card';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemText from '@mui/material/ListItemText';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport Checkbox from '@mui/material/Checkbox';\nimport Button from '@mui/material/Button';\nimport Divider from '@mui/material/Divider';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport { useAccess } from \"../../AccessContext\";\nimport MenuItem from '@mui/material/MenuItem';\nimport Box from '@mui/material/Box';\nimport User from '../../../../../../models/User';\nimport useNotification from '../../../../../../contexts/NotificationContext/useNotification';\nimport UserService from '../../../../../../services/UserService';\nimport LinkIcon from '@mui/icons-material/Link';\nimport AppLink from '../../../../../../shared/components/AppLink';\nimport { dynamicPaths } from '../../../../../../shared/path';\nimport TabHeadLine from '../../../../../../shared/components/TabHeadLine';\n\n\nfunction usersNotUsers(a: readonly User[], b: readonly User[]) {\n    return a.filter(ai => (b.find(bi => bi.id === ai.id) === undefined));\n}\n\nfunction notNumNum(a: readonly number[], b: readonly number[]) {\n    return a.filter((value) => b.indexOf(value) === -1);\n}\n\n\nfunction intersection(a: readonly number[], b: readonly User[]) {\n    return a.filter((value) => b.find(({ id }) => id === value));\n}\n\n\nexport default function EditUsersAccess() {\n    const { accessesList } = useAccess();\n    const notify = useNotification();\n\n    const [checked, setChecked] = React.useState<readonly number[]>([]);\n\n    const [leftUsers, setLeftUsers] = React.useState<User[]>([]);\n    const [rightUsers, setRightUsers] = React.useState<User[]>([]);\n\n    const [access, setAccess] = React.useState<{\n        [index: string]: number,\n        right: number,\n        left: number\n    }>({ left: accessesList[0]?.id, right: accessesList[1]?.id });\n\n\n    const updateUsersAccess = React.useCallback(async (users: User[], accessId: number) => {\n        const calls = users.map(async (user) => {\n            try {\n                await UserService.updateAccess(user.id, accessId);\n                return user;\n            } catch (err: any) {\n                notify(err.description, 'error');\n                return false;\n            }\n        });\n        let results = await Promise.all(calls);\n        return results.filter(item => item !== false) as User[];\n    }, [notify]);\n\n\n    const loadUsers = React.useCallback(async (accessId: number) => {\n        try {\n            const resp = await UserService.getUsers({ accessId: accessId, deleted: false });\n            return resp.data as User[];\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return [];\n    }, [notify]);\n\n\n    React.useEffect(() => {\n        loadUsers(access.left).then(data => setLeftUsers(data))\n    }, [\n        access.left,\n        loadUsers,\n    ]);\n\n\n    React.useEffect(() => {\n        loadUsers(access.right).then(data => setRightUsers(data))\n    }, [\n        access.right,\n        loadUsers,\n    ]);\n\n\n\n    const leftChecked = React.useMemo(() => intersection(checked, leftUsers), [checked, leftUsers]);\n    const rightChecked = React.useMemo(() => intersection(checked, rightUsers), [checked, rightUsers]);\n\n\n    const handleToggle = React.useCallback((value: number) => () => {\n        setChecked(old => {\n            const currentIndex = old.indexOf(value);\n            const checked = Object.assign([], old) as number[];\n\n            if (currentIndex === -1) {\n                checked.push(value);\n            } else {\n                checked.splice(currentIndex, 1);\n            }\n            return checked\n        });\n    }, []);\n\n\n    // to the right\n    const handleCheckedRight = React.useCallback(async () => {\n        const usersToMove = leftUsers.filter(({ id }) => leftChecked.indexOf(id) !== -1);\n\n        const moved = await updateUsersAccess(usersToMove, access.right);\n        setRightUsers(rightUsers.concat(moved));\n\n        setLeftUsers(usersNotUsers(leftUsers, moved)); //not user who is selected\n        setChecked(notNumNum(checked, leftChecked)); // uncheck checked elements\n    }, [\n        leftChecked,\n        rightUsers,\n        leftUsers,\n        checked,\n        access.right,\n        updateUsersAccess,\n    ]);\n\n\n    // to the left\n    const handleCheckedLeft = React.useCallback(async () => {\n        const usersToMove = rightUsers.filter(({ id }) => rightChecked.indexOf(id) !== -1);\n\n        const moved = await updateUsersAccess(usersToMove, access.left);\n        setLeftUsers(leftUsers.concat(moved));\n\n        let l = usersNotUsers(rightUsers, moved);\n        console.log(l);\n        setRightUsers(l); //not user who is selected\n        setChecked(notNumNum(checked, rightChecked)); // uncheck checked elements\n\n    }, [\n        rightChecked,\n        leftUsers,\n        rightUsers,\n        checked,\n        access.left,\n        updateUsersAccess,\n    ]);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<number>): void => {\n        const value = Number(event.target.value);\n\n        setAccess(old => {\n            if (old.left === value || old.right === value) return old;\n\n            return {\n                ...old,\n                [event.target.name]: Number(event.target.value)\n            }\n        });\n    }, []);\n\n\n    const customList = React.useCallback((direction: string, users: readonly User[]) => (\n        <Card>\n            <Box sx={{ p: 2 }}>\n                <FormControl fullWidth>\n                    <InputLabel id=\"wybierz-klase-dostępu\">Klasa dostępu</InputLabel>\n                    <Select\n                        labelId=\"wybierz-klase-dostępu\"\n                        name={direction}\n                        value={access[direction]}\n                        label=\"klasa dostępu\"\n                        onChange={handleSelectChange}\n                    >\n                        {accessesList.map(({ name, id }) => <MenuItem key={name} value={id} >{name} </MenuItem>)}\n                    </Select>\n                </FormControl>\n            </Box>\n\n            <Divider />\n            <List\n                sx={{\n                    // maxWidth: 400,\n                    // width: '30vw',\n                    height: 550,\n                    bgcolor: 'background.paper',\n                    overflow: 'auto',\n                }}\n                dense\n                component=\"div\"\n                role=\"list\"\n            >\n                {users.map((user: User) => {\n                    const labelId = `transfer-list-all-item-${user.id}-label`;\n\n                    return (\n                        <ListItem\n                            key={user.id}\n                            role=\"listitem\"\n                            button\n                            onClick={handleToggle(user.id)}\n                        >\n                            <ListItemIcon>\n                                <Checkbox\n                                    checked={checked.indexOf(user.id) !== -1}\n                                    tabIndex={-1}\n                                    disableRipple\n                                    inputProps={{\n                                        'aria-labelledby': labelId,\n                                    }}\n                                />\n                            </ListItemIcon>\n                            <ListItemText id={labelId} primary={user.email} />\n\n                            <ListItemIcon onClick={(ev: any) => ev.stopPropagation()} color='primary'>\n                                <AppLink to={dynamicPaths.toUser(user.id)}>\n                                    <LinkIcon />\n                                </AppLink>\n                            </ListItemIcon>\n                        </ListItem>\n                    );\n                })}\n                <ListItem />\n            </List>\n        </Card>\n    ), [handleToggle, checked, handleSelectChange, access, accessesList]);\n\n    return (\n        <Grid container spacing={2} justifyContent=\"center\" alignItems=\"center\">\n            <Grid item xs={12}>\n                <TabHeadLine\n                    title='Administracja klasami dostępu'\n                    subtitle='Wybierz stworzone klasy dostępu i przydzielaj role dla użytkowników'\n                />\n            </Grid>\n\n            <Grid item xs={12} sm={5}>{customList('left', leftUsers)}</Grid>\n            <Grid item>\n                <Grid container direction=\"column\" alignItems=\"center\">\n                    <Button\n                        sx={{ my: 0.5 }}\n                        variant=\"outlined\"\n                        size=\"small\"\n                        onClick={handleCheckedRight}\n                        disabled={leftChecked.length === 0}\n                        aria-label=\"move selected right\"\n                    >\n                        &gt;\n                    </Button>\n                    <Button\n                        sx={{ my: 0.5 }}\n                        variant=\"outlined\"\n                        size=\"small\"\n                        onClick={handleCheckedLeft}\n                        disabled={rightChecked.length === 0}\n                        aria-label=\"move selected left\"\n                    >\n                        &lt;\n                    </Button>\n                </Grid>\n            </Grid>\n            <Grid item xs={12} sm={5}>{customList('right', rightUsers)}</Grid>\n        </Grid>\n    );\n}\n","import React from \"react\";\nimport GenericLogsTab from \"../components/GenericLogsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport { AccessContext } from \"./AccessContext\";\nimport AccessesList from \"./components/AccessesList\";\nimport AccessInfo from \"./components/AccessInfo\";\nimport EditUsersAccess from \"./components/EditUsersAccess\";\n\n\nexport default function AccessPage() {\n\n\n    const pages = React.useMemo(() => {\n        let arr: any = [];\n        arr.push({ name: 'Informacje', component: <AccessInfo /> });\n        arr.push({ name: 'Lista klas', component: <AccessesList /> });\n        arr.push({ name: 'Administracja', component: < EditUsersAccess /> });\n        arr.push({ name: 'Logi', component: <GenericLogsTab /> });\n\n        return arr;\n    }, []);\n\n\n    return (\n        <AccessContext>\n            <SwipeableTabs tabs={pages} />\n        </AccessContext >\n    );\n}","import { useContext } from \"react\";\nimport { sessionContext } from \"./sessionProvider\";\nimport SessionValue from \"./SessionValue\";\n\n\n\nexport default function useSession() {\n  return useContext(sessionContext) as SessionValue;\n}","import { RoomType } from \"../models/Room\";\nimport { BuildingViewParams } from \"./BuildingService\";\nimport Service from \"./Service\";\n\n\nexport interface RoomViewParams {\n    roomId: string,\n    buildingId: string,\n    addressId: string\n}\n\n\nexport interface RoomUpdateParams {\n    name?: string,\n    roomType?: RoomType,\n    seatsCount?: number,\n    floor?: number,\n    buildingId?: number,\n    blocked?: boolean,\n}\n\n\nexport interface CreateRoomParams {\n    name: string,\n    roomType: RoomType,\n    seatsCount: number,\n    floor:number\n}\n\n\n\nclass RoomService extends Service {\n    _path = '';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath({ addressId, buildingId, roomId }: RoomViewParams) {\n        this._path = `/addresses/${addressId}/buildings/${buildingId}/rooms/${roomId}`;\n    }\n\n    public getView() {\n        return this.get(this.path);\n    }\n\n    public create({ addressId, buildingId }: BuildingViewParams, data: CreateRoomParams) {\n        return this.post(`/addresses/${addressId}/buildings/${buildingId}/rooms`, data);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public update(body: RoomUpdateParams) {\n        return this.patch(this.path, body);\n    }\n\n    public updateRFID(key: string) {\n        return this.patch(`${this.path}/keys`, {\n            \"RFIDTag\": key\n        });\n    }\n\n    public deleteRFIDTag() {\n        return this.delete(`${this.path}/keys`);\n    }\n}\n\nexport default new RoomService()","import Service from \"./Service\";\n\n\nexport interface AddressViewParams {\n    addressId: string,\n}\n\n\nexport interface UpdateAddressParams {\n    [index: string]: string | undefined,\n    country?: string,\n    town?: string,\n    postalCode?: string,\n    street?: string,\n    number?: string\n}\n\n\nexport interface CreateAddressParams {\n    country: string,\n    town: string,\n    postalCode: string,\n    street?: string,\n    number?: string,\n}\n\n\nclass AddressService extends Service {\n    _path = '';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath(params: AddressViewParams) {\n        this._path = this.preparePath(params);\n    }\n\n    public getCurrentOne() {\n        return this.get(this.path);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public update(data: UpdateAddressParams) {\n        return this.patch(this.path, data);\n    }\n\n    public create(data: CreateAddressParams) {\n        return this.post('/addresses', data);\n    }\n\n    public getBuildings() {\n        return this.get(`${this.path}/buildings`);\n    }\n\n    public getResourcesMap() {\n        return this.get('/addresses/resources');\n    }\n}\n\n\nexport default new AddressService();","import React from \"react\";\nimport useSession from \"../../auth/useSession\";\nimport AddressMap from \"../../models/AddressMap\";\nimport useTrigger from \"../../components/pages/protected/hooks/useTrigger\";\nimport AddressService from \"../../services/AddressService\";\nimport useNotification from \"../NotificationContext/useNotification\";\nimport ResourceMapContextValue from \"./ResourceMapContextValue\";\n\n\n\n\nexport const resourceMapContext: any = React.createContext(null);\n\n\ninterface ResourceMapContextProviderProps {\n    children?: React.ReactNode[]\n}\n\n\nexport default function ResourceMapContextProvider(props: ResourceMapContextProviderProps) {\n    const [resourceMap, setResources] = React.useState<AddressMap[]>([]);\n    const [loaded, setLoaded] = React.useState<boolean>(false);\n    const refresh = useTrigger(300_000);\n\n    const { user } = useSession();\n    const notify = useNotification();\n\n    const loadResourceMap = React.useCallback(async (): Promise<void> => {\n        try {\n            const resp = await AddressService.getResourcesMap();\n            resp?.data && setResources(resp.data as any);\n        } catch (err: any) {\n            notify(err.description, \"error\");\n        }\n    }, [notify]);\n\n    const reloadMap = (): void => {\n        loadResourceMap();\n    }\n\n    React.useEffect(() => {\n        user && loadResourceMap();\n        setLoaded(true);\n    }, [\n        user,\n        loadResourceMap,\n        refresh\n    ]);\n\n\n    const getRoomLink = React.useCallback((roomId: number): string => {\n        return '/app' + resourceMap.map(addr => addr.buildings.map(bld => bld.rooms))\n            .flat(2)\n            .find(item => item.id === roomId)\n            ?.href ?? '';\n    }, [resourceMap]);\n\n\n    const allRooms = React.useMemo(() => {\n        return resourceMap.map(addr => addr.buildings.map(bld => bld.rooms)).flat(2)\n    }, [resourceMap]);\n\n\n    const allBuildings = React.useMemo(() => {\n        return resourceMap.map(addr => addr.buildings.map(({ name, href, id }) => ({ name, href, id }))).flat(2);\n    }, [resourceMap]);\n\n\n    const allAddresses = React.useMemo(() => {\n        return resourceMap.map(({ name, href, id }) => ({ name, href, id }));\n    }, [resourceMap]);\n\n\n    const getBuildingLink = React.useCallback((buildingId: number): string => {\n        return '/app' + resourceMap.map(addr => addr.buildings)\n            .flat(2)\n            .find(item => item.id === buildingId)\n            ?.href ?? '';\n    }, [resourceMap]);\n\n\n    if (loaded === false) return null;\n\n    return (\n        <resourceMapContext.Provider value={{\n            resourceMap,\n            reloadMap,\n            allRooms,\n            getRoomLink,\n            getBuildingLink,\n            allAddresses,\n            allBuildings,\n        } as ResourceMapContextValue}>\n            {props.children}\n        </resourceMapContext.Provider>\n    );\n}","import React from \"react\";\nimport { resourceMapContext } from \"./ResourceMapContextProvider\";\nimport ResourceMapContextValue from \"./ResourceMapContextValue\";\n\n\nexport default function useResourceMap() {\n    return React.useContext(resourceMapContext) as ResourceMapContextValue;\n}","import React, { createContext } from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport { DetailedRoom } from \"../../../../../models/Room\";\nimport RoomService, { RoomUpdateParams, RoomViewParams } from \"../../../../../services/RoomService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport RoomContextValue from \"./RoomContextValue\";\nimport useResourceMap from \"../../../../../contexts/ResourceMapContext/useResourceMap\";\nimport useTrigger from \"../../hooks/useTrigger\";\n\n\ninterface RoomContextProviderProps {\n    children?: React.ReactNode\n}\n\nexport const RoomContext: any = createContext(null);\n\n\nexport default function RoomContextProvider({\n    children\n}: RoomContextProviderProps) {\n    const { getBuildingLink, reloadMap } = useResourceMap();\n    const notify = useNotification();\n    const urlParams = useParams<RoomViewParams>();\n    const [room, setRoom] = React.useState<DetailedRoom>();\n    const refresh = useTrigger(60_000);\n\n    React.useLayoutEffect(() => {\n        RoomService.setPath(urlParams);\n    }, [urlParams]); // set new urlParams to service so it get data for propper room\n\n\n    const getRoom = React.useCallback(async () => {\n        const resp = await RoomService.getView();\n        setRoom(resp.data as DetailedRoom);\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        urlParams,\n        refresh\n    ]); // recompute after change of room\n\n\n    const setOccupied = React.useCallback((state: boolean) => {\n        setRoom(old => {\n            if (old)\n                return { ...old, occupied: state };\n        });\n    }, []);\n\n\n    const updateRoom = React.useCallback(async (body: RoomUpdateParams) => {\n        if (!room) return false;\n\n        try {\n            await RoomService.update(body);\n            setRoom(old => {\n                if (old)\n                    return { ...old, ...body };\n            });\n            notify(\"Sala została zaktualizowana\", 'success');\n\n            if (('name' in body && body.name !== room.name)\n                || ('buildingId' in body && body.buildingId !== room?.building.id)\n            ) {\n                reloadMap();\n            }\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n        room\n    ]);\n\n\n    const deleteRoom = React.useCallback(async () => {\n        if (!room) return;\n\n        try {\n            await RoomService.remove();\n            reloadMap();\n            notify(\"Sala została usunięta\", 'success', () => <Redirect to={getBuildingLink(room.building.id)} />);\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        notify,\n        room,\n        reloadMap,\n        getBuildingLink,\n    ]);\n\n\n    const updateRFIDTag = React.useCallback(async (key: string) => {\n        try {\n            await RoomService.updateRFID(key);\n            setRoom(old => {\n                if (old)\n                    return { ...old, RFIDTag: key };\n            });\n\n            notify(\"Tag został przypisany\", 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n    }, [notify]);\n\n\n    const deleteRFIDTag = React.useCallback(async () => {\n        try {\n            await RoomService.deleteRFIDTag();\n            setRoom(old => {\n                if (old)\n                    return { ...old, RFIDTag: null };\n            });\n            notify(\"Tag został usunięty\", \"success\");\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [notify]);\n\n\n    React.useEffect(() => {\n        getRoom();\n        return () => { }\n    }, [getRoom]);\n\n\n    return (\n        !Boolean(room) ? null : <RoomContext.Provider value={{\n            room,\n            updateRoom,\n            deleteRoom,\n            updateRFIDTag,\n            deleteRFIDTag,\n            setOccupied\n        } as RoomContextValue}>\n            {children}\n        </RoomContext.Provider>\n    );\n}\n","import React from \"react\";\nimport { RoomContext } from \"./RoomContextProvider\";\nimport RoomContextValue from \"./RoomContextValue\";\n\n\nexport default function useRoomContext() {\n    return React.useContext(RoomContext) as RoomContextValue\n}","import { Card, CardHeader, Avatar, CardContent, Typography, Link } from \"@mui/material\";\nimport User from \"../../../../../models/User\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport { displayDate } from \"../../../../../shared/utils\";\nimport { Link as RouterLink } from 'react-router-dom';\nimport LaunchIcon from '@mui/icons-material/Launch';\nimport { dynamicPaths } from \"../../../../../shared/path\";\n\n\ninterface ReservationUserCardProps {\n    user: User\n}\n\nexport default function ReservationUserCard({ user }: ReservationUserCardProps) {\n    return (\n        <Card aria-label=\"Rezerwujący użytkownik\" sx={{ minHeight: '150px' }}>\n            <CardHeader\n                avatar={<Avatar\n                    sx={{ width: 56, height: 56 }}\n                    alt={`${user.name} ${user.surname}`}\n                    src={ImageService.getLink(user.image)}\n                />}\n                title={`${user.name} ${user.surname}`}\n                subheader={\n                    <Link\n                        aria-label=\"wyślij email\"\n                        title=\"wyślij email\"\n                        href={`mailto:${user.email}`}\n                    >\n                        {user.email}\n                    </Link>\n                }\n                action={\n                    <RouterLink\n                        to={dynamicPaths.toUser(user.id)}\n                        aria-label='Pokaż użytkownika'\n                        title='Pokaż użytkownika'\n                    >\n                        <LaunchIcon />\n                    </RouterLink>\n                }\n            />\n            <CardContent>\n                <Typography\n                    variant=\"body2\"\n                    fontSize=\"smaller\"\n                    color='text.secondary'\n                    aria-label='Data ostatniej aktywności'\n                    title='Data ostatniej aktywności'\n                >\n                    Ostatnia aktywność: {displayDate(user.lastActivity)}\n                </Typography>\n            </CardContent>\n        </Card>\n    );\n}\n","import { Card, CardHeader, CardContent, Typography, Box, CardMedia } from \"@mui/material\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport LaunchIcon from '@mui/icons-material/Launch';\nimport Room from \"../../../../../models/Room\";\nimport React from \"react\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport AppLink from \"../../../../../shared/components/AppLink\";\n\n\n\ninterface ReservationRoomCardProps {\n    room: Room\n}\n\nexport default function ReservationRoomCard({ room }: ReservationRoomCardProps) {\n    const { getRoomLink, getBuildingLink } = useResourceMap();\n\n    const roomLink = React.useMemo(() => getRoomLink(room.id), [room.id, getRoomLink]);\n    const buildingLink = React.useMemo(() => getBuildingLink(room.building), [room.building, getBuildingLink]);\n\n    return (\n        <Card sx={{ display: 'flex', minHeight: '150px' }}>\n            <CardMedia\n                component='img'\n                image={ImageService.getLink(room.image)}\n                alt={`zdjęcie sali ${room.name}`}\n                sx={{\n                    maxWidth: '40%',\n                    maxHeight: '100%'\n                }}\n            />\n            <Box sx={{ width: '60%' }}>\n                <CardHeader\n                    title={`Sala ${room.name}`}\n                    subheader={room.roomType}\n                    sx={{\n                        pt: 1, pb: 0\n                    }}\n                    action={\n                        <AppLink\n                            to={roomLink}\n                            aria-label='Otwórz stronę Pokoju'\n                            title='Otwórz stronę Pokoju'\n                        >\n                            <LaunchIcon />\n                        </AppLink>\n                    }\n                />\n                <CardContent>\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                        <AppLink\n                            withIcon\n                            to={buildingLink}\n                            aria-label=\"Pokaż budynek\"\n                            title=\"Pokaż budynek\"\n                        >\n                            pokaż budynek\n                        </AppLink> <br/>\n                        Aktualnie {room.occupied ? 'zajęta' : 'wolna'}<br />\n                    </Typography >\n                </CardContent >\n            </Box >\n        </Card >\n    );\n}","import React from \"react\";\nimport { reservationsContext } from \"./ReservationsContextProvider\";\nimport ReservationsContextValue from \"./ReservationsContextValue\";\n\nexport default function useReservations() {\n    return React.useContext(reservationsContext) as ReservationsContextValue;\n}","import MobileDateTimePicker from \"@mui/lab/MobileDateTimePicker\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\n\n\ninterface Props {\n    value: string,\n    label: string,\n    onChange: (value: string) => void,\n}\n\nexport default function DateTimePicker({\n    value,\n    onChange,\n    label,\n}: Props) {\n\n    const [dateVal, setDateVal] = React.useState<Date>(new Date(value));\n\n    const handleChange = React.useCallback((newValue: Date | null) => {\n        if (newValue) {\n            onChange(newValue.toLocaleString('pl'));\n            setDateVal(newValue);\n        }\n    }, [\n        onChange\n    ]);\n\n    return (\n        <MobileDateTimePicker\n            minDate={new Date()}\n            label={label}\n            inputFormat=\"dd.MM.yyyy HH:mm\"\n            value={dateVal}\n            onChange={handleChange}\n            renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n        />\n    )\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../../components/GenericModal\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport { UpdateReservationData } from \"../../../../../../services/ReservationService\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport { useResourceMap } from \"../../../../../../contexts/ResourceMapContext\";\nimport React from \"react\";\nimport useReservations from \"../../GenericReservationsTab/ReservationsContext/useReservations\";\nimport FormGridContainer from \"../../../../../../shared/components/FormGridContainer\";\nimport DateTimePicker from \"../../DateTimePicker\";\n\n\ninterface EditModalFormProps {\n    open: boolean,\n    onClose: () => void,\n    reservation: Reservation\n}\n\nexport default function EditModalForm(props: EditModalFormProps) {\n    const { updateReservation } = useReservations()\n    const { allRooms } = useResourceMap();\n\n    const [data, setData] = React.useState<UpdateReservationData>({});\n\n\n    const closeForm = React.useCallback(() => {\n        props.onClose();\n        setData({});\n    }, [\n        props\n    ]);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateReservation(props.reservation.id, data)) {\n            closeForm();\n            setData({});\n        }\n\n    }, [\n        props,\n        data,\n        closeForm,\n        updateReservation,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleDateChange = React.useCallback((name: keyof UpdateReservationData, value: string) => {\n        value && setData(old => ({\n            ...old,\n            [name]: value\n        }));\n    }, []);\n\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={closeForm}\n            aria-label=\"Okno do edycji rezerwacji\"\n        >\n            <FormGridContainer\n                title='Edycja rezerwacji'\n                subtitle=\"Zmień właściwości pokoju i zatwierdź zmiany.\"\n                onSubmit={handleSubmit}\n                onCancel={props.onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Tytuł\"\n                        multiline\n                        maxRows={4}\n                        name='title'\n                        value={data.title ?? props.reservation.title}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Opis\"\n                        multiline\n                        maxRows={20}\n                        name='description'\n                        value={data.description ?? props.reservation.description}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={6}>\n                    <DateTimePicker\n                        value={data.plannedStart ?? props.reservation.plannedStart}\n                        label=\"Początek\"\n                        onChange={(value) => handleDateChange('plannedStart', value)}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={6}>\n                    <DateTimePicker\n                        value={data.plannedEnd ?? props.reservation.plannedEnd}\n                        label=\"Koniec\"\n                        onChange={(value) => handleDateChange('plannedEnd', value)}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <InputLabel id=\"wybierz-salę\">Sala</InputLabel>\n                        <Select\n                            required\n                            labelId=\"wybierz-salę\"\n                            name=\"roomId\"\n                            value={data.roomId ?? props.reservation.room.id}\n                            label=\"Sala\"\n                            onChange={(evt: any) => setData(old => ({ ...old, roomId: Number(evt.target.value) }))}\n                        >\n                            {allRooms.map(({ name, id }) => <MenuItem key={name} value={id} >Sala &nbsp;{name} </MenuItem>)}\n                        </Select>\n                    </FormControl>\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../../components/GenericModal\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Stack from \"@mui/material/Stack\";\nimport Button from \"@mui/material/Button\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useResourceMap } from \"../../../../../../contexts/ResourceMapContext\";\nimport React from \"react\";\nimport useReservations from \"../../GenericReservationsTab/ReservationsContext/useReservations\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport { IconButton } from \"@mui/material\";\nimport { CreateReservationData } from \"../../../../../../services/ReservationService\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport FormGridContainer from \"../../../../../../shared/components/FormGridContainer\";\nimport DateTimePicker from \"../../DateTimePicker\";\n\n\ninterface CopyModalFormProps {\n    open: boolean,\n    onClose: () => void,\n    reservation: Reservation\n}\n\ninterface DateTimeSlot {\n    color: string | null,\n    from: string,\n    to: string,\n}\n\ninterface CopyReservationData {\n    title: string,\n    description: string,\n    roomId?: number\n}\n\n\nexport default function CopyModalForm(props: CopyModalFormProps) {\n    const { createReservation } = useReservations()\n    const { allRooms } = useResourceMap();\n    const notify = useNotification();\n\n    const [dates, setDates] = React.useState<DateTimeSlot>({\n        color: '',\n        from: props.reservation.plannedStart,\n        to: props.reservation.plannedEnd,\n    });\n\n    const [copyDates, setCopyDates] = React.useState<DateTimeSlot[]>([]);\n    const [data, setData] = React.useState<CopyReservationData>({\n        title: props.reservation.title,\n        description: props.reservation.description,\n        roomId: props.reservation.room.id ?? 0\n    });\n\n\n    const closeForm = React.useCallback(() => {\n        props.onClose();\n        // setCopyDates([]);\n    }, [props]);\n\n\n    const handleSubmit = React.useCallback(async () => {\n\n        const createCalls = copyDates.map(async (date) => {\n            const success = await createReservation({\n                ...data,\n                plannedStart: date.from,\n                plannedEnd: date.to\n            } as CreateReservationData);\n            date.color = success ? 'green' : 'red';\n            return date;\n        })\n        const processed = await Promise.all(createCalls);\n        setCopyDates(processed);\n\n    }, [data, copyDates, createReservation]);\n\n\n    const handleDeleteCopyDate = React.useCallback((index: number) => {\n        setCopyDates(old => {\n            old.splice(index, 1);\n            return Object.assign([], old);\n        });\n    }, []);\n\n\n    const handleAddDate = React.useCallback(() => {\n        if (copyDates.find(({ from, to }) => from === dates.from || to === dates.to)) {\n            notify(\"Daty powinny się różnić\", 'error');\n            return;\n        };\n\n        setCopyDates(old => {\n            old.push({\n                ...dates,\n                color: ''\n            });\n            return Object.assign([], old);\n        });\n    }, [\n        dates,\n        notify,\n        copyDates,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={closeForm}\n            aria-label=\"Okno do kopiowania rezerwacji\"\n        >\n\n            <FormGridContainer\n                title='Kopiowanie rezerwacji'\n                subtitle=\"Skopiuj rezerwację dla wybranych przez siebie nowych dat.\"\n                onSubmit={handleSubmit}\n                onCancel={props.onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Tytuł\"\n                        multiline\n                        maxRows={4}\n                        name='title'\n                        value={data.title ?? props.reservation.title}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Opis\"\n                        multiline\n                        maxRows={20}\n                        name='description'\n                        value={data.description ?? props.reservation.description}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={5}>\n                    <DateTimePicker\n                        label=\"Początek\"\n                        value={dates.from}\n                        onChange={(value) => setDates(old => ({ ...old, from: value }))}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={5}>\n                    <DateTimePicker\n                        label=\"Koniec\"\n                        value={dates.to}\n                        onChange={(value) => setDates(old => ({ ...old, to: value }))}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={2}>\n                    <Button\n                        size='large'\n                        sx={{\n                            height: '100%',\n                            width: '100%'\n                        }}\n                        variant='outlined'\n                        onClick={handleAddDate}\n                    >\n                        Dodaj\n                    </Button>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Stack\n                        spacing={1}\n                        sx={{\n                            border: '1px solid',\n                            borderColor: 'divider',\n                            borderRadius: 1,\n                            padding: 0.5,\n                            bgcolor: 'background.default',\n                            maxHeight: '200px',\n                            overflow: 'auto',\n                        }}>\n                        {copyDates.length === 0 && <Typography textAlign='center' component='p'>\n                            Brak dat\n                        </Typography>}\n                        {\n                            copyDates.map(({ color, from, to }, index) =>\n                                <Box\n                                    key={index}\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'space-between',\n                                        pl: '3px'\n                                    }}>\n                                    <Typography component='p' sx={{ color: color }}>\n                                        <>\n                                        {console.log(from)}\n                                        {from}&nbsp;-&nbsp;{to} \n                                        </>\n                                    </Typography>\n                                    <IconButton\n                                        onClick={() => handleDeleteCopyDate(index)}\n                                    >\n                                        <DeleteIcon />\n                                    </IconButton>\n                                </Box>\n                            )\n                        }\n                    </Stack>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <InputLabel id=\"wybierz-salę\">Sala</InputLabel>\n                        <Select\n                            required\n                            labelId=\"wybierz-salę\"\n                            name=\"roomId\"\n                            value={data.roomId ?? props.reservation.room.id}\n                            label=\"Sala\"\n                            onChange={(evt: any) => setData(old => ({ ...old, roomId: Number(evt.target.value) }))}\n                        >\n                            {allRooms.map(({ name, id }) => <MenuItem key={name} value={id} >Sala &nbsp;{name} </MenuItem>)}\n                        </Select>\n                    </FormControl>\n                </Grid>\n            </FormGridContainer>\n\n        </GenericModal >\n    );\n}","import { Box, Button, Stack, Typography } from \"@mui/material\";\nimport NfcIcon from '@mui/icons-material/Nfc';\nimport { styled } from \"@mui/system\";\nimport React from \"react\";\nimport CancelIcon from '@mui/icons-material/Cancel';\n\n\ninterface RfidFormProps {\n    headline: string,\n    bodyText: string,\n    onScan: (keyText: string) => Promise<boolean>,\n    onClose: () => void,\n}\n\nconst HiddenInput = styled('input')({\n    position: \"absolute\",\n    left: \"-1000px\",\n    color: \"transparent\"\n});\n\n\nexport default function RfidForm(props: RfidFormProps) {\n    const [text, setText] = React.useState<string>('');\n    const [color, setColor] = React.useState<string>('primary');\n    const input = React.useRef<HTMLInputElement | null>(null);\n\n    const handleSubmit = async (evt: React.FormEvent) => {\n        evt.preventDefault();\n        const success = await props.onScan(text);\n        if (success) {\n            setColor('success');\n            setTimeout(handleDecline, 2000);\n        } else {\n            setColor('error');\n        }\n        setText('');\n    }\n\n    const handleDecline = () => {\n        props.onClose();\n        setText('');\n        setColor('primary');\n    }\n\n    const focusOnInput = () => {\n        input.current && console.log(input.current.focus())\n    }\n\n    return (\n        <Stack\n            onClick={focusOnInput}\n            component=\"form\"\n            direction=\"column\"\n            spacing={4}\n            onSubmit={handleSubmit}\n        >\n            <NfcIcon\n                sx={{ fontSize: 140, alignSelf: \"center\" }}\n                color={color as any}\n            />\n            <HiddenInput\n                ref={input}\n                autoFocus\n                type=\"text\"\n                value={text}\n                onChange={(evt: any) => setText(evt.target.value)}\n            />\n            <Box component=\"span\" textAlign='center'>\n                <Typography variant=\"h5\" color='primary.dark'>\n                    {props.headline}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" mt='5px'>\n                    {props.bodyText}\n                </Typography>\n            </Box>\n\n            <Button startIcon={<CancelIcon />}\n                onClick={handleDecline}\n                color=\"error\"\n            >\n                Zamknij\n            </Button>\n\n        </Stack>\n    );\n}","import { useReservations } from \"../../GenericReservationsTab/ReservationsContext\";\nimport React from \"react\";\nimport GenericModal from \"../../GenericModal\";\nimport RfidForm from \"../../RfidForm\";\n\n\ninterface PingKeyModalFormProps {\n    reservationId: number,\n    open: boolean,\n    onClose: () => void,\n}\n\n\nexport default function PingKeyModalForm(props: PingKeyModalFormProps) {\n    const { pingKeyForReservation } = useReservations();\n\n    const handleKeyScan = React.useCallback(\n        async (key: string) => pingKeyForReservation(props.reservationId, key)\n        , [props, pingKeyForReservation]);\n\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={props.onClose}\n            aria-label=\"Okno do edycji rezerwacji\"\n            sx={{ maxWidth: '400px' }}\n        >\n            <RfidForm\n                headline=\"Wczytaj klucz z tagiem NFC\"\n                bodyText='Przy pomocy czytnika, wczytaj wydawany klucz. Aby opuścić to okno, naciśnij \"Zamknij\"'\n                onScan={handleKeyScan}\n                onClose={props.onClose}\n            />\n        </GenericModal>\n    );\n}","import React from \"react\";\nimport { ListItemIcon, Menu, MenuItem, Typography } from \"@mui/material\";\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport IconButton from '@mui/material/IconButton';\n\n\ninterface MoreVertMenuProps {\n    options: { action: () => void, icon?: React.ReactNode, label: string }[]\n}\n\nexport default function MoreVertMenu(props: MoreVertMenuProps) {\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n    const open = Boolean(anchorEl);\n\n\n    const handleClick = React.useCallback((event: React.MouseEvent<HTMLElement>) => {\n        setAnchorEl(event.currentTarget);\n    },[]);\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    return (\n        <div>\n            <IconButton\n                aria-label='card-more-button'\n                aria-controls=\"card-menu\"\n                aria-expanded={open ? 'true' : undefined}\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n            >\n                <MoreVertIcon />\n            </IconButton>\n            <Menu\n                MenuListProps={{\n                    'aria-labelledby': 'card-more-button',\n                }}\n                anchorEl={anchorEl}\n                id=\"card-menu\"\n                open={open}\n                onClose={handleClose}\n                PaperProps={{\n                    style: {\n                        width: '20ch',\n                    },\n                }}\n            >\n                {\n                    props.options.map((opt, id) => <MenuItem\n                        key={id}\n                        onClick={handleClose}\n                    >\n                        <ListItemIcon>\n                            {opt.icon}\n                        </ListItemIcon>\n                        <Typography onClick={opt.action}>{opt.label}</Typography>\n                    </MenuItem>)\n                }\n            </Menu>\n        </div>\n    );\n}\n\n","import Reservation from \"../../../../../models/Reservation\";\nimport GenericModal from \"../../components/GenericModal\";\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport { Grid, IconButton, Typography } from '@mui/material';\nimport { displayDate } from '../../../../../shared/utils';\nimport React from 'react';\nimport ReservationUserCard from './ReservationUserCard';\nimport ReservationRoomCard from './ReservationRoomCard';\nimport DeleteModal from '../DeleteModal';\nimport { CopyForm, EditForm, PingNFCForm } from \"./ModalForms\";\nimport { useReservations } from \"../GenericReservationsTab/ReservationsContext\";\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CopyIcon from '@mui/icons-material/CopyAll';\nimport NFCIcon from '@mui/icons-material/Nfc';\nimport { Edit } from \"@mui/icons-material\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\n\n\n\ninterface ReservationViewModalProps {\n    reservation: Reservation,\n    open: boolean,\n    onClose: () => void\n}\n\n\nfunction TextSection(props: {\n    title: string, children: React.ReactNode | React.ReactNode[]\n}) {\n    return (\n        <span>\n            <Typography component=\"h3\" variant=\"subtitle1\">{props.title}</Typography>\n            <Typography\n                variant=\"body1\"\n                color='text.secondary'\n                textAlign='justify'\n            >\n                {props.children}\n            </Typography>\n        </span>\n    );\n}\n\n\nexport default function ReservationViewModal(props: ReservationViewModalProps) {\n    const { deleteReservation } = useReservations();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState<boolean>(false);\n    const [editModalOpen, setEditModalOpen] = React.useState<boolean>(false);\n    const [nfcModalOpen, setNFCModalOpen] = React.useState<boolean>(false);\n    const [copyModalOpen, setCopyModalOpen] = React.useState<boolean>(false);\n\n\n    const onDelete = React.useCallback(async () => {\n        if (await deleteReservation(props.reservation.id)) {\n            setDeleteModalOpen(false);\n        }\n    }, [\n        props.reservation.id,\n        deleteReservation,\n    ]);\n\n\n    const menuOptions = React.useMemo(() => {\n        const opt = [\n            {\n                icon: <NFCIcon color='primary' />,\n                label: 'Odbij klucz',\n                action: () => setNFCModalOpen(true)\n            }, {\n                icon: <CopyIcon color='primary' />,\n                label: 'Kopiuj',\n                action: () => setCopyModalOpen(true)\n            }, {\n                icon: <Edit color='primary' />,\n                label: 'Edytuj',\n                action: () => setEditModalOpen(true)\n            }, {\n                icon: <DeleteIcon color='error' />,\n                label: 'Usuń',\n                action: () => setDeleteModalOpen(true)\n            },\n        ]\n        return opt;\n    }, []);\n\n\n    return (\n        <>\n            <DeleteModal\n                open={deleteModalOpen}\n                onClose={() => setDeleteModalOpen(false)}\n                objectName={props.reservation.title}\n                onSuccess={onDelete}\n            />\n\n            <EditForm\n                open={editModalOpen}\n                onClose={() => setEditModalOpen(false)}\n                reservation={props.reservation}\n            />\n\n            <CopyForm\n                open={copyModalOpen}\n                onClose={() => setCopyModalOpen(false)}\n                reservation={props.reservation}\n            />\n\n            <PingNFCForm\n                open={nfcModalOpen}\n                onClose={() => setNFCModalOpen(false)}\n                reservationId={props.reservation.id}\n            />\n\n\n            <GenericModal\n                open={props.open}\n                onClose={props.onClose}\n                aria-label=\"Widok Rezerwacji\"\n                sx={{\n                    maxWidth: '800px',\n                    mt: '4vw'\n                }}\n            >\n                <Stack spacing={4} alignItems='stretch'>\n\n                    <Stack direction='row' justifyContent='space-between'>\n                        <Typography component=\"h2\" variant=\"h4\">\n                            {props.reservation.title}\n                        </Typography>\n                        <IconButton onClick={props.onClose}>\n                            <CloseIcon />\n                        </IconButton>\n                    </Stack>\n\n                    <Stack direction='row' justifyContent='space-between'>\n                        <Button\n                            color='success'\n                            startIcon={<NFCIcon />}\n                            onClick={() => setNFCModalOpen(true)}\n                            title=\"Odbij klucz\"\n                            aria-label=\"Odbij klucz\"\n                        >\n                            Odbij klucz\n                        </Button>\n\n                        <MoreVertMenu options={menuOptions} />\n                    </Stack>\n\n                    <TextSection title='Planowany czas:'>\n                        {`${displayDate(props.reservation.plannedStart)} - ${displayDate(props.reservation.plannedEnd)}`}\n                    </TextSection>\n\n                    <TextSection title='Faktyczny czas:'>\n                        Rozpoczęto: {props.reservation.actualStart ?\n                            displayDate(props.reservation.actualStart)\n                            : 'NIE'\n                        }<br />\n                        Zakończono: {props.reservation.actualEnd ?\n                            displayDate(props.reservation.actualEnd)\n                            : 'NIE'\n                        }\n                    </TextSection>\n\n                    <TextSection title='Opis:'>\n                        {props.reservation.description}\n                    </TextSection>\n\n                    <Grid container>\n                        {\n                            [\n                                { title: 'Użytkownik:', component: <ReservationUserCard user={props.reservation.user} /> },\n                                { title: 'Zarezerwowana sala:', component: <ReservationRoomCard room={props.reservation.room} /> },\n                            ].map(({ title, component }, index) =>\n                                <Grid key={index} item xs={12} lg={6} pr='10px'>\n                                    <Typography sx={{ p: '25px 0px 10px 0px', color: 'text.secondary' }} variant='subtitle2'>{title}</Typography>\n                                    {component}\n                                </Grid>)\n                        }\n                    </Grid>\n\n                </Stack>\n            </GenericModal>\n        </>\n    );\n}\n\n\n","import React from \"react\";\nimport ReservationViewModal from \"../../../ReservationViewModal\";\nimport { useReservations } from \"..\";\nimport ModalContextValue from \"./ModalContextValue\";\n\n\nexport const ReservationModalViewContext = React.createContext<ModalContextValue>({\n    showReservation: (id: number) => { },\n    reservation: null\n});\n\n\ninterface ModalContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\nexport default function ModalContextProvider(props: ModalContextProviderProps) {\n    const { reservations } = useReservations();\n\n    const [modalOpen, setModalOpen] = React.useState<boolean>(true);\n    const [reservationId, setReservationId] = React.useState<number | null>(null);\n\n\n    const reservation = React.useMemo(() => {\n        if (reservationId) {\n            return reservations.find(({ id }) => id === reservationId);\n        }\n    }, [reservations, reservationId]) ?? null;\n\n\n    const showReservation = React.useCallback((id: number) => {\n        setReservationId(id);\n        setModalOpen(true);\n    }, []);\n\n\n    return (\n        <ReservationModalViewContext.Provider value={{ reservation, showReservation }}>\n            {props.children}\n\n            {reservation &&\n                <ReservationViewModal\n                    reservation={reservation}\n                    open={modalOpen}\n                    onClose={() => setModalOpen(false)}\n                />}\n        </ReservationModalViewContext.Provider>\n    );\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useSession from \"../../../../../../auth/useSession\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport { AppURLParams } from \"../../../../../../services/interfaces\";\nimport ReservationService, { CreateReservationData, ReservationsQueryParams, UpdateReservationData } from \"../../../../../../services/ReservationService\";\nimport { useRoomContext } from \"../../../RoomPage/RoomContext\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport ReservationModalContext from \"./ModalContext\";\nimport useResourceMap from \"../../../../../../contexts/ResourceMapContext/useResourceMap\";\nimport ReservationsContextValue from \"./ReservationsContextValue\";\nimport paths from \"../../../../../../shared/path\";\nimport { UserViewParams } from \"../../../../../../services/UserService\";\nimport useTrigger from \"../../../hooks/useTrigger\";\n\n\nexport const reservationsContext: any = React.createContext(null);\n\n\ninterface ReservationsContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\n\nexport default function ReservationsContextProvider(props: ReservationsContextProviderProps) {\n    const { queryParams, setQueryParams } = useQueryParams<ReservationsQueryParams>();\n    const notify = useNotification();\n    const { getRoomLink } = useResourceMap();\n    const roomContext = useRoomContext();\n    const { user } = useSession();\n    const urlParams = useParams<AppURLParams>();\n    const refresh = useTrigger(30_000);\n\n    const [reservations, setReservations] = React.useState<Reservation[]>();\n\n\n    const load = React.useCallback(async () => {\n        try {\n            let params = urlParams;\n            if (Object.keys(urlParams).length === 0 && window.location.pathname === paths.HOME) {\n                params = { userId: 'me' } as UserViewParams;\n            }\n            const resp = await ReservationService.getReservations(params, queryParams);\n\n            resp.pagination && setQueryParams((old) => ({\n                ...old,\n                pagesCount: resp.pagination?.pagesCount,\n            }));\n            setReservations(resp.data as Reservation[]);\n        } catch (err: any) {\n            notify(err.description ?? err.message, 'error');\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        queryParams.currentPage,\n        queryParams.itemsOnPage,\n        queryParams.from,\n        queryParams.search,\n        setQueryParams,\n        urlParams,\n        notify,\n        user\n    ]);\n\n\n    // when loading function is recalculated - trigger the loading\n    React.useEffect(() => {\n        load();\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        load,\n        refresh\n    ]);\n\n\n    const triggerReload = React.useCallback(() => setQueryParams(old => Object.assign({}, old)), [\n        setQueryParams\n    ]);\n\n\n    const pingKeyForReservation = React.useCallback(async (id: number, key: string) => {\n        if (!reservations) return;\n        try {\n            const reservation = reservations.find(item => item.id === id);\n            if (!reservation) return false;\n\n            const resp = await ReservationService.pingKey(id, key);\n\n            setReservations(old => {\n                old && old.forEach(item => {\n                    if (item.id !== id) return;\n\n                    if (item.actualStart) {\n                        item.actualEnd = new Date().toString();\n                    } else {\n                        item.actualStart = new Date().toString();\n                    }\n\n                });\n                return Object.assign([], old);\n            });\n\n            roomContext && roomContext.setOccupied(!reservation.room.occupied);\n            resp?.data && notify(resp.data.toString(), 'success');\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true;\n    }, [\n        reservations,\n        roomContext,\n        notify,\n    ]);\n\n\n    const createReservation = React.useCallback(async (data: CreateReservationData) => {\n        try {\n            await ReservationService.createOne(data);\n\n            triggerReload();\n            notify(\"Rezerwacja utworzona prawidłowo!\", 'success');\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true\n    }, [\n        notify,\n        triggerReload,\n    ]);\n\n\n    const deleteReservation = React.useCallback(async (reservationId: number) => {\n        try {\n            await ReservationService.remove(reservationId);\n            setReservations(old => old && old.filter(({ id }) => id !== reservationId));\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true;\n    }, [notify]);\n\n\n    const updateReservation = React.useCallback(async (id: number, data: UpdateReservationData) => {\n        try {\n            await ReservationService.update(id, data); //call to API\n\n            //update state\n            setReservations((old) => {\n                return old && old.map(item => {\n                    if (item.id === id)\n                        ['plannedStart', 'plannedEnd', 'description', 'title']\n                            .forEach(field => {\n                                if (field in data) {\n                                    item[field] = data[field];\n                                }\n                            });\n                    return item;\n                });\n            });\n\n            // when reservation room is changing\n            if ('roomId' in data) {\n                data.roomId && notify(\n                    'Rezerwacja zaktualizowana i przeniesiona!',\n                    'success',\n                    () => <Redirect to={getRoomLink(Number(data.roomId))} />\n                )\n            } else {\n                notify('Rezerwacja zaktualizowana!', 'success');\n            }\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true;\n    }, [getRoomLink, notify]);\n\n\n    if (!reservations) return null;\n\n    return (\n        <reservationsContext.Provider value={{\n            reservations,\n            updateReservation,\n            deleteReservation,\n            createReservation,\n            pingKeyForReservation,\n        } as ReservationsContextValue}>\n            <ReservationModalContext>\n                {props.children}\n            </ReservationModalContext>\n        </reservationsContext.Provider>\n    );\n}","import Avatar from \"@mui/material/Avatar\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport AppLink from \"../../../../../../shared/components/AppLink\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport { dynamicPaths } from \"../../../../../../shared/path\";\nimport ImageService from \"../../../../../../services/ImageService\";\nimport { displayDate } from \"../../../../../../shared/utils\";\nimport ReservationService from \"../../../../../../services/ReservationService\";\n\n\ninterface ReservationListItemProps {\n    data: Reservation,\n    onClick: () => void\n}\n\n\nexport default function ReservationListItem({\n    data, onClick\n}: ReservationListItemProps) {\n    const { message, color } = ReservationService.resolveStatus(data);\n\n    return (\n        <ListItem\n            component='li'\n            button\n            sx={{\n                mb:'2px',\n                bgcolor: color,\n                '&:hover, &:focus': {\n                    bgcolor: color,\n                    filter: 'brightness(97%)',\n                }\n            }}\n            onClick={onClick}\n        >\n            <ListItemAvatar>\n                <AppLink to={dynamicPaths.toUser(data.user.id)}>\n                    <Avatar src={ImageService.getLink(data.user.image)} />\n                </AppLink>\n            </ListItemAvatar>\n\n            <ListItemText\n                primary={data.title}\n                secondary={displayDate(data.actualStart ?? data.plannedStart) + ' - ' + message}\n            />\n        </ListItem>\n    )\n}","import { List, ListItem, ListItemText } from \"@mui/material\";\nimport useReservationModalContext from \"../ReservationsContext/ModalContext/useReservationModalContext\";\nimport { useReservations } from \"../ReservationsContext\";\nimport ReservationListItem from \"./ReservationsListItem\";\n\n\n\nexport default function ReservationsList() {\n    const { showReservation } = useReservationModalContext();\n    const { reservations } = useReservations();\n\n\n    return (\n        <List aria-label='lista rezerwacji'>\n            {reservations.length === 0 ?\n                <ListItem>\n                    <ListItemText primary='Brak rezerwacji spełniających kryteria.' />\n                </ListItem> :\n                reservations.map((item, index) => <ReservationListItem\n                    key={index}\n                    data={item}\n                    onClick={() => showReservation(item.id)}\n                />)}\n        </List>\n    );\n}\n\n\n","import React from \"react\";\nimport { ReservationModalViewContext } from \"./ModalContextProvider\";\nimport ModalContextValue from \"./ModalContextValue\";\n\n\nexport default function useReservationModalContext() {\n    return React.useContext(ReservationModalViewContext) as ModalContextValue;\n}","import { FormControl, FormControlLabel, Radio, RadioGroup } from \"@mui/material\";\nimport React from \"react\";\n\nexport interface SelectButtonInterface {\n    name: string, value: string\n}\n\nexport interface SelectButtonGroupProps {\n    onChange: (value: string) => void,\n    buttons: SelectButtonInterface[],\n    value: string\n}\n\nexport default function SelectButtonGroup({\n    onChange, buttons, value\n}: SelectButtonGroupProps) {\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n        onChange((event.target as HTMLInputElement).value);\n    }, [onChange]);\n\n\n    const renderedButtons = React.useMemo(() => {\n        return buttons.map(({ value, name }) =>\n            <FormControlLabel\n                key={name}\n                value={value}\n                control={<Radio />}\n                label={name}\n                aria-label={name}\n                title={name}\n            />\n        )\n    }, [buttons]);\n\n\n    return (\n        <FormControl component=\"fieldset\">\n            <RadioGroup\n                row\n                aria-label=\"wybór opcji\"\n                name=\"wybór zdefiniowanej opcji\"\n                value={value}\n                onChange={handleChange}\n            >\n                {renderedButtons}\n            </RadioGroup>\n        </FormControl>\n    );\n}","import MobileDatePicker from \"@mui/lab/MobileDatePicker\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport { ReservationsQueryParams } from \"../../../../../services/ReservationService\";\nimport SelectButtonGroup from \"../../components/SelectButtonGroup\";\nimport LazyInput from \"../../components/LazyInput\";\nimport { isDate } from \"../../../../../shared/utils\";\n\n\nconst buttons = [\n    { name: 'Dziś', value: 'today' },\n    { name: 'Ten tydzień', value: 'this week' },\n    { name: 'Od wczoraj', value: 'yesterday' },\n];\n\n\nexport default function ReservationTabBar() {\n    const { setQueryParams, queryParams } = useQueryParams<ReservationsQueryParams>();\n\n    const [customDate, setCustomDate] = React.useState(new Date(isDate(queryParams.from) ? queryParams.from ?? 'xxx' : Date.now()));\n\n    const handleButtonChange = React.useCallback((value: string) => {\n        setQueryParams((old: ReservationsQueryParams) => ({ ...old, from: value }));\n    }, [setQueryParams]);\n\n\n    const handleSubmitCustomDate = React.useCallback((evt: React.FormEvent) => {\n        evt.preventDefault();\n        setQueryParams((old: ReservationsQueryParams) => ({ ...old, from: customDate.toISOString() }))\n    }, [customDate, setQueryParams])\n\n\n    const handleSearchFieldChange = React.useCallback((evt) => {\n        setQueryParams(old => ({ ...old, search: evt.target.value }));\n    }, [setQueryParams]);\n\n\n    return (\n        <>\n            <Grid container\n                component='form'\n                onSubmit={handleSubmitCustomDate}\n                spacing={2}\n                alignItems='center'\n            >\n                <Grid item xs={12} md={12}>\n                    <SelectButtonGroup\n                        onChange={handleButtonChange}\n                        buttons={buttons}\n                        value={isDate(queryParams.from) ? '' : queryParams?.from ?? buttons[0].value}\n                    />\n                    <Box display='inline-flex' >\n                        <MobileDatePicker\n                            label=\"Od daty\"\n                            inputFormat=\"yyyy-MM-dd\"\n                            value={customDate}\n                            onChange={(value: Date | null) => value && setCustomDate(value)}\n                            renderInput={(params) => <TextField {...params} size='small' />}\n                        />\n                        <Button\n                            variant={queryParams?.from === customDate.toISOString() ? 'contained' : 'outlined'}\n                            type='submit'\n                            sx={{ ml: 1 }}\n                        >\n                            OK\n                        </Button>\n                    </Box>\n                </Grid>\n                <Grid item xs={12}>\n                    <LazyInput\n                        name=\"search\"\n                        label='wyszukaj'\n                        value={queryParams.search ?? ''}\n                        onChange={handleSearchFieldChange}\n                    />\n                </Grid>\n            </Grid>\n        </>\n    );\n}","import { Stack } from \"@mui/material\";\nimport { QueryParamsContext } from \"../../../../../contexts/QueryParamsContext\";\nimport ReservationsContext from \"./ReservationsContext\";\nimport { ReservationsQueryParams } from \"../../../../../services/ReservationService\";\nimport ListPagination from \"../../components/ListPagination\";\nimport ReservationsList from \"./ReservationsList\";\nimport ReservationTabBar from \"./ReservationTabBar\";\n\n\n\nexport default function GenericReservationsTab() {\n    return (\n        <QueryParamsContext name='reservations-query-params' default={{\n            itemsOnPage: 5,\n            currentPage: 1,\n            from: 'today'\n        } as ReservationsQueryParams}>\n            <ReservationsContext>\n                <Stack rowGap={5}>\n                    <ReservationTabBar />\n                    <ReservationsList />\n                    <ListPagination />\n                </Stack>\n            </ReservationsContext>\n        </QueryParamsContext>\n    );\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport paths from \"../../../../../shared/path\";\nimport AddressService, { AddressViewParams, UpdateAddressParams } from \"../../../../../services/AddressService\";\nimport AddressContextValue from \"./AddressContextValue\";\nimport Address from \"../../../../../models/Address\";\nimport Building from \"../../../../../models/Building\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\n\n\n\ninterface AddressContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport const addressContext: any = React.createContext(null);\n\n\nexport default function AddressContextProvider(props: AddressContextProviderProps) {\n    const notify = useNotification();\n    const { reloadMap } = useResourceMap();\n\n    const urlParams = useParams<AddressViewParams>();\n\n    const [address, setAddress] = React.useState<Address>();\n\n\n    React.useLayoutEffect(() => {\n        AddressService.setPath(urlParams);\n    }, [urlParams])\n\n\n    const getAddress = React.useCallback(async () => {\n        const resp = await AddressService.getCurrentOne();\n        setAddress(resp.data as Address);\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    React.useEffect(() => {\n        getAddress();\n    }, [getAddress]);\n\n\n    const getBuildingsInAddress = React.useCallback(async () => {\n        try {\n            const resp = await AddressService.getBuildings();\n            return resp.data as Building[];\n        } catch (err: any) {\n            return [];\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    const updateAddress = React.useCallback(async (data: UpdateAddressParams) => {\n        try {\n            await AddressService.update(data)\n\n            setAddress(old => {\n                return {\n                    ...old,\n                    ...data as Address\n                }\n            });\n\n            reloadMap()\n\n            notify('Adres zaktualizowany', 'success');\n            return true;\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n    ])\n\n\n\n    const deleteAddress = React.useCallback(async () => {\n        try {\n            await AddressService.remove();\n            reloadMap();\n            notify(\"Adres został usunięty\", 'success', () => <Redirect to={paths.HOME} />);\n        } catch (err: any) {\n            address &&\n                notify(err.description, 'error');\n        }\n    }, [\n        notify,\n        address,\n        reloadMap,\n    ]);\n\n\n    if (!Boolean(address)) return null;\n\n    return (\n        <addressContext.Provider value={{\n            address,\n            deleteAddress,\n            getBuildingsInAddress,\n            updateAddress\n        } as AddressContextValue}>\n\n            {props.children}\n\n        </addressContext.Provider>\n    );\n}","import React from \"react\";\nimport { addressContext } from \"./AddressContextProvider\";\nimport AddressContextValue from \"./AddressContextValue\";\n\n\nexport default function useAddress() {\n    return React.useContext(addressContext) as AddressContextValue;\n}","import { styled, SxProps } from \"@mui/system\";\nimport React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Address from \"../../../../../models/Address\";\n\n\n\ninterface MapProps {\n    address: Address,\n    sx?: SxProps\n}\n\nconst StyledIframe = styled('iframe')({\n    width: '100%',\n    height: '50vh',\n    maxHeight: '400px',\n    minHeight: '300px'\n});\n\n\nexport default function Map({ address, sx }: MapProps) {\n\n    const url = React.useMemo(() => {\n        const { street, number, town, country } = address;\n\n        const base = new URL('https://maps.google.com/maps');\n        const params = new URLSearchParams({\n            q: `${street + \" \" + number + \" \" + town + \" \" + country}`,\n            ie: 'UTF8',\n            z: '14',\n            iwloc: '',\n            output: 'embed'\n        });\n        base.search = params.toString();\n\n        return base.toString();\n    }, [address]);\n\n    return (\n        <Box>\n            <StyledIframe\n                src={url}\n                frameBorder=\"0\"\n                sx={{ ...sx }}\n            />\n        </Box>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport GenericModal from \"../../components/GenericModal\";\nimport { useAddress } from \"../AddressContext\";\nimport { UpdateAddressParams } from \"../../../../../services/AddressService\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\n\ninterface AddressEditFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\n\n\nexport default function AddressEditForm({\n    open,\n    onClose\n}: AddressEditFormProps) {\n    const { address, updateAddress } = useAddress();\n\n    const [data, setData] = React.useState<UpdateAddressParams>({});\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old: UpdateAddressParams) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateAddress(data)) {\n            close();\n        }\n    }, [\n        data,\n        close,\n        updateAddress,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno do edycji budynku\"\n        >\n            <FormGridContainer\n                title='Edycja adresu'\n                subtitle=\"Zmień właściwości adresu i zatwierdź zmiany.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"country\"\n                        label=\"Kraj\"\n                        name=\"country\"\n                        value={data.country ?? address.country}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        autoFocus\n                        required\n                        fullWidth\n                        id=\"town\"\n                        label=\"Miasto\"\n                        name=\"town\"\n                        value={data.town ?? address.town}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"postalCode\"\n                        label=\"Kod pocztowy\"\n                        name=\"postalCode\"\n                        value={data.postalCode ?? address.postalCode}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={8}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"street\"\n                        label=\"Ulica\"\n                        name=\"street\"\n                        value={data.street ?? address.street}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={4}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"number\"\n                        label=\"Number\"\n                        name=\"number\"\n                        value={data.number ?? address.number}\n                        onChange={handleChange}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport GenericModal from \"../../components/GenericModal\";\nimport { BuildingCreateParams } from \"../../../../../services/BuildingService\";\nimport MobileTimePicker from \"@mui/lab/MobileTimePicker\";\nimport { timeFormat } from \"../../../../../shared/utils\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\ninterface CreateBuildingFormProps {\n    open: boolean,\n    onClose: () => void,\n    handleCreateBuilding: (data: BuildingCreateParams) => Promise<boolean>\n}\n\n\nexport default function CreateBuildingForm({\n    open,\n    onClose,\n    handleCreateBuilding,\n}: CreateBuildingFormProps) {\n    const [data, setData] = React.useState<BuildingCreateParams>({\n        name: '',\n        openTime: (new Date(0, 0, 0, 7, 0)).toString(),\n        closeTime: (new Date(0, 0, 0, 21, 0)).toString()\n    });\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n        setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        const success = await handleCreateBuilding({\n            ...data,\n            closeTime: timeFormat.format(new Date(data.closeTime)),\n            openTime: timeFormat.format(new Date(data.openTime))\n        });\n\n        if (success) {\n            onClose();\n        }\n\n    }, [\n        data,\n        onClose,\n        handleCreateBuilding,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno do tworzenia budynku\"\n        >\n            <FormGridContainer\n                title='Dodaj nowy budynek!'\n                subtitle=\"Wypełnij dane nowego budynku i kliknij zatwierdź.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"name\"\n                        label=\"Nazwa\"\n                        name=\"name\"\n                        autoFocus\n                        value={data.name}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6} >\n                    <MobileTimePicker\n                        label=\"Godzina otwarcia\"\n                        inputFormat=\"HH:mm\"\n                        value={data.openTime}\n                        onChange={(value: any) => setData(old => ({ ...old, openTime: value }))}\n                        renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <MobileTimePicker\n                        label=\"Godzina zamknięcia\"\n                        inputFormat=\"HH:mm\"\n                        value={data.closeTime}\n                        onChange={(value: any) => setData(old => ({ ...old, closeTime: value }))}\n                        renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport GenericModal from \"../../components/GenericModal\";\nimport AddressService, { CreateAddressParams } from \"../../../../../services/AddressService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\ninterface CreateAddressFormProps {\n    open: boolean,\n    onClose: () => void,\n}\n\n\nexport default function CreateAddressForm({\n    open,\n    onClose,\n}: CreateAddressFormProps) {\n    const notify = useNotification();\n    const { reloadMap } = useResourceMap();\n\n    const [data, setData] = React.useState<CreateAddressParams>({\n        country: 'Polska',\n        town: '',\n        street: '',\n        number: '',\n        postalCode: '',\n    });\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old: CreateAddressParams) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        try {\n            await AddressService.create(data);\n            reloadMap();\n            notify('Adres został dodany', 'success');\n            onClose();\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        data,\n        notify,\n        onClose,\n        reloadMap,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno do tworzenia adresu\"\n        >\n            <FormGridContainer\n                title='Dodaj nowy adres!'\n                subtitle=\"Wypełnij dane nowego adresu i kliknij zatwierdź.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"country\"\n                        label=\"Kraj\"\n                        name=\"country\"\n                        value={data.country}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"town\"\n                        label=\"Miasto\"\n                        name=\"town\"\n                        autoFocus\n                        value={data.town}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"postalCode\"\n                        label=\"Kod pocztowy\"\n                        name=\"postalCode\"\n                        value={data.postalCode}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={8}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"street\"\n                        label=\"Ulica\"\n                        name=\"street\"\n                        value={data.street}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={4}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"number\"\n                        label=\"Number\"\n                        name=\"number\"\n                        value={data.number}\n                        onChange={handleChange}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import { Card, CardContent, CardHeader, CardMedia, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport Map from \"./Map\";\nimport { useAddress } from \"../AddressContext\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { AddressEditForm } from \"../Forms\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport DatesFooter from \"../../components/DatesFooter\";\n\n\n\n\nexport default function AddressCard() {\n    const { address, deleteAddress } = useAddress();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState(false);\n    const [editModalOpen, setEditModalOpen] = React.useState(false);\n\n    const options = React.useMemo(() => [\n        {\n            label: 'Edytuj',\n            action: () => setEditModalOpen(true),\n            icon: <EditIcon color='success' />\n        }, {\n            label: 'Usuń',\n            action: () => setDeleteModalOpen(true),\n            icon: <DeleteIcon color='error' />\n        }\n    ], []);\n\n    return (\n        <>\n            <DeleteModal\n                objectName={`${address.street} ${address.number}`}\n                open={deleteModalOpen}\n                onClose={() => setDeleteModalOpen(false)}\n                onSuccess={deleteAddress}\n            />\n\n            <AddressEditForm\n                open={editModalOpen}\n                onClose={() => setEditModalOpen(false)}\n            />\n\n            <Card elevation={0}>\n                <CardHeader\n                    action={<MoreVertMenu options={options} />}\n                    title={<>{address.country}, {address.town}</>}\n                    subheader={<>{address.street} {address.number}</>}\n                />\n                <CardMedia component=\"div\">\n                    <Map address={address}  />\n                </CardMedia>\n                <CardContent>\n                    <Typography component='p'>\n                        ul. {address.street} {address.number}<br />\n                        {address.postalCode} {address.town}, <br />\n                        {address.country}\n                    </Typography>\n                    <br />\n                    <DatesFooter model={address} />\n                </CardContent>\n            </Card>\n        </>\n    )\n}","import { Box, Button, Stack, TextField, Typography } from \"@mui/material\";\nimport MobileDatePicker from '@mui/lab/MobileDatePicker';\nimport React from \"react\";\nimport SelectButtonGroup, { SelectButtonInterface } from \"../../components/SelectButtonGroup\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport { ChartsQueryData } from \"../../../../../services/ChartService\";\n\n\nconst predefinedButtons: SelectButtonInterface[] = [\n    { name: \"tydzień\", value: \"1 week ago\" },\n    { name: \"miesiąc\", value: \"1 month ago\" },\n    { name: \"6 miesięcy\", value: \"6 month ago\" },\n    { name: \"rok\", value: \"1 year ago\" },\n];\n\n\n\nexport default function ChartOptionsBar() {\n    const { queryParams, setQueryParams } = useQueryParams<ChartsQueryData>();\n\n    const [customDates, setCustomDates] = React.useState<{ from: Date, to: Date }>({\n        from: new Date(),\n        to: new Date()\n    });\n\n    const handleButtonChange = React.useCallback(async (buttonValue: string) => {\n        setQueryParams({\n            from: buttonValue,\n            to: \"now\"\n        });\n    }, [\n        setQueryParams\n    ]);\n\n\n    const handleSubmitCustomDate = React.useCallback(async (evt: any) => {\n        evt.preventDefault();\n        setQueryParams({\n            from: customDates.from?.toISOString(),\n            to: customDates.to?.toISOString()\n        });\n    }, [\n        customDates.from,\n        customDates.to,\n        setQueryParams\n    ]);\n\n\n    return (\n        <Stack direction=\"column\" spacing={2}>\n            <Box>\n                <Typography variant=\"subtitle2\">\n                    Zakres czasu:\n                </Typography>\n                <SelectButtonGroup\n                    onChange={handleButtonChange}\n                    buttons={predefinedButtons}\n                    value={queryParams.from}\n                />\n\n            </Box>\n            <Box component=\"form\" onSubmit={handleSubmitCustomDate}>\n                <Typography variant=\"subtitle2\">\n                    Zakres niestandardowy:&nbsp;\n                </Typography>\n                <Stack direction=\"row\" spacing={1}>\n                    <MobileDatePicker\n                        label=\"od\"\n                        inputFormat=\"yyyy-MM-dd\"\n                        value={customDates.from}\n                        onChange={(value) => setCustomDates({ ...customDates, from: value ?? new Date() })}\n                        renderInput={(params) => <TextField {...params} size='small' />}\n                    />\n                    <MobileDatePicker\n                        label=\"do\"\n                        inputFormat=\"yyyy-MM-dd\"\n                        value={customDates.to}\n                        onChange={(value) => setCustomDates({ ...customDates, to: value ?? new Date() })}\n                        renderInput={(params) => <TextField {...params} size='small' />}\n                    />\n                    <Button type=\"submit\" variant=\"outlined\"> OK</Button>\n                </Stack>\n            </Box>\n        </Stack>\n    );\n}\n","import { BuildingOrRoomChartsData, BuildingsOrRoomsChartsData, LogsChartsData, UserChartsData } from \"../models/Stats\";\nimport { AppURLParams } from \"./interfaces\";\nimport Service from \"./Service\";\n\n\nexport interface ChartsQueryData {\n    from: string,\n    to: string\n}\n\n\n\nexport type ChartsData = (\n    BuildingOrRoomChartsData |\n    BuildingsOrRoomsChartsData |\n    LogsChartsData |\n    UserChartsData\n);\n\n\nclass ChartService extends Service {\n\n    protected preparePath(urlParams: AppURLParams): string {\n        let endp = '';\n        let url = window.location.toString();\n\n        const map = {\n            '/settings': '/requests',\n            '/users': '/users'\n        }\n\n        if (Object.keys(urlParams).length === 0) {\n            for (const [path, newPath] of Object.entries(map)) {\n                if (url.includes(path)) {\n                    endp = newPath;\n                }\n            }\n        } else if ('addressId' in urlParams) {\n            endp += `/addresses/${urlParams.addressId}/buildings`;\n\n            if ('buildingId' in urlParams) {\n                endp += `/${urlParams.buildingId}`;\n\n                if ('roomId' in urlParams) endp += `/rooms/${urlParams.roomId}`;\n            }\n        } else if ('userId' in urlParams) {\n            endp += `/users/${urlParams.userId}`\n        }\n        return endp;\n    }\n\n    public fetchData(urlParams: AppURLParams, queryParams: ChartsQueryData) {\n        return this.get(this.preparePath(urlParams) + '/stats', queryParams);\n    }\n\n\n\n}\n\nexport default new ChartService();","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useSession from \"../../../../../../auth/useSession\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport ChartService, { ChartsData, ChartsQueryData } from \"../../../../../../services/ChartService\";\nimport { AppURLParams } from \"../../../../../../services/interfaces\";\nimport useTrigger from \"../../../hooks/useTrigger\";\n\n\nexport const chartsContext: any = React.createContext(null);\n\n\n\ninterface ChartsContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\n\nexport default function ChartsContextProvider(props: ChartsContextProviderProps) {\n    const notify = useNotification();\n    const urlParams = useParams<AppURLParams>();\n    const refresh = useTrigger(60_000);\n\n    const { user } = useSession();\n    const { queryParams } = useQueryParams<ChartsQueryData>();\n\n    const [chartsData, setData] = React.useState<ChartsData | {}>({});\n\n\n    const load = React.useCallback(async () => {\n        let params = urlParams;\n        if ('userId' in urlParams && urlParams.userId === 'me') {\n            params = { userId: `${user?.id}` }\n        }\n\n        try {\n            const resp = await ChartService.fetchData(params, queryParams);\n            setData(resp.data as ChartsData);\n        } catch (err: any) {\n            notify(err.description, 'error');\n            setData({});\n        }\n    }, [\n        notify,\n        queryParams,\n        urlParams,\n        user?.id,\n    ]);\n\n    React.useEffect(() => {\n        load();\n    }, [\n        load,\n        refresh\n    ]);\n\n\n    if (Object.keys(chartsData).length === 0) return null;\n\n    return (\n        <chartsContext.Provider value={{\n            chartsData\n        }}>\n            {props.children}\n        </chartsContext.Provider>\n    );\n}","import React from \"react\";\nimport { chartsContext } from \"./ChartsContextProvider\";\nimport ChartsContextValue from \"./ChartsContextValue\";\n\n\nexport default function useCharts<T>() {\n    return React.useContext(chartsContext) as ChartsContextValue<T>;\n}","import Stack from \"@mui/material/Stack\";\nimport React from \"react\";\nimport { QueryParamsContext } from \"../../../../../contexts/QueryParamsContext\";\nimport { ChartsQueryData } from \"../../../../../services/ChartService\";\nimport ChartOptionsBar from \"./ChartOptionsBar\";\nimport { ChartsContext } from \"./ChartsContext\";\n\n\ninterface GenericChartsTabProps {\n    children: React.ReactNode[] | React.ReactNode\n}\n\nexport default function ChartsTab(props: GenericChartsTabProps) {\n    return (\n        <QueryParamsContext\n            name=\"charts-query-params\"\n            default={{ from: '1 month ago', to: 'now' } as ChartsQueryData}\n        >\n            <ChartsContext>\n                <Stack spacing={4}>\n                    <ChartOptionsBar />\n                    {props.children}\n                </Stack>\n            </ChartsContext>\n        </QueryParamsContext>\n    )\n}","import Box from \"@mui/material/Box\";\nimport Collapse from \"@mui/material/Collapse\";\nimport Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport IconButton from \"@mui/material/IconButton\";\nimport { Divider } from \"@mui/material\";\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\n\n\ninterface ChartSectionProps {\n    title: string,\n    children: React.ReactNode[] | React.ReactNode,\n    defaultOpen?: boolean,\n    onClick?: () => void\n}\n\n\nexport default function ChartSection(props: ChartSectionProps) {\n    const [open, setOpen] = React.useState<boolean>(props?.defaultOpen ? true : false);\n\n    return (\n        <Box>\n            <Box sx={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n            }}>\n                <Typography variant='h6' component='h5' id={props.title.replace(' ', '_')}>\n                    {props.title}\n                    <IconButton onClick={() => setOpen(old => !old)}>\n                        {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                    </IconButton>\n                </Typography>\n                <IconButton\n                    onClick={props.onClick}\n                >\n                    <PictureAsPdfIcon />\n                </IconButton>\n            </Box>\n            <Collapse in={open} timeout=\"auto\" >\n                <Grid container spacing={2}>\n                    {props.children}\n                </Grid>\n                <br />\n                <Divider />\n            </Collapse>\n        </Box>\n    );\n}","import Box from \"@mui/material/Box\";\nimport Grid from \"@mui/material/Grid\";\nimport Stack from \"@mui/material/Stack\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\nimport { AxisOptions } from \"react-charts\";\nimport { Chart as ReactChart } from 'react-charts'\nimport BarChartIcon from '@mui/icons-material/BarChart';\n\n\n\nexport const weekDays = [\n    'Niedziela',\n    'Poniedziałek',\n    'Wtorek',\n    'Środa',\n    'Czwartek',\n    'Piątek',\n    'Sobota',\n];\n\n\ninterface ChartSeries {\n    x: any\n    y: number,\n}\n\n\ninterface ChartProps<T> {\n    data: T[],\n    title: string,\n    fullWidth?: boolean,\n    resolveDay?: boolean\n    xKey: keyof T,\n    y: { label: string, key: keyof T }[]\n}\n\n\nexport default function Chart<DataType>(props: ChartProps<DataType>) {\n\n    const primaryAxis = React.useMemo((): AxisOptions<ChartSeries> => ({\n        getValue: item => props.resolveDay ? weekDays[Number(item.x)] : item.x,\n        min: 0\n    }), [props.resolveDay]);\n\n\n    const secondaryAxes = React.useMemo((): AxisOptions<ChartSeries>[] => [\n        {\n            getValue: item => item.y,\n            position: 'left',\n            elementType: 'bar',\n            minDomainLength: 15,\n            hardMin: 0,\n            scaleType: 'linear',\n            showDatumElements: true\n        }\n    ], []);\n\n\n    const data = React.useMemo(() => {\n        const obj: { label: string, data: ChartSeries[] }[] = props.y.map(({ label }) => ({ label: label, data: [] }))\n\n        props.data.forEach((item) => {\n            props.y.forEach(({ key }, index) => {\n                obj[index].data.push({\n                    x: item[props.xKey],\n                    y: Number(item[key]),\n                });\n            })\n        })\n        return obj;\n    }, [\n        props.y,\n        props.xKey,\n        props.data,\n    ]);\n\n\n    return (\n        <Grid item\n            xs={12}\n            lg={props.fullWidth ? 12 : 6}\n        >\n            <Stack direction='row' spacing={1} alignItems='center'>\n                <Typography variant=\"body2\" component='h4' color='text.secondary'>\n                    {props.title}\n                </Typography>\n                <BarChartIcon color='primary' />\n\n            </Stack>\n            {props.data.length === 0 ?\n                <Typography component='p' color='text.secondary'>\n                    Brak danych do nakreślenia wykresu\n                </Typography>\n                : <Box\n                    sx={{\n                        maxHeight: '400px',\n                        height: '40vh',\n                        minHeight: '300px',\n                        width: '100%',\n                    }}>\n\n                    <ReactChart\n                        options={{\n                            data,\n                            primaryAxis,\n                            secondaryAxes,\n                        }}\n                    />\n                </Box>}\n        </Grid>\n    )\n}","import { BuildingsOrRoomsChartsData } from \"../../../../../models/Stats\";\nimport { Chart, ChartSection, ChartsTab, useCharts } from \"../../components/Charts\";\n\n\n\nexport default function AddressCharts() {\n    return (\n        <ChartsTab>\n            <ActualLoader />\n        </ChartsTab>\n    );\n}\n\nfunction ActualLoader() {\n    const { chartsData } = useCharts<BuildingsOrRoomsChartsData>();\n\n    return (\n        <ChartSection defaultOpen title='Statystyki budynków'>\n            <Chart\n                fullWidth\n                title='Ilość rezerwacji'\n                data={chartsData.allReservations}\n                xKey='name'\n                y={[\n                    { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                ]}\n            />\n            <Chart\n                fullWidth\n                title=\"Czas wszystkich reserwacji\"\n                data={chartsData.allReservations}\n                xKey='name'\n                y={[\n                    { label: 'Czas całkowity', key: 'allTimeMinutes' },\n                ]}\n            />\n            <Chart\n                fullWidth\n                title=\"Średnie czasy rezerwacji\"\n                data={chartsData.allReservations}\n                xKey='name'\n                y={[\n                    { label: 'Średni planowany czas', key: 'avgPlannedTimeMinutes' },\n                    { label: 'Średni faktyczny czas', key: 'avgActualTimeMinutes' },\n                ]}\n            />\n        </ChartSection>\n    );\n};","import Service from \"./Service\";\nimport { AddressViewParams } from \"./AddressService\";\n\n\n\nexport interface BuildingViewParams {\n    addressId: string,\n    buildingId: string,\n}\n\n\nexport interface BuildingUpdateParams {\n    [index: string]: string | number | undefined,\n    name?: string,\n    closeTime?: string,\n    openTime?: string,\n    addressId?: number\n}\n\nexport interface BuildingCreateParams {\n    name: string,\n    closeTime: string,\n    openTime: string,\n}\n\n\nclass BuildingService extends Service {\n    _path = '';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath({ addressId, buildingId }: BuildingViewParams) {\n        this._path = `/addresses/${addressId}/buildings/${buildingId}`;\n    }\n\n    public getCurrentOne() {\n        return this.get(this.path);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public update(data: BuildingUpdateParams) {\n        return this.patch(this.path, data);\n    }\n\n    public create({ addressId }: AddressViewParams, data: BuildingCreateParams) {\n        return this.post(`/addresses/${addressId}/buildings`, data)\n    }\n\n    public getRoomsInBuilding() {\n        return this.get(`${this.path}/rooms`);\n    }\n}\n\nexport default new BuildingService()","import { List, ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport Box from \"@mui/system/Box\";\nimport React from \"react\";\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\n\n\ninterface ScrollableListProps {\n    onAddItem: () => void,\n    children: React.ReactNode[] | React.ReactNode,\n}\n\n\nexport default function ScrollableList(props: ScrollableListProps) {\n    return (\n        <Box>\n            <List sx={{\n                minHeight: '160px',\n                maxHeight: '400px'\n            }}>\n                <ListItem button onClick={props.onAddItem}>\n                    <ListItemIcon >\n                        <AddCircleIcon color='primary' />\n                    </ListItemIcon>\n                    <ListItemText primary='Dodaj element' />\n                </ListItem>\n                {props.children}\n            </List>\n        </Box>\n    )\n}\n\n\n","import { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\nimport AppLink from \"../../../../../shared/components/AppLink\";\n\n\ninterface ScrollableListItemProps {\n    primary: string | React.ReactNode,\n    link: string,\n}\n\n\nexport default function ScrollableListItem(props: ScrollableListItemProps) {\n    return (\n        <ListItem sx={{ py: '2px' }}>\n            <ListItemIcon>\n                <ArrowRightIcon />\n            </ListItemIcon>\n            <ListItemText primary={<AppLink withIcon to={props.link}>{props.primary}</AppLink>} />\n        </ListItem>\n    );\n}","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport Building from \"../../../../../models/Building\";\nimport { AddressViewParams } from \"../../../../../services/AddressService\";\nimport BuildingService, { BuildingCreateParams } from \"../../../../../services/BuildingService\";\nimport ScrollableList, { ScrollableListItem } from \"../../components/ScrollableList\";\nimport SmallCard from \"../../components/SmallCard\";\nimport { useAddress } from \"../AddressContext\";\nimport { CreateBuildingForm } from \"../Forms\";\n\n\nexport default function BuildingsList() {\n    const { getBuildingsInAddress } = useAddress();\n    const { reloadMap } = useResourceMap();\n    const notify = useNotification();\n\n    const urlParams = useParams() as AddressViewParams;\n\n    const [createBuildingModalOpen, setCreateBuildingModalOpen] = React.useState<boolean>(false);\n    const [buildings, setBuildings] = React.useState<Building[]>();\n\n\n    const load = React.useCallback(async () => {\n        const buildings = await getBuildingsInAddress();\n        setBuildings(buildings);\n    }, [getBuildingsInAddress])\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    const createBuilding = React.useCallback(async (data: BuildingCreateParams) => {\n        try {\n            await BuildingService.create(urlParams, data);\n            load();\n            reloadMap();\n            notify('Nowa sala utworzona!', 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n        load,\n        urlParams,\n    ]);\n\n\n    const renderedBuildings = React.useMemo(() => {\n        return buildings?.map(item => <ScrollableListItem key={item.id}\n            primary={`Budynek ${item.name}`}\n            link={`./${item.address}/buildings/${item.id}`}\n        />)\n    }, [buildings]);\n\n\n    return (\n        <>\n            <CreateBuildingForm\n                open={createBuildingModalOpen}\n                onClose={() => setCreateBuildingModalOpen(false)}\n                handleCreateBuilding={createBuilding}\n            />\n\n            <SmallCard title='Budynki pod adresem'>\n                <ScrollableList\n                    onAddItem={() => setCreateBuildingModalOpen(true)}\n                >\n                    {renderedBuildings}\n                </ScrollableList>\n            </SmallCard>\n            <br />\n        </>\n    );\n}\n","import Grid from \"@mui/material/Grid\";\nimport React from \"react\";\nimport GenericLogsTab from \"../components/GenericLogsTab\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport AddressContext from \"./AddressContext\";\nimport AddressCard from \"./components/AddressCard\";\nimport AddressCharts from \"./components/AddressCharts\";\nimport BuildingsList from \"./components/BuildingsList\";\n\n\nexport default function AddressPage() {\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        arr.push({ name: 'Statystyki', component: <AddressCharts /> });\n        arr.push({ name: 'Logi', component: <GenericLogsTab /> });\n\n        return arr;\n    }, []);\n\n\n    return (\n        <AddressContext>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item container spacing={2} alignContent='flex-start' xs={12} md={5} lg={4}>\n                    <Grid item xs={12}>\n                        <AddressCard />\n                    </Grid>\n                    <Grid item xs={12} >\n                        <BuildingsList />\n                    </Grid>\n                </Grid>\n            </Grid>\n        </AddressContext>\n    );\n}","import { DayStatsItem } from \"../../../../models/Stats\";\nimport { Chart, ChartSection } from \"./Charts\";\n\n\ninterface MonthlyChartsSectionProps {\n    data: DayStatsItem[]\n}\n\n\nexport default function MonthlyChartsSection(props: MonthlyChartsSectionProps) {\n    return (\n        <ChartSection title='Statystyki miesięczne'>\n            <Chart\n                fullWidth\n                title='Ilość rezerwacji na dzień miesiąca'\n                data={props.data}\n                xKey='day'\n                y={[\n                    { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                ]}\n            />\n            <Chart\n                fullWidth\n                title=\"Faktyczny czas wszystkich rezerwacji\"\n                data={props.data}\n                xKey='day'\n                y={[\n                    { label: 'Czas całkowity [m]', key: 'allTimeMinutes' },\n                ]}\n            />\n            <Chart\n                fullWidth\n                title=\"Średni czas rezerwacji\"\n                data={props.data}\n                xKey='day'\n                y={[\n                    { label: 'Średni planowany czas [m]', key: 'avgPlannedTimeMinutes' },\n                    { label: 'Średni faktyczny czas [m]', key: 'avgActualTimeMinutes' },\n                ]}\n            />\n        </ChartSection>\n    );\n}","import { DayStatsItem } from \"../../../../models/Stats\";\nimport { Chart, ChartSection } from \"./Charts\";\n\n\ninterface WeeklyChartsSectionProps {\n    data: DayStatsItem[]\n}\n\n\nexport default function WeeklyChartsSection(props: WeeklyChartsSectionProps) {\n    return (\n        <ChartSection title='Statystyki tygodniowe'>\n            <Chart\n                fullWidth\n                resolveDay\n                title='Ilość rezerwacji na dzień tygodnia'\n                data={props.data}\n                xKey='day'\n                y={[\n                    { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                ]}\n            />\n            <Chart\n                fullWidth\n                resolveDay\n                title=\"Faktyczny czas wszystkich rezerwacji\"\n                data={props.data}\n                xKey='day'\n                y={[\n                    { label: 'Czas całkowity [m]', key: 'allTimeMinutes' },\n                ]}\n            />\n            <Chart\n                fullWidth\n                resolveDay\n                title=\"Średni czas rezerwacji\"\n                data={props.data}\n                xKey='day'\n                y={[\n                    { label: 'Średni planowany czas [m]', key: 'avgPlannedTimeMinutes' },\n                    { label: 'Średni faktyczny czas [m]', key: 'avgActualTimeMinutes' },\n                ]}\n            />\n        </ChartSection>\n    );\n}","import { BuildingOrRoomChartsData } from \"../../../../models/Stats\";\nimport { ChartsTab, Chart, ChartSection, useCharts } from \"./Charts\";\nimport MonthlyChartsSection from \"./MonthlyChartsSection\";\nimport WeeklyChartsSection from \"./WeeklyChartsSection\";\n\n\n\nexport default function RoomOrBuildingChartTab() {\n    return (\n        <ChartsTab>\n            <ActualLoader />\n        </ChartsTab>\n    );\n}\n\n// need to use actual loading component to access charts context in ChartsTab\nfunction ActualLoader() {\n    const { chartsData } = useCharts<BuildingOrRoomChartsData>();\n\n    return (\n        <>\n            <WeeklyChartsSection data={chartsData.weekly} />\n\n            <MonthlyChartsSection data={chartsData.monthly} />\n\n            <ChartSection defaultOpen title='Wykresy odnośnie użytkowników'>\n                <Chart\n                    fullWidth\n                    title=\"Średnie czasy rezerwacji\"\n                    data={chartsData.users}\n                    xKey='email'\n                    y={[\n                        { label: 'Średni planowany czas', key: 'avgPlannedTimeMinutes' },\n                        { label: 'Średni faktyczny czas', key: 'avgActualTimeMinutes' },\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title='Ilość rezerwacji użytkowników'\n                    data={chartsData.users}\n                    xKey='email'\n                    y={[\n                        { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title=\"Czas wszystkich reserwacji danego użytkownika\"\n                    data={chartsData.users}\n                    xKey='email'\n                    y={[\n                        { label: 'Czas całkowity', key: 'allTimeMinutes' },\n                    ]}\n                />\n            </ChartSection>\n        </>\n    )\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { DetailedBuilding } from \"../../../../../models/Building\";\nimport BuildingService, { BuildingUpdateParams, BuildingViewParams } from \"../../../../../services/BuildingService\";\nimport BuildingContextValue from \"./BuildingContextValue\";\nimport { dynamicPaths } from \"../../../../../shared/path\";\nimport Room from \"../../../../../models/Room\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\n\n\ninterface BuildingContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport const buildingContext: any = React.createContext(null);\n\n\nexport default function BuildingContextProvider(props: BuildingContextProviderProps) {\n    const notify = useNotification();\n    const { reloadMap } = useResourceMap();\n    const urlParams = useParams<BuildingViewParams>();\n\n    const [building, setBuilding] = React.useState<DetailedBuilding>();\n\n\n    React.useLayoutEffect(() => {\n        BuildingService.setPath(urlParams);\n    }, [urlParams])\n\n\n    const getBuilding = React.useCallback(async () => {\n        const resp = await BuildingService.getCurrentOne();\n        setBuilding(resp.data as DetailedBuilding);\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    React.useEffect(() => {\n        getBuilding();\n    }, [getBuilding]);\n\n\n    const getRoomsInBuilding = React.useCallback(async () => {\n        try {\n            const resp = await BuildingService.getRoomsInBuilding();\n            return resp.data as Room[];\n        } catch (err: any) {\n            return [];\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams])\n\n\n    const updateBuilding = React.useCallback(async (data: BuildingUpdateParams) => {\n        try {\n            if (await BuildingService.update(data)) {\n\n                if (\n                    building &&\n                    (\n                        ('addressId' in data && building.address.id !== data.addressId)\n                        || ('name' in data)\n                    )\n                ) {\n                    reloadMap();\n                }\n\n                setBuilding((old) => {\n                    old && Object.keys(data).forEach((key) => {\n                        switch (key) {\n                            case 'addressId':\n                                old.address.id = Number(data[key]);\n                                break;\n                            default:\n                                old[key] = data[key];\n                                break;\n                        }\n                    });\n                    return Object.assign({}, old);\n                })\n                notify('Bydynek zaktualizowany', 'success');\n                return true;\n            }\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify, building, reloadMap]);\n\n\n    const deleteBuilding = React.useCallback(async () => {\n        try {\n            await BuildingService.remove();\n            building && notify(\"Budynek usunięty\", 'success', () => <Redirect to={dynamicPaths.toAddress(building.address.id)} />);\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [notify, building]);\n\n\n    if (!Boolean(building)) return null;\n\n    return (\n        <buildingContext.Provider value={{\n            building,\n            deleteBuilding,\n            getRoomsInBuilding,\n            updateBuilding,\n        } as BuildingContextValue}>\n\n            {props.children}\n\n        </buildingContext.Provider>\n    );\n}","import React from \"react\";\nimport { buildingContext } from \"./BuildingContextProvider\";\nimport BuildingContextValue from \"./BuildingContextValue\";\n\n\nexport default function useBuilding() {\n    return React.useContext(buildingContext) as BuildingContextValue;\n}","import Model from './Model';\nimport Image from './Image';\nimport Building from './Building';\n\nexport enum RoomTypes {\n    LABORATORY = \"Sala laboratoryjna\",\n    CONFERENCE = \"Sala konferencyjna\",\n    LECTURE = \"Sala wykładowa\"\n}\n\nexport type RoomType = RoomTypes.LABORATORY | RoomTypes.CONFERENCE | RoomTypes.LECTURE;\n\ninterface BaseRoom extends Model {\n    name: string,\n    image: Image,\n    roomType: RoomType,\n    seatsCount: number,\n    floor: number,\n    blocked: boolean,\n    occupied: boolean,\n    RFIDTag: null | string\n}\n\nexport default interface Room extends BaseRoom {\n    building: number\n}\n\nexport interface DetailedRoom extends BaseRoom {\n    building: Building\n}","import { Button, Grid } from \"@mui/material\";\nimport { styled } from '@mui/material/styles';\nimport React from \"react\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport SaveIcon from '@mui/icons-material/Save';\nimport { Redirect, useLocation, useParams } from \"react-router-dom\";\nimport Image from \"../../../../models/Image\";\nimport useNotification from \"../../../../contexts/NotificationContext/useNotification\";\nimport { UserViewParams } from \"../../../../services/UserService\";\nimport { BuildingViewParams } from \"../../../../services/BuildingService\";\nimport { RoomViewParams } from \"../../../../services/RoomService\";\nimport ImageService from \"../../../../services/ImageService\";\n\n\n\nconst Input = styled('input')({\n    display: 'none',\n});\n\nconst StyledImage = styled('img')({\n    width: \"fill-available\",\n    maxHeight: '350px'\n});\n\ninterface ImageUploadFieldProps {\n    image?: Image,\n    onUpload?: () => void;\n    onDelete?: () => void;\n}\n\nexport default function ImageUploadField(props: ImageUploadFieldProps) {\n    const notify = useNotification();\n    const location = useLocation();\n    const urlParams = useParams<UserViewParams | BuildingViewParams | RoomViewParams>();\n    const [uploadedImage, setUploadedImage] = React.useState<Blob>();\n\n\n    const handleSubmit = React.useCallback(async (evt: React.FormEvent) => {\n        evt.preventDefault();\n        if (!uploadedImage) {\n            notify(\"Najpierw załaduj nowy obraz\", \"warning\");\n            return;\n        }\n        try {\n            await ImageService.upload(urlParams, uploadedImage);\n            props.onUpload && props.onUpload();\n            notify(\"Obraz został zmieniony\", 'success',\n                () => <Redirect to={location.pathname} /> // rerender the current page\n            );\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        uploadedImage,\n        props,\n        notify,\n        location,\n        urlParams,\n    ]);\n\n\n    const handleImageUpload = React.useCallback((evt: any) => {\n        if (evt.target.files && evt.target.files[0]) {\n            const img = evt.target.files[0];\n            setUploadedImage(img);\n        }\n    }, []);\n\n\n    const handleRemoveImgae = React.useCallback(async () => {\n        try {\n            await ImageService.remove(urlParams);\n            props.onDelete && props.onDelete();\n            notify(\"Przywrócono domyślny obraz, załaduj ponownie aby zobaczyć rezultat.\", \"success\",\n                () => <Redirect to={location.pathname} /> // rerender the current page\n            );\n\n        } catch (err: any) {\n            notify(err.description, \"error\");\n        }\n    }, [\n        props,\n        notify,\n        location,\n        urlParams,\n    ]);\n\n\n    return (\n        <Grid container component=\"form\"\n            onSubmit={handleSubmit}\n            direction=\"row\"\n            alignItems=\"stretch\"\n            spacing={2}\n        >\n            <Grid item xs={12} sm={9}>\n                <StyledImage\n                    src={uploadedImage ? URL.createObjectURL(uploadedImage) : ImageService.getLink(props.image)}\n                    alt='nowy obraz'\n                />\n            </Grid>\n            <Grid item xs={12} sm={3} sx={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                alignItems: \"center\",\n                justifyContent: \"space-between\",\n            }}>\n                <label htmlFor=\"upload-obrazu\">\n                    <Input\n                        accept=\"*.(jpg|png)\"\n                        id=\"upload-obrazu\"\n                        type=\"file\"\n                        onChange={handleImageUpload}\n                    />\n                    <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        component=\"span\">\n                        Wybierz zdjęcie\n                    </Button>\n                </label>\n\n                <Button color=\"error\"\n                    startIcon={<DeleteIcon />}\n                    onClick={handleRemoveImgae}\n                >\n                    Usuń\n                </Button>\n\n                <Button\n                    type=\"submit\"\n                    color=\"success\"\n                    startIcon={<SaveIcon />}\n                >\n                    Zapisz\n                </Button>\n            </Grid>\n        </Grid>\n    )\n}","import Grid from \"@mui/material/Grid\";\nimport { SelectChangeEvent } from \"@mui/material/Select/SelectInput\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport GenericModal from \"../../components/GenericModal\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport { BuildingUpdateParams } from \"../../../../../services/BuildingService\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport { useBuilding } from \"../BuildingContext\";\nimport MobileTimePicker from \"@mui/lab/MobileTimePicker\";\nimport { timeFormat } from \"../../../../../shared/utils\";\nimport ImageUploadField from \"../../components/ImageUploadField\";\nimport Divider from \"@mui/material/Divider\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\n\ninterface BuildingEditFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\n\n\nfunction timeToDate(value: string) {\n    const [h, m] = value.split(':');\n    return new Date(0, 0, 0, Number(h), Number(m));\n}\n\n\nexport default function BuildingEditForm({\n    open,\n    onClose,\n}: BuildingEditFormProps) {\n    const { allAddresses } = useResourceMap();\n    const { updateBuilding, building } = useBuilding();\n\n    const [data, setData] = React.useState<BuildingUpdateParams>({});\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n\n        setData((old: BuildingUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleTime = React.useCallback((field: 'closeTime' | 'openTime', value: Date) => {\n        setData(old => {\n            old[field] = timeFormat.format(value);\n            return Object.assign({}, old);\n        });\n    }, [])\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateBuilding(data)) {\n            close();\n        }\n    }, [\n        data,\n        close,\n        updateBuilding,\n    ]);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<string | number>): void => {\n        let value: string | number = event.target.value;\n        if (event.target.name === 'addressId') value = Number(value);\n\n        event.target && setData((old: BuildingUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno edycji budynku\"\n        >\n            <Stack spacing={3}>\n\n                <ImageUploadField image={building.image} />\n                <Divider />\n\n                <FormGridContainer\n                    title='Edycja budynku'\n                    subtitle=\"Zmień właściwości budynku i zatwierdź zmiany.\"\n                    onSubmit={handleSubmit}\n                    onCancel={onClose}\n                >\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"name\"\n                            label=\"Nazwa\"\n                            name=\"name\"\n                            autoFocus\n                            value={data.name ?? building.name}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6} >\n                        <MobileTimePicker\n                            label=\"Godzina otwarcia\"\n                            inputFormat=\"HH:mm\"\n                            value={timeToDate(data.openTime ?? building.openTime)}\n                            onChange={(value: any) => handleTime('openTime', value)}\n                            renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <MobileTimePicker\n                            label=\"Godzina zamknięcia\"\n                            inputFormat=\"HH:mm\"\n                            value={timeToDate(data.closeTime ?? building.closeTime)}\n                            onChange={(value: any) => handleTime('closeTime', value)}\n                            renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                        />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControl fullWidth>\n                            <InputLabel id=\"wybierz-adres\">Adres</InputLabel>\n                            <Select\n                                labelId=\"wybierz-adres\"\n                                name=\"addressId\"\n                                value={data.addressId ?? building.address.id}\n                                label=\"Adres\"\n                                onChange={handleSelectChange}\n                            >\n                                {allAddresses.map(({ name, id }) => <MenuItem key={name} value={id} >{name} </MenuItem>)}\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                </FormGridContainer>\n            </Stack>\n        </GenericModal>\n    );\n}","import FormControl from \"@mui/material/FormControl\";\nimport Grid from \"@mui/material/Grid\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { RoomType, RoomTypes } from \"../../../../../models/Room\";\nimport { CreateRoomParams } from \"../../../../../services/RoomService\";\nimport GenericModal from \"../../components/GenericModal\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\ninterface CreateRoomFormProps {\n    open: boolean,\n    onClose: () => void,\n    handleCreateRoom: (data: CreateRoomParams) => Promise<boolean>\n}\n\n\nexport default function CreateRoomForm({\n    open,\n    onClose,\n    handleCreateRoom,\n}: CreateRoomFormProps) {\n\n    const [data, setData] = React.useState<CreateRoomParams>({\n        name: '',\n        roomType: RoomTypes.LECTURE,\n        seatsCount: 50,\n        floor: 0\n    });\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n        setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<RoomType | number>): void => {\n        let value: string | number = event.target.value;\n        if (event.target.name === 'buildingId') value = Number(value);\n\n        event.target && setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await handleCreateRoom(data)) {\n            onClose();\n        }\n\n    }, [\n        data,\n        handleCreateRoom,\n        onClose,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno edycji budynku\"\n        >\n            <FormGridContainer\n                title='Dodaj nową salę'\n                subtitle=\"Wypełnij dane nowej sali i kliknij zatwierdź.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"name\"\n                        label=\"Nazwa\"\n                        name=\"name\"\n                        autoFocus\n                        value={data.name}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <InputLabel id=\"room-type\">Typ Sali</InputLabel>\n                        <Select\n                            required\n                            labelId=\"room-type\"\n                            id=\"roomType\"\n                            value={data.roomType}\n                            name=\"roomType\"\n                            label=\"Typ Sali\"\n                            onChange={handleSelectChange}\n                        >\n                            {Object.values(RoomTypes).map(val => <MenuItem key={val} value={val}>{val}</MenuItem>)}\n\n                        </Select>\n                    </FormControl>\n                </Grid>\n\n                <Grid item xs={6} >\n                    <TextField\n                        required\n                        name=\"seatsCount\"\n                        label=\"Ilość miejsc\"\n                        type=\"number\"\n                        id=\"seatsCount\"\n                        value={data.seatsCount}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        name=\"floor\"\n                        label=\"Piętro\"\n                        type=\"number\"\n                        id=\"floor\"\n                        value={data.floor}\n                        onChange={handleChange}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal >\n    );\n}","\n\n\nexport enum FavType {\n    Building = 'building-item',\n    Room = 'room-item'\n}\n\n\ninterface FavouriteItem {\n    id: number,\n    name: string,\n    type: FavType,\n}\n\nexport interface FavouriteBuilding extends FavouriteItem {\n    addressId: number,\n}\n\nexport interface FavouriteRoom extends FavouriteBuilding {\n    buildingId: number,\n}\n\n\nexport default interface Metadata {\n    notes?: string,\n    favourites?: (FavouriteBuilding | FavouriteRoom)[]\n}\n","import StarIcon from '@mui/icons-material/Star';\nimport StarBorderIcon from '@mui/icons-material/StarBorder';\nimport IconButton from '@mui/material/IconButton';\nimport React from 'react';\nimport { FavouriteBuilding, FavouriteRoom } from '../../../../models/Metadata';\nimport MetadataService from '../../../../services/MetadataService';\n\n\n\ninterface FavouriteButtonProps {\n    data: FavouriteBuilding | FavouriteRoom\n}\n\n\nexport default function FavouriteButton(props: FavouriteButtonProps) {\n    const [marked, setMarked] = React.useState(false);\n\n    React.useEffect(() => {\n        setMarked(MetadataService.isFavourite(props.data));\n    }, [props.data]);\n\n\n    const addToFavourites = React.useCallback(() => {\n        if (marked) {\n            MetadataService.removeFavourite(props.data);\n        } else {\n            MetadataService.addFavourite(props.data);\n        }\n\n        setMarked(old => !old);\n    }, [\n        marked,\n        props.data,\n    ]);\n\n\n    return (\n        <IconButton sx={{display:'inline'}} onClick={addToFavourites} color='warning'>\n            {marked ? <StarIcon /> : <StarBorderIcon />}\n        </IconButton>\n    );\n}","import { Card, CardContent, CardHeader, CardMedia } from \"@mui/material\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport React from \"react\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport { useBuilding } from \"../BuildingContext\";\nimport { BuildingEditForm } from \"../Forms\";\nimport FavouriteButton from \"../../components/FavouriteButton\";\nimport { FavType } from \"../../../../../models/Metadata\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport AppLink from \"../../../../../shared/components/AppLink\";\nimport { dynamicPaths } from \"../../../../../shared/path\";\nimport DatesFooter from \"../../components/DatesFooter\";\n\n\n\n\nexport default function BuildingView() {\n    const { building, deleteBuilding } = useBuilding();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState<boolean>(false);\n    const [editModalOpen, setEditModalOpen] = React.useState<boolean>(false);\n\n\n    const options = React.useMemo(() => [\n        {\n            label: 'Edytuj',\n            action: () => setEditModalOpen(true),\n            icon: <EditIcon color='success' />\n        }, {\n            label: 'Usuń',\n            action: () => setDeleteModalOpen(true),\n            icon: <DeleteIcon color='error' />\n        }\n    ], []);\n\n\n    if (!Boolean(building)) return null;\n\n    return (\n        <>\n            <DeleteModal\n                objectName={building.name}\n                open={deleteModalOpen}\n                onClose={() => setDeleteModalOpen(false)}\n                onSuccess={deleteBuilding}\n            />\n\n            <BuildingEditForm\n                open={editModalOpen}\n                onClose={() => setEditModalOpen(false)}\n            />\n\n            <Card elevation={0}>\n                <CardHeader\n                    action={<MoreVertMenu options={options} />}\n                    title={\n                        <>\n                            Budynek {building.name}\n                            <FavouriteButton data={{\n                                id: building.id,\n                                name: building.name,\n                                type: FavType.Building,\n                                addressId: building.address.id,\n                            }} />\n                        </>\n                    }\n                    subheader={<>{building.openTime} - {building.closeTime}</>}\n                />\n                <CardMedia\n                    component=\"img\"\n                    height=\"350\"\n                    image={ImageService.getLink(building.image)}\n                    alt={building.name}\n                />\n                <CardContent>\n                    <AppLink withIcon to={dynamicPaths.toAddress(building.address.id)}>\n                        {building.address.town},&nbsp;{building.address.street}&nbsp;{building.address.number}\n                    </AppLink>\n                    <br />\n                    <DatesFooter model={building} />\n                </CardContent>\n            </Card>\n        </>\n    );\n}","import React from \"react\";\nimport Room from \"../../../../../models/Room\";\nimport ScrollableList, { ScrollableListItem } from \"../../components/ScrollableList\";\nimport { useBuilding } from \"../BuildingContext\";\nimport { CreateRoomForm } from \"../Forms\";\nimport RoomService, { CreateRoomParams } from \"../../../../../services/RoomService\";\nimport { useParams } from \"react-router-dom\";\nimport { BuildingViewParams } from \"../../../../../services/BuildingService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport SmallCard from \"../../components/SmallCard\";\n\n\n\nexport default function RoomsList() {\n    const { getRoomsInBuilding } = useBuilding();\n    const { reloadMap } = useResourceMap();\n\n    const urlParams = useParams() as BuildingViewParams;\n    const notify = useNotification();\n\n    const [createRoomModalOpen, setCreateRoomModalOpen] = React.useState<boolean>(false);\n    const [rooms, setRooms] = React.useState<Room[]>();\n\n\n    const load = React.useCallback(async () => {\n        const rooms = await getRoomsInBuilding();\n        setRooms(rooms);\n    }, [\n        getRoomsInBuilding\n    ]);\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    const createRoom = React.useCallback(async (data: CreateRoomParams) => {\n        try {\n            await RoomService.create(urlParams, data);\n            notify('Nowa sala utworzona!', 'success');\n            load();\n            reloadMap();\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n        load,\n        urlParams,\n    ]);\n\n\n    const renderedRooms = React.useMemo(() => {\n        return rooms?.map(item => <ScrollableListItem\n            key={item.id}\n            primary={`Sala ${item.name}`}\n            link={`./${item.building}/rooms/${item.id}`}\n        />)\n    }, [rooms])\n\n\n    return (\n        <>\n            <CreateRoomForm\n                handleCreateRoom={createRoom}\n                open={createRoomModalOpen}\n                onClose={() => setCreateRoomModalOpen(false)}\n            />\n\n            <SmallCard title=\"Sale w budynku\">\n                <ScrollableList onAddItem={() => setCreateRoomModalOpen(true)}>\n                    {renderedRooms}\n                </ScrollableList>\n            </SmallCard>\n            <br />\n        </>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport React from \"react\";\nimport GenericLogsTab from \"../components/GenericLogsTab\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport RoomOrBuildingChartTab from \"../components/RoomOrBuildingChartTab\";\nimport BuildingContext from \"./BuildingContext\";\nimport BuildingCard from \"./components/BuildingCard\";\nimport RoomsList from \"./components/RoomsList\";\n\n\nexport default function BuildingPage() {\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        arr.push({ name: 'Statystyki', component: <RoomOrBuildingChartTab /> });\n        arr.push({ name: 'Logi', component: <GenericLogsTab /> });\n\n        return arr;\n    }, []);\n\n\n    return (\n        <BuildingContext>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item container spacing={2} alignContent='flex-start' xs={12} md={5} lg={4}>\n                    <Grid item xs={12}>\n                        <BuildingCard />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <RoomsList />\n                    </Grid>\n                </Grid>\n            </Grid>\n        </BuildingContext>\n    );\n}","import { List, ListItemText } from \"@mui/material\";\nimport React from \"react\";\nimport useSession from \"../../../../auth/useSession\";\nimport { FavouriteBuilding, FavouriteRoom, FavType } from \"../../../../models/Metadata\";\nimport MetadataService from \"../../../../services/MetadataService\";\nimport AppLink from \"../../../../shared/components/AppLink\";\nimport SmallCard from \"../components/SmallCard\";\nimport { dynamicPaths } from \"../../../../shared/path\";\n\n\n\n\nfunction getCorrectListItem(data: FavouriteBuilding | FavouriteRoom): React.ReactNode {\n    switch (data.type) {\n        case FavType.Building: {\n            const { addressId, id, name } = data as FavouriteBuilding;\n            return <ListItemText key={name + id} primary={<AppLink withIcon to={dynamicPaths.toBuilding(addressId, id)}>Budynek {name}</AppLink>} />\n        }\n        case FavType.Room: {\n            const { addressId, buildingId, id, name } = data as FavouriteRoom;\n            return <ListItemText key={name + id} primary={<AppLink withIcon to={dynamicPaths.toRoom(addressId, buildingId, id)}>Sala {name}</AppLink>} />\n        }\n        default: return null;\n    }\n}\n\n\nexport default function Favourites() {\n    const { user } = useSession();\n\n    const [data, setData] = React.useState<(FavouriteBuilding | FavouriteRoom)[]>()\n\n\n    React.useEffect(() => {\n        setData(MetadataService.favourites);\n    }, [user])\n\n\n    return (\n        <SmallCard title='Ulubione'>\n            <List>\n                {\n                    data?.map(item => getCorrectListItem(item))\n                }\n                {\n                    data?.length === 0 &&\n                    <ListItemText color='text.secondary' primary='Brak ulubionych' />\n                }\n            </List>\n        </SmallCard>\n    )\n}\n\n\n","import { Button, InputBase } from \"@mui/material\";\nimport Box from \"@mui/system/Box\";\nimport React from \"react\";\nimport SaveIcon from '@mui/icons-material/Save';\nimport useNotification from \"../../../../contexts/NotificationContext/useNotification\";\nimport SmallCard from \"../components/SmallCard\";\nimport MetadataService from \"../../../../services/MetadataService\";\n\n\n\nexport default function Notebook() {\n    const notify = useNotification();\n\n    const [data, setData] = React.useState<string>();\n\n\n    React.useEffect(() => {\n        setData(MetadataService.notes)\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        if (!data) return;\n\n        try {\n            MetadataService.notes = data;\n\n            notify('Notatki zostały zapisane', 'success');\n            setData(undefined);\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        data,\n        notify,\n    ]);\n\n\n    const handleChange = React.useCallback(async (event: React.ChangeEvent<HTMLInputElement>) => {\n        setData(event.target.value)\n    }, []);\n\n\n    return (\n        <SmallCard title='Notatnik'>\n            <Box component='form' onSubmit={handleSubmit} sx={{ display: 'flex', justifyContent: 'flex-end', flexDirection: 'column' }}>\n                <InputBase\n                    aria-label=\"twoje notatki\"\n                    title='twoje notatki'\n\n                    multiline\n                    minRows={3}\n                    maxRows={10}\n                    name='search'\n                    value={data ?? MetadataService.notes ?? ''}\n                    onChange={handleChange}\n                    placeholder=\"Twoje notatki\"\n                    sx={{ width: '100%', height: '100%', p: 1, bgcolor: 'background.default' }}\n                    inputProps={{ 'aria-label': 'Twoje notatki' }}\n                />\n                <Button\n                    title='Zapisz notatki'\n                    aria-label='Zapisz notatki'\n                    sx={{ mr: '0px', ml: 'auto' }}\n                    startIcon={<SaveIcon />}\n                    type=\"submit\">\n                    Zapisz\n                </Button>\n            </Box>\n        </SmallCard >\n    );\n}\n","import GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SmallCard from \"../components/SmallCard\";\n\n\n\nexport default function HomeReservations() {\n    return (\n        <SmallCard title='Rezerwacje'>\n            <GenericReservationsTab />\n        </SmallCard>\n    );\n}\n","import { Grid } from \"@mui/material\";\nimport Favourites from \"./Favourites\";\nimport Notebook from \"./Notebook\";\nimport HomeReservations from \"./HomeReservations\";\n\n\n\nexport default function HomePage() {\n    return (\n        <Grid container spacing={2}>\n            <Grid item xs={12} lg={8}>\n                <HomeReservations />\n            </Grid>\n            <Grid item container spacing={2} xs={12} lg={4}\n                alignContent='flex-start'\n            >\n                <Grid item xs={12}>\n                    <Notebook />\n                </Grid>\n                <Grid item xs={12} >\n                    <Favourites />\n                </Grid>\n            </Grid>\n        </Grid>\n    );\n}","import * as React from 'react';\nimport TextField from '@mui/material/TextField';\nimport { Divider, FormControl, Grid, InputLabel, MenuItem, Select, SelectChangeEvent, Stack } from '@mui/material';\nimport { RoomUpdateParams } from '../../../../../services/RoomService';\nimport { RoomType, RoomTypes } from '../../../../../models/Room';\nimport { useRoomContext } from '../RoomContext';\nimport ImageUploadField from '../../components/ImageUploadField';\nimport { useResourceMap } from '../../../../../contexts/ResourceMapContext';\nimport Switch from '@mui/material/Switch';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport GenericModal from '../../components/GenericModal';\nimport FormGridContainer from '../../../../../shared/components/FormGridContainer';\n\n\n\ninterface RoomEditFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\n\nexport default function RoomEditForm({\n    open,\n    onClose,\n}: RoomEditFormProps) {\n    const { room, updateRoom } = useRoomContext();\n    const { allBuildings } = useResourceMap();\n\n    const [data, setData] = React.useState<RoomUpdateParams>({});\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number | boolean = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            case \"blocked\":\n                value = !event.target.checked;\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n\n        setData((old: RoomUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<RoomType | number>): void => {\n        let value: string | number = event.target.value;\n        if (event.target.name === 'buildingId') value = Number(value);\n\n        event.target && setData((old: RoomUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateRoom(data)) {\n            onClose();\n        }\n    }, [\n        data,\n        updateRoom,\n        onClose\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno usuwania obiektu\"\n            sx={{\n                maxWidth: \"450px\",\n            }}\n        >\n            <Stack spacing={2}>\n                <ImageUploadField image={room.image} />\n                <Divider />\n\n                <FormGridContainer\n                    title='Edycja sali'\n                    subtitle=\"Zmień właściwości pokoju i zatwierdź zmiany.\"\n                    onSubmit={handleSubmit}\n                    onCancel={onClose}\n                >\n\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"name\"\n                            label=\"Nazwa\"\n                            name=\"name\"\n                            autoFocus\n                            value={data.name ?? room.name}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControl fullWidth>\n                            <InputLabel id=\"room-type\">Typ Sali</InputLabel>\n                            <Select\n                                labelId=\"room-type\"\n                                id=\"roomType\"\n                                value={data.roomType ?? room.roomType}\n                                name=\"roomType\"\n                                label=\"Typ Sali\"\n                                onChange={handleSelectChange}\n                            >\n                                {Object.values(RoomTypes).map(val => <MenuItem key={val} value={val}>{val}</MenuItem>)}\n\n                            </Select>\n                        </FormControl>\n                    </Grid>\n\n                    <Grid item xs={6} >\n                        <TextField\n                            required\n                            name=\"seatsCount\"\n                            label=\"Ilość miejsc\"\n                            type=\"number\"\n                            id=\"seatsCount\"\n                            value={data.seatsCount ?? room.seatsCount}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <TextField\n                            required\n                            name=\"floor\"\n                            label=\"Piętro\"\n                            type=\"number\"\n                            id=\"floor\"\n                            value={data.floor ?? room.floor}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControl fullWidth>\n                            <InputLabel id=\"wybierz-budynek\">Budynek</InputLabel>\n                            <Select\n                                labelId=\"wybierz-budynek\"\n                                name=\"buildingId\"\n                                value={data.buildingId ?? room.building.id}\n                                label=\"Budynek\"\n                                onChange={handleSelectChange}\n                            >\n                                {allBuildings.map(({ name, id }) => <MenuItem key={name} value={id} >Budynek &nbsp;{name} </MenuItem>)}\n                            </Select>\n                        </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControlLabel\n                            labelPlacement=\"start\"\n                            control={<Switch id=\"room-blocked\" name=\"blocked\"\n                                inputProps={{ 'aria-label': 'controlled' }}\n                                onChange={handleChange}\n                                checked={!(data.blocked ?? room.blocked)}\n                            />}\n                            label=\"Dostępność Sali\"\n                        />\n                    </Grid>\n\n                </FormGridContainer>\n            </Stack>\n        </GenericModal>\n    );\n}","import GenericModal from \"../../components/GenericModal\";\nimport RfidForm from \"../../components/RfidForm\";\nimport { useRoomContext } from \"../RoomContext\";\n\n\ninterface RfidModalRormProps {\n    open: boolean,\n    onClose: () => void,\n}\n\nexport default function RfidModalRorm(props: RfidModalRormProps) {\n    const { updateRFIDTag } = useRoomContext();\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={props.onClose}\n            aria-label=\"Okno przypisania tagu RFID\"\n            sx={{\n                maxWidth: \"400px\"\n            }}\n        >\n            <RfidForm\n                headline=\"Użyj czytnika, aby wprowadzić tag.\"\n                bodyText='Jeśli nie chcesz wprowadzać zmian, naciśnij \"Zamknij\"'\n                onScan={updateRFIDTag}\n                onClose={props.onClose}\n            />\n        </GenericModal>\n    );\n}\n","import CancelIcon, { } from '@mui/icons-material/Cancel';\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\n\n\ninterface YesNoIconProps {\n    value: boolean,\n    title?: string,\n    fontSize?: 'small' | 'medium' | 'large',\n}\n\n\nexport default function YesNoIcon(props: YesNoIconProps) {\n    const { value, ...rest } = props;\n\n    return (\n        value ?\n            <CheckCircleOutlineIcon color=\"success\" {...rest} />\n            : <CancelIcon sx={{ color: \"red\" }} {...rest} />\n    )\n}","import { Chip, IconButton, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\nimport React from \"react\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport { DetailedRoom } from \"../../../../../models/Room\";\nimport AppLink from \"../../../../../shared/components/AppLink\";\nimport { RfidForm } from \"../Forms\";\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport YesNoIcon from \"./YesNoIcon\";\n\n\ninterface RoomTableInfoProps {\n    room: DetailedRoom,\n    deleteTag: () => Promise<void>\n}\n\n\nexport default function RoomTableInfo({\n    room, deleteTag\n}: RoomTableInfoProps) {\n    const { getBuildingLink } = useResourceMap();\n    const [rfidTagModalOpen, setRfidTagModalOpen] = React.useState<boolean>(false);\n\n    const tableRows = React.useMemo(() => {\n        return [\n            {\n                label: \"Ilość miejsc\",\n                value: room.seatsCount\n            }, {\n                label: \"Piętro\",\n                value: room.floor === 0 ? \"parter\" : room.floor\n            }, {\n                label: \"Ilość miejsc\",\n                value: room.seatsCount\n            }, {\n                label: \"Budynek\",\n                value: <AppLink withIcon to={getBuildingLink(room.building.id)}> {room.building.name} </AppLink>\n            }, {\n                label: \"Aktualnie wolny\",\n                value: <YesNoIcon value={!room.occupied} />\n            }, {\n                label: \"Tag RFID\",\n                value: room.RFIDTag ?\n                    <Chip label={room.RFIDTag} onDelete={deleteTag} />\n                    : <IconButton size=\"small\"\n                        onClick={() => setRfidTagModalOpen(true)}\n                        sx={{ p: '0px' }}\n                    >\n                        <AddCircleIcon />\n                    </IconButton>\n            }, {\n                label: \"Dostępny do rezerwacji\",\n                value: <YesNoIcon value={!room.blocked} />\n            },\n        ];\n    }, [\n        room,\n        deleteTag,\n        getBuildingLink,\n    ]);\n\n\n    const RenderedRows = React.useMemo(() => {\n        return tableRows.map(({ label, value }, index) =>\n            <TableRow hover key={index}>\n                <TableCell sx={{ color: \"text.secondary\" }} align=\"left\">{label}</TableCell>\n                <TableCell sx={{ color: \"primary.main\", fontWeight: \"bold\" }} align=\"left\">{value}</TableCell>\n            </TableRow>\n        )\n    }, [tableRows])\n\n\n    return (\n        <>\n            <RfidForm\n                open={rfidTagModalOpen}\n                onClose={() => setRfidTagModalOpen(false)}\n            />\n\n            <TableContainer >\n                <Table aria-label=\"room-info-table\" size=\"small\">\n                    <TableHead sx={{ display: 'none' }}>\n                        <TableRow>\n                            <TableCell align=\"left\">Właściwość</TableCell>\n                            <TableCell align=\"left\">stan</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {RenderedRows}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </>\n    );\n}\n","import * as React from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\n\n\nexport default function Loading() {\n  return (\n    <Box sx={{\n      display: 'flex'\n    }}>\n      <CircularProgress />\n    </Box>\n  );\n}","import FormControl from \"@mui/material/FormControl\";\nimport Grid from \"@mui/material/Grid\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select from \"@mui/material/Select\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport ReservationService, { CreateReservationData } from \"../../../../../services/ReservationService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\nimport DateTimePicker from \"../DateTimePicker\";\n\n\n\ninterface CreateReservationFormProps {\n    roomId?: number\n    onCancel: () => void\n}\n\n\nexport default function CreateReservationForm(props: CreateReservationFormProps) {\n    const notify = useNotification();\n    const { allRooms } = useResourceMap();\n    const [data, setData] = React.useState<CreateReservationData>({\n        title: '',\n        description: '',\n        plannedStart: (new Date()).toString(),\n        plannedEnd: (new Date(Date.now() + 3600_000)).toString(),\n        roomId: props.roomId ?? 0\n    });\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        try {\n            await ReservationService.createOne(data);\n            notify(\"Rezerwacja utworzona prawidłowo!\", 'success');\n            props.onCancel()\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [data, notify, props]);\n\n\n    return (\n        <FormGridContainer\n            title='Tworzenie rezerwacji'\n            subtitle=\"Stwórz rezerwację w wybranym przez siebie pokoju. Aby zobaczyć zmiany, przeładu.\"\n            onSubmit={handleSubmit}\n            onCancel={props.onCancel}\n        >\n            <Grid item xs={12}>\n                <TextField\n                    title=\"Tytuł rezerwacji\"\n                    inputProps={{ title: \"Tytuł rezerwacji\" }}\n                    autoFocus\n                    required\n                    fullWidth\n                    // multiline\n                    maxRows={4}\n                    label=\"Tytuł\"\n                    id=\"outlined-multiline-flexible\"\n                    name='title'\n                    value={data.title}\n                    onChange={handleChange}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <TextField\n                    required\n                    fullWidth\n                    multiline\n                    maxRows={20}\n                    label=\"Opis\"\n                    id=\"outlined-multiline-flexible\"\n                    name='description'\n                    value={data.description}\n                    onChange={handleChange}\n                />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <DateTimePicker\n                    label=\"Początek\"\n                    value={data.plannedStart}\n                    onChange={(value: any) => setData(old => ({ ...old, plannedStart: value }))}\n                />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <DateTimePicker\n                    label=\"Koniec\"\n                    value={data.plannedEnd}\n                    onChange={(value: any) => setData(old => ({ ...old, plannedEnd: value }))}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <FormControl fullWidth>\n                    <InputLabel id=\"wybierz-salę\">Sala</InputLabel>\n                    <Select\n                        required\n                        labelId=\"wybierz-budynek\"\n                        name=\"buildingId\"\n                        value={data.roomId}\n                        label=\"Budynek\"\n                        onChange={(evt: any) => setData(old => ({ ...old, roomId: Number(evt.target.value) }))}\n                    >\n                        {allRooms.map(({ name, id }) => <MenuItem key={name} value={id} >Sala &nbsp;{name} </MenuItem>)}\n                    </Select>\n                </FormControl>\n            </Grid>\n        </FormGridContainer>\n    );\n}","import GenericModal from \"../../components/GenericModal\";\nimport CreateReservationForm from \"./CreateReservationForm\";\n\n\ninterface CreateReservationModalProps {\n    open: boolean,\n    onClose: () => void,\n    roomId?: number\n}\n\nexport default function CreateReservationModal(props: CreateReservationModalProps) {\n    return (\n        <GenericModal\n            open={props.open}\n            aria-label='Okno do tworzenia rezerwacji'\n            onClose={props.onClose}\n        >\n            <CreateReservationForm\n                roomId={props.roomId}\n                onCancel={props.onClose}\n            />\n\n        </GenericModal>\n    );\n}","import { Card, CardContent, CardHeader, CardMedia } from \"@mui/material\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport RoomTableInfo from \"./RoomTableInfo\";\nimport React from \"react\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport { useRoomContext } from \"../RoomContext\";\nimport Loading from \"../../../../../shared/components/Loading\";\nimport CreateReservationModal from \"../../components/CreateReservationModal/CreateReservationModal\";\nimport { RoomEditForm } from \"../Forms\";\nimport FavouriteButton from \"../../components/FavouriteButton\";\nimport { FavType } from \"../../../../../models/Metadata\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport DatesFooter from \"../../components/DatesFooter\";\n\n\n\nexport default function RoomCard() {\n    const { room, deleteRoom, deleteRFIDTag } = useRoomContext();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState<boolean>(false);\n    const [editModalOpen, setEditModalOpen] = React.useState<boolean>(false);\n    const [createReservationModalOpen, setCreateReservationModalOpen] = React.useState<boolean>(false);\n\n\n    const options = React.useMemo(() => [\n        {\n            label: 'Zarezerwuj',\n            icon: <AddCircleIcon color='primary' />,\n            action: () => setCreateReservationModalOpen(true)\n        }, {\n            label: 'Edytuj',\n            action: () => setEditModalOpen(true),\n            icon: <EditIcon color='success' />\n        }, {\n            label: 'Usuń',\n            action: () => setDeleteModalOpen(true),\n            icon: <DeleteIcon color='error' />\n        }\n    ], []);\n\n\n    return (\n        !Boolean(room) ? <Loading /> :\n            <>\n                <DeleteModal\n                    objectName={room.name}\n                    open={deleteModalOpen}\n                    onClose={() => setDeleteModalOpen(false)}\n                    onSuccess={deleteRoom}\n                />\n\n                <RoomEditForm\n                    open={editModalOpen}\n                    onClose={() => setEditModalOpen(false)}\n                />\n\n                <CreateReservationModal\n                    roomId={room && room.id}\n                    open={createReservationModalOpen}\n                    onClose={() => setCreateReservationModalOpen(false)}\n                />\n\n                <Card elevation={0}>\n                    <CardHeader\n                        action={<MoreVertMenu options={options} />}\n                        title={\n                            <>\n                                {room.name}\n                                <FavouriteButton data={{\n                                    id: room.id,\n                                    name: room.name,\n                                    type: FavType.Room,\n                                    addressId: room.building.address,\n                                    buildingId: room.building.id\n                                }} />\n                            </>\n                        }\n                        subheader={<>\n                            {room.roomType}\n                        </>}\n                    />\n                    <CardMedia\n                        component=\"img\"\n                        height=\"350\"\n                        image={ImageService.getLink(room.image)}\n                        alt={room.name}\n                    />\n                    <CardContent>\n                        <RoomTableInfo room={room} deleteTag={deleteRFIDTag} />\n                        <br />\n                        <DatesFooter model={room} />\n                    </CardContent>\n                </Card>\n            </>\n    );\n}\n","import { RoomContextProvider } from \"./RoomContext\";\nimport React from \"react\";\nimport RoomOrBuildingChartTab from \"../components/RoomOrBuildingChartTab\";\nimport Grid from \"@mui/material/Grid\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport GenericLogsTab from \"../components/GenericLogsTab\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport RoomCard from \"./components/RoomCard\";\n\n\n\nexport default function RoomPage() {\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        arr.push({ name: 'Statystyki', component: <RoomOrBuildingChartTab /> });\n        arr.push({ name: 'Logi', component: <GenericLogsTab /> });\n\n        return arr;\n    }, []);\n\n\n    return (\n        <RoomContextProvider>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item xs={12} md={5} lg={4}>\n                    <RoomCard />\n                </Grid>\n            </Grid>\n        </RoomContextProvider>\n    );\n}\n","import Service from \"./Service\";\n\n\nexport interface SettingsUpdateParams {\n    maxImageSize?: number,\n    defaultUserAccess?: number,\n    maxReservationTime?: number,\n    minReservationTime?: number,\n    reservationHistory?: number,\n    requestHistory?: number\n}\n\n\nclass SettingsService extends Service {\n\n    public getAll() {\n        return this.get('/configurations');\n    }\n\n    public update(data: SettingsUpdateParams) {\n        return this.patch('/configurations', data);\n    }\n}\n\nexport default new SettingsService();","import React from \"react\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport Settings from \"../../../../../models/Settings\";\nimport SettingsService, { SettingsUpdateParams } from \"../../../../../services/SettingsService\";\nimport SettingsContextValue from \"./SettingsContextValue\";\n\n\n\nexport const settingsContext: any = React.createContext(null);\n\n\ninterface SettingsContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function SettingsContextProvider(props: SettingsContextProviderProps) {\n    const notify = useNotification();\n\n    const [settings, setSettings] = React.useState<Settings>();\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await SettingsService.getAll();\n            setSettings(resp.data as Settings);\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [notify]);\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    const updateSettings = React.useCallback(async (data: SettingsUpdateParams) => {\n        try {\n            await SettingsService.update(data);\n            setSettings(old => ({\n                ...old,\n                ...data as Settings\n            }))\n            notify(\"Ustawienia zostały zaktualizowane\", 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false\n    }, [notify]);\n\n\n    if (!settings) return null;\n\n    return (\n        <settingsContext.Provider value={{\n            settings,\n            updateSettings\n        } as SettingsContextValue}>\n            {props.children}\n        </settingsContext.Provider>\n    );\n}","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport TableCell from '@mui/material/TableCell';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport TableSortLabel from '@mui/material/TableSortLabel';\nimport { visuallyHidden } from '@mui/utils';\nimport { EndpointStatItem } from '../../../../../../models/Stats';\n\n\n\n\n\ninterface HeadCell {\n    disablePadding: boolean;\n    id: keyof EndpointStatItem;\n    label: string;\n    numeric: boolean;\n}\n\nconst headCells: readonly HeadCell[] = [\n    {\n        id: 'method',\n        numeric: false,\n        disablePadding: true,\n        label: 'Metoda',\n    },\n    {\n        id: 'generalEndpoint',\n        numeric: false,\n        disablePadding: false,\n        label: 'Ścieżka',\n    },\n    {\n        id: 'calls',\n        numeric: true,\n        disablePadding: false,\n        label: 'Liczba zapytań',\n    },\n    {\n        id: 'timeForEndpoint',\n        numeric: true,\n        disablePadding: false,\n        label: 'Całkowity czas',\n    },\n    {\n        id: 'avgTime',\n        numeric: true,\n        disablePadding: false,\n        label: 'Śr. czas wykonania',\n    },\n];\n\nexport type Order = 'asc' | 'desc';\n\n\ninterface EnhancedTableProps {\n    onRequestSort: (event: React.MouseEvent<unknown>, property: keyof EndpointStatItem) => void;\n    order: Order;\n    orderBy: string;\n}\n\n\nexport default function EnhancedTableHead(props: EnhancedTableProps) {\n    const { order, orderBy, onRequestSort } = props;\n    const createSortHandler = (property: keyof EndpointStatItem) => (event: React.MouseEvent<unknown>) => {\n        onRequestSort(event, property);\n    };\n\n    return (\n        <TableHead>\n            <TableRow>\n                {headCells.map((headCell) => (\n                    <TableCell\n                        key={headCell.id}\n                        padding={'normal'}\n                        sortDirection={orderBy === headCell.id ? order : false}\n                    >\n                        <TableSortLabel\n                            active={orderBy === headCell.id}\n                            direction={orderBy === headCell.id ? order : 'asc'}\n                            onClick={createSortHandler(headCell.id)}\n                        >\n                            {headCell.label}\n                            {orderBy === headCell.id ? (\n                                <Box component=\"span\" sx={visuallyHidden}>\n                                    {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                                </Box>\n                            ) : null}\n                        </TableSortLabel>\n                    </TableCell>\n                ))}\n            </TableRow>\n        </TableHead>\n    );\n}\n","import * as React from 'react';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableRow from '@mui/material/TableRow';\nimport TablePagination from '@mui/material/TablePagination';\nimport { useCharts } from '../../../components/Charts';\nimport { EndpointChartsData, EndpointStatItem } from '../../../../../../models/Stats';\nimport EnhancedTableHead, { Order } from './EnhancedTableHead';\n\n\n\n\nfunction descendingComparator<T>(a: T, b: T, orderBy: keyof T) {\n    if (b[orderBy] < a[orderBy]) {\n        return -1;\n    }\n    if (b[orderBy] > a[orderBy]) {\n        return 1;\n    }\n    return 0;\n}\n\n\n\nfunction getComparator<Key extends keyof any>(\n    order: Order,\n    orderBy: Key,\n): (\n        a: { [key in Key]: number | string },\n        b: { [key in Key]: number | string },\n    ) => number {\n    return order === 'desc'\n        ? (a, b) => descendingComparator(a, b, orderBy)\n        : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\n\n\nexport default function SortableTable() {\n    const { chartsData } = useCharts<EndpointChartsData>();\n\n    const [rowsPerPage, setRowsPerPage] = React.useState(5);\n    const [page, setPage] = React.useState(0);\n\n    const [order, setOrder] = React.useState<Order>('asc');\n    const [orderBy, setOrderBy] = React.useState<keyof EndpointStatItem>('generalEndpoint');\n\n\n    const handleRequestSort = (\n        event: React.MouseEvent<unknown>,\n        property: keyof EndpointStatItem,\n    ) => {\n        const isAsc = orderBy === property && order === 'asc';\n        setOrder(isAsc ? 'desc' : 'asc');\n        setOrderBy(property);\n    };\n\n    const handleChangePage = (event: unknown, newPage: number) => {\n        setPage(newPage);\n    };\n\n    const handleChangeRowsPerPage = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setRowsPerPage(parseInt(event.target.value, 10));\n        setPage(0);\n    };\n\n\n    return (\n        <>\n            <TableContainer>\n                <Table\n                    sx={{ minWidth: 550 }}\n                    aria-labelledby=\"Endpointy aplikacji\"\n                    size='medium'\n                >\n                    <EnhancedTableHead\n                        order={order}\n                        orderBy={orderBy}\n                        onRequestSort={handleRequestSort}\n\n                    />\n                    <TableBody>\n                        {chartsData.endpoints.slice().sort(getComparator(order, orderBy))\n                            .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                            .map((row, index) =>\n                                <TableRow\n                                    hover\n                                    key={index}\n                                >\n                                    <TableCell >{row.method}</TableCell>\n                                    <TableCell>{row.generalEndpoint}</TableCell>\n                                    <TableCell >{row.calls}</TableCell>\n                                    <TableCell >{Math.round(row.timeForEndpoint * 1000) / 1000}</TableCell>\n                                    <TableCell >{Math.round(row.avgTime * 1000) / 1000}</TableCell>\n                                </TableRow>\n                            )}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n            <TablePagination\n                rowsPerPageOptions={[5, 10, 25]}\n                component=\"div\"\n                count={chartsData.endpoints.length}\n                rowsPerPage={rowsPerPage}\n                page={page}\n                onPageChange={handleChangePage}\n                onRowsPerPageChange={handleChangeRowsPerPage}\n            />\n        </>\n    );\n}\n","import Box from '@mui/material/Box';\nimport TabHeadLine from '../../../../../../shared/components/TabHeadLine';\nimport { ChartsContext } from '../../../components/Charts/ChartsContext';\nimport SortableTable from './SortableTable';\n\n\n\nexport default function EndpointsStats() {\n\treturn (\n\t\t<Box sx={{ width: '100%' }}>\n\t\t\t<ChartsContext>\n\t\t\t\t<TabHeadLine\n\t\t\t\t\ttitle='Parametry endpointów'\n\t\t\t\t\tsubtitle=\"Wylistowane są wszystkie ścieżki na jakie aplikacja serwerowa dostaje zapytania od wszystkich aplikacji klienckich.\n\t\t\t\tParametry wydajnościowe dla każdej z nich mogą być pomocne w konfigurowaniu oraz planowaniu rozwoju aplikacji.\"\n\t\t\t\t/>\n\n\t\t\t\t<SortableTable />\n\t\t\t</ChartsContext>\n\t\t</Box>\n\t);\n}\n","import { Button } from \"@mui/material\";\nimport Box from \"@mui/material/Box\";\nimport Grid from \"@mui/material/Grid\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\nimport { SettingsUpdateParams } from \"../../../../../services/SettingsService\";\nimport AppLink from \"../../../../../shared/components/AppLink\";\nimport paths from \"../../../../../shared/path\";\nimport { useSettings } from \"../SettingsContext\";\n\n\ninterface FormFieldProps {\n    text: string | React.ReactNode,\n    name: string,\n    label: string,\n    onChange: (evt: React.ChangeEvent<HTMLInputElement>) => void,\n    value: string | number | boolean\n}\n\n\nfunction FormField(props: FormFieldProps) {\n    return (\n        <Box mr={1}>\n            <Typography variant='body2' >\n                {props.text}\n            </Typography>\n            <TextField\n                required\n                type='number'\n                margin='dense'\n                name={props.name}\n                id={`${props.label}-name`}\n                label={props.label}\n                value={props.value}\n                onChange={props.onChange}\n            />\n        </Box>\n    );\n}\n\n\n\nexport default function SettingsForm() {\n    const { settings, updateSettings } = useSettings();\n\n    const [data, setData] = React.useState<SettingsUpdateParams>({});\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        await updateSettings(data);\n        setData({});\n    }, [\n        data,\n        updateSettings,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: Number(event.target.value)\n        }));\n    }, []);\n\n\n    return (\n        <span>\n            <Stack spacing={3} component='form' onSubmit={handleSubmit}>\n                <Typography component='h2' variant='h5'>\n                    Formularz:\n                </Typography>\n\n                <span>\n                    <Typography component='h3' variant='h6' mb={1}>\n                        Ustawienia zdjęć\n                    </Typography>\n                    <FormField\n                        text={<>Maksymalny rozmiar zdjecia (podawany <b>w bajtach</b>) ładowanego przez użytkownika do aplikacji.</>}\n                        name='maxImageSize'\n                        label='max. rozmiar'\n                        value={data.maxImageSize ?? settings.maxImageSize}\n                        onChange={handleChange}\n                    />\n                </span>\n\n                <span>\n                    <Typography component='h3' variant='h6' mb={1}>\n                        Użytkownicy\n                    </Typography>\n                    <FormField\n                        text={<>Domyślny numer identyfikacyjny klasy deostępowej przypisywany dla każdego nowego użytkownika.\n                            <AppLink withIcon to={paths.ACCESS}>klasy dostępu</AppLink></>}\n                        name='defaultUserAccess'\n                        label='numer ID'\n                        value={data.defaultUserAccess ?? settings.defaultUserAccess}\n                        onChange={handleChange}\n                    />\n                </span>\n\n                <Grid container rowSpacing={2}>\n                    <Grid item xs={12}>\n                        <Typography component='h3' variant='h6'>\n                            Czas trwania rezerwacji:\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <FormField\n                            text={<>Maksymalny czas trwania rezerwacji <b>w minutach</b>.\n                                Stworzone wcześniej rezerwacje pozostaną niezmienione.</>}\n                            name='maxReservationTime'\n                            label='max. czas'\n                            value={data.maxReservationTime ?? settings.maxReservationTime}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <FormField\n                            text={<>Minimalny czas trwania rezerwacji <b>w minutach</b>.\n                                Stworzone wcześniej rezerwacje pozostaną niezmienione.</>}\n                            name='minReservationTime'\n                            label='min. czas'\n                            value={data.minReservationTime ?? settings.minReservationTime}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n                </Grid>\n\n                <Grid container rowSpacing={2}>\n                    <Grid item xs={12}>\n                        <Typography component='h3' variant='h6'>\n                            Czas przechowywania danych:\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <FormField\n                            text={<>Ilość czasu <b>w dniach</b> po którym historia rezerwacji ma zostać usunięta.\n                                Zmiana tego parametru wpływa bezpośrednio na statystyki.</>}\n                            name='reservationHistory'\n                            label='Ilość dni'\n                            value={data.reservationHistory ?? settings.reservationHistory}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n                    <Grid item xs={12} md={6}>\n                        <FormField\n                            text={<>Ilość czasu <b>w dniach</b> po którym logi zostaną usunięte.</>}\n                            name='requestHistory'\n                            label='Ilość dni'\n                            value={data.requestHistory ?? settings.requestHistory}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n                </Grid>\n                <Stack direction='row' justifyContent=\"space-around\" mt={1.5}>\n                    <Button\n                        color='error'\n                    >\n                        Przywróć\n                    </Button>\n                    <Button\n                        color='success'\n                        type='submit'\n                    >\n                        Zatwierdź\n                    </Button>\n                </Stack>\n            </Stack>\n        </span>\n    );\n}","import React from \"react\";\nimport { settingsContext } from \"./SettingsContextProvider\";\nimport SettingsContextValue from \"./SettingsContextValue\";\n\nexport default function useSettings() {\n    return React.useContext(settingsContext) as SettingsContextValue;\n}","import { Stack, Typography } from \"@mui/material\";\nimport SettingsForm from \"./SettingsForm\";\n\n\n\nexport default function SettingsMain() {\n    return (\n        <Stack spacing={3}>\n            <span>\n                <Typography component='h1' variant='h3' color='primary.dark'>\n                    Ustawienia platformy\n                </Typography>\n                <Typography variant='body1' color=\"text.secondary\" mt=\"5px\">\n                    Dostępne tutaj opcje wpływają znacząco na funkcjonowanie całej platformy. <br />\n                    Postępuj racjonalnie podczas modyfikacji znajdujących się tutaj parametrów.\n                </Typography>\n            </span>\n\n            <SettingsForm />\n\n        </Stack>\n    );\n}","import React from \"react\";\nimport GenericLogsTab from \"../components/GenericLogsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport { SettingsContext } from \"./SettingsContext\";\nimport EndpointsStats from \"./components/EndpointsStats\";\nimport SettingsMain from \"./components/SettingsMain\";\n\n\n\nexport default function SettingsPage() {\n\n\n    const pages = React.useMemo(() => {\n        return [\n            { name: 'Ustawienia', component: < SettingsMain/> },\n            { name: 'Logi', component: <GenericLogsTab /> },\n            { name: 'Endpointy', component: <EndpointsStats /> }\n        ];\n    }, []);\n\n\n    return (\n        <SettingsContext>\n            <SwipeableTabs tabs={pages} />\n        </SettingsContext>\n    );\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useSession from \"../../../../../auth/useSession\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { DetailedUser } from \"../../../../../models/User\";\nimport UserService, { UpdateUserParams, UserViewParams } from \"../../../../../services/UserService\";\nimport paths from \"../../../../../shared/path\";\n\n\n\nexport const userContext: any = React.createContext(null);\n\n\ninterface UserContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function UserContextProvider(props: UserContextProviderProps) {\n    const urlParams = useParams<UserViewParams>();\n    const notify = useNotification();\n    const session = useSession();\n\n    const [user, setUser] = React.useState<DetailedUser>();\n\n\n    React.useLayoutEffect(() => {\n        let params = (urlParams.userId === 'me' && session.user) ? { userId: session.user.id.toString() } : urlParams;\n        UserService.setPath(params);\n    }, [\n        urlParams,\n        session\n    ]);\n\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await UserService.getCurrentOne();\n            setUser(resp.data as DetailedUser);\n        } catch (err: any) {\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    React.useEffect(() => {\n        load()\n    }, [\n        load\n    ]);\n\n\n    const deleteUser = React.useCallback(async () => {\n        try {\n            await UserService.remove();\n\n            let action = (): React.ReactNode => null\n\n            if (session && session.user?.id === user?.id) {\n                session.logout();\n            } else {\n                action = () => <Redirect to={paths.USERS} />\n            }\n\n            notify('Użytkownik został usunięty', 'success', action);\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        session,\n        user?.id,\n    ]);\n\n\n    const updateUser = React.useCallback(async (data: UpdateUserParams) => {\n        try {\n            if (await UserService.update(data)) {\n                setUser(old => {\n                    return { ...old, ...data as DetailedUser };\n                });\n\n                notify('Użytkownik został zaktualizowany', 'success');\n            }\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify]);\n\n\n    if (!user) return null;\n\n    return (\n        <userContext.Provider value={{\n            user,\n            deleteUser,\n            updateUser,\n        }}>\n            {props.children}\n        </userContext.Provider>\n    );\n}","import React from \"react\";\nimport { userContext } from \"./UserContextProvider\";\nimport UserContextValue from \"./UserContextValue\";\n\n\n\nexport default function useUser() {\n    return React.useContext(userContext) as UserContextValue;\n}\n","\n\nexport interface ButtonStatus {\n    success: boolean | null,\n    message: string,\n}\n\ninterface Action {\n    statusCode: number | string,\n    payload?: any\n}\n\nexport const initialResult = {\n    success: null,\n    message: ''\n}\n\nexport function statusReducer(state: ButtonStatus, action: Action): ButtonStatus {\n    switch (action.statusCode) {\n        case 200:\n        case 201:\n            return {\n                success: true,\n                message: \"Kod został wysłany na podany email\"\n            };\n        case 403:\n        case 401:\n        case 400:\n            return {\n                success: false,\n                message: action.payload\n            };\n        case 404:\n            return {\n                success: false,\n                message: \"Taki użytkownik nie istnieje.\"\n            };\n        case 422:\n            return {\n                success: false,\n                message: \"Adres email jest niepoprawny\"\n            };\n        case \"NO_ADDRESS\":\n            return {\n                success: false,\n                message: \"Musisz podać adres email\"\n            };\n        default:\n            return {\n                success: false,\n                message: action.payload\n            };\n            // throw new Error();\n    }\n}","import { Button, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\n\nimport SyncIcon from '@mui/icons-material/Sync';\nimport React from \"react\";\nimport UserService from \"../../../services/UserService\";\nimport { statusReducer } from \"./statusReducer\";\n\n\ninterface UniqueCodeButtonProps {\n    email: string,\n    text: string\n}\n\n\nfunction resolveColor(value: null | boolean): string {\n    if (value === null) return \"inherit\";\n    if (value === true) return \"green\";\n    return \"error\";\n}\n\n\nexport default function UniqueCodeButton(props: UniqueCodeButtonProps) {\n    const [result, dispatchResult] = React.useReducer(statusReducer, {\n        success: null,\n        message: props.text\n    });\n\n    const handleSubmit = async () => {\n        if (!props.email) {\n            dispatchResult({ statusCode: \"NO_ADDRESS\" });\n        }\n        try {\n            const resp = await UserService.generateKey(props.email);\n            dispatchResult(resp);\n\n        } catch (err: any) {\n            dispatchResult({\n                statusCode: err.code,\n                payload: err.description\n            });\n        }\n    };\n\n    return (\n        <Box\n            component=\"div\"\n            display=\"flex\"\n        >\n            <Button sx={{\n                bgcolor: \"primary.50\",\n                \"&:hover\": {\n                    bgcolor: \"primary.100\",\n                }\n            }}\n                onClick={handleSubmit} >\n                <SyncIcon fontSize=\"large\" />\n            </Button>\n\n            <Box\n                sx={{\n                    display: \"flex\",\n                    alignItems: 'center',\n                    ml: 1\n                }}\n            >\n                <Typography\n                    variant=\"body2\"\n                    component=\"p\"\n                    color={resolveColor(result.success)}\n                >\n                    {result.message}\n                </Typography>\n            </Box>\n\n        </Box>\n    );\n}","import { Typography } from \"@mui/material\";\n\n\ninterface StepProps {\n    title: string,\n    text?:string,\n    children: React.ReactNode | React.ReactNodeArray\n}\n\nexport default function FormStep(props: StepProps) {\n    return (\n        <>\n            <Typography variant=\"h5\" sx={{ mt: 3 }}>\n                {props.title}\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                {props.text}\n            </Typography>\n            {props.children}\n        </>\n    );\n}","import { Button, Grid, TextField } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport UniqueCodeButton from \"../../../../shared/components/UniqueCodeButton\";\nimport React from \"react\";\nimport FormStep from \"./FormStep\";\nimport UserService, { ChangePasswordData } from \"../../../../services/UserService\";\nimport { Redirect } from 'react-router-dom';\nimport paths from \"../../../../shared/path\";\nimport useNotification from \"../../../../contexts/NotificationContext/useNotification\";\nimport AppLink from \"../../../../shared/components/AppLink\";\n\n\ninterface FormProps {\n    onSuccess?: () => void\n}\n\nexport default function Form(props: FormProps) {\n    const notify = useNotification();\n\n    const [data, setData] = React.useState<ChangePasswordData>({\n        email: localStorage.getItem('email')?.toString() ?? '',\n        newPassword: '',\n        code: ''\n    });\n\n\n    const onChange = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        setData(old => ({ ...old, [e.target.name]: e.target.value }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n\n        try {\n            await UserService.changePassword(data);\n\n            notify(\"Hasło zostało zmienione\", 'success',\n                () => setTimeout(() => {\n                    if (props.onSuccess) props.onSuccess();\n                    return <Redirect to={paths.LOGIN} />\n                }, 2000)\n            );\n        } catch (err: any) {\n            let message = err.description;\n            if (err.code === 404) message = \"Taki użytkownik nie istnieje\";\n\n            notify(message, 'error');\n        }\n    }, [\n        data,\n        notify,\n        props\n    ]);\n\n    return (\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n            <FormStep\n                title=\"1. Wygeneruj Kod\"\n                text=\"Podaj swój aders email i naciśnij przycisk by otrzymać email i kodem.\"\n            >\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"email\"\n                    label=\"Adres email\"\n                    name=\"email\"\n                    autoComplete=\"email\"\n                    autoFocus\n                    value={data.email}\n                    onChange={onChange}\n                />\n                <UniqueCodeButton\n                    text=\"Kliknij przycisk by otrzymać kod.\"\n                    email={data.email}\n                />\n            </FormStep>\n            <FormStep\n                title=\"2. Podaj nowe hasło i kod\"\n                text=\"Podaj nowe hasło i kod który otrzymałeś (jeśli nie, powtórz krok nr 1)\"\n            >\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    name=\"newPassword\"\n                    label=\"Hasło\"\n                    type=\"password\"\n                    id=\"password\"\n                    value={data.newPassword}\n                    onChange={onChange}\n                    autoComplete=\"current-password\"\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    name=\"code\"\n                    label=\"Kod\"\n                    type=\"text\"\n                    id=\"code\"\n                    value={data.code}\n                    onChange={onChange}\n                    autoComplete=\"email-code\"\n                />\n            </FormStep>\n            <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                sx={{ mt: 3, mb: 2 }}\n            >\n                3. Zmień Hasło\n            </Button>\n            <Grid container justifyContent=\"flex-end\">\n                <Grid item>\n                    <AppLink to={paths.LOGIN}>\n                        Hasło zmienione? Zaloguj się!\n                    </AppLink>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}","import React from \"react\";\nimport useSession from \"../../../../../auth/useSession\";\nimport GenericModal from \"../../components/GenericModal\";\nimport PasswordChangeForm from '../../../public/ChangePassword/Form';\n\ninterface EditUserFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\nexport default function PasswordChangeModal({\n    open,\n    onClose\n}: EditUserFormProps) {\n    const { logout } = useSession();\n\n    const close = React.useCallback(() => {\n        onClose();\n\n    }, [onClose]);\n\n    const onSuccess = React.useCallback(() => {\n        logout();\n    }, [logout]);\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n            sx={{\n                maxWidth: '450px'\n            }}\n        >\n            <PasswordChangeForm onSuccess={onSuccess} />\n        </GenericModal>\n    )\n}","import Divider from \"@mui/material/Divider\";\nimport Grid from \"@mui/material/Grid\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { DetailedUser } from \"../../../../../models/User\";\nimport { UpdateUserParams } from \"../../../../../services/UserService\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\nimport GenericModal from \"../../components/GenericModal\";\nimport ImageUploadField from \"../../components/ImageUploadField\";\nimport { useUser } from \"../UserContext\";\n\n\n\ninterface EditUserFormProps {\n    open: boolean,\n    onClose: () => void,\n    user: DetailedUser,\n}\n\n\nexport default function EditUserForm({\n    open,\n    onClose,\n    user,\n}: EditUserFormProps) {\n    const { updateUser } = useUser();\n\n    const [data, setData] = React.useState<UpdateUserParams>({});\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const onSubmit = React.useCallback(async () => {\n        if (await updateUser(data)) {\n            close();\n        }\n    }, [\n        data,\n        close,\n        updateUser,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n            sx={{\n                maxWidth: '450px'\n            }}\n        >\n            <Stack spacing={3}>\n\n                <ImageUploadField image={user.image} />\n\n                <Divider />\n\n                <FormGridContainer\n                    title=\"Edycja użytkownika\"\n                    subtitle=\"Zmień dane użytkownika. Zmiany w całej aplikacji będą widoczne po ponownym przeładowaniu aplikacji.\"\n                    onSubmit={onSubmit}\n                    onCancel={close}\n                >\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"name\"\n                            label=\"Imię\"\n                            name=\"name\"\n                            autoFocus\n                            value={data.name ?? user.name}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"surname\"\n                            label=\"Nazwisko\"\n                            name=\"surname\"\n                            value={data.surname ?? user.surname}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                </FormGridContainer>\n            </Stack>\n        </GenericModal>\n    )\n}","import React from \"react\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport { useUser } from \"../UserContext\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport PasswordIcon from '@mui/icons-material/Password';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { ChangePasswordForm, UserEditForm } from \"../Forms\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport Card from \"@mui/material/Card\";\nimport CardHeader from \"@mui/material/CardHeader\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport CardContent from \"@mui/material/CardContent\";\nimport { displayDate } from \"../../../../../shared/utils\";\nimport { Link, Typography } from \"@mui/material\";\nimport paths from \"../../../../../shared/path\";\nimport AppLink from \"../../../../../shared/components/AppLink\";\nimport DatesFooter from \"../../components/DatesFooter\";\n\n\n\nexport default function UserCard() {\n    const { user, deleteUser } = useUser();\n\n    const [editModal, setEditModal] = React.useState(false);\n    const [passModal, setPassModal] = React.useState(false);\n    const [deleteModal, setDeleteModal] = React.useState(false);\n\n\n    const options = React.useMemo(() => [\n        {\n            label: 'Edytuj',\n            action: () => setEditModal(true),\n            icon: <EditIcon color='success' />\n        }, {\n            label: 'Zmień hasło',\n            action: () => setPassModal(true),\n            icon: <PasswordIcon color='warning' />\n        }, {\n            label: 'Usuń konto',\n            action: () => setDeleteModal(true),\n            icon: <DeleteIcon color='error' />\n        }\n    ], []);\n\n\n    return (\n        <>\n\n            <DeleteModal\n                objectName={`${user.email}`}\n                open={deleteModal}\n                onClose={() => setDeleteModal(false)}\n                onSuccess={deleteUser}\n            />\n\n            <UserEditForm\n                user={user}\n                open={editModal}\n                onClose={() => setEditModal(false)}\n            />\n\n            <ChangePasswordForm\n                open={passModal}\n                onClose={() => setPassModal(false)}\n            />\n\n\n            <Card elevation={0}>\n                <CardHeader\n                    action={<MoreVertMenu options={options} />}\n                    title={<>{user.name} {user.surname}</>}\n                    subheader={<Link href={`mailto:${user.email}`}>\n                        {user.email}\n                    </Link>}\n                />\n                <CardMedia\n                    component=\"img\"\n                    height=\"350\"\n                    image={ImageService.getLink(user.image)}\n                    alt={user.email}\n                />\n                <CardContent>\n                    <Typography color='text.secondary' variant=\"subtitle1\">\n                        Ostatnio aktywny: {displayDate(user.lastActivity)}<br />\n                        Klasa dostępu: {<AppLink to={paths.ACCESS}>{user.access.name}</AppLink>}\n                    </Typography>\n                    <br />\n                    <DatesFooter model={user} />\n                </CardContent>\n            </Card>\n        </>\n    );\n}","import { UserChartsData } from \"../../../../../models/Stats\";\nimport { Chart, ChartSection, ChartsTab, useCharts } from \"../../components/Charts\";\nimport MonthlyChartsSection from \"../../components/MonthlyChartsSection\";\nimport WeeklyChartsSection from \"../../components/WeeklyChartsSection\";\n\n\nexport default function UserCharts() {\n    return (\n        <ChartsTab>\n            <ActualLoader />\n        </ChartsTab>\n    );\n}\n\n\nfunction ActualLoader() {\n    const { chartsData } = useCharts<UserChartsData>();\n\n    return (\n        <>\n            <ChartSection defaultOpen title='Rezerwowane Sale'>\n                <Chart\n                    fullWidth\n                    title='Ilość rezerwacji w rezerwowanych salach'\n                    data={chartsData.reservedRooms}\n                    xKey='roomName'\n                    y={[\n                        { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title=\"Średnie czasy rezerwacji\"\n                    data={chartsData.reservedRooms}\n                    xKey='roomName'\n                    y={[\n                        { label: 'Średni planowany czas', key: 'avgPlannedTimeMinutes' },\n                        { label: 'Średni faktyczny czas', key: 'avgActualTimeMinutes' },\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title=\"Czas wszystkich rezerwacji w danej sali\"\n                    data={chartsData.reservedRooms}\n                    xKey='roomName'\n                    y={[\n                        { label: 'Czas całkowity', key: 'allTimeMinutes' },\n                    ]}\n                />\n            </ChartSection>\n\n            <WeeklyChartsSection data={chartsData.weekly} />\n\n            <MonthlyChartsSection data={chartsData.monthly} />\n        </>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport React from \"react\";\nimport GenericLogsTab from \"../components/GenericLogsTab\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport UserCard from \"./components/UserCard\";\nimport UserCharts from \"./components/UserCharts\";\n\n\nimport { UserContext } from \"./UserContext\";\n\n\n\nexport default function UserPage() {\n\n\n    const pages = React.useMemo(() => {\n        let arr: any = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        arr.push({ name: 'Statystyki', component: <UserCharts /> });\n        arr.push({ name: 'Logi', component: <GenericLogsTab /> });\n\n        return arr;\n    }, []);\n\n\n    return (\n        <UserContext>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item xs={12} md={5} lg={4}>\n                    <UserCard />\n                </Grid>\n            </Grid>\n        </UserContext>\n    );\n}","import React from \"react\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport User from \"../../../../../models/User\";\nimport UserService, { UserQueryParams } from \"../../../../../services/UserService\";\nimport UsersContextValue from \"./UsersContextValue\";\n\n\n\nexport const usersContext: any = React.createContext(null);\n\n\ninterface UsersContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\nexport default function UsersContextProvider(props: UsersContextProviderProps) {\n    const notify = useNotification();\n    const { queryParams, setQueryParams } = useQueryParams<UserQueryParams>();\n\n    const [users, setUsers] = React.useState<User[]>();\n\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await UserService.getUsers(queryParams);\n            setQueryParams(old => ({\n                ...old,\n                pagesCount: resp.pagination?.pagesCount\n            }));\n            setUsers(resp.data as User[]);\n        } catch (err: any) {\n            notify(err.description, 'error');\n            setUsers([]);\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        notify,\n        queryParams.itemsOnPage,\n        queryParams.currentPage,\n        queryParams.search,\n        queryParams.deleted,\n        queryParams.activated\n    ]);\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    if (!users) return null;\n\n    return (\n        <usersContext.Provider value={{\n            users,\n        } as UsersContextValue}>\n            {props.children}\n        </usersContext.Provider>\n    )\n}","import { FormControlLabel, Grid, Switch } from \"@mui/material\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport { UserQueryParams } from \"../../../../../../services/UserService\";\nimport React from \"react\";\nimport LazyInput from \"../../../components/LazyInput\";\n\n\nexport default function SearchBar() {\n    const { setQueryParams, queryParams } = useQueryParams<UserQueryParams>();\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n        let value: string | number | boolean = event.target.value;\n\n        switch (event.target.name) {\n            case \"deleted\":\n            case \"activated\":\n                value = Boolean(event.target.checked);\n                break;\n            case 'search':\n                break;\n            default:\n                break;\n        }\n\n        setQueryParams((old: UserQueryParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, [setQueryParams]);\n\n\n    return (\n        <Grid container>\n            <Grid item xs={12} md={8}>\n                <LazyInput\n                    label='wyszukaj'\n                    name='search'\n                    value={queryParams.search ?? ''}\n                    onChange={handleChange}\n                />\n            </Grid>\n            <Grid item xs={12} md={4} display='flex' justifyContent='start' flexWrap='wrap' color='text.secondary'>\n                <FormControlLabel\n                    labelPlacement=\"start\"\n                    control={<Switch id=\"aktywni-użytkownicy\" name=\"activated\"\n                        inputProps={{ 'aria-label': 'aktywni-użytkownicy' }}\n                        onChange={handleChange}\n                        checked={queryParams.activated}\n                    />}\n                    label=\"Aktywne konta\"\n                />\n                <FormControlLabel\n                    labelPlacement=\"start\"\n                    control={<Switch id=\"unsunięci-użytkownicy\" name=\"deleted\"\n                        inputProps={{ 'aria-label': 'unsunięci-użytkownicy' }}\n                        onChange={handleChange}\n                        checked={queryParams.deleted}\n                    />}\n                    label=\"Usunięte konta\"\n                />\n            </Grid>\n        </Grid>\n    );\n}","import Avatar from \"@mui/material/Avatar\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableRow from \"@mui/material/TableRow\";\nimport User from \"../../../../../../../models/User\";\nimport ImageService from \"../../../../../../../services/ImageService\";\nimport AppLink from \"../../../../../../../shared/components/AppLink\";\nimport { dynamicPaths } from \"../../../../../../../shared/path\";\nimport { displayDate } from \"../../../../../../../shared/utils\";\n\n\n\ninterface UserListItemProps {\n    user: User\n}\n\nexport default function UserListItem({ user }: UserListItemProps) {\n    return (\n        <TableRow >\n            <TableCell align=\"left\">\n                <ListItem component='div'>\n                    <ListItemAvatar\n                        title={user.email}\n                        aria-label={user.email}\n                    >\n                        <AppLink to={dynamicPaths.toUser(user.id)}>\n                            <Avatar src={ImageService.getLink(user.image)} />\n                        </AppLink>\n                    </ListItemAvatar>\n                    <ListItemText\n                        primary={<AppLink to={dynamicPaths.toUser(user.id)}>\n                            {user.name} {user.surname}\n                        </AppLink>\n                        }\n                        secondary={user.email}\n                    />\n                </ListItem>\n            </TableCell>\n            <TableCell sx={{\n                width: 'fit-content'\n            }}>\n                {displayDate(user.lastActivity)}\n            </TableCell>\n        </TableRow>\n    );\n}","import Box from \"@mui/material/Box\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport Typography from \"@mui/material/Typography\";\nimport { useUsers } from \"../../../UsersContext\";\nimport UserListItem from \"./UserListItem\";\n\n\n\nexport default function UsersList() {\n    const { users } = useUsers();\n\n    return (\n        <TableContainer component={Box}>\n            <Table aria-label=\"Tabela rezerwacji\" size=\"small\">\n                <TableHead>\n                    <TableRow>\n                        <TableCell>Użytkownicy</TableCell>\n                        <TableCell>Aktywność</TableCell>\n                    </TableRow>\n                </TableHead>\n                <TableBody>\n                    {\n                        users.length === 0 && <TableRow>\n                            <TableCell colSpan={12}>\n                                <Typography textAlign='center'>\n                                    Brak użytkowników spełniających kryteria\n                                </Typography>\n                            </TableCell>\n                        </TableRow>\n                    }\n                    {\n                        users.map((item, index) => <UserListItem key={index} user={item} />)\n                    }\n                </TableBody>\n            </Table>\n        </TableContainer>\n    );\n}\n\n","import React from \"react\";\nimport { UsersContextValue } from \".\";\nimport { usersContext } from \"./UsersContextProvider\";\n\n\n\nexport default function useUsers(){\n    return React.useContext(usersContext) as UsersContextValue\n}","import { Stack } from \"@mui/material\";\nimport TabHeadLine from \"../../../../../../shared/components/TabHeadLine\";\nimport ListPagination from \"../../../components/ListPagination\";\nimport SearchBar from \"./SearchBar\";\nimport UsersList from \"./UsersList\";\n\n\n\nexport default function UsersView() {\n    return (\n        <Stack spacing={3}>\n            <TabHeadLine\n                title='Lista użytkowników'\n                subtitle='Wyszukuj użytkowników według podanych kryteriów.'\n            />\n\n            <SearchBar />\n\n            <UsersList />\n\n            <ListPagination />\n        </Stack>\n    );\n}","import { AllUsersChartsData } from \"../../../../../models/Stats\";\nimport { Chart, ChartSection, ChartsTab, useCharts } from \"../../components/Charts\";\n\n\n\nexport default function UsersCharts() {\n    return (\n        <ChartsTab>\n            <ActualLoader />\n        </ChartsTab>\n    );\n}\n\n\nfunction ActualLoader() {\n    const { chartsData } = useCharts<AllUsersChartsData>();\n\n    return (\n        <ChartSection defaultOpen title='Statystyki użytkowników'>\n            <Chart\n                fullWidth={chartsData.users.length >= 6}\n                title='Ilość rezerwacji na użytkownika'\n                data={chartsData.users}\n                xKey='email'\n                y={[\n                    { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                ]}\n            />\n            <Chart\n                fullWidth={chartsData.users.length >= 6}\n                title=\"Czas wszystkich reserwacji w dany dzień\"\n                data={chartsData.users}\n                xKey='email'\n                y={[\n                    { label: 'Czas całkowity', key: 'allTimeMinutes' },\n                ]}\n            />\n            <Chart\n                fullWidth\n                title=\"Średnie czasy rezerwacji\"\n                data={chartsData.users}\n                xKey='email'\n                y={[\n                    { label: 'Średni planowany czas', key: 'avgPlannedTimeMinutes' },\n                    { label: 'Średni faktyczny czas', key: 'avgActualTimeMinutes' },\n                ]}\n            />\n        </ChartSection>\n    );\n}","import { QueryParamsContext } from \"../../../../contexts/QueryParamsContext\";\nimport { UserQueryParams } from \"../../../../services/UserService\";\nimport { UsersContext } from \"./UsersContext\";\nimport React from \"react\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport UsersView from \"./components/UsersView\";\nimport UsersCharts from \"./components/UsersCharts\";\n\n\n\nexport default function UsersPage() {\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Użytkownicy', component: <UsersView /> });\n        arr.push({ name: 'Statystyki', component: <UsersCharts /> });\n\n        return arr;\n    }, []);\n\n\n    return (\n        <QueryParamsContext\n            name=\"users-query-params\"\n            default={{\n                deleted: false,\n                activated: true,\n                search: '',\n                itemsOnPage: 10,\n                currentPage: 1\n            } as UserQueryParams}\n        >\n            <UsersContext>\n                <SwipeableTabs tabs={pages} />\n            </UsersContext>\n        </QueryParamsContext>\n    );\n}","import { Redirect, Route, Switch } from \"react-router-dom\";\nimport paths from \"../../../shared/path\";\nimport AccessPage from \"./AccessPage\";\nimport AddressPage from \"./AddressPage\";\nimport BuildingPage from \"./BuildingPage\";\nimport HomePage from \"./HomePage\";\nimport RoomPage from \"./RoomPage\";\nimport SettingsPage from \"./SettingsPage\";\nimport UserPage from \"./UserPage\";\nimport UsersPage from \"./UsersPage\";\n\n\n\nexport default function ProtectedPages() {\n\n    return (\n        <Switch>\n            <Route path={paths.ROOM} component={RoomPage} />\n            <Route path={paths.BUILDING} component={BuildingPage} />\n            <Route path={paths.ADDRESS} component={AddressPage} />\n\n            <Route path={paths.SETTINGS} component={SettingsPage} />\n            <Route path={paths.ACCESS} component={AccessPage} />\n            <Route path={paths.USER} component={UserPage} />\n            <Route path={paths.USERS} component={UsersPage} />\n            <Route path={paths.HOME} component={HomePage}/>\n\n            <Route path={paths.INFRASTRUCTURE}>\n                Zasoby\n            </Route>\n            <Route path={paths.HOME + '/*'}>\n                <Redirect to={paths.HOME} />\n            </Route>\n        </Switch>\n    );\n}","import { Avatar, Container, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\n\n\ninterface FormPageProps {\n    children: React.ReactNode | React.ReactNodeArray,\n    title: string,\n    icon: React.ReactNode\n}\n\n\nexport default function FormPage(props: FormPageProps) {\n    return (\n        <Container component=\"div\" maxWidth=\"xs\">\n            <Box\n                sx={{\n                    marginTop: 8,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    backgroundColor: 'background.paper',\n                    padding: '35px',\n                    borderRadius: '10px'\n                }}\n            >\n                <Avatar sx={{ m: 1, bgcolor: 'primary.main' }}>\n                    {props.icon}\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    {props.title}\n                </Typography>\n                {props.children}\n            </Box>\n        </Container>\n    );\n};\n","import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Link from '@mui/material/Link';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport { Link as ReactRouterLink, Redirect } from 'react-router-dom';\nimport paths from '../../../../shared/path';\nimport UserService, { ActivationData } from '../../../../services/UserService';\nimport UniqueCodeButton from '../../../../shared/components/UniqueCodeButton';\nimport useNotification from '../../../../contexts/NotificationContext/useNotification';\n\n\n\nexport default function Form() {\n    const notify = useNotification();\n\n    const [data, setData] = React.useState<ActivationData>({\n        email: localStorage.getItem('email')?.toString() ?? '',\n        password: '',\n        code: ''\n    })\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        try {\n            await UserService.activate(data);\n            notify(\"Twoje konto zostało aktywowane\", 'success',\n                () => setTimeout(() => <Redirect to={paths.LOGIN} />, 2000)\n            );\n        } catch (err: any) {\n            let message = err.description;\n            if (err.code === 404) message = \"Taki użytkownik nie istnieje\";\n\n            notify(message, 'error');\n        }\n    }, [notify, data]);\n\n    const onChange = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        setData(old => ({ ...old, [e.target.name]: e.target.value }))\n    }, []);\n\n    return (\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n            <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Adress Email\"\n                name=\"email\"\n                autoComplete=\"email\"\n                autoFocus\n                value={data.email}\n                onChange={onChange}\n            />\n            <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Hasło\"\n                type=\"password\"\n                id=\"password\"\n                value={data.password}\n                onChange={onChange}\n                autoComplete=\"current-password\"\n            />\n            <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"code\"\n                label=\"Kod\"\n                type=\"text\"\n                id=\"code\"\n                value={data.code}\n                onChange={onChange}\n                autoComplete=\"email-code\"\n            />\n            <UniqueCodeButton\n                email={data.email}\n                text=\"Jeżeli nie otrzymałeś kodu mailem, naciśnij przycisk.\"\n            />\n            <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                sx={{ mt: 3, mb: 2 }}\n            >\n                Aktywuj\n            </Button>\n            <Grid container justifyContent=\"flex-end\">\n                <Grid item>\n                    <Link component={ReactRouterLink} to={paths.LOGIN} variant=\"body2\" >\n                        Masz już konto? Zaloguj się!\n                    </Link>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}","import FormPage from \"../FormPage\";\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\nimport Form from \"./Form\";\n\n\nexport default function ActivationPage(){ \n    return(\n        <FormPage\n        title='Aktywacja konta'\n        icon={<LockOpenIcon />}\n    >\n        <Form/>\n    </FormPage>\n    );\n}","import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Link from '@mui/material/Link';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport useSession from '../../../../auth/useSession';\nimport { Link as ReactRouterLink } from 'react-router-dom';\nimport { LoginFormData } from '../../../../services/AuthService';\nimport paths from '../../../../shared/path';\n\n\n\nexport default function Form() {\n    const { login } = useSession();\n\n    const [remember, setRemember] = React.useState<boolean>(true);\n    const [data, setData] = React.useState<LoginFormData>({\n        email: localStorage.getItem('email')?.toString() ?? '',\n        password: '',\n    });\n\n\n    const onChange = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        setData(old => ({ ...old, [e.target.name]: e.target.value }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback((event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n\n        if (remember) localStorage.setItem('email', data.email);\n        login(data);\n    }, [data, login, remember]);\n\n\n    return (\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n            <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Adres Email\"\n                name=\"email\"\n                autoComplete=\"email\"\n                autoFocus\n                value={data.email}\n                onChange={onChange}\n            />\n            <TextField\n                margin=\"normal\"\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Hasło\"\n                type=\"password\"\n                id=\"password\"\n                value={data.password}\n                onChange={onChange}\n                autoComplete=\"current-password\"\n            />\n            <FormControlLabel\n                control={<Checkbox\n                    onChange={() => setRemember(!remember)}\n                    name=\"remember\"\n                    checked={remember}\n                    color=\"primary\"\n                />}\n                label=\"Zapamiętaj mnie\"\n            />\n            <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                sx={{ mt: 3, mb: 2 }}\n            >\n                Zaloguj\n            </Button>\n            <Grid container>\n                <Grid item xs>\n                    <Link component={ReactRouterLink} to={paths.REMIND_PASSWORD} variant=\"body2\">\n                        Zapomniałeś hasła?\n                    </Link>\n                </Grid>\n                <Grid item >\n                    <Link component={ReactRouterLink} to={paths.REGISTER} variant=\"body2\">\n                        Zarejestruj się!\n                    </Link>\n                </Grid>\n                <Grid item xs={12}>\n                    <Link component={ReactRouterLink} to={paths.ACTIVATE} variant=\"body2\">\n                        Aktywuj konto\n                    </Link>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}","import FormPage from \"../FormPage\";\nimport Form from \"./Form\";\nimport LoginIcon from '@mui/icons-material/Login';\n\n\n\nexport default function Login() {\n    return (\n        <FormPage\n            title='Logowanie'\n            icon={<LoginIcon />}\n        >\n            <Form />\n        </FormPage>\n    );\n}","import * as React from 'react';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport Checkbox from '@mui/material/Checkbox';\nimport Link from '@mui/material/Link';\nimport Grid from '@mui/material/Grid';\nimport Box from '@mui/material/Box';\nimport { Link as ReactRouterLink, Redirect } from 'react-router-dom';\nimport useNotification from '../../../../contexts/NotificationContext/useNotification';\nimport UserService, { RegisterUserData } from '../../../../services/UserService';\nimport paths from '../../../../shared/path';\n\n\nexport default function Form() {\n    const notify = useNotification();\n\n    const [data, setData] = React.useState<RegisterUserData>({\n        email: \"\",\n        password: \"\",\n        name: \"\",\n        surname: \"\"\n    });\n\n\n    const onChange = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        setData(old => ({ ...old, [e.target.name]: e.target.value }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        try {\n            await UserService.register(data);\n            notify(\"Zarejestrowano\", 'success', () => <Redirect to={paths.ACTIVATE} />);\n        } catch (err: any) {\n            let message = err.description;\n            // if (err.code === 422) message = \"Wprowadzono nieprawidłowe dane\";\n\n            notify(message, 'error');\n        }\n    }, [data, notify]);\n\n\n    return (\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 3 }}>\n            <Grid container spacing={2}>\n                <Grid item xs={12} sm={6}>\n                    <TextField\n                        autoComplete=\"given-name\"\n                        name=\"name\"\n                        required\n                        fullWidth\n                        id=\"name\"\n                        label=\"Imię\"\n                        autoFocus\n                        value={data.name}\n                        onChange={onChange}\n                    />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"surname\"\n                        label=\"Nazwisko\"\n                        name=\"surname\"\n                        autoComplete=\"family-name\"\n                        value={data.surname}\n                        onChange={onChange}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"email\"\n                        label=\"Adres Email\"\n                        name=\"email\"\n                        autoComplete=\"email\"\n                        value={data.email}\n                        onChange={onChange}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Hasło\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"new-password\"\n                        value={data.password}\n                        onChange={onChange}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <FormControlLabel\n                        control={<Checkbox required value=\"allowExtraEmails\" color=\"primary\" />}\n                        label=\"Akceptuję warunki\"\n                    />\n                </Grid>\n            </Grid>\n            <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                sx={{ mt: 3, mb: 2 }}\n            >\n                Załóż konto!\n            </Button>\n            <Grid container justifyContent=\"flex-end\">\n                <Grid item>\n                    <Link component={ReactRouterLink} to={paths.LOGIN} variant=\"body2\" >\n                        Masz już konto? Zaloguj się!\n                    </Link>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}","import FormPage from \"../FormPage\";\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle';\nimport Form from \"./Form\";\n\n\nexport default function Register() {\n    return (\n        <FormPage\n            title='Rejestracja'\n            icon={<AccountCircleIcon />}\n        >\n            <Form />\n        </FormPage>\n    );\n}","import FormPage from \"../FormPage\";\nimport RemindPassowordForm from \"./Form\";\nimport AppRegistrationIcon from '@mui/icons-material/AppRegistration';\n\n\n\nexport default function ChangePassword() {\n    return (\n        <FormPage\n            title=\"Zmiana Hasła\"\n            icon={<AppRegistrationIcon />}\n        >\n            <RemindPassowordForm />\n        </FormPage>\n    );\n}","\n\nexport default function Welcome(){\n    return(\n        <>\n            Welcome page\n        </>\n    );\n}","import { Redirect, Route, Switch } from \"react-router-dom\";\nimport paths from \"../../../shared/path\";\n\nimport Activation from \"./Activation\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ChangePassword from \"./ChangePassword\";\nimport Welcome from \"./Welcome\";\n\n\nexport default function PublicPages() {\n\n    return (\n        <Switch>\n            <Route path={paths.LOGIN} component={Login} />\n            <Route path={paths.REGISTER} component={Register} />\n            <Route path={paths.ACTIVATE} component={Activation} />\n            <Route path={paths.REMIND_PASSWORD} component={ChangePassword} />\n            <Route path={paths.PUBLIC} component={Welcome} />\n\n            <Route path=\"*\">\n                <Redirect to={paths.PUBLIC} />\n            </Route>\n        </Switch>\n    );\n}","import { Box } from '@mui/system';\n\nimport {\n    Switch,\n    Route,\n    Redirect\n} from \"react-router-dom\";\n\nimport paths from '../../shared/path';\n\nimport ProtectedPages from './protected';\nimport PublicPages from './public';\n\n\nconst tabStyle = {\n    minHeight: \"80vh\",\n    padding: \"1.5vh 0px\"\n}\n\n\nexport default function Tabs() {\n    return (\n        <Box sx={tabStyle}>\n            <Switch>\n                <Route path={paths.HOME} component={ProtectedPages} />\n                <Route path={paths.PUBLIC} component={PublicPages} />\n                <Route path={paths.FAQ}>\n                    Częste pytania i odpowiedzi FAQ\n                </Route>\n                <Route path='*'> \n                    <Redirect to={paths.PUBLIC} />\n                </Route>\n            </Switch>\n        </Box>\n    );\n}","import { Typography } from \"@mui/material\";\n\n\nexport default function Copyright() {\n    return (\n        <Typography\n            align=\"center\"\n            sx={{\n                backgroundColor: \"primary.dark\",\n                padding: 2,\n                color: \"primary.light\"\n            }}\n        >\n            &copy; Szymon Rykała 2021\n        </Typography>\n    );\n}","import { Grid, List, ListItem } from \"@mui/material\";\nimport React from \"react\";\nimport paths from \"../../shared/path\";\nimport AppLink from \"../../shared/components/AppLink\";\n\n\ninterface LinkListItem {\n    name: string,\n    link: string\n}\n\n\nconst linksList: LinkListItem[][] = [\n    [\n        { name: 'FAQ', link: paths.FAQ },\n        { name: 'Logowanie', link: paths.LOGIN },\n        { name: 'Rejestracja', link: paths.REGISTER },\n        { name: 'Aktywacja Konta', link: paths.ACTIVATE },\n\n    ],\n    [\n        { name: 'Home', link: paths.HOME },\n        { name: 'Profil', link: paths.MY_PROFILE },\n        { name: 'Zasoby', link: paths.INFRASTRUCTURE },\n    ]\n];\n\n\n\nexport default function Links() {\n\n    const links = React.useMemo(() =>\n        linksList.map((list, index) => <Grid key={index} item>\n            <List>\n                {list.map(({ name, link }) => <ListItem key={name}>\n                    <AppLink\n                        to={link}\n                        withIcon\n                        sx={{ color: 'background.default' }}\n                    >\n                        {name}\n                    </AppLink>\n                </ListItem>)}\n            </List>\n        </Grid>), []);\n\n    return (\n        <Grid\n            sx={{\n                backgroundColor: \"primary.main\",\n            }}\n\n            container\n            direction=\"row\"\n            justifyContent=\"space-evenly\"\n            alignItems=\"flex-start\"\n        >\n            {links}\n        </Grid>\n    );\n}\n","import {\n    Grid,\n} from \"@mui/material\";\n\nimport { Box } from \"@mui/system\";\n\nimport Copyright from \"./Copyrights\";\nimport Links from \"./Links\";\n\n\n\n\nexport default function Footer() {\n\n    return (\n        <Box >\n            <Grid container\n                direction=\"column\"\n                alignItems=\"stretch\"\n            >\n                <Grid item>\n                    <Links />\n                </Grid>\n                <Grid item>\n                    <Copyright />\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}\n\n\n\n\n","import { List, ListItemButton, ListItemIcon, ListItemText, SvgIconTypeMap } from \"@mui/material\";\nimport HomeIcon from '@mui/icons-material/Home';\nimport AccountIcon from '@mui/icons-material/AccountCircle';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport VerifiedUserIcon from '@mui/icons-material/VerifiedUser';\nimport PeopleIcon from '@mui/icons-material/People';\n\nimport React from \"react\";\nimport Access from \"../../../models/Access\";\nimport paths from \"../../../shared/path\";\nimport AppLink from \"../../../shared/components/AppLink\";\nimport { OverridableComponent } from \"@mui/material/OverridableComponent\";\n\n\n\ninterface NavListItem {\n  label: string,\n  href: string,\n  icon: OverridableComponent<SvgIconTypeMap<{}, \"svg\">>\n}\n\n\nconst navListItems: NavListItem[] = [\n  {\n    label: \"Panel Główny\",\n    href: paths.HOME,\n    icon: HomeIcon\n  }, {\n    label: \"Moje Konto\",\n    href: paths.MY_PROFILE,\n    icon: AccountIcon\n  }\n];\n\n\nconst settingsItem: NavListItem = {\n  label: 'Ustawienia Platformy',\n  href: paths.SETTINGS,\n  icon: SettingsIcon\n};\n\n\nconst accessLinkItem: NavListItem = {\n  label: 'Klasy dostępu',\n  href: paths.ACCESS,\n  icon: VerifiedUserIcon\n};\n\n\nconst usersLinkItem: NavListItem = {\n  label: 'Użytkownicy',\n  href: paths.USERS,\n  icon: PeopleIcon\n};\n\n\nexport default function MainDrawerList(props: { access?: Access }) {\n\n  const result = React.useMemo(() => {\n    let list = Object.assign([], navListItems) as NavListItem[];\n\n    list.push(usersLinkItem);\n    list.push(accessLinkItem);\n    list.push(settingsItem);\n\n    return list;\n  }, []);\n\n\n  return (\n    <List>\n      {\n        result.map((item, key) => (\n          <ListItemButton key={key} component=\"li\">\n            <ListItemIcon color=\"primary\">\n              {<item.icon color='primary' />}\n            </ListItemIcon>\n            <ListItemText primary={<AppLink color='text.primary' to={item.href}>{item.label}</AppLink>} />\n          </ListItemButton>\n        ))\n      }\n    </List>\n  );\n}","import { Box } from \"@mui/material\";\n\n\ninterface DrawerPanelProps {\n    children: React.ReactNode,\n    toggleOpen: any,\n}\n\n\nexport default function DrawerPanel({\n    children,\n    toggleOpen\n}: DrawerPanelProps) {\n    return (\n        <Box\n            sx={{ width: 320 }}\n            role=\"presentation\"\n            onClick={toggleOpen}\n            onKeyDown={toggleOpen}\n        >\n            {children}\n        </Box>\n    );\n}","import { Avatar, Link, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { SessionUser } from \"../../../models/User\";\nimport ImageService from \"../../../services/ImageService\";\n\n\ninterface AvatarViewProps {\n    user: SessionUser | null,\n}\n\n\nexport default function AvatarView({\n    user\n}: AvatarViewProps) {\n    return (\n        <Box\n            onClick={(ev) => ev.stopPropagation()}\n            sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                padding: 2,\n                color: 'primary.dark'\n            }}\n        >\n            <Avatar\n                alt={`${user?.name} ${user?.surname}`}\n                src={ImageService.getLink(user?.image)}\n                sx={{\n                    width: '120px',\n                    height: '120px',\n                    fontSize: '36px',\n                    mt: 2,\n                    mb: 2,\n                }}\n            />\n            <Typography>\n                {user?.name}&nbsp;{user?.surname}\n            </Typography>\n            <Typography>\n                <Link href={`mailto:${user?.email}`}>\n                    {user?.email}\n                </Link>\n            </Typography>\n        </Box>\n    );\n}","import { ExpandLess, ExpandMore } from \"@mui/icons-material\";\nimport { Box, Collapse, List, ListItem, ListItemButton, ListItemIcon, ListItemText } from \"@mui/material\";\nimport React from \"react\";\nimport StorageService from \"../../../../services/StorageService\";\nimport AppLink from \"../../../../shared/components/AppLink\";\n\n\n\ninterface CallapsableListItemProps {\n    name: string,\n    href?: string\n    children: React.ReactNode,\n    icon?: React.ReactNode,\n    sx?: any\n}\n\n\nexport default function CollapseableListItem(props: CallapsableListItemProps) {\n    const [open, setOpen] = React.useState<boolean>(false);\n\n    const OPENED_NAME = React.useMemo(() => `${props.name}-nav-item`, [props.name]);\n\n    React.useEffect(() => {\n        setOpen(StorageService.read(OPENED_NAME));\n    }, [OPENED_NAME]);\n\n    const handleOpen = (ev: React.MouseEvent) => {\n        ev.stopPropagation()\n        StorageService.save(OPENED_NAME, !open);\n        setOpen(old => !old);\n    };\n\n    const label = props.href ? <AppLink to={props.href} sx={{ color: \"text.primary\" }}>{props.name}</AppLink> : props.name;\n\n    return (\n        <ListItem disablePadding component=\"li\" sx={{ flexDirection: 'column', alignItems: 'flex-start' }}>\n            <ListItemButton sx={props.sx}>\n                {props.icon &&\n                    <ListItemIcon>\n                        {props.icon}\n                    </ListItemIcon>}\n                <ListItemText primary={label} />\n                <Box component=\"span\" onClick={handleOpen}>\n                    {open ? <ExpandLess /> : <ExpandMore />}\n                </Box >\n            </ListItemButton>\n\n            <Collapse in={open} timeout=\"auto\" sx={props.sx}>\n                <List disablePadding>\n                    {props.children}\n                </List>\n            </Collapse>\n        </ListItem>\n    );\n}\n","import { Box, ListItemButton, ListItemIcon } from \"@mui/material\";\nimport { MapItem } from \"../../../../models/AddressMap\";\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\nimport paths from \"../../../../shared/path\";\nimport AppLink from \"../../../../shared/components/AppLink\";\n\n\n\nexport default function RoomListItem(props: MapItem) {\n    return (\n        <ListItemButton component='li' >\n            <Box sx={{ width: '100%' }} component={AppLink} to={`${paths.HOME}${props.href}`}>\n                <ListItemIcon >\n                    <ArrowRightIcon />\n                </ListItemIcon>\n                {props.name}\n            </Box>\n        </ListItemButton>\n    );\n}\n","import BungalowIcon from '@mui/icons-material/Bungalow';\nimport MapIcon from '@mui/icons-material/Map';\nimport { List } from \"@mui/material\";\nimport { useResourceMap } from '../../../../contexts/ResourceMapContext';\nimport paths from '../../../../shared/path';\nimport CollapseableListItem from \"./CollapseableListItem\";\nimport RoomListItem from \"./RoomListItem\";\nimport React from 'react';\n\n\nexport default function ResourcesList() {\n    const { resourceMap } = useResourceMap();\n\n    const rendered = React.useMemo(() => {\n        return resourceMap?.map(({ id, name, href, buildings }) =>\n            <CollapseableListItem\n                key={id}\n                name={name}\n                href={`${paths.HOME}${href}`}\n                icon={<MapIcon color=\"primary\" />}\n                sx={{ width: '100%' }}\n            >\n                {buildings.map(({ id, name, href, rooms }) =>\n                    <CollapseableListItem\n                        key={id}\n                        name={name}\n                        href={`${paths.HOME}${href}`}\n                        icon={<BungalowIcon color=\"primary\" />}\n                        sx={{\n                            pl: 6,\n                            width: 'inherit',\n                            backgroundColor: 'background.default'\n                        }}\n                    >\n                        {rooms.map((roomEntry, key) => <RoomListItem key={key} {...roomEntry} />)}\n\n                    </CollapseableListItem>)}\n            </CollapseableListItem>)\n    }, [resourceMap]);\n\n    return (\n        <List>\n            {rendered}\n        </List>\n    );\n}\n\n\n","import ListItem from \"@mui/material/ListItem\";\nimport ListItemButton from \"@mui/material/ListItemButton\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport React from \"react\";\nimport { CreateAddressForm } from \"../../pages/protected/AddressPage/Forms\";\nimport AddIcon from '@mui/icons-material/Add';\n\n\n\nexport default function CreateAddressButton() {\n    const [formOpen, setFormOpen] = React.useState<boolean>(false);\n\n    const handleClick = React.useCallback((ev) => {\n        ev.stopPropagation();\n        setFormOpen(true);\n    }, []);\n\n    return (\n        <>\n            <CreateAddressForm\n                open={formOpen}\n                onClose={() => setFormOpen(false)}\n            />\n            <ListItem\n                component='div'\n                disablePadding\n                onClick={handleClick}\n                sx={{ color: 'primary.dark' }}>\n                <ListItemButton>\n                    <ListItemIcon>\n                        <AddIcon color='primary' />\n                    </ListItemIcon>\n                    Dodaj adres\n                </ListItemButton>\n            </ListItem>\n        </>\n    );\n}","import { Divider, Drawer, ListItem, ListItemText } from \"@mui/material\";\nimport React from \"react\";\nimport MainDrawerList from \"./MainDrawerList\";\nimport DrawerPanel from \"./DrawerPanel\";\nimport AvatarView from './AvatarView';\nimport useSession from \"../../../auth/useSession\";\nimport ResourcesList from \"./ResourcesList\";\nimport CreateAddressButton from \"./CreateAddressButton\";\n\n\ninterface AppDrawerProps {\n    open: boolean,\n    toggleOpen: any,\n}\n\nexport default function AppDrawer({ toggleOpen, open }: AppDrawerProps) {\n    const { user } = useSession();\n\n    return (\n        <Drawer\n            variant=\"temporary\"\n            ModalProps={{\n                keepMounted: true\n            }}\n            anchor=\"left\"\n            open={open}\n            onClose={toggleOpen}\n        >\n            <DrawerPanel toggleOpen={(toggleOpen)}>\n                <AvatarView user={user} />\n\n                <Divider />\n                <MainDrawerList access={user?.access} />\n\n                <Divider />\n                <ListItem\n                    onClick={(ev: React.MouseEvent) => ev.stopPropagation()}\n                    component=\"div\"\n                    sx={{ pb: 0, color: 'text.disabled' }}\n                >\n                    <ListItemText>\n                        Zasoby:\n                    </ListItemText>\n                </ListItem>\n                <ResourcesList />\n\n            </DrawerPanel>\n            <CreateAddressButton />\n        </Drawer>\n    );\n}\n","import { Menu, MenuItem } from \"@mui/material\";\nimport React from \"react\";\nimport useSession from \"../../../auth/useSession\";\nimport paths from \"../../../shared/path\";\nimport AppLink from \"../../../shared/components/AppLink\";\n\n\n\ninterface AccountMenuProps {\n    trigger: null | HTMLElement,\n    handleClose: () => void\n}\n\nconst links = [\n    { name: \"Mój Profil\", link: paths.MY_PROFILE },\n    { name: \"Panel Główny\", link: paths.HOME },\n]\n\n\nexport default function AccountMenu({ trigger, handleClose }: AccountMenuProps) {\n    const { logout } = useSession();\n\n    const linksComp = React.useMemo(() => {\n        return links.map(({ name, link }, i) =>\n            <MenuItem key={i} onClick={handleClose}>\n                <AppLink to={link}>\n                    {name}\n                </AppLink>\n            </MenuItem>)\n    }, [handleClose]);\n\n\n    return (\n        <Menu\n            id=\"menu-appbar\"\n            anchorEl={trigger}\n            anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n            keepMounted\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n            open={Boolean(trigger)}\n            onClose={handleClose}\n        >\n            {linksComp}\n\n            <MenuItem onClick={() => {\n                handleClose();\n                logout();\n            }}>\n                Wyloguj\n            </MenuItem>\n        </Menu>\n    );\n}","import * as React from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\n\n\nimport AccountMenu from './AccountMenu';\nimport useSession from '../../../auth/useSession';\nimport { Avatar } from '@mui/material';\nimport paths from '../../../shared/path';\nimport ImageService from '../../../services/ImageService';\nimport AppLink from '../../../shared/components/AppLink';\n\n\ninterface NavigationBarProps {\n\ttoggleDrawer: any\n}\n\n\nexport default function NavigationBar(props: NavigationBarProps) {\n\tconst { user } = useSession();\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n\tconst handleMenu = React.useCallback((event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetAnchorEl(null);\n\t}, []);\n\n\treturn (\n\t\t<Box sx={{ flexGrow: 1 }}>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t{user && (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tonClick={props.toggleDrawer}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\t\taria-label=\"menu\"\n\t\t\t\t\t\t\tsx={{ mr: 2, color: \"background.default\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon color='inherit' />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t\t<Typography variant=\"h4\" component=\"span\" sx={{\n\t\t\t\t\t\tflexGrow: 1,\n\t\t\t\t\t\tfontFamily: \"Dancing Script, cursive\",\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<AppLink\n\t\t\t\t\t\t\tto={user ? paths.HOME : paths.PUBLIC}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\t\t\t\tcolor: 'background.default',\n\t\t\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\t\t\ttextDecoration: 'none'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRav System\n\t\t\t\t\t\t</AppLink>\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{user && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\tonClick={handleMenu}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\talt={user.name}\n\t\t\t\t\t\t\t\t\tsrc={ImageService.getLink(user.image)}\n\t\t\t\t\t\t\t\t\tsx={{ width: 42, height: 42 }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<AccountMenu\n\t\t\t\t\t\t\t\ttrigger={anchorEl}\n\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</Box>\n\t);\n}\n","import React from \"react\";\nimport AppDrawer from \"./Drawer\";\nimport NavigationBar from \"./NavigationBar\";\n\n\nexport default function Navigation() {\n\tconst [open, setOpen] = React.useState(false);\n\n\tconst toggleDrawer = React.useCallback((\n\t\tevent: React.KeyboardEvent | React.MouseEvent,\n\t\tshouldWork: boolean = true\n\t) => {\n\t\tevent.stopPropagation();\n\t\tif (\n\t\t\tshouldWork &&\n\t\t\tevent.type === 'keydown' &&\n\t\t\t((event as React.KeyboardEvent).key === 'Tab' ||\n\t\t\t\t(event as React.KeyboardEvent).key === 'Shift')\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tsetOpen(old => !old);\n\t}, []);\n\n\treturn <>\n\t\t<NavigationBar toggleDrawer={toggleDrawer} />\n\t\t<AppDrawer\n\t\t\topen={open}\n\t\t\ttoggleOpen={toggleDrawer}\n\t\t/>\n\t</>\n}","import { Box, Container, CssBaseline } from '@mui/material';\n\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\n\n\nimport Theme from './shared/Theme';\nimport SessionProvider from './auth/sessionProvider'\nimport Tabs from './components/pages';\nimport Footer from './components/Footer';\nimport { HashRouter } from 'react-router-dom';\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport NotificationContextProvider from './contexts/NotificationContext/NotificationContextProvider';\nimport { ResourceMapContextProvider } from './contexts/ResourceMapContext';\nimport Navigation from './components/Navigation';\n\n\n\nfunction App() {\n\treturn (\n\t\t<Theme>\n\t\t\t<LocalizationProvider dateAdapter={AdapterDateFns}>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Box component=\"div\" className=\"App\" sx={{ backgroundColor: 'background.default' }}>\n\t\t\t\t\t<HashRouter>\n\t\t\t\t\t\t<NotificationContextProvider>\n\t\t\t\t\t\t\t<SessionProvider >\n\t\t\t\t\t\t\t\t<ResourceMapContextProvider>\n\t\t\t\t\t\t\t\t\t<Navigation />\n\t\t\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t\t\t<Tabs />\n\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t\t</ResourceMapContextProvider>\n\t\t\t\t\t\t\t</SessionProvider>\n\t\t\t\t\t\t</NotificationContextProvider>\n\t\t\t\t\t</HashRouter>\n\t\t\t\t</Box>\n\t\t\t</LocalizationProvider>\n\t\t</Theme>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}