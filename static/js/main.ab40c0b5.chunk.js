(this["webpackJsonpravs-client"]=this["webpackJsonpravs-client"]||[]).push([[1],{103:function(e,t,n){"use strict";var a=n(27),r=n(28),c=function(){function e(){Object(a.a)(this,e),this.id=""}return Object(r.a)(e,[{key:"setIdentity",value:function(e){this.id=e.toString()}},{key:"codeName",value:function(e){return btoa(encodeURI(e+this.id))}},{key:"save",value:function(e,t){var n=JSON.stringify(t);localStorage.setItem(this.codeName(e),n)}},{key:"delete",value:function(e){localStorage.removeItem(this.codeName(e))}},{key:"read",value:function(e){var t=localStorage.getItem(this.codeName(e));if(!t)return null;try{return JSON.parse(t)}catch(n){return null}}}]),e}();t.a=new c},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(13),r=n(6),c=n(50),i=n(967),s=n(87),o=n(950),u=n(2),l=n.n(u),d=n(450),j=n.n(d),b=n(172),f=n(479),p=n(90),h=n(1),O=["children","hidden","index"];function x(e){var t=e.children,n=e.hidden,r=e.index,c=Object(b.a)(e,O);return l.a.useMemo((function(){return Object(h.jsx)(f.a,Object(a.a)(Object(a.a)({role:"tabpanel",hidden:n,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),{},{children:Object(h.jsx)(p.a,{children:t})}))}),[n,r,t,c])}function m(e){var t=Object(c.a)(),n=l.a.useState(0),u=Object(r.a)(n,2),d=u[0],b=u[1],f=l.a.useCallback((function(e,t){b(t)}),[]),p=l.a.useCallback((function(e){b(e)}),[]),O=l.a.useMemo((function(){return e.tabs.map((function(e,t){return Object(h.jsx)(i.a,Object(a.a)({label:Object(h.jsx)(s.a,{component:"h2",variant:"button",children:e.name})},function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}(t)),t)}))}),[e.tabs]),m=l.a.useMemo((function(){return e.tabs.map((function(e,n){return Object(h.jsx)(x,{index:n,hidden:d!==n,dir:t.direction,children:e.component},n)}))}),[e.tabs,d,t.direction]);return Object(h.jsxs)("div",{children:[Object(h.jsx)(o.a,{allowScrollButtonsMobile:!0,value:d,onChange:f,indicatorColor:"primary",variant:"scrollable",sx:{borderBottom:2,borderColor:"divider"},children:O}),Object(h.jsx)("br",{}),Object(h.jsx)(j.a,{axis:"x",index:d,onChangeIndex:p,children:m})]})}},109:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(49),d=n(116),j=n(33),b=n(160),f=n(122),p=n(36),h=n(1),O=Object(o.createContext)(null);function x(e){var t=e.children,n=Object(b.a)(),r=n.getBuildingLink,o=n.reloadMap,x=Object(j.a)(),m=Object(l.i)(),v=u.a.useState(),g=Object(s.a)(v,2),y=g[0],k=g[1],w=Object(f.a)(6e4);u.a.useLayoutEffect((function(){d.a.setPath(m)}),[m]);var C=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getView();case 2:t=e.sent,k(t.data);case 4:case"end":return e.stop()}}),e)}))),[m,w]),S=u.a.useCallback((function(e){k((function(t){if(t)return Object(a.a)(Object(a.a)({},t),{},{occupied:e})}))}),[]),z=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,d.a.update(t);case 5:return k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),t)})),x("Sala zosta\u0142a zaktualizowana","success"),("name"in t&&t.name!==y.name||"buildingId"in t&&t.buildingId!==(null===y||void 0===y?void 0:y.building.id))&&o(),e.abrupt("return",!0);case 11:e.prev=11,e.t0=e.catch(2),x(e.t0.description,"error");case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[x,o,y]),I=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,d.a.remove();case 5:o(),x("Sala zosta\u0142a usuni\u0119ta","success",(function(){return Object(h.jsx)(l.a,{to:r(y.building.id)})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),x(e.t0.description,"error");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[x,y,o,r]),E=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.updateRFID(t);case 3:return k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),{},{RFIDTag:t})})),x("Tag zosta\u0142 przypisany","success"),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),x(e.t0.description,"error"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[x]),P=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.deleteRFIDTag();case 3:k((function(e){if(e)return Object(a.a)(Object(a.a)({},e),{},{RFIDTag:null})})),x("Tag zosta\u0142 usuni\u0119ty","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[x]);return u.a.useEffect((function(){return C(),function(){}}),[C]),Boolean(y)?Object(h.jsx)(O.Provider,{value:{room:y,updateRoom:z,deleteRoom:I,updateRFIDTag:E,deleteRFIDTag:P,setOccupied:S},children:t}):Object(h.jsx)(p.a,{})}function m(){return u.a.useContext(O)}},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(256),o=n(87),u=n(953),l=n(314),d=n(2),j=n.n(d),b=n(72),f=n.n(b),p=n(129),h=n.n(p),O=n(33),x=n(39),m=n(1);function v(e){var t=e.open,n=e.onSuccess,a=e.onClose,d=Object(O.a)(),b=j.a.useState(""),p=Object(i.a)(b,2),v=p[0],g=p[1],y=j.a.useMemo((function(){return Math.random().toString(36).substring(5).toUpperCase()}),[]),k=j.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v===y){e.next=3;break}return d("Wpisany tekst jest niepoprawny","error"),e.abrupt("return");case 3:n(),g("");case 5:case"end":return e.stop()}}),e)}))),[y,v,n,d]),w=j.a.useCallback((function(){g(""),a()}),[a]);return Object(m.jsx)(x.a,{open:t,onClose:w,"aria-label":"Okno do usuwania obiektu",sx:{maxWidth:"400px"},children:Object(m.jsxs)(s.a,{direction:"column",spacing:3,children:[Object(m.jsx)(o.a,{variant:"h5",color:"primary.dark",children:"Usuwanie obiektu"}),Object(m.jsxs)(o.a,{variant:"body1",color:"text.secondary",children:["Tej operacji nie da si\u0119 cofn\u0105\u0107.",Object(m.jsx)("br",{}),"1. Przepisz tekst: ",Object(m.jsx)("b",{children:y}),Object(m.jsx)("br",{}),'2. Naci\u015bnij "Zatwierd\u017a"']}),Object(m.jsx)(u.a,{id:"random-tekst",label:"tekst",variant:"outlined",value:v,onChange:function(e){return g(e.target.value)}}),Object(m.jsxs)(s.a,{direction:"row",justifyContent:"space-around",children:[Object(m.jsx)(l.a,{startIcon:Object(m.jsx)(h.a,{}),onClick:w,children:"Anuluj"}),Object(m.jsx)(l.a,{startIcon:Object(m.jsx)(f.a,{color:"inherit"}),onClick:k,color:"error",children:"Zatwierd\u017a"})]})]})})}},112:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(42),i=n(43),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e){return this.post("/addresses",e)}},{key:"getBuildings",value:function(){return this.get("".concat(this.path,"/buildings"))}},{key:"getResourcesMap",value:function(){return this.get("/addresses/resources")}}]),n}(n(59).a);t.a=new s},116:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(42),i=n(43),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId,a=e.roomId;this._path="/addresses/".concat(t,"/buildings/").concat(n,"/rooms/").concat(a)}},{key:"getView",value:function(){return this.get(this.path)}},{key:"create",value:function(e,t){var n=e.addressId,a=e.buildingId;return this.post("/addresses/".concat(n,"/buildings/").concat(a,"/rooms"),t)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"updateRFID",value:function(e){return this.patch("".concat(this.path,"/keys"),{RFIDTag:e})}},{key:"deleteRFIDTag",value:function(){return this.delete("".concat(this.path,"/keys"))}}]),n}(n(59).a);t.a=new s},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(6),r=n(2),c=n.n(r);function i(e){var t=c.a.useState(),n=Object(a.a)(t,2),r=n[0],i=n[1];return c.a.useEffect((function(){var t=setInterval((function(){return i((function(e){return!e}))}),e);return function(){return clearInterval(t)}}),[e]),r}},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(87),r=n(44),c=n(1);function i(e){return Object(c.jsxs)(a.a,{color:"text.secondary",variant:"body2",fontSize:"smaller",children:["Utworzono: ",Object(r.a)(e.model._created),Object(c.jsx)("br",{}),"Ostatnia aktualizacja: ",Object(r.a)(e.model._updated)]})}},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(49),d=n(33),j=n(21),b=n(112),f=n(40),p=n(36),h=n(1),O=u.a.createContext(null);function x(e){var t=Object(d.a)(),n=Object(f.b)().reloadMap,r=Object(l.i)(),o=u.a.useState(),x=Object(s.a)(o,2),m=x[0],v=x[1];u.a.useLayoutEffect((function(){b.a.setPath(r)}),[r]);var g=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.getCurrentOne();case 2:t=e.sent,v(t.data);case 4:case"end":return e.stop()}}),e)}))),[r]);u.a.useEffect((function(){g()}),[g]);var y=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.getBuildings();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[r]),k=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.update(r);case 3:return v((function(e){return Object(a.a)(Object(a.a)({},e),r)})),n(),t("Adres zaktualizowany","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[t,n]),w=u.a.useCallback(Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.remove();case 3:n(),t("Adres zosta\u0142 usuni\u0119ty","success",(function(){return Object(h.jsx)(l.a,{to:j.a.HOME})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m&&t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,m,n]);return Boolean(m)?Object(h.jsx)(O.Provider,{value:{address:m,deleteAddress:w,getBuildingsInAddress:y,updateAddress:k},children:e.children}):Object(h.jsx)(p.a,{})}function m(){return u.a.useContext(O)}},126:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return x}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(49),l=n(33),d=n(134),j=n(21),b=n(40),f=n(36),p=n(1),h=o.a.createContext(null);function O(e){var t=Object(l.a)(),n=Object(b.b)().reloadMap,a=Object(u.i)(),s=o.a.useState(),O=Object(i.a)(s,2),x=O[0],m=O[1];o.a.useLayoutEffect((function(){d.a.setPath(a)}),[a]);var v=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.getCurrentOne();case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);o.a.useEffect((function(){v()}),[v]);var g=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.getRoomsInBuilding();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),y=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.update(a);case 3:if(!e.sent){e.next=8;break}return x&&("addressId"in a&&x.address.id!==a.addressId||"name"in a)&&n(),m((function(e){return e&&Object.keys(a).forEach((function(t){if("addressId"===t)e.address.id=Number(a[t]);else e[t]=a[t]})),Object.assign({},e)})),t("Bydynek zaktualizowany","success"),e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(e.t0.description,"error");case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t,x,n]),k=o.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.remove();case 3:x&&t("Budynek usuni\u0119ty","success",(function(){return Object(p.jsx)(u.a,{to:j.b.toAddress(x.address.id)})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(e.t0.description,"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[t,x]);return Boolean(x)?Object(p.jsx)(h.Provider,{value:{building:x,deleteBuilding:k,getRoomsInBuilding:g,updateBuilding:y},children:e.children}):Object(p.jsx)(f.a,{})}function x(){return o.a.useContext(h)}},134:function(e,t,n){"use strict";var a=n(27),r=n(28),c=n(42),i=n(43),s=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c)))._path="",e}return Object(r.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId;this._path="/addresses/".concat(t,"/buildings/").concat(n)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e,t){var n=e.addressId;return this.post("/addresses/".concat(n,"/buildings"),t)}},{key:"getRoomsInBuilding",value:function(){return this.get("".concat(this.path,"/rooms"))}}]),n}(n(59).a);t.a=new s},137:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return M})),n.d(t,"a",(function(){return A.a})),n.d(t,"d",(function(){return y.b}));var a=n(256),r=n(2),c=n.n(r),i=n(53),s=n(11),o=n.n(s),u=n(13),l=n(20),d=n(6),j=n(479),b=n(87),f=n(953),p=n(314),h=n(962),O=n(244),x=n(1),m=[{name:"tydzie\u0144",value:"1 week ago"},{name:"miesi\u0105c",value:"1 month ago"},{name:"6 miesi\u0119cy",value:"6 month ago"},{name:"rok",value:"1 year ago"}];function v(){var e=Object(i.b)(),t=e.queryParams,n=e.setQueryParams,r=c.a.useState({from:new Date,to:new Date}),s=Object(d.a)(r,2),v=s[0],g=s[1],y=c.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return Object(u.a)(Object(u.a)({},e),{},{from:t,to:"1 hour"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),k=c.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n({from:null===(a=v.from)||void 0===a?void 0:a.toDateString(),to:null===(r=v.to)||void 0===r?void 0:r.toDateString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v.from,v.to,n]);return Object(x.jsxs)(a.a,{direction:"column",spacing:2,children:[Object(x.jsxs)(j.a,{children:[Object(x.jsx)(b.a,{variant:"subtitle2",children:"Zakres czasu:"}),Object(x.jsx)(O.a,{onChange:y,buttons:m,value:t.from})]}),Object(x.jsxs)(j.a,{component:"form",onSubmit:k,children:[Object(x.jsx)(b.a,{variant:"subtitle2",pb:"5px",children:"Zakres niestandardowy:"}),Object(x.jsxs)(a.a,{direction:"row",spacing:1,children:[Object(x.jsx)(h.a,{label:"od",inputFormat:"yyyy-MM-dd",value:v.from,onChange:function(e){return g(Object(u.a)(Object(u.a)({},v),{},{from:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(x.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(h.a,{label:"do",inputFormat:"yyyy-MM-dd",value:v.to,onChange:function(e){return g(Object(u.a)(Object(u.a)({},v),{},{to:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(x.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(x.jsx)(p.a,{type:"submit",variant:(null===t||void 0===t?void 0:t.from)===v.from.toDateString()?"contained":"outlined",children:"OK"})]})]})]})}var g=c.a.memo(v),y=n(226);function k(e){return Object(x.jsx)(i.a,{name:"charts-query-params",default:{from:"1 month ago",to:"1 hour"},children:Object(x.jsx)(y.a,{children:Object(x.jsxs)(a.a,{spacing:4,children:[Object(x.jsx)(g,{}),e.children]})})})}var w=c.a.memo(k),C=n(983),S=n(315),z=n(340),I=n.n(z),E=n(339),P=n.n(E),R=n(963),T=n(943);function M(e){var t=c.a.useState(!!(null===e||void 0===e?void 0:e.defaultOpen)),n=Object(d.a)(t,2),a=n[0],r=n[1];return Object(x.jsxs)(j.a,{children:[Object(x.jsx)(j.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:Object(x.jsxs)(b.a,{variant:"h6",component:"h5",id:e.title.replace(" ","_"),children:[e.title,Object(x.jsx)(R.a,{onClick:function(){return r((function(e){return!e}))},children:a?Object(x.jsx)(P.a,{}):Object(x.jsx)(I.a,{})})]})}),Object(x.jsxs)(C.a,{in:a,timeout:"auto",children:[Object(x.jsx)(S.a,{container:!0,spacing:2,children:e.children}),Object(x.jsx)("br",{}),Object(x.jsx)(T.a,{})]})]})}var A=n(318)},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n.n(a),c=n(229);function i(){return r.a.useContext(c.b)}},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(6),o=n(2),u=n.n(o),l=n(49),d=n(41),j=n(33),b=n(60),f=n(36),p=n(21),h=n(1),O=u.a.createContext(null);function x(e){var t=Object(l.i)(),n=Object(j.a)(),r=Object(d.a)(),o=u.a.useState(),x=Object(s.a)(o,2),m=x[0],v=x[1];u.a.useLayoutEffect((function(){var e="me"===t.userId&&r.user?{userId:r.user.id.toString()}:t;b.a.setPath(e)}),[t,r]);var g=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.getCurrentOne();case 3:t=e.sent,v(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);u.a.useEffect((function(){g()}),[g]);var y=u.a.useCallback(Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.remove();case 3:return a=function(){return null},r&&(null===(t=r.user)||void 0===t?void 0:t.id)===(null===m||void 0===m?void 0:m.id)?r.logout():a=function(){return Object(h.jsx)(l.a,{to:p.a.USERS})},n("U\u017cytkownik zosta\u0142 usuni\u0119ty","success",a),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[n,r,null===m||void 0===m?void 0:m.id]),k=u.a.useCallback(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.update(t);case 3:if(!e.sent){e.next=6;break}v((function(e){return Object(a.a)(Object(a.a)({},e),t)})),n("U\u017cytkownik zosta\u0142 zaktualizowany","success");case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return m?Object(h.jsx)(O.Provider,{value:{user:m,deleteUser:y,updateUser:k},children:e.children}):Object(h.jsx)(f.a,{})}function m(){return u.a.useContext(O)}},21:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a={PUBLIC:"/public",HOME:"/app"};a.LOGIN=a.PUBLIC+"/login",a.REGISTER=a.PUBLIC+"/register",a.ACTIVATE=a.PUBLIC+"/activate",a.REMIND_PASSWORD=a.PUBLIC+"/passwd",a.ACCESS=a.HOME+"/accesses",a.SETTINGS=a.HOME+"/settings",a.USERS=a.HOME+"/users",a.USER=a.USERS+"/:userId",a.MY_PROFILE=a.USERS+"/me",a.INFRASTRUCTURE=a.HOME+"/infrastructure",a.ADDRESS=a.HOME+"/addresses/:addressId",a.BUILDING=a.ADDRESS+"/buildings/:buildingId",a.ROOM=a.BUILDING+"/rooms/:roomId",a.LOGS=a.HOME+"/logsexplorer";var r={toAddress:function(e){return"/app/addresses/".concat(e)},toBuilding:function(e,t){return r.toAddress(e)+"/buildings/".concat(t)},toRoom:function(e,t,n){return r.toBuilding(e,t)+"/rooms/".concat(n)},toUser:function(e){return a.USERS+"/".concat(e)}};t.a=a},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(49),l=n(41),d=n(33),j=n(53),b=n(27),f=n(28),p=n(42),h=n(43),O=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var a=0,r=Object.entries({"/settings":"/requests","/users":"/users"});a<r.length;a++){var c=Object(i.a)(r[a],2),s=c[0],o=c[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId,"/buildings"),"buildingId"in e&&(t+="/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&(t+="/users/".concat(e.userId));return t}},{key:"fetchData",value:function(e,t){return this.get(this.preparePath(e)+"/stats",t)}}]),n}(n(59).a),x=new O,m=n(36),v=n(122),g=n(1),y=o.a.createContext(null);function k(e){var t=Object(d.a)(),n=Object(u.i)(),a=Object(v.a)(6e4),s=Object(l.a)().user,b=Object(j.b)().queryParams,f=o.a.useState({}),p=Object(i.a)(f,2),h=p[0],O=p[1],k=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,"userId"in n&&"me"===n.userId&&(a={userId:"".concat(null===s||void 0===s?void 0:s.id)}),e.prev=2,e.next=5,x.fetchData(a,b);case 5:c=e.sent,O(c.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(e.t0.description,"error"),O({});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,b,n,null===s||void 0===s?void 0:s.id]);return o.a.useEffect((function(){k()}),[k,a]),0===Object.keys(h).length?Object(g.jsx)(m.a,{}):Object(g.jsx)(y.Provider,{value:{chartsData:h},children:e.children})}function w(){return o.a.useContext(y)}},228:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(6),r=n(2),c=n.n(r),i=n(103),s={queryParams:{q:1},setQueryParams:function(e){}},o=n(1),u=c.a.createContext(s);function l(e){var t=c.a.useState((function(){return t=e.name,n=e.default,i.a.read(t)||n;var t,n})),n=Object(a.a)(t,2),r=n[0],s=n[1];return c.a.useEffect((function(){i.a.save(e.name,r)}),[r,e.name]),r?Object(o.jsx)(u.Provider,{value:{queryParams:r,setQueryParams:s},children:e.children}):null}},229:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(41),l=n(122),d=n(112),j=n(33),b=n(1),f=o.a.createContext(null);function p(e){var t=o.a.useState([]),n=Object(i.a)(t,2),a=n[0],s=n[1],p=o.a.useState(!1),h=Object(i.a)(p,2),O=h[0],x=h[1],m=Object(l.a)(3e5),v=Object(u.a)().user,g=Object(j.a)(),y=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.getResourcesMap();case 3:(null===(t=e.sent)||void 0===t?void 0:t.data)&&s(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[g]);o.a.useEffect((function(){v&&y(),x(!0)}),[v,y,m]);var k=o.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]),w=o.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2)}),[a]),C=o.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return{name:e.name,href:e.href,id:e.id}}))})).flat(2)}),[a]),S=o.a.useMemo((function(){return a.map((function(e){return{name:e.name,href:e.href,id:e.id}}))}),[a]),z=o.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]);return!1===O?null:Object(b.jsx)(f.Provider,{value:{resourceMap:a,reloadMap:function(){y()},allRooms:w,getRoomLink:k,getBuildingLink:z,allAddresses:S,allBuildings:C},children:e.children})}},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(13),r=n(2),c=n(873),i=n(256),s=n(482),o=n(481),u=n(878),l=n(875),d=n(53),j=n(1);function b(){var e,t=Object(d.b)(),n=t.queryParams,b=t.setQueryParams,f=r.useCallback((function(e,t){b((function(e){return Object(a.a)(Object(a.a)({},e),{},{currentPage:t})}))}),[b]),p=r.useCallback((function(e,t){b((function(t){return Object(a.a)(Object(a.a)({},t),{},{itemsOnPage:Number(e.target.value)})}))}),[b]),h=r.useMemo((function(){return[5,10,15,20].map((function(e){return Object(j.jsx)(s.a,{value:e,children:e},e)}))}),[]);return Object(j.jsxs)(i.a,{spacing:2,sx:{flexWrap:"wrap",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},children:[Object(j.jsx)(c.a,{count:n.pagesCount,size:"small",page:n.currentPage,onChange:f}),Object(j.jsxs)(o.a,{fullWidth:!0,sx:{maxWidth:"100px"},children:[Object(j.jsx)(u.a,{id:"items-on-page-label",children:"Na stronie"}),Object(j.jsxs)(l.a,{size:"small",labelId:"items-on-page-label",id:"items-on-page",label:"Na stronie",value:null!==(e=n.itemsOnPage)&&void 0!==e?e:5,onChange:p,children:[h,Object(j.jsx)(s.a,{value:1e4,children:"wszystko"})]})]})]})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(13),r=n(6),c=n(69),i=n(2),s=n.n(i),o=n(1);function u(e){var t=e.value,n=e.onChange,i=e.label,u=e.name,l=e.sx,d=s.a.useState(),j=Object(r.a)(d,2),b=j[0],f=j[1],p=s.a.useState(t),h=Object(r.a)(p,2),O=h[0],x=h[1],m=s.a.useCallback((function(e){x(e.target.value),clearTimeout(b);var t=setTimeout((function(){n(e)}),1e3);f(t)}),[b,n]);return Object(o.jsx)(c.c,{name:u,value:O,onChange:m,placeholder:i,sx:Object(a.a)({width:"100%",maxWidth:"600px",p:1,bgcolor:"background.default"},l),inputProps:{"aria-label":i}})}},238:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(27),r=n(28),c=n(42),i=n(43),s=n(203),o=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r,c;return Object(a.a)(this,n),(c=t.call(this,null===(r=e.error)||void 0===r?void 0:r.description)).data=void 0,c.data=e,c}return Object(r.a)(n,[{key:"code",get:function(){return this.data.statusCode}},{key:"description",get:function(){var e;return null===(e=this.data.error)||void 0===e?void 0:e.description}}]),n}(Object(s.a)(Error))},244:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(882),r=n(876),c=n(481),i=n(880),s=n(2),o=n.n(s),u=n(1);function l(e){var t=e.onChange,n=e.buttons,s=e.value,l=o.a.useCallback((function(e){t(e.target.value)}),[t]),d=o.a.useMemo((function(){return n.map((function(e){var t=e.value,n=e.name;return Object(u.jsx)(a.a,{value:t,control:Object(u.jsx)(r.a,{}),label:n,"aria-label":n,title:n},n)}))}),[n]);return Object(u.jsx)(c.a,{component:"fieldset",children:Object(u.jsx)(i.a,{row:!0,"aria-label":"wyb\xf3r opcji",name:"wyb\xf3r zdefiniowanej opcji",value:s,onChange:l,children:d})})}},249:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return R}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(2),o=n.n(s),u=n(49),l=n(33),d=n(27),j=n(28),b=n(42),f=n(43),p=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/users/auth",{email:t.email,password:t.password});case 2:return(n=e.sent).data&&localStorage.setItem(this._TOKEN_NAME,n.data.toString()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem(this._TOKEN_NAME)}},{key:"hasToken",value:function(){return Boolean(localStorage.getItem(this._TOKEN_NAME))}},{key:"hasSession",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.hasToken()){e.next=5;break}return e.next=4,this.get("/users/me");case 4:return e.abrupt("return",!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(n(59).a),h=new p,O=n(45),x=n(332),m=n(78),v=n(94),g=n(103),y=n(60),k=n(13),w=n(879),C=n(881),S=n(87),z=n(1);function I(e){return Object(z.jsxs)(w.a,{sx:Object(k.a)({display:"flex",flexDirection:"column",color:"primary.main",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"background.default"},e.sx),open:e.open,children:[Object(z.jsx)(S.a,{variant:"h5",pb:2,children:e.text}),Object(z.jsx)(C.a,{color:"inherit"})]})}var E=n(21),P=Object(s.createContext)(null);function R(e){var t=e.children,n=Object(l.a)(),a=o.a.useState(!0),d=Object(i.a)(a,2),j=d[0],b=d[1],f=Object(s.useState)(null),p=Object(i.a)(f,2),k=p[0],w=p[1],C=o.a.useCallback((function(e){w(e),g.a.setIdentity(e.id),m.a.metadata=e.metadata,m.a.userId=e.id,v.a.userId=e.id,x.a.userId=e.id,O.a.userId=e.id,y.a.userId=e.id}),[]),S=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!h.hasToken()){e.next=19;break}return e.prev=2,e.next=5,h.hasSession();case 5:if(!e.sent){e.next=13;break}return e.next=8,y.a.getMe();case 8:t=e.sent,C(t),n("Witaj ponownie!","info"),e.next=14;break;case 13:n("Twoja sesja wygas\u0142a","info",(function(){return Object(z.jsx)(u.a,{to:E.a.LOGIN})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(e.t0.description,"error",(function(){return Object(z.jsx)(u.a,{to:E.a.WELCOME})}));case 19:b(!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),[n,C]);o.a.useEffect((function(){return S(),function(){}}),[S]);var R=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.login(t);case 3:return e.next=5,y.a.getMe();case 5:a=e.sent,C(a),n("Pomy\u015blnie zalogowano!","success",(function(){return Object(z.jsx)(u.a,{to:E.a.HOME})})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.description,404===e.t0.code&&(c="U\u017cytkownik nie istnieje"),n(c,"error");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,C]),T=o.a.useCallback((function(){n("Pomy\u015blnie wylogowano!","success",(function(){return Object(z.jsx)(u.a,{to:E.a.PUBLIC})})),w(null),h.logout()}),[n]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(I,{open:j,text:"\u0141adowanie Sesji..."}),Object(z.jsx)(P.Provider,{value:{user:k,login:R,logout:T},children:!j&&t})]})}},250:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var a=n(6),r=n(952),c=n(949),i=n(2),s=n.n(i),o=function(e){},u=n(1),l=Object(i.createContext)(o);function d(e){var t=e.children,n=s.a.useState(),i=Object(a.a)(n,2),o=i[0],d=i[1],j=s.a.useState(!1),b=Object(a.a)(j,2),f=b[0],p=b[1],h=s.a.useState("error"),O=Object(a.a)(h,2),x=O[0],m=O[1],v=s.a.useState(),g=Object(a.a)(v,2),y=g[0],k=g[1],w=s.a.useCallback((function(e,t){"clickaway"!==t&&(p(!1),d(""),k(null))}),[]),C=s.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};m(t),d(e),p(!0),k(n())}),[]);return Object(u.jsxs)(l.Provider,{value:C,children:[t,Object(u.jsx)(r.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:6e3,onClose:w,children:Object(u.jsx)(c.a,{onClose:w,severity:x,sx:{width:"100%"},children:o})}),y]})}},317:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(87),r=n(1);function c(e){return Object(r.jsxs)("span",{children:[Object(r.jsx)(a.a,{variant:"h4",component:"h2",color:"primary.dark",children:e.title}),e.subtitle&&Object(r.jsx)(a.a,{variant:"body1",color:"text.secondary",mt:"5px",children:e.subtitle})]})}},318:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f}));var a=n(479),r=n(315),c=n(256),i=n(87),s=n(2),o=n.n(s),u=n(474),l=n(457),d=n.n(l),j=n(1),b=["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"];function f(e){var t=o.a.useMemo((function(){return{getValue:function(t){return e.resolveDay?b[Number(t.x)]:t.x},min:0}}),[e.resolveDay]),n=o.a.useMemo((function(){return[{getValue:function(e){return e.y},position:"left",elementType:"bar",minDomainLength:15,hardMin:0,scaleType:"linear",showDatumElements:!0}]}),[]),s=o.a.useMemo((function(){var t=e.y.map((function(e){return{label:e.label,data:[]}}));return e.data.forEach((function(n){e.y.forEach((function(a,r){var c=a.key;t[r].data.push({x:n[e.xKey],y:Number(n[c])})}))})),t}),[e.y,e.xKey,e.data]);return Object(j.jsxs)(r.a,{item:!0,xs:12,lg:e.fullWidth?12:6,children:[Object(j.jsxs)(c.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(j.jsx)(i.a,{variant:"body2",component:"h4",color:"text.secondary",children:e.title}),Object(j.jsx)(d.a,{color:"primary"})]}),0===e.data.length?Object(j.jsx)(i.a,{component:"p",color:"text.secondary",children:"Brak danych do nakre\u015blenia wykresu"}):Object(j.jsx)(a.a,{sx:{maxHeight:"400px",height:"40vh",minHeight:"300px",width:"100%"},children:Object(j.jsx)(u.a,{options:{data:s,primaryAxis:t,secondaryAxes:n}})})]})}},319:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(58),r=n(1);a.Font.register({family:"Roboto",src:"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-light-webfont.ttf"});var c=a.StyleSheet.create({page:{fontSize:11,fontFamily:"Roboto",flexDirection:"column",backgroundColor:"#ffffff"},section:{marginBottom:"15px",justifyContent:"flex-start",padding:"15px"},head:{fontSize:"16px"}});function i(e){return Object(r.jsx)(a.Document,{children:Object(r.jsxs)(a.Page,{size:"A4",style:c.page,wrap:!0,children:[Object(r.jsxs)(a.View,{style:c.section,children:[Object(r.jsxs)(a.Text,{style:c.head,children:["Rav System, dnia ",(new Date).toLocaleString("pl")]}),Object(r.jsx)(a.Text,{style:c.head,children:e.subject})]}),e.sections.map((function(e,t){return Object(r.jsx)(a.View,{style:c.section,children:e},t)}))]})})}},320:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(58),r=n(1),c=a.StyleSheet.create({title:{padding:"5px",marginBottom:"5px",fontSize:"18px"},table:{},row:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid black"},cell:{padding:"5px",width:"80px",alignItems:"center"},text:{margin:"0px",padding:"0px",wordBreak:"keep-all",textAlign:"center"}});function i(e){var t=e.cols;return Object(r.jsx)(a.View,{style:c.row,children:t.map((function(e,t){return Object(r.jsx)(s,{val:e},t)}))})}function s(e){return Object(r.jsx)(a.View,{style:c.cell,children:Object(r.jsx)(a.Text,{style:c.text,children:e.val})})}function o(e){return e.every((function(e){return e.slice(1).every((function(e){return 0===e}))}))}function u(e){var t=e.rows,n=e.title;return Object(r.jsxs)(a.View,{children:[Object(r.jsx)(a.Text,{style:c.title,children:n}),o(t.slice(1))?Object(r.jsx)(a.Text,{style:c.text,children:"Brak danych w wybranym przedziale czasu"}):t.map((function(e,t){return Object(r.jsx)(i,{cols:e},t)}))]})}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n(250);function c(){return Object(a.useContext)(r.b)}},332:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(42),u=n(43),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"fetch",value:function(e,t){return this.get(this.preparePath(e)+"/requests",t)}},{key:"getStats",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/requests/stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(59).a);t.a=new l},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(881),r=n(479),c=n(1);function i(){return Object(c.jsx)(r.a,{sx:{display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",minHeight:"200px",height:"100%"},children:Object(c.jsx)(a.a,{})})}},39:function(e,t,n){"use strict";var a=n(13),r=n(2),c=n(879),i=n(874),s=n(863),o=n(480),u=n(1);function l(e){var t=e.children,n=e.open,r=e.sx,l=e.onClose;return Object(u.jsx)(i.a,{open:n,onClose:l,closeAfterTransition:!0,BackdropComponent:c.a,BackdropProps:{timeout:500},sx:{display:"flex",justifyContent:"center",alignItems:"flex-start",overflow:"auto"},children:Object(u.jsx)(s.a,{in:n,children:Object(u.jsx)(o.a,{sx:Object(a.a)({bgcolor:"background.paper",position:"absolute",width:"95%",mt:"5vw",maxWidth:"500px",boxShadow:24,p:3},r),children:t})})})}t.a=r.memo(l)},40:function(e,t,n){"use strict";var a=n(160);n.d(t,"b",(function(){return a.a}));var r=n(229);n.d(t,"a",(function(){return r.a}))},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),r=n(249);function c(){return Object(a.useContext)(r.b)}},439:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(11),r=n.n(a),c=n(20),i=n(6),s=n(314),o=n(87),u=n(939),l=n(455),d=n.n(l),j=n(2),b=n.n(j),f=n(60);function p(e,t){switch(t.statusCode){case 200:case 201:return{success:!0,message:"Kod zosta\u0142 wys\u0142any na podany email"};case 403:case 401:case 400:default:return{success:!1,message:t.payload};case 404:return{success:!1,message:"Taki u\u017cytkownik nie istnieje."};case 422:return{success:!1,message:"Adres email jest niepoprawny"};case"NO_ADDRESS":return{success:!1,message:"Musisz poda\u0107 adres email"}}}var h=n(1);function O(e){var t,n=b.a.useReducer(p,{success:null,message:e.text}),a=Object(i.a)(n,2),l=a[0],j=a[1],O=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.email||j({statusCode:"NO_ADDRESS"}),t.prev=1,t.next=4,f.a.generateKey(e.email);case 4:n=t.sent,j(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),j({statusCode:t.t0.code,payload:t.t0.description});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsxs)(u.a,{component:"div",display:"flex",children:[Object(h.jsx)(s.a,{sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},onClick:O,children:Object(h.jsx)(d.a,{fontSize:"large"})}),Object(h.jsx)(u.a,{sx:{display:"flex",alignItems:"center",ml:1},children:Object(h.jsx)(o.a,{variant:"body2",component:"p",color:(t=l.success,null===t?"inherit":!0===t?"green":"error"),children:l.message})})]})}},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(6);function r(e){var t=new Date(e);return new Intl.DateTimeFormat("pl-PL",{dateStyle:"medium",timeStyle:"medium"}).format(t)}var c=new Intl.DateTimeFormat("pl-PL",{timeStyle:"medium"});function i(e){if(!e)return!1;var t=new Date(e);return Boolean(t.getDate())}function s(e){var t=e.split(/\.|:|,\s/).map((function(e){return Number(e)})),n=Object(a.a)(t,6),r=n[0],c=n[1],i=n[2],s=n[3],o=n[4],u=n[5];return new Date(i,c-1,r,s,o,u)}},440:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(11),r=n.n(a),c=n(20),i=n(4),s=n(13),o=n(6),u=n(953),l=n(314),d=n(315),j=n(970),b=n(939),f=n(439),p=n(2),h=n.n(p),O=n(87),x=n(1);function m(e){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.a,{variant:"h5",sx:{mt:3},children:e.title}),Object(x.jsx)(O.a,{variant:"body2",sx:{mt:1},children:e.text}),e.children]})}var v=n(60),g=n(49),y=n(21),k=n(33);function w(e){var t,n,a=Object(k.a)(),p=h.a.useState({email:null!==(t=null===(n=localStorage.getItem("email"))||void 0===n?void 0:n.toString())&&void 0!==t?t:"",newPassword:"",code:""}),O=Object(o.a)(p,2),w=O[0],C=O[1],S=h.a.useCallback((function(e){C((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))}),[]),z=h.a.useCallback(function(){var t=Object(c.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,v.a.changePassword(w);case 4:a("Has\u0142o zosta\u0142o zmienione","success",(function(){return e.onSuccess&&e.onSuccess(),Object(x.jsx)(g.a,{to:y.a.LOGIN})})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),c=t.t0.description,404===t.t0.code&&(c="Taki u\u017cytkownik nie istnieje"),a(c,"error");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),[w,a,e]);return Object(x.jsxs)(b.a,{component:"form",onSubmit:z,sx:{mt:1},children:[Object(x.jsxs)(m,{title:"1. Wygeneruj Kod",text:"Podaj sw\xf3j aders email i naci\u015bnij przycisk by otrzyma\u0107 email i kodem.",children:[Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email",autoFocus:!0,value:w.email,onChange:S}),Object(x.jsx)(f.a,{text:"Kliknij przycisk by otrzyma\u0107 kod.",email:w.email})]}),Object(x.jsxs)(m,{title:"2. Podaj nowe has\u0142o i kod",text:"Podaj nowe has\u0142o i kod kt\xf3ry otrzyma\u0142e\u015b (je\u015bli nie, powt\xf3rz krok nr 1)",children:[Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"Has\u0142o",type:"password",id:"password",value:w.newPassword,onChange:S,autoComplete:"current-password"}),Object(x.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Kod",type:"text",id:"code",value:w.code,onChange:S,autoComplete:"email-code"})]}),Object(x.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"3. Zmie\u0144 Has\u0142o"}),Object(x.jsx)(d.a,{container:!0,justifyContent:"flex-end",children:Object(x.jsx)(d.a,{item:!0,children:Object(x.jsx)(j.a,{href:y.a.LOGIN,children:"Has\u0142o zmienione? Zaloguj si\u0119!"})})})]})}},45:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(42),u=n(43),l=n(238),d=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"sendImage",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t,{method:"POST",cache:"no-cache",mode:"cors",body:n,headers:{Authorization:this.authToken}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(c=e.sent,console.debug(c),a.ok){e.next=10;break}throw console.error("".concat(a.status,"\t").concat(null===c||void 0===c||null===(i=c.error)||void 0===i?void 0:i.type,"\t").concat(null===c||void 0===c||null===(s=c.error)||void 0===s?void 0:s.description)),new l.a(c);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLink",value:function(e){return(null===e||void 0===e?void 0:e.url.includes("http"))?e.url:this._BASE_URL.slice(0,this._BASE_URL.length-3)+(null===e||void 0===e?void 0:e.url)}},{key:"upload",value:function(e,t){var n=new FormData;return n.append("file",t),this.sendImage(this.preparePath(e)+"/image",n)}},{key:"remove",value:function(e){return this.delete(this.preparePath(e)+"/image")}}]),n}(n(59).a);t.a=new d},510:function(e,t,n){},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(315),r=n(87),c=n(2),i=n.n(c),s=n(129),o=n.n(s),u=n(166),l=n.n(u),d=n(256),j=n(314),b=n(1);function f(e){var t=e.title,n=e.subtitle,c=e.onSubmit,s=e.onCancel,u=e.children,f=i.a.useCallback((function(e){e.preventDefault(),c()}),[c]);return Object(b.jsxs)(d.a,{rowGap:3,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)(r.a,{variant:"h5",color:"primary.dark",children:t}),n&&Object(b.jsx)(r.a,{variant:"body2",color:"text.secondary",mt:"5px",children:n})]}),Object(b.jsxs)(a.a,{container:!0,spacing:2,component:"form",onSubmit:f,children:[u,Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsxs)(d.a,{direction:"row",justifyContent:"space-around",mt:1.5,children:[Object(b.jsx)(j.a,{"aria-label":"Zamknij",title:"Zamknij",startIcon:Object(b.jsx)(o.a,{}),onClick:s,children:"Zamknij"}),Object(b.jsx)(j.a,{"aria-label":"Zatwierd\u017a",title:"Zatwierd\u017a",startIcon:Object(b.jsx)(l.a,{color:"inherit"}),type:"submit",color:"success",children:"Zatwierd\u017a"})]})})]})]})}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return i}));var a=n(228),r=n(2),c=n.n(r);function i(){return c.a.useContext(a.b)}},546:function(e,t){},548:function(e,t){},578:function(e,t){},579:function(e,t){},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(6),r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(238),l=function(){function e(){Object(s.a)(this,e),this._BASE_URL="https://ravsapi.herokuapp.com/v1",this._TOKEN_NAME="auth_token",this._userId=-1}return Object(o.a)(e,[{key:"userId",get:function(){if(-1===this._userId)throw Error("user id was not set");return this._userId},set:function(e){this._userId=e}},{key:"authToken",get:function(){return"Bearer "+window.localStorage.getItem(this._TOKEN_NAME)}},{key:"_fetch",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t.endpoint,{method:t.method,cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json",Authorization:this.authToken},body:JSON.stringify(t.body)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,401!==n.status||t.endpoint.match("/auth|me|activate")||window.location.reload(),n.ok){e.next=11;break}throw new u.a(a);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var r=0,c=Object.entries({"/accesses":"/accesses","/settings":"/configurations","/users":"/users"});r<c.length;r++){var i=Object(a.a)(c[r],2),s=i[0],o=i[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId),"buildingId"in e&&(t+="/buildings/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&("me"===e.userId?t+="/users/"+this.userId.toString():t+="/users/"+e.userId);return t}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fetch({method:"GET",endpoint:e+"?"+new URLSearchParams(t).toString()})}},{key:"post",value:function(e,t){return this._fetch({method:"POST",endpoint:e,body:t})}},{key:"patch",value:function(e,t){if(0!==Object.keys(t).length)return this._fetch({method:"PATCH",endpoint:e,body:t})}},{key:"delete",value:function(e){return this._fetch({method:"DELETE",endpoint:e})}}]),e}()},60:function(e,t,n){"use strict";var a=n(11),r=n.n(a),c=n(20),i=n(27),s=n(28),o=n(42),u=n(43),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="/users",e}return Object(s.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"getMe",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/users/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(e){return this.get("/users",e)}},{key:"register",value:function(e){return this.post("/users",e)}},{key:"activate",value:function(e){return this.patch("/users/activate",e)}},{key:"generateKey",value:function(e){return this.post("/users/key",{email:e})}},{key:"updateAccess",value:function(e,t){return this.patch("/users/".concat(e,"/access"),{accessId:t})}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"changePassword",value:function(e){return this.patch("/users/password",e)}}]),n}(n(59).a);t.a=new l},690:function(e,t){},78:function(e,t,n){"use strict";var a=n(13),r=n(11),c=n.n(r),i=n(20),s=n(27),o=n(28),u=n(103),l=n(60),d=function(){function e(){var t;Object(s.a)(this,e),this.STORAGE_NAME="user-metadata",this.data=void 0,this._userId=void 0,this.data=null!==(t=u.a.read(this.STORAGE_NAME))&&void 0!==t?t:{notes:"",favourites:[]}}return Object(o.a)(e,[{key:"save",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.a.save(this.STORAGE_NAME,this.data),this._userId){e.next=3;break}return e.abrupt("return");case 3:return l.a.setPath({userId:null===(t=this._userId)||void 0===t?void 0:t.toString()}),e.prev=4,e.next=7,l.a.update({metadata:this.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"userId",set:function(e){this._userId=e}},{key:"metadata",set:function(e){this.data=Object(a.a)(Object(a.a)({},this.data),e)}},{key:"notes",get:function(){var e;return null!==(e=this.data.notes)&&void 0!==e?e:""},set:function(e){this.data.notes=e,this.save()}},{key:"favourites",get:function(){var e;return null!==(e=this.data.favourites)&&void 0!==e?e:[]}},{key:"addFavourite",value:function(e){var t,n;null===(t=this.data.favourites)||void 0===t||t.push(e),null===(n=this.data.favourites)||void 0===n||n.sort((function(e,t){return e.type>=t.type?e.type===t.type?e.name>t.name?1:-1:1:-1})),console.log(this.data),this.save()}},{key:"isFavourite",value:function(e){var t;return Boolean(null===(t=this.data.favourites)||void 0===t?void 0:t.find((function(t){var n=t.id;return t.type===e.type&&n===e.id})))}},{key:"removeFavourite",value:function(e){var t;this.data.favourites=null===(t=this.data.favourites)||void 0===t?void 0:t.filter((function(t){return t.id+t.type!==e.id+e.type})),this.save()}}]),e}();t.a=new d},859:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(93),i=n.n(c),s=(n(510),n(947)),o=n(479),u=n(984),l=(n(511),n(512),n(513),n(514),n(959)),d=n(931),j=n(932),b=n(313),f=n(13),p=n(172),h=n(46),O=n(1),x=["href"],m=a.forwardRef((function(e,t){var n=e.href,a=Object(p.a)(e,x);return Object(O.jsx)(h.b,Object(f.a)({"data-testid":"custom-link",ref:t,to:n},a))})),v=Object(b.a)({palette:{primary:d.a,secondary:{dark:"#f5f5f5",main:"#304ffe",light:"#fff"},background:{default:"#f3f3f3",paper:"#fff"}},shape:{borderRadius:4},components:{MuiCssBaseline:{styleOverrides:{body:Object(j.a)({track:"#f5f5f5",thumb:"#adadad",active:"#959595"})}},MuiTextField:{defaultProps:{size:"medium",variant:"outlined"}},MuiSelect:{defaultProps:{size:"medium"}},MuiButton:{defaultProps:{sx:{borderRadius:function(e){var t=e.shape;return Number(t.borderRadius)/2}}}},MuiLink:{defaultProps:{component:m}},MuiButtonBase:{defaultProps:{LinkComponent:m}},MuiSvgIcon:{defaultProps:{color:"inherit"}},MuiIconButton:{defaultProps:{color:"primary"}}}});function g(e){return Object(O.jsx)(l.a,{theme:v,children:e.children})}var y=n(249),k=n(939),w=n(49),C=n(21),S=n(41),z=n(36),I=r.a.lazy((function(){return n.e(10).then(n.bind(null,1018))}));function E(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(I,{})})}var P=n(315),R=n(256),T=n(53),M=n(11),A=n.n(M),D=n(20),B=n(6),F=n(94),L=n(109),W=n(33),N=n(39),U=n(87),_=n(963),q=n(966),H=n(44),G=n(110),K=n(4),Z=n(953),V=n(878),Q=n(481),J=n(875),Y=n(482),$=n(40);function X(){return r.a.useContext(Ke)}var ee=n(52),te=n(951);function ne(e){var t=e.value,n=e.onChange,a=e.label,c=r.a.useCallback((function(e){e&&n(e)}),[n]);return Object(O.jsx)(te.a,{minDate:new Date,label:a,value:t,onChange:c,renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}function ae(e){var t,n,a,c=X().updateReservation,i=Object($.b)().allRooms,s=r.a.useState({}),o=Object(B.a)(s,2),u=o[0],l=o[1],d=r.a.useCallback((function(){e.onClose(),l({})}),[e]),j=r.a.useCallback(Object(D.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e.reservation.id,u);case 2:if(!t.sent){t.next=5;break}d(),l({});case 5:case"end":return t.stop()}}),t)}))),[e,u,d,c]),b=r.a.useCallback((function(e){l((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(K.a)({},e.target.name,e.target.value))}))}),[]),p=r.a.useCallback((function(e,t){t&&l((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e,t.toLocaleString("pl")))}))}),[]);return Object(O.jsx)(N.a,{open:e.open,onClose:d,"aria-label":"Okno do edycji rezerwacji",children:Object(O.jsxs)(ee.a,{title:"Edycja rezerwacji",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:j,onCancel:e.onClose,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(t=u.title)&&void 0!==t?t:e.reservation.title,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(n=u.description)&&void 0!==n?n:e.reservation.description,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{value:u.plannedStart?Object(H.b)(u.plannedStart):new Date(e.reservation.plannedStart),label:"Pocz\u0105tek",onChange:function(e){return p("plannedStart",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{value:u.plannedEnd?Object(H.b)(u.plannedEnd):new Date(e.reservation.plannedEnd),label:"Koniec",onChange:function(e){return p("plannedEnd",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(J.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(a=u.roomId)&&void 0!==a?a:e.reservation.room.id,label:"Sala",onChange:function(e){return l((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:i.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var re=n(314),ce=n(72),ie=n.n(ce);function se(e){var t,n,a,c,i=X().createReservation,s=Object($.b)().allRooms,u=Object(W.a)(),l=r.a.useState({color:"",from:new Date(e.reservation.plannedStart),to:new Date(e.reservation.plannedEnd)}),d=Object(B.a)(l,2),j=d[0],b=d[1],p=r.a.useState([]),h=Object(B.a)(p,2),x=h[0],m=h[1],v=r.a.useState({title:e.reservation.title,description:e.reservation.description,roomId:null!==(t=e.reservation.room.id)&&void 0!==t?t:0}),g=Object(B.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback((function(){e.onClose()}),[e]),C=r.a.useCallback(Object(D.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.map(function(){var e=Object(D.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(f.a)(Object(f.a)({},y),{},{plannedStart:t.from.toLocaleString("pl"),plannedEnd:t.to.toLocaleString("pl")}));case 2:return n=e.sent,t.color=n?"green":"red",e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,m(n);case 5:case"end":return e.stop()}}),e)}))),[y,x,i]),S=r.a.useCallback((function(e){m((function(t){return t.splice(e,1),Object.assign([],t)}))}),[]),z=r.a.useCallback((function(e,t){b((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e,t))}))}),[]),I=r.a.useCallback((function(){x.find((function(e){var t=e.from,n=e.to;return t===j.from||n===j.to}))?u("Daty powinny si\u0119 r\xf3\u017cni\u0107","error"):m((function(e){return e.push(Object(f.a)(Object(f.a)({},j),{},{color:""})),Object.assign([],e)}))}),[j,u,x]),E=r.a.useCallback((function(e){k((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(K.a)({},e.target.name,e.target.value))}))}),[]);return Object(O.jsx)(N.a,{open:e.open,onClose:w,"aria-label":"Okno do kopiowania rezerwacji",children:Object(O.jsxs)(ee.a,{title:"Kopiowanie rezerwacji",subtitle:"Skopiuj rezerwacj\u0119 dla wybranych przez siebie nowych dat.",onSubmit:C,onCancel:e.onClose,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(n=y.title)&&void 0!==n?n:e.reservation.title,onChange:E})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(a=y.description)&&void 0!==a?a:e.reservation.description,onChange:E})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:5,children:Object(O.jsx)(ne,{label:"Pocz\u0105tek",value:j.from,onChange:function(e){return z("from",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:5,children:Object(O.jsx)(ne,{label:"Koniec",value:j.to,onChange:function(e){return z("to",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:2,children:Object(O.jsx)(re.a,{size:"large",sx:{height:"100%",width:"100%"},variant:"outlined",onClick:I,children:"Dodaj"})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(R.a,{spacing:1,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5,bgcolor:"background.default",maxHeight:"200px",overflow:"auto"},children:[0===x.length&&Object(O.jsx)(U.a,{textAlign:"center",component:"p",children:"Brak dat"}),x.map((function(e,t){var n=e.color,a=e.from,r=e.to;return Object(O.jsxs)(o.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pl:"3px"},children:[Object(O.jsx)(U.a,{component:"p",sx:{color:n},children:Object(O.jsxs)(O.Fragment,{children:[a.toLocaleString("pl"),"\xa0-\xa0",r.toLocaleString("pl")]})}),Object(O.jsx)(_.a,{onClick:function(){return S(t)},children:Object(O.jsx)(ie.a,{})})]},t)}))]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(J.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(c=y.roomId)&&void 0!==c?c:e.reservation.room.id,label:"Sala",onChange:function(e){return k((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:s.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var oe=n(202),ue=n.n(oe),le=n(938),de=n(129),je=n.n(de),be=Object(le.a)("input")({position:"absolute",left:"-1000px",color:"transparent"});function fe(e){var t=r.a.useState(""),n=Object(B.a)(t,2),a=n[0],c=n[1],i=r.a.useState("primary"),s=Object(B.a)(i,2),u=s[0],l=s[1],d=r.a.useRef(null),j=function(){var t=Object(D.a)(A.a.mark((function t(n){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.onScan(a);case 3:t.sent?(l("success"),setTimeout(b,2e3)):l("error"),c("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){e.onClose(),c(""),l("primary")};return Object(O.jsxs)(R.a,{onClick:function(){d.current&&console.log(d.current.focus())},component:"form",direction:"column",spacing:4,onSubmit:j,children:[Object(O.jsx)(ue.a,{sx:{fontSize:140,alignSelf:"center"},color:u}),Object(O.jsx)(be,{ref:d,autoFocus:!0,type:"text",value:a,onChange:function(e){return c(e.target.value)}}),Object(O.jsxs)(o.a,{component:"span",textAlign:"center",children:[Object(O.jsx)(U.a,{variant:"h5",color:"primary.dark",children:e.headline}),Object(O.jsx)(U.a,{variant:"body2",color:"text.secondary",mt:"5px",children:e.bodyText})]}),Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(je.a,{}),onClick:b,color:"error",children:"Zamknij"})]})}function pe(e){var t=X().pingKeyForReservation,n=r.a.useCallback(function(){var n=Object(D.a)(A.a.mark((function n(a){return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t(e.reservationId,a));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(O.jsx)(N.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno do edycji rezerwacji",sx:{maxWidth:"400px"},children:Object(O.jsx)(fe,{headline:"Wczytaj klucz z tagiem NFC",bodyText:'Przy pomocy czytnika, wczytaj wydawany klucz. Aby opu\u015bci\u0107 to okno, naci\u015bnij "Zamknij"',onScan:n,onClose:e.onClose})})}var he=n(449),Oe=n.n(he),xe=n(448),me=n.n(xe),ve=n(130),ge=n.n(ve),ye=n(942),ke=n(476),we=n(940),Ce=n(447),Se=n.n(Ce);function ze(e){var t=r.a.useState(null),n=Object(B.a)(t,2),a=n[0],c=n[1],i=Boolean(a),s=r.a.useCallback((function(e){c(e.currentTarget)}),[]),o=function(){c(null)};return Object(O.jsxs)(k.a,{sx:e.sx,children:[Object(O.jsx)(_.a,{"aria-label":"more-options","aria-controls":"card-menu","aria-expanded":i?"true":void 0,"aria-haspopup":"true",onClick:s,children:Object(O.jsx)(Se.a,{})}),Object(O.jsx)(ke.a,{MenuListProps:{"aria-labelledby":"more-options"},anchorEl:a,id:"card-menu",open:i,onClose:o,PaperProps:{sx:{minWidth:200,maxWidth:"100%"}},children:e.options.map((function(e,t){return Object(O.jsxs)(Y.a,{onClick:function(){e.action(),o()},children:[Object(O.jsx)(we.a,{children:e.icon}),Object(O.jsx)(U.a,{children:e.label})]},t)}))})]})}var Ie=n(968),Ee=n(970),Pe=n(971),Re=n(956),Te=n(941),Me=n(45);function Ae(e){var t=e.user;return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:C.b.toUser(t.id),children:[Object(O.jsx)(Pe.a,{children:Object(O.jsx)(Re.a,{src:Me.a.getLink(t.image),alt:"".concat(t.name," ").concat(t.surname)})}),Object(O.jsx)(Te.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:t.email})]})}function De(e){var t=e.room,n=Object($.b)().getRoomLink,a=r.a.useMemo((function(){return n(t.id)}),[t.id,n]);return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:a,children:[Object(O.jsx)(Pe.a,{children:Object(O.jsx)(Re.a,{src:Me.a.getLink(t.image),alt:"zdj\u0119cie sali ".concat(t.name)})}),Object(O.jsx)(Te.a,{primary:"Sala ".concat(t.name),secondary:t.roomType})]})}var Be={owner:!1,accessAdmin:!1,premisesAdmin:!1,keysAdmin:!1,reservationsAdmin:!1,reservationsAbility:!1,logsAdmin:!1,statsViewer:!1,myId:function(e){return!1}};function Fe(){var e=Object(S.a)().user;return r.a.useMemo((function(){if(!e)return Be;var t=e.access,n=t.owner,a=t.accessAdmin,r=t.premisesAdmin,c=t.keysAdmin,i=t.reservationsAdmin,s=t.reservationsAbility,o=t.logsAdmin,u=t.statsViewer;return{owner:n,accessAdmin:n||a,premisesAdmin:n||r,keysAdmin:n||c,reservationsAdmin:n||i,reservationsAbility:n||s,logsAdmin:n||o,statsViewer:n||u,myId:function(t){return n||e.id===t}}}),[e])}var Le=n(957);function We(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)(U.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(O.jsx)(U.a,{variant:"body1",color:"text.secondary",textAlign:"left",component:"div",children:Object(O.jsx)(R.a,{direction:"row",alignItems:"center",flexWrap:"wrap",rowGap:1,columnGap:1,children:e.children.map((function(e){var t=e.label,n=e.value;return Object(O.jsxs)("div",{children:[t,":\xa0",Object(O.jsx)(Le.a,{label:n})]},t)}))})})]})}function Ne(e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(U.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(O.jsx)(U.a,{variant:"body1",color:"text.secondary",textAlign:"justify",component:"p",children:e.children})]})}function Ue(e){var t=Fe(),n=t.reservationsAdmin,a=t.keysAdmin,c=t.myId,i=t.logsAdmin,s=X().deleteReservation,o=Object(w.g)(),u=r.a.useState(!1),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useState(!1),f=Object(B.a)(b,2),p=f[0],h=f[1],x=r.a.useState(!1),m=Object(B.a)(x,2),v=m[0],g=m[1],y=r.a.useState(!1),k=Object(B.a)(y,2),S=k[0],z=k[1],I=r.a.useCallback(Object(D.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e.reservation.id);case 2:if(!t.sent){t.next=4;break}j(!1);case 4:case"end":return t.stop()}}),t)}))),[e.reservation.id,s]),E=r.a.useMemo((function(){var t=[{icon:Object(O.jsx)(me.a,{color:"primary"}),label:"Kopiuj",action:function(){return z(!0)}}];return a&&t.unshift({icon:Object(O.jsx)(ue.a,{color:"primary"}),label:"Odbij klucz",action:function(){return g(!0)}}),i&&t.push({icon:Object(O.jsx)(ge.a,{color:"primary"}),label:"Logs Explorer",action:function(){return o.push("".concat(C.a.LOGS,"?endpoint=%/reservations/").concat(e.reservation.id))}}),(c(e.reservation.user.id)||n)&&t.push({icon:Object(O.jsx)(ye.a,{color:"primary"}),label:"Edytuj",action:function(){return h(!0)}},{icon:Object(O.jsx)(ie.a,{color:"error"}),label:"Usu\u0144",action:function(){return j(!0)}}),t}),[c,a,i,e.reservation.user.id,e.reservation.id,n,o]);return Object(O.jsxs)(O.Fragment,{children:[(c(e.reservation.user.id)||n)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{open:d,onClose:function(){return j(!1)},onSuccess:I}),Object(O.jsx)(ae,{open:p,onClose:function(){return h(!1)},reservation:e.reservation})]}),Object(O.jsx)(se,{open:S,onClose:function(){return z(!1)},reservation:e.reservation}),a&&Object(O.jsx)(pe,{open:v,onClose:function(){return g(!1)},reservationId:e.reservation.id}),Object(O.jsx)(N.a,{open:e.open,onClose:e.onClose,"aria-label":"Widok Rezerwacji",sx:{maxWidth:"800px",mt:"4vw"},children:Object(O.jsxs)(P.a,{container:!0,spacing:"15px",children:[Object(O.jsx)(P.a,{item:!0,xs:10,sm:11,children:Object(O.jsxs)(R.a,{spacing:4,alignItems:"stretch",children:[Object(O.jsx)(U.a,{component:"h2",variant:"h4",children:e.reservation.title}),Object(O.jsx)(We,{title:"Planowany czas:",children:[{label:"Od",value:Object(H.a)(e.reservation.plannedStart)},{label:"do",value:Object(H.a)(e.reservation.plannedEnd)}]})]})}),Object(O.jsx)(P.a,{item:!0,xs:2,sm:1,children:Object(O.jsxs)(R.a,{alignItems:"flex-end",direction:"column",spacing:3,children:[Object(O.jsx)(_.a,{onClick:e.onClose,children:Object(O.jsx)(Oe.a,{})}),Object(O.jsx)(ze,{options:E,sx:{justifySelf:"right"}}),a&&Object(O.jsx)(_.a,{onClick:function(){return g(!0)},title:"Odbij klucz","aria-label":"Odbij klucz",color:"success",children:Object(O.jsx)(ue.a,{})})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(R.a,{spacing:4,alignItems:"stretch",children:[Object(O.jsx)(We,{title:"Faktyczny czas rezerwacji:",children:[{label:"Pocz\u0105tek",value:e.reservation.actualStart?Object(H.a)(e.reservation.actualStart):"Brak"},{label:"Koniec",value:e.reservation.actualEnd?Object(H.a)(e.reservation.actualEnd):"Brak"}]}),Object(O.jsx)(Ne,{title:"Opis:",children:e.reservation.description}),Object(O.jsxs)(q.a,{component:"div",children:[Object(O.jsx)(Ae,{user:e.reservation.user}),Object(O.jsx)(De,{room:e.reservation.room})]})]})})]})})]})}var _e=r.a.createContext({showReservation:function(e){},reservation:null});function qe(e){var t,n=X().reservations,a=r.a.useState(!0),c=Object(B.a)(a,2),i=c[0],s=c[1],o=r.a.useState(null),u=Object(B.a)(o,2),l=u[0],d=u[1],j=null!==(t=r.a.useMemo((function(){if(l)return n.find((function(e){return e.id===l}))}),[n,l]))&&void 0!==t?t:null,b=r.a.useCallback((function(e){d(e),s(!0)}),[]);return Object(O.jsxs)(_e.Provider,{value:{reservation:j,showReservation:b},children:[e.children,j&&Object(O.jsx)(Ue,{reservation:j,open:i,onClose:function(){return s(!1)}})]})}var He=n(160),Ge=n(122),Ke=r.a.createContext(null);function Ze(e){var t=Object(T.b)(),n=t.queryParams,a=t.setQueryParams,c=Object(W.a)(),i=Object(He.a)().getRoomLink,s=Object(L.b)(),o=Object(S.a)().user,u=Object(w.i)(),l=Object(Ge.a)(3e4),d=r.a.useState(),j=Object(B.a)(d,2),b=j[0],p=j[1],h=r.a.useCallback(Object(D.a)(A.a.mark((function e(){var t,r,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u,0===Object.keys(u).length&&window.location.pathname===C.a.HOME&&(t={userId:"me"}),e.next=5,F.a.getReservations(t,n);case 5:(r=e.sent).pagination&&a((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=r.pagination)||void 0===t?void 0:t.pagesCount})})),p(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c(null!==(i=e.t0.description)&&void 0!==i?i:e.t0.message,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[n.currentPage,n.itemsOnPage,n.from,n.search,a,u,c,o]);r.a.useEffect((function(){h()}),[h,l]);var x=r.a.useCallback((function(){return a((function(e){return Object.assign({},e)}))}),[a]),m=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(t,n){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,a=b.find((function(e){return e.id===t}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,F.a.pingKey(t,n);case 8:r=e.sent,p((function(e){return e&&e.forEach((function(e){e.id===t&&(e.actualStart?e.actualEnd=(new Date).toString():e.actualStart=(new Date).toString())})),Object.assign([],e)})),s&&s.setOccupied(!a.room.occupied),(null===r||void 0===r?void 0:r.data)&&c(r.data.toString(),"success"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),c(e.t0.description,"error"),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,s,c]),v=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.createOne(t);case 3:x(),c("Rezerwacja utworzona prawid\u0142owo!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[c,x]),g=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.remove(t);case 3:p((function(e){return e&&e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c]),y=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.update(t,n);case 3:p((function(e){return e&&e.map((function(e){return e.id===t&&(["plannedStart","plannedEnd"].forEach((function(t){t in n&&(e[t]=Object(H.b)(n[t]).toUTCString())})),["description","title"].forEach((function(t){t in n&&(e[t]=n[t])}))),e}))})),"roomId"in n?n.roomId&&c("Rezerwacja zaktualizowana i przeniesiona!","success",(function(){return Object(O.jsx)(w.a,{to:i(Number(n.roomId))})})):c("Rezerwacja zaktualizowana!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,c]);return Object(O.jsx)(Ke.Provider,{value:{reservations:b,updateReservation:y,deleteReservation:g,createReservation:v,pingKeyForReservation:m},children:Object(O.jsx)(qe,{children:e.children})})}var Ve=n(231),Qe=r.a.memo((function(e){return Object(O.jsx)(Re.a,{alt:"u\u017cytkownik",src:Me.a.getLink(e.img)})}));function Je(e){var t,n=e.data,a=e.onClick,r=F.a.resolveStatus(n),c=r.message,i=r.color;return Object(O.jsxs)(Ie.a,{component:"li",button:!0,sx:{mb:"2px",bgcolor:i,"&:hover, &:focus":{bgcolor:i,filter:"brightness(97%)"}},onClick:a,children:[Object(O.jsx)(Pe.a,{children:Object(O.jsx)(Ee.a,{href:C.b.toUser(n.user.id),children:Object(O.jsx)(Qe,{img:n.user.image})})}),Object(O.jsx)(Te.a,{primary:n.title,secondary:Object(H.a)(null!==(t=n.actualStart)&&void 0!==t?t:n.plannedStart)+" - "+c})]})}function Ye(){var e=r.a.useContext(_e).showReservation,t=X().reservations,n=r.a.useMemo((function(){return null===t||void 0===t?void 0:t.map((function(t){return Object(O.jsx)(Je,{data:t,onClick:function(){return e(t.id)}},t.id)}))}),[t,e]);return t?Object(O.jsx)(q.a,{"aria-label":"lista rezerwacji",children:0===t.length?Object(O.jsx)(Ie.a,{children:Object(O.jsx)(Te.a,{primary:"Brak rezerwacji spe\u0142niaj\u0105cych kryteria."})}):n}):Object(O.jsx)(z.a,{})}var $e=n(962),Xe=n(244),et=n(232),tt=n(246),nt=n.n(tt);function at(e){var t,n=Object(W.a)(),a=Object($.b)().allRooms,c=r.a.useState({start:new Date(Date.now()+36e5),end:new Date(Date.now()+72e5)}),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useState({title:"",description:"",plannedStart:"",plannedEnd:"",roomId:null!==(t=e.roomId)&&void 0!==t?t:0}),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useCallback((function(e){j((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(K.a)({},e.target.name,e.target.value))}))}),[]),p=r.a.useCallback(Object(D.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d.plannedStart=s.start.toLocaleString("pl"),d.plannedEnd=s.end.toLocaleString("pl"),t.prev=2,t.next=5,F.a.createOne(d);case 5:n("Rezerwacja utworzona!","success"),e.onCancel(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(t.t0.description,"error");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),[d,n,e,s.start,s.end]),h=r.a.useCallback((function(e,t){o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e,t))}))}),[]);return Object(O.jsxs)(ee.a,{title:"Tworzenie rezerwacji",subtitle:"Stw\xf3rz rezerwacj\u0119 w wybranym przez siebie pokoju.",onSubmit:p,onCancel:e.onCancel,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{title:"Tytu\u0142 rezerwacji",inputProps:{title:"Tytu\u0142 rezerwacji"},autoFocus:!0,required:!0,fullWidth:!0,maxRows:4,label:"Tytu\u0142",id:"outlined-multiline-flexible",name:"title",value:d.title,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,multiline:!0,maxRows:20,label:"Opis",id:"outlined-multiline-flexible",name:"description",value:d.description,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{label:"Pocz\u0105tek",value:s.start,onChange:function(e){return h("start",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(ne,{label:"Koniec",value:s.end,onChange:function(e){return h("end",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(J.a,{required:!0,labelId:"wybierz-budynek",name:"buildingId",value:d.roomId,label:"Budynek",onChange:function(e){return j((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:a.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})}function rt(e){return Object(O.jsx)(N.a,{open:e.open,"aria-label":"Okno do tworzenia rezerwacji",onClose:e.onClose,children:Object(O.jsx)(at,{roomId:e.roomId,onCancel:e.onClose})})}var ct=r.a.memo(rt),it=[{name:"Dzi\u015b",value:"today"},{name:"Ten tydzie\u0144",value:"this week"},{name:"Od wczoraj",value:"yesterday"}];function st(){var e,t,n,a=Fe().reservationsAbility,c=Object(T.b)(),i=c.setQueryParams,s=c.queryParams,u=Object(w.i)(),l=r.a.useState(!1),d=Object(B.a)(l,2),j=d[0],b=d[1],p=r.a.useState(new Date(Object(H.c)(s.from)?null!==(e=s.from)&&void 0!==e?e:"xxx":Date.now())),h=Object(B.a)(p,2),x=h[0],m=h[1],v=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{from:e})}))}),[i]),g=r.a.useCallback((function(e){e.preventDefault(),i((function(e){return Object(f.a)(Object(f.a)({},e),{},{from:x.toISOString()})}))}),[x,i]),y=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{search:e.target.value})}))}),[i]);return Object(O.jsxs)(O.Fragment,{children:[a&&Object(O.jsx)(ct,{open:j,onClose:function(){return b(!1)},roomId:"roomId"in u?Number(u.roomId):void 0}),Object(O.jsxs)(P.a,{container:!0,component:"form",onSubmit:g,spacing:2,alignItems:"center",children:[Object(O.jsxs)(P.a,{item:!0,xs:12,md:12,children:[Object(O.jsx)(Xe.a,{onChange:v,buttons:it,value:Object(H.c)(s.from)?"":null!==(t=null===s||void 0===s?void 0:s.from)&&void 0!==t?t:it[0].value}),Object(O.jsxs)(o.a,{display:"inline-flex",children:[Object(O.jsx)($e.a,{label:"Od daty",inputFormat:"yyyy-MM-dd",value:x,onChange:function(e){return e&&m(e)},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)(Object(f.a)({},e),{},{size:"small"}))}}),Object(O.jsx)(re.a,{variant:(null===s||void 0===s?void 0:s.from)===x.toISOString()?"contained":"outlined",type:"submit",sx:{ml:1},children:"OK"})]})]}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(et.a,{name:"search",label:"wyszukaj",value:null!==(n=s.search)&&void 0!==n?n:"",onChange:y})}),a&&Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(nt.a,{}),onClick:function(){return b(!0)},children:"Stw\xf3rz rezerwacj\u0119"})})]})]})}var ot=r.a.memo(st);function ut(){return Object(O.jsx)(T.a,{name:"reservations-query-params",default:{itemsOnPage:5,currentPage:1,from:"today"},children:Object(O.jsx)(Ze,{children:Object(O.jsxs)(R.a,{rowGap:3,children:[Object(O.jsx)(ot,{}),Object(O.jsx)(Ye,{}),Object(O.jsx)(Ve.a,{})]})})})}var lt=r.a.memo(ut),dt=n(108),jt=n(125),bt=n(972),ft=n(973),pt=n(974),ht=n(975),Ot=Object(le.a)("iframe")({width:"100%",height:"50vh",maxHeight:"400px",minHeight:"300px"});function xt(e){var t=e.address,n=e.sx,a=r.a.useMemo((function(){var e=t.street,n=t.number,a=t.town,r=t.country,c=new URL("https://maps.google.com/maps"),i=new URLSearchParams({q:"".concat(e+" "+n+" "+a+" "+r),ie:"UTF8",z:"14",iwloc:"",output:"embed"});return c.search=i.toString(),c.toString()}),[t]);return Object(O.jsx)(o.a,{children:Object(O.jsx)(Ot,{src:a,frameBorder:"0",sx:Object(f.a)({},n)})})}var mt=n(131),vt=n.n(mt);function gt(e){var t,n,a,c,i,s=e.open,o=e.onClose,u=Object(jt.b)(),l=u.address,d=u.updateAddress,j=r.a.useState({}),b=Object(B.a)(j,2),p=b[0],h=b[1],x=r.a.useCallback((function(){o(),h({})}),[o]),m=r.a.useCallback((function(e){h((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(K.a)({},e.target.name,e.target.value))}))}),[]),v=r.a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(p);case 2:if(!e.sent){e.next=4;break}x();case 4:case"end":return e.stop()}}),e)}))),[p,x,d]);return Object(O.jsx)(N.a,{open:s,onClose:o,"aria-label":"Okno do edycji budynku",children:Object(O.jsxs)(ee.a,{title:"Edycja adresu",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci adresu i zatwierd\u017a zmiany.",onSubmit:v,onCancel:o,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:null!==(t=p.country)&&void 0!==t?t:l.country,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{autoFocus:!0,required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",value:null!==(n=p.town)&&void 0!==n?n:l.town,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:null!==(a=p.postalCode)&&void 0!==a?a:l.postalCode,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:8,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:null!==(c=p.street)&&void 0!==c?c:l.street,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:4,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:null!==(i=p.number)&&void 0!==i?i:l.number,onChange:m})})]})})}var yt=n(961);function kt(e){var t=e.open,n=e.onClose,a=e.handleCreateBuilding,c=r.a.useState({name:"",openTime:new Date(0,0,0,7,0).toString(),closeTime:new Date(0,0,0,21,0).toString()}),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(f.a)(Object(f.a)({},s),{},{closeTime:H.d.format(new Date(s.closeTime)),openTime:H.d.format(new Date(s.openTime))}));case 2:e.sent&&n();case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(O.jsx)(N.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia budynku",children:Object(O.jsxs)(ee.a,{title:"Dodaj nowy budynek!",subtitle:"Wype\u0142nij dane nowego budynku i kliknij zatwierd\u017a.",onSubmit:l,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(yt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:s.openTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{openTime:e})}))},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(yt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:s.closeTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{closeTime:e})}))},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})})]})})}var wt=n(112);function Ct(e){var t=e.open,n=e.onClose,a=Object(W.a)(),c=Object($.b)().reloadMap,i=r.a.useState({country:"Polska",town:"",street:"",number:"",postalCode:""}),s=Object(B.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback((function(e){u((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(K.a)({},e.target.name,e.target.value))}))}),[]),d=r.a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wt.a.create(o);case 3:c(),a("Adres zosta\u0142 dodany","success"),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0.description,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[o,a,n,c]);return Object(O.jsx)(N.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia adresu",children:Object(O.jsxs)(ee.a,{title:"Dodaj nowy adres!",subtitle:"Wype\u0142nij dane nowego adresu i kliknij zatwierd\u017a.",onSubmit:d,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:o.country,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",autoFocus:!0,value:o.town,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:o.postalCode,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:8,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:o.street,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:4,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:o.number,onChange:l})})]})})}var St=n(124);function zt(){var e=Fe().premisesAdmin,t=Object(jt.b)(),n=t.address,a=t.deleteAddress,c=r.a.useState(!1),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return j(!0)},icon:Object(O.jsx)(vt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}]}),[]);return Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(O.jsx)(gt,{open:d,onClose:function(){return j(!1)}})]}),Object(O.jsxs)(bt.a,{elevation:0,children:[Object(O.jsx)(ft.a,{action:e&&Object(O.jsx)(ze,{options:b}),title:Object(O.jsxs)(O.Fragment,{children:[n.country,", ",n.town]}),subheader:Object(O.jsxs)(O.Fragment,{children:[n.street," ",n.number]})}),Object(O.jsx)(pt.a,{component:"div",children:Object(O.jsx)(xt,{address:n})}),Object(O.jsxs)(ht.a,{children:[Object(O.jsxs)(U.a,{component:"p",children:["ul. ",n.street," ",n.number,Object(O.jsx)("br",{}),n.postalCode," ",n.town,", ",Object(O.jsx)("br",{}),n.country]}),Object(O.jsx)("br",{}),Object(O.jsx)(St.a,{model:n})]})]})]})}var It=n(134),Et=n(233),Pt=n.n(Et);function Rt(e){var t=Fe().premisesAdmin;return Object(O.jsx)(k.a,{children:Object(O.jsxs)(q.a,{sx:{minHeight:"160px",maxHeight:"400px"},children:[t&&Object(O.jsxs)(Ie.a,{button:!0,onClick:e.onAddItem,children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(Pt.a,{color:"primary"})}),Object(O.jsx)(Te.a,{primary:"Dodaj element"})]}),e.children]})})}var Tt=n(338),Mt=n.n(Tt);function At(e){return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:e.link,sx:{py:"2px"},children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(Mt.a,{})}),Object(O.jsx)(Te.a,{primary:e.primary})]})}var Dt=r.a.memo(At),Bt=n(90);function Ft(){var e=Object(jt.b)().getBuildingsInAddress,t=Object($.b)().reloadMap,n=Object(W.a)(),a=Object(w.i)(),c=r.a.useState(!1),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useCallback(Object(D.a)(A.a.mark((function t(){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,j(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,It.a.create(a,r);case 3:return b(),t(),n("Nowa sala utworzona!","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,b,a]),p=r.a.useMemo((function(){return null===d||void 0===d?void 0:d.map((function(e){return Object(O.jsx)(Dt,{primary:"Budynek ".concat(e.name),link:"./".concat(e.address,"/buildings/").concat(e.id)},e.id)}))}),[d]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(kt,{open:s,onClose:function(){return o(!1)},handleCreateBuilding:f}),Object(O.jsx)(Bt.a,{title:"Budynki pod adresem",children:Object(O.jsx)(Rt,{onAddItem:function(){return o(!0)},children:p})}),Object(O.jsx)("br",{})]})}var Lt=r.a.memo(Ft),Wt=r.a.lazy((function(){return n.e(11).then(n.bind(null,1014))})),Nt=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Wt,{})})};function Ut(){var e=Fe().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(lt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(Nt,{})}),t}),[e]);return Object(O.jsx)(jt.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(zt,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Lt,{})})]})]})})}var _t=r.a.memo(Ut),qt=n(126),Ht=n(7),Gt=n(166),Kt=n.n(Gt),Zt=Object(Ht.a)("input")({display:"none"}),Vt=Object(Ht.a)("img")({width:"fill-available",maxHeight:"350px"});function Qt(e){var t=Object(W.a)(),n=Object(w.h)(),a=Object(w.i)(),c=r.a.useState(),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback(function(){var r=Object(D.a)(A.a.mark((function r(c){return A.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),s){r.next=4;break}return t("Najpierw za\u0142aduj nowy obraz","warning"),r.abrupt("return");case 4:return r.prev=4,r.next=7,Me.a.upload(a,s);case 7:e.onUpload&&e.onUpload(),t("Obraz zosta\u0142 zmieniony","success",(function(){return Object(O.jsx)(w.a,{to:n.pathname})})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),t(r.t0.description,"error");case 14:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(e){return r.apply(this,arguments)}}(),[s,e,t,n,a]),l=r.a.useCallback((function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];o(t)}}),[]),d=r.a.useCallback(Object(D.a)(A.a.mark((function r(){return A.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Me.a.remove(a);case 3:e.onDelete&&e.onDelete(),t("Przywr\xf3cono domy\u015blny obraz, za\u0142aduj ponownie aby zobaczy\u0107 rezultat.","success",(function(){return Object(O.jsx)(w.a,{to:n.pathname})})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(r.t0.description,"error");case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),[e,t,n,a]);return Object(O.jsxs)(P.a,{container:!0,component:"form",onSubmit:u,direction:"row",alignItems:"stretch",spacing:2,children:[Object(O.jsx)(P.a,{item:!0,xs:12,sm:9,children:Object(O.jsx)(Vt,{src:s?URL.createObjectURL(s):Me.a.getLink(e.image),alt:"nowy obraz"})}),Object(O.jsxs)(P.a,{item:!0,xs:12,sm:3,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[Object(O.jsxs)("label",{htmlFor:"upload-obrazu",children:[Object(O.jsx)(Zt,{accept:"*.(jpg|png)",id:"upload-obrazu",type:"file",onChange:l}),Object(O.jsx)(re.a,{color:"primary",variant:"outlined",component:"span",children:"Wybierz zdj\u0119cie"})]}),Object(O.jsx)(re.a,{color:"error",startIcon:Object(O.jsx)(ie.a,{}),onClick:d,children:"Usu\u0144"}),Object(O.jsx)(re.a,{type:"submit",color:"success",startIcon:Object(O.jsx)(Kt.a,{}),children:"Zapisz"})]})]})}var Jt,Yt=n(943);function $t(e){var t=e.split(":"),n=Object(B.a)(t,2),a=n[0],r=n[1];return new Date(0,0,0,Number(a),Number(r))}function Xt(e){var t,n,a,c,i=e.open,s=e.onClose,o=Object($.b)().allAddresses,u=Object(qt.b)(),l=u.updateBuilding,d=u.building,j=r.a.useState({}),b=Object(B.a)(j,2),p=b[0],h=b[1],x=r.a.useCallback((function(){s(),h({})}),[s]),m=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);h((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]),v=r.a.useCallback((function(e,t){h((function(n){return n[e]=H.d.format(t),Object.assign({},n)}))}),[]),g=r.a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(p);case 2:if(!e.sent){e.next=4;break}x();case 4:case"end":return e.stop()}}),e)}))),[p,x,l]),y=r.a.useCallback((function(e){var t=e.target.value;"addressId"===e.target.name&&(t=Number(t)),e.target&&h((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]);return Object(O.jsx)(N.a,{open:i,onClose:s,"aria-label":"Okno edycji budynku",children:Object(O.jsxs)(R.a,{spacing:3,children:[Object(O.jsx)(Qt,{image:d.image}),Object(O.jsx)(Yt.a,{}),Object(O.jsxs)(ee.a,{title:"Edycja budynku",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci budynku i zatwierd\u017a zmiany.",onSubmit:g,onCancel:s,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=p.name)&&void 0!==t?t:d.name,onChange:m})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(yt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:$t(null!==(n=p.openTime)&&void 0!==n?n:d.openTime),onChange:function(e){return v("openTime",e)},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(yt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:$t(null!==(a=p.closeTime)&&void 0!==a?a:d.closeTime),onChange:function(e){return v("closeTime",e)},renderInput:function(e){return Object(O.jsx)(Z.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-adres",children:"Adres"}),Object(O.jsx)(J.a,{labelId:"wybierz-adres",name:"addressId",value:null!==(c=p.addressId)&&void 0!==c?c:d.address.id,label:"Adres",onChange:y,children:o.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:[t," "]},t)}))})]})})]})]})})}function en(e){var t=e.open,n=e.onClose,a=e.handleCreateRoom,c=r.a.useState({name:"",roomType:Jt.LECTURE,seatsCount:50,floor:0}),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]),d=r.a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(s);case 2:if(!e.sent){e.next=4;break}n();case 4:case"end":return e.stop()}}),e)}))),[s,a,n]);return Object(O.jsx)(N.a,{open:t,onClose:n,"aria-label":"Okno edycji budynku",children:Object(O.jsxs)(ee.a,{title:"Dodaj now\u0105 sal\u0119",subtitle:"Wype\u0142nij dane nowej sali i kliknij zatwierd\u017a.",onSubmit:d,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"room-type",children:"Typ Sali"}),Object(O.jsx)(J.a,{required:!0,labelId:"room-type",id:"roomType",value:s.roomType,name:"roomType",label:"Typ Sali",onChange:l,children:Object.values(Jt).map((function(e){return Object(O.jsx)(Y.a,{value:e,children:e},e)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:s.seatsCount,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:s.floor,onChange:u})})]})})}!function(e){e.LABORATORY="Sala laboratoryjna",e.CONFERENCE="Sala konferencyjna",e.LECTURE="Sala wyk\u0142adowa"}(Jt||(Jt={}));var tn,nn=n(451),an=n.n(nn),rn=n(452),cn=n.n(rn),sn=n(78);function on(e){var t=r.a.useState(!1),n=Object(B.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(sn.a.isFavourite(e.data))}),[e.data]);var i=r.a.useCallback((function(){a?sn.a.removeFavourite(e.data):sn.a.addFavourite(e.data),c((function(e){return!e}))}),[a,e.data]);return Object(O.jsx)(_.a,{sx:{display:"inline"},onClick:i,color:"warning",children:a?Object(O.jsx)(an.a,{}):Object(O.jsx)(cn.a,{})})}function un(){var e=Fe().premisesAdmin,t=Object(qt.b)(),n=t.building,a=t.deleteBuilding,c=r.a.useState(!1),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return j(!0)},icon:Object(O.jsx)(vt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}]}),[]);return Boolean(n)?Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(O.jsx)(Xt,{open:d,onClose:function(){return j(!1)}})]}),Object(O.jsxs)(bt.a,{elevation:0,children:[Object(O.jsx)(ft.a,{action:e&&Object(O.jsx)(ze,{options:b}),title:Object(O.jsxs)(O.Fragment,{children:["Budynek ",n.name,Object(O.jsx)(on,{data:{id:n.id,name:n.name,type:tn.Building,addressId:n.address.id}})]}),subheader:Object(O.jsxs)(O.Fragment,{children:[n.openTime," - ",n.closeTime]})}),Object(O.jsx)(pt.a,{component:"img",height:"350",image:Me.a.getLink(n.image),alt:n.name}),Object(O.jsxs)(ht.a,{children:[Object(O.jsxs)(Ee.a,{href:C.b.toAddress(n.address.id),children:[n.address.town,",\xa0",n.address.street,"\xa0",n.address.number]}),Object(O.jsx)("br",{}),Object(O.jsx)(St.a,{model:n})]})]})]}):null}!function(e){e.Building="building-item",e.Room="room-item"}(tn||(tn={}));var ln=n(116);function dn(){var e=Object(qt.b)().getRoomsInBuilding,t=Object($.b)().reloadMap,n=Object(w.i)(),a=Object(W.a)(),c=r.a.useState(!1),i=Object(B.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useCallback(Object(D.a)(A.a.mark((function t(){var n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,j(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ln.a.create(n,r);case 3:return a("Nowa sala utworzona!","success"),b(),t(),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),a(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,t,b,n]),p=r.a.useMemo((function(){return null===d||void 0===d?void 0:d.map((function(e){return Object(O.jsx)(Dt,{primary:"Sala ".concat(e.name),link:"./".concat(e.building,"/rooms/").concat(e.id)},e.id)}))}),[d]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(en,{handleCreateRoom:f,open:s,onClose:function(){return o(!1)}}),Object(O.jsx)(Bt.a,{title:"Sale w budynku",children:Object(O.jsx)(Rt,{onAddItem:function(){return o(!0)},children:p})}),Object(O.jsx)("br",{})]})}var jn=r.a.memo(dn),bn=r.a.lazy((function(){return n.e(0).then(n.bind(null,1015))})),fn=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(bn,{})})};function pn(){var e=Fe().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(lt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(fn,{})}),t}),[e]);return Object(O.jsx)(qt.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(un,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(jn,{})})]})]})})}var hn=r.a.memo(pn),On=n(453),xn=n.n(On);function mn(e){switch(e.type){case tn.Building:var t=e,n=t.addressId,a=t.id,r=t.name;return Object(O.jsx)(Te.a,{primary:Object(O.jsxs)(Ee.a,{href:C.b.toBuilding(n,a),children:["Budynek ",r]})},r+a);case tn.Room:var c=e,i=c.addressId,s=c.buildingId,o=c.id,u=c.name;return Object(O.jsx)(Te.a,{primary:Object(O.jsxs)(Ee.a,{href:C.b.toRoom(i,s,o),children:["Sala ",u]})},u+o);default:return null}}function vn(){var e=Object(S.a)().user,t=r.a.useState(),n=Object(B.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(sn.a.favourites)}),[e]);var i=r.a.useCallback((function(e){sn.a.removeFavourite(e),c(sn.a.favourites)}),[]);return Object(O.jsx)(Bt.a,{title:"Ulubione",children:Object(O.jsxs)(q.a,{sx:{minHeight:"160px"},children:[null===a||void 0===a?void 0:a.map((function(e){return Object(O.jsxs)(Ie.a,{disablePadding:!0,children:[mn(e),Object(O.jsx)(_.a,{title:"usu\u0144 z ulubionych","aria-label":"usu\u0144 z ulubionych",onClick:function(){return i(e)},size:"small",children:Object(O.jsx)(xn.a,{fontSize:"small"})})]},"".concat(e.name,"-").concat(e.id))})),0===(null===a||void 0===a?void 0:a.length)&&Object(O.jsx)(Te.a,{color:"text.secondary",primary:"Brak ulubionych"})]})})}var gn=r.a.memo(vn),yn=n(69);function kn(){var e,t=Object(W.a)(),n=r.a.useState(),a=Object(B.a)(n,2),c=a[0],i=a[1];r.a.useEffect((function(){i(sn.a.notes)}),[]);var s=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c){e.next=3;break}return e.abrupt("return");case 3:try{sn.a.notes=c,t("Notatki zosta\u0142y zapisane","success"),i(void 0)}catch(a){t(a.description,"error")}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),o=r.a.useCallback(function(){var e=Object(D.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(O.jsx)(Bt.a,{title:"Notatnik",children:Object(O.jsxs)(k.a,{component:"form",onSubmit:s,sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:[Object(O.jsx)(yn.c,{"aria-label":"twoje notatki",title:"twoje notatki",multiline:!0,minRows:4,maxRows:10,name:"search",value:null!==(e=null!==c&&void 0!==c?c:sn.a.notes)&&void 0!==e?e:"",onChange:o,placeholder:"Twoje notatki",sx:{width:"100%",height:"100%",p:1,bgcolor:"background.default"},inputProps:{"aria-label":"Twoje notatki"}}),Object(O.jsx)(re.a,{title:"Zapisz notatki","aria-label":"Zapisz notatki",sx:{mr:"0px",ml:"auto"},startIcon:Object(O.jsx)(Kt.a,{}),type:"submit",children:"Zapisz"})]})})}var wn=r.a.memo(kn);function Cn(){return Object(O.jsx)(Bt.a,{title:"Rezerwacje",children:Object(O.jsx)(lt,{})})}function Sn(){return Object(O.jsxs)(P.a,{container:!0,spacing:2,children:[Object(O.jsx)(P.a,{item:!0,xs:12,lg:8,children:Object(O.jsx)(Cn,{})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,xs:12,lg:4,alignContent:"flex-start",children:[Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,lg:12,children:Object(O.jsx)(wn,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,lg:12,children:Object(O.jsx)(gn,{})})]})]})}var zn=r.a.lazy((function(){return n.e(12).then(n.bind(null,1019))}));function In(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(zn,{})})}var En=n(977),Pn=n(978),Rn=n(979),Tn=n(980),Mn=n(981),An=n(982),Dn=n(976),Bn=n(882);function Fn(e){var t,n,r,c,i,s,o=e.open,u=e.onClose,l=Object(L.b)(),d=l.room,j=l.updateRoom,b=Object($.b)().allBuildings,p=a.useState({}),h=Object(B.a)(p,2),x=h[0],m=h[1],v=a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"name":t=String(t);break;case"blocked":t=!e.target.checked;break;default:t=Number(t)}m((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]),g=a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&m((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[]),y=a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(x);case 2:if(!e.sent){e.next=4;break}u();case 4:case"end":return e.stop()}}),e)}))),[x,j,u]);return Object(O.jsx)(N.a,{open:o,onClose:u,"aria-label":"Okno usuwania obiektu",sx:{maxWidth:"450px"},children:Object(O.jsxs)(R.a,{spacing:2,children:[Object(O.jsx)(Qt,{image:d.image}),Object(O.jsx)(Yt.a,{}),Object(O.jsxs)(ee.a,{title:"Edycja sali",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:y,onCancel:u,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=x.name)&&void 0!==t?t:d.name,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"room-type",children:"Typ Sali"}),Object(O.jsx)(J.a,{labelId:"room-type",id:"roomType",value:null!==(n=x.roomType)&&void 0!==n?n:d.roomType,name:"roomType",label:"Typ Sali",onChange:g,children:Object.values(Jt).map((function(e){return Object(O.jsx)(Y.a,{value:e,children:e},e)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:null!==(r=x.seatsCount)&&void 0!==r?r:d.seatsCount,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Z.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:null!==(c=x.floor)&&void 0!==c?c:d.floor,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(Q.a,{fullWidth:!0,children:[Object(O.jsx)(V.a,{id:"wybierz-budynek",children:"Budynek"}),Object(O.jsx)(J.a,{labelId:"wybierz-budynek",name:"buildingId",value:null!==(i=x.buildingId)&&void 0!==i?i:d.building.id,label:"Budynek",onChange:g,children:b.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(Y.a,{value:n,children:["Budynek \xa0",t," "]},t)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Bn.a,{labelPlacement:"start",control:Object(O.jsx)(Dn.a,{id:"room-blocked",name:"blocked",inputProps:{"aria-label":"controlled"},onChange:v,checked:!(null!==(s=x.blocked)&&void 0!==s?s:d.blocked)}),label:"Dost\u0119pno\u015b\u0107 Sali"})})]})]})})}function Ln(e){var t=Object(L.b)().updateRFIDTag;return Object(O.jsx)(N.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno przypisania tagu RFID",sx:{maxWidth:"400px"},children:Object(O.jsx)(fe,{headline:"U\u017cyj czytnika, aby wprowadzi\u0107 tag.",bodyText:'Je\u015bli nie chcesz wprowadza\u0107 zmian, naci\u015bnij "Zamknij"',onScan:t,onClose:e.onClose})})}var Wn=n(454),Nn=n.n(Wn),Un=["value"];function _n(e){var t=e.value,n=Object(p.a)(e,Un);return t?Object(O.jsx)(Nn.a,Object(f.a)({color:"success"},n)):Object(O.jsx)(je.a,Object(f.a)({sx:{color:"red"}},n))}function qn(e){var t=e.room,n=e.deleteTag,a=Fe().keysAdmin,c=Object($.b)().getBuildingLink,i=r.a.useState(!1),s=Object(B.a)(i,2),o=s[0],u=s[1],l=r.a.useMemo((function(){var e=[{label:"Ilo\u015b\u0107 miejsc",value:t.seatsCount},{label:"Pi\u0119tro",value:0===t.floor?"parter":t.floor},{label:"Budynek",value:Object(O.jsxs)(Ee.a,{href:c(t.building.id),children:[" ",t.building.name," "]})},{label:"Aktualnie wolny",value:Object(O.jsx)(_n,{value:!t.occupied})}];return a&&e.push({label:"Tag RFID",value:t.RFIDTag?Object(O.jsx)(Le.a,{label:t.RFIDTag,onDelete:n,sx:{maxWidth:"120px"}}):Object(O.jsx)(_.a,{size:"small",onClick:function(){return u(!0)},sx:{p:"0px"},children:Object(O.jsx)(Pt.a,{})})}),e.push({label:"Dost\u0119pny do rezerwacji",value:Object(O.jsx)(_n,{value:!t.blocked})}),e}),[a,t,n,c]),d=r.a.useMemo((function(){return l.map((function(e){var t=e.label,n=e.value;return Object(O.jsxs)(En.a,{hover:!0,children:[Object(O.jsx)(Pn.a,{sx:{color:"text.secondary"},align:"left",children:t}),Object(O.jsx)(Pn.a,{sx:{color:"primary.main",fontWeight:"bold"},align:"left",children:n})]},t)}))}),[l]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ln,{open:o,onClose:function(){return u(!1)}}),Object(O.jsx)(Rn.a,{children:Object(O.jsxs)(Tn.a,{"aria-label":"room-info-table",size:"small",children:[Object(O.jsx)(Mn.a,{sx:{display:"none"},children:Object(O.jsxs)(En.a,{children:[Object(O.jsx)(Pn.a,{align:"left",children:"W\u0142a\u015bciwo\u015b\u0107"}),Object(O.jsx)(Pn.a,{align:"left",children:"stan"})]})}),Object(O.jsx)(An.a,{children:d})]})})]})}function Hn(){var e=Fe(),t=e.premisesAdmin,n=e.logsAdmin,a=Object(L.b)(),c=a.room,i=a.deleteRoom,s=a.deleteRFIDTag,o=Object(w.g)(),u=r.a.useState(!1),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useState(!1),f=Object(B.a)(b,2),p=f[0],h=f[1],x=r.a.useMemo((function(){var e=[{label:"Edytuj",action:function(){return h(!0)},icon:Object(O.jsx)(vt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return j(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}];return n&&e.push({icon:Object(O.jsx)(ge.a,{color:"primary"}),label:"Logs Explorer",action:function(){return o.push("".concat(C.a.LOGS,"?endpoint=%/rooms/").concat(c.id))}}),e}),[o,n,c.id]);return Boolean(c)?Object(O.jsxs)(O.Fragment,{children:[t&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{open:d,onClose:function(){return j(!1)},onSuccess:i}),Object(O.jsx)(Fn,{open:p,onClose:function(){return h(!1)}})]}),Object(O.jsxs)(bt.a,{elevation:0,children:[Object(O.jsx)(ft.a,{action:t&&Object(O.jsx)(ze,{options:x}),title:Object(O.jsxs)(O.Fragment,{children:[c.name,Object(O.jsx)(on,{data:{id:c.id,name:c.name,type:tn.Room,addressId:c.building.address,buildingId:c.building.id}})]}),subheader:Object(O.jsx)(O.Fragment,{children:c.roomType})}),Object(O.jsx)(pt.a,{component:"img",height:"350",image:Me.a.getLink(c.image),alt:c.name}),Object(O.jsxs)(ht.a,{children:[Object(O.jsx)(qn,{room:c,deleteTag:s}),Object(O.jsx)("br",{}),Object(O.jsx)(St.a,{model:c})]})]})]}):Object(O.jsx)(z.a,{})}var Gn=r.a.lazy((function(){return n.e(0).then(n.bind(null,1015))})),Kn=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Gn,{})})};function Zn(){var e=Fe().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(lt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(Kn,{})}),t}),[e]);return Object(O.jsx)(L.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsx)(P.a,{item:!0,xs:12,md:5,lg:4,children:Object(O.jsx)(Hn,{})})]})})}var Vn=r.a.lazy((function(){return n.e(13).then(n.bind(null,1017))}));function Qn(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Vn,{})})}var Jn=n(162),Yn=n(456),$n=n.n(Yn),Xn=n(440);function ea(e){var t=e.open,n=e.onClose,a=Object(S.a)().logout,c=r.a.useCallback((function(){n()}),[n]),i=r.a.useCallback((function(){a()}),[a]);return Object(O.jsx)(N.a,{open:t,onClose:c,sx:{maxWidth:"450px"},children:Object(O.jsx)(Xn.a,{onSuccess:i})})}function ta(e){var t,n,a=e.open,c=e.onClose,i=e.user,s=Object(Jn.b)().updateUser,o=r.a.useState({}),u=Object(B.a)(o,2),l=u[0],d=u[1],j=r.a.useCallback((function(){c(),d({})}),[c]),b=r.a.useCallback(Object(D.a)(A.a.mark((function e(){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l);case 2:if(!e.sent){e.next=4;break}j();case 4:case"end":return e.stop()}}),e)}))),[l,j,s]),p=r.a.useCallback((function(e){d((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(K.a)({},e.target.name,e.target.value))}))}),[]);return Object(O.jsx)(N.a,{open:a,onClose:j,sx:{maxWidth:"450px"},children:Object(O.jsxs)(R.a,{spacing:3,children:[Object(O.jsx)(Qt,{image:i.image}),Object(O.jsx)(Yt.a,{}),Object(O.jsxs)(ee.a,{title:"Edycja u\u017cytkownika",subtitle:"Zmie\u0144 dane u\u017cytkownika. Zmiany w ca\u0142ej aplikacji b\u0119d\u0105 widoczne po ponownym prze\u0142adowaniu aplikacji.",onSubmit:b,onCancel:j,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"name",label:"Imi\u0119",name:"name",autoFocus:!0,value:null!==(t=l.name)&&void 0!==t?t:i.name,onChange:p})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Z.a,{required:!0,fullWidth:!0,id:"surname",label:"Nazwisko",name:"surname",value:null!==(n=l.surname)&&void 0!==n?n:i.surname,onChange:p})})]})]})})}function na(){var e=Fe(),t=e.myId,n=e.owner,a=e.logsAdmin,c=Object(Jn.b)(),i=c.user,s=c.deleteUser,o=Object(w.g)(),u=r.a.useState(!1),l=Object(B.a)(u,2),d=l[0],j=l[1],b=r.a.useState(!1),f=Object(B.a)(b,2),p=f[0],h=f[1],x=r.a.useState(!1),m=Object(B.a)(x,2),v=m[0],g=m[1],y=r.a.useMemo((function(){var e=[{label:"Edytuj",action:function(){return j(!0)},icon:Object(O.jsx)(vt.a,{color:"success"})},{label:"Zmie\u0144 has\u0142o",action:function(){return h(!0)},icon:Object(O.jsx)($n.a,{color:"warning"})},{label:"Usu\u0144 konto",action:function(){return g(!0)},icon:Object(O.jsx)(ie.a,{color:"error"})}];return a&&e.push({icon:Object(O.jsx)(ge.a,{color:"primary"}),label:"Logs Explorer",action:function(){return o.push("".concat(C.a.LOGS,"?endpoint=%/users/").concat(i.id))}}),e}),[o,a,i.id]);return Object(O.jsxs)(O.Fragment,{children:[(t(i.id)||n)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{open:v,onClose:function(){return g(!1)},onSuccess:s}),Object(O.jsx)(ta,{user:i,open:d,onClose:function(){return j(!1)}}),Object(O.jsx)(ea,{open:p,onClose:function(){return h(!1)}})]}),Object(O.jsxs)(bt.a,{elevation:0,children:[Object(O.jsx)(ft.a,{action:(t(i.id)||n)&&Object(O.jsx)(ze,{options:y}),title:Object(O.jsxs)(O.Fragment,{children:[i.name," ",i.surname]}),subheader:Object(O.jsx)("a",{href:"mailto:".concat(i.email),children:i.email})}),Object(O.jsx)(pt.a,{component:"img",height:"350",image:Me.a.getLink(i.image),alt:i.email}),Object(O.jsxs)(ht.a,{children:[Object(O.jsxs)(U.a,{color:"text.secondary",variant:"subtitle1",children:["Ostatnio aktywny: ",Object(H.a)(i.lastActivity),Object(O.jsx)("br",{}),"Klasa dost\u0119pu: ",Object(O.jsx)(Ee.a,{href:C.a.ACCESS,children:i.access.name})]}),Object(O.jsx)("br",{}),Object(O.jsx)(St.a,{model:i})]})]})]})}var aa=r.a.lazy((function(){return n.e(6).then(n.bind(null,1016))})),ra=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(aa,{})})};function ca(){var e=Fe().statsViewer,t=r.a.useMemo((function(){var t=[];return t.push({name:"Rezerwacje",component:Object(O.jsx)(lt,{})}),e&&t.push({name:"Statystyki",component:Object(O.jsx)(ra,{})}),t}),[e]);return Object(O.jsx)(Jn.a,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(dt.a,{tabs:t})}),Object(O.jsx)(P.a,{item:!0,xs:12,md:5,lg:4,children:Object(O.jsx)(na,{})})]})})}var ia=n(60),sa=r.a.createContext(null);function oa(e){var t=Object(W.a)(),n=Object(T.b)(),a=n.queryParams,c=n.setQueryParams,i=r.a.useState(),s=Object(B.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback(Object(D.a)(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ia.a.getUsers(a);case 3:n=e.sent,c((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=n.pagination)||void 0===t?void 0:t.pagesCount})})),u(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error"),u([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t,a.itemsOnPage,a.currentPage,a.search,a.deleted,a.activated]);return r.a.useEffect((function(){l()}),[l]),o?Object(O.jsx)(sa.Provider,{value:{users:o},children:e.children}):Object(O.jsx)(z.a,{})}var ua=n(317);function la(){var e,t=Object(T.b)(),n=t.setQueryParams,a=t.queryParams,c=r.a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"deleted":case"activated":t=Boolean(e.target.checked)}n((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(K.a)({},e.target.name,t))}))}),[n]);return Object(O.jsxs)(P.a,{container:!0,children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:8,children:Object(O.jsx)(et.a,{label:"wyszukaj",name:"search",value:null!==(e=a.search)&&void 0!==e?e:"",onChange:c})}),Object(O.jsxs)(P.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"start",flexWrap:"wrap",color:"text.secondary",children:[Object(O.jsx)(Bn.a,{labelPlacement:"start",control:Object(O.jsx)(Dn.a,{id:"aktywni-u\u017cytkownicy",name:"activated",inputProps:{"aria-label":"aktywni-u\u017cytkownicy"},onChange:c,checked:a.activated}),label:"Aktywne konta"}),Object(O.jsx)(Bn.a,{labelPlacement:"start",control:Object(O.jsx)(Dn.a,{id:"unsuni\u0119ci-u\u017cytkownicy",name:"deleted",inputProps:{"aria-label":"unsuni\u0119ci-u\u017cytkownicy"},onChange:c,checked:a.deleted}),label:"Usuni\u0119te konta"})]})]})}var da=r.a.memo(la);function ja(e){var t=e.user;return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:C.b.toUser(t.id),children:[Object(O.jsx)(Pe.a,{title:t.email,"aria-label":t.email,children:Object(O.jsx)(Re.a,{src:Me.a.getLink(t.image)})}),Object(O.jsx)(Te.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:Object(O.jsx)(O.Fragment,{children:t.email})})]})}function ba(){var e=r.a.useContext(sa).users;return Object(O.jsxs)(q.a,{children:[0===e.length&&Object(O.jsx)(Ie.a,{children:Object(O.jsx)(Te.a,{primary:"Brak u\u017cytkownik\xf3w spe\u0142niaj\u0105cych kryteria"})}),e.map((function(e){return Object(O.jsx)(ja,{user:e},e.id)}))]})}function fa(){return Object(O.jsxs)(R.a,{spacing:3,children:[Object(O.jsx)(ua.a,{title:"Lista u\u017cytkownik\xf3w",subtitle:"Wyszukuj u\u017cytkownik\xf3w wed\u0142ug podanych kryteri\xf3w."}),Object(O.jsx)(da,{}),Object(O.jsx)(ba,{}),Object(O.jsx)(Ve.a,{})]})}var pa=n(29),ha=n(137),Oa=n(321),xa=n.n(Oa),ma=n(58),va=n(319),ga=n(320);function ya(){return Object(O.jsx)(ha.c,{children:Object(O.jsx)(ka,{})})}function ka(){var e=Object(ha.d)().chartsData,t=Object(ma.usePDF)({document:Object(O.jsx)(va.a,{subject:"Statystyki u\u017cytkownik\xf3w",sections:[Object(O.jsx)(ga.a,{title:"Statystyki u\u017cytkownik\xf3w",rows:[["email","ilo\u015b\u0107 rezerwacji","czas rezerwacji","\u015bredni czas rezerwacji","\u015bredni planowany czas rezerwacji"]].concat(Object(pa.a)(e.users.map((function(e){return[e.email,e.reservationsCount,e.allTimeMinutes,e.avgActualTimeMinutes,e.avgPlannedTimeMinutes]}))))})]})}),n=Object(B.a)(t,1)[0];return Object(O.jsxs)(O.Fragment,{children:[n.loading||!n.url?Object(O.jsx)("p",{children:"loading pdf ..."}):Object(O.jsx)(re.a,{startIcon:Object(O.jsx)(xa.a,{}),children:Object(O.jsx)("a",{href:n.url,download:"stats.pdf",title:"pobierz tabele pdf",children:"Pobierz raport pdf"})}),Object(O.jsxs)(ha.b,{defaultOpen:!0,title:"Statystyki u\u017cytkownik\xf3w",children:[Object(O.jsx)(ha.a,{fullWidth:e.users.length>=6,title:"Ilo\u015b\u0107 rezerwacji na u\u017cytkownika",data:e.users,xKey:"email",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(O.jsx)(ha.a,{fullWidth:e.users.length>=6,title:"Czas wszystkich reserwacji w dany dzie\u0144",data:e.users,xKey:"email",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]}),Object(O.jsx)(ha.a,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.users,xKey:"email",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]})]})]})}function wa(){var e=Fe().statsViewer,t=r.a.useMemo((function(){var t=[{name:"U\u017cytkownicy",component:Object(O.jsx)(fa,{})}];return e&&t.push({name:"Statystyki",component:Object(O.jsx)(ya,{})}),t}),[e]);return Object(O.jsx)(T.a,{name:"users-query-params",default:{deleted:!1,activated:!0,search:"",itemsOnPage:10,currentPage:1},children:Object(O.jsx)(oa,{children:Object(O.jsx)(dt.a,{tabs:t})})})}function Ca(){return Object(S.a)().user?Object(O.jsxs)(w.d,{children:[Object(O.jsx)(w.b,{path:C.a.ROOM,component:Zn}),Object(O.jsx)(w.b,{path:C.a.BUILDING,component:hn}),Object(O.jsx)(w.b,{path:C.a.ADDRESS,component:_t}),Object(O.jsx)(w.b,{path:C.a.SETTINGS,component:Qn}),Object(O.jsx)(w.b,{path:C.a.ACCESS,component:E}),Object(O.jsx)(w.b,{path:C.a.USER,component:ca}),Object(O.jsx)(w.b,{path:C.a.USERS,component:wa}),Object(O.jsx)(w.b,{path:C.a.LOGS,component:In}),Object(O.jsx)(w.b,{path:C.a.HOME,component:Sn}),Object(O.jsx)(w.b,{path:C.a.INFRASTRUCTURE,children:"Zasoby"}),Object(O.jsx)(w.b,{path:C.a.HOME+"/*",children:Object(O.jsx)(w.a,{to:C.a.HOME})})]}):Object(O.jsx)(w.a,{to:C.a.PUBLIC})}var Sa=r.a.lazy((function(){return n.e(7).then(n.bind(null,1020))})),za=r.a.lazy((function(){return n.e(5).then(n.bind(null,1021))})),Ia=r.a.lazy((function(){return n.e(9).then(n.bind(null,1022))})),Ea=r.a.lazy((function(){return n.e(8).then(n.bind(null,1023))})),Pa=r.a.lazy((function(){return n.e(4).then(n.bind(null,1024))}));function Ra(){return Object(S.a)().user?Object(O.jsx)(w.a,{to:C.a.HOME}):Object(O.jsxs)(w.d,{children:[Object(O.jsxs)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:[Object(O.jsx)(w.b,{path:C.a.LOGIN,component:za}),Object(O.jsx)(w.b,{path:C.a.REGISTER,component:Ia}),Object(O.jsx)(w.b,{path:C.a.ACTIVATE,component:Sa}),Object(O.jsx)(w.b,{path:C.a.REMIND_PASSWORD,component:Ea}),Object(O.jsx)(w.b,{path:C.a.PUBLIC,exact:!0,component:Pa})]}),Object(O.jsx)(w.b,{path:"*",children:Object(O.jsx)(w.a,{to:C.a.PUBLIC})})]})}var Ta={minHeight:"84vh",padding:"1.5vh 0px"};function Ma(){return Object(O.jsx)(k.a,{sx:Ta,children:Object(O.jsxs)(w.d,{children:[Object(O.jsx)(w.b,{path:C.a.HOME,component:Ca}),Object(O.jsx)(w.b,{path:C.a.PUBLIC,component:Ra}),Object(O.jsx)(w.b,{path:"*",children:Object(O.jsx)(w.a,{to:C.a.PUBLIC})})]})})}function Aa(){return Object(O.jsx)(U.a,{align:"center",sx:{backgroundColor:"primary.dark",padding:2,color:"primary.light"},children:"\xa9 Szymon Ryka\u0142a 2021/2022"})}var Da=r.a.memo(Aa),Ba=function(e){return Object(O.jsx)(Ie.a,{sx:{width:"30%",minWidth:"200px"},children:Object(O.jsx)(Ee.a,{sx:{color:"background.default"},href:e.link,children:e.name})})};function Fa(){var e=Object(S.a)().user,t=Fe(),n=r.a.useMemo((function(){var n=[];return e?(n.push({name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Home",link:C.a.HOME}),t.accessAdmin&&n.push({name:"Dost\u0119py",link:C.a.ACCESS}),t.owner&&n.push({name:"Ustawienia",link:C.a.SETTINGS})):n.push({name:"Strona g\u0142\xf3wna",link:C.a.PUBLIC},{name:"Logowanie",link:C.a.LOGIN},{name:"Rejestracja",link:C.a.REGISTER},{name:"Aktywacja Konta",link:C.a.ACTIVATE}),n}),[e,null===t||void 0===t?void 0:t.accessAdmin,null===t||void 0===t?void 0:t.owner]),a=r.a.useMemo((function(){return n.filter((function(e){return e.link})).map((function(e){return Object(O.jsx)(Ba,Object(f.a)({},e),e.name)}))}),[n]);return Object(O.jsx)(k.a,{sx:{backgroundColor:"primary.main"},children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)(U.a,{sx:{pt:2},component:"p",variant:"body2",color:"background.default",children:"Przydatne linki:"}),Object(O.jsx)(q.a,{sx:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-start",flexWrap:"wrap"},children:a})]})})}var La=r.a.memo(Fa);function Wa(){return Object(O.jsx)(k.a,{children:Object(O.jsxs)(P.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(La,{})}),Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(Da,{})})]})})}var Na=n(948),Ua=n(871),_a=n(475),qa=n(250),Ha=n(958),Ga=n(465),Ka=n.n(Ga),Za=n(438),Va=n.n(Za),Qa=n(466),Ja=n.n(Qa),Ya=n(467),$a=n.n(Ya),Xa=n(468),er=n.n(Xa),tr=[{label:"Panel G\u0142\xf3wny",href:C.a.HOME,icon:Ka.a},{label:"Moje Konto",href:C.a.MY_PROFILE,icon:Va.a}],nr={label:"Ustawienia Platformy",href:C.a.SETTINGS,icon:Ja.a},ar={label:"Klasy dost\u0119pu",href:C.a.ACCESS,icon:$a.a},rr={label:"U\u017cytkownicy",href:C.a.USERS,icon:er.a},cr={label:"Logs Explorer",href:C.a.LOGS,icon:ge.a},ir=r.a.memo((function(e){return Object(O.jsxs)(Ie.a,{button:!0,component:Ee.a,href:e.href,children:[Object(O.jsx)(we.a,{color:"primary",children:Object(O.jsx)(e.icon,{color:"primary"})}),Object(O.jsx)(Te.a,{primary:e.label})]})}));function sr(){var e=Fe(),t=e.accessAdmin,n=e.owner,a=e.logsAdmin,c=r.a.useMemo((function(){var e=Object.assign([],tr);return e.push(rr),t&&e.push(ar),a&&e.push(cr),n&&e.push(nr),e}),[t,a,n]),i=r.a.useMemo((function(){return c.map((function(e){return Object(O.jsx)(ir,Object(f.a)({},e),e.label)}))}),[c]);return Object(O.jsx)(q.a,{children:i})}function or(e){var t=e.children,n=e.toggleOpen;return Object(O.jsx)(o.a,{sx:{width:320},role:"presentation",onClick:n,onKeyDown:n,children:t})}function ur(e){var t=e.user;return Object(O.jsxs)(k.a,{onClick:function(e){return e.stopPropagation()},sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2,color:"primary.dark"},children:[Object(O.jsx)(Re.a,{alt:"".concat(null===t||void 0===t?void 0:t.name," ").concat(null===t||void 0===t?void 0:t.surname),src:Me.a.getLink(null===t||void 0===t?void 0:t.image),sx:{width:"120px",height:"120px",fontSize:"36px",mt:2,mb:2}}),Object(O.jsxs)(U.a,{children:[null===t||void 0===t?void 0:t.name,"\xa0",null===t||void 0===t?void 0:t.surname]}),Object(O.jsx)(U.a,{children:Object(O.jsx)("a",{href:"mailto:".concat(null===t||void 0===t?void 0:t.email),children:null===t||void 0===t?void 0:t.email})})]})}var lr=n(471),dr=n.n(lr),jr=n(470),br=n.n(jr),fr=n(945),pr=n(946),hr=n(944),Or=n(983),xr=n(103);function mr(e){var t=r.a.useState(!1),n=Object(B.a)(t,2),a=n[0],c=n[1],i=r.a.useMemo((function(){return"".concat(e.name,"-nav-item")}),[e.name]);r.a.useEffect((function(){c(xr.a.read(i))}),[i]);var s=r.a.useCallback((function(e){e.stopPropagation(),xr.a.save(i,!a),c((function(e){return!e}))}),[i,a]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(R.a,{direction:"row",children:[Object(O.jsxs)(hr.a,{component:Ee.a,href:e.href,sx:e.sx,children:[Object(O.jsx)(we.a,{children:e.icon}),Object(O.jsx)(Te.a,{primary:e.name})]}),Object(O.jsx)(_.a,{sx:{width:"42px",height:"42px"},size:"medium",onClick:s,children:a?Object(O.jsx)(fr.a,{}):Object(O.jsx)(pr.a,{})})]}),Object(O.jsx)(Or.a,{in:a,timeout:"auto",children:Object(O.jsx)(R.a,{sx:e.sx,children:e.children})})]})}var vr=n(469),gr=n.n(vr);function yr(e){return Object(O.jsx)(Ie.a,{button:!0,component:Ee.a,href:"".concat(C.a.HOME).concat(e.href),children:Object(O.jsxs)(o.a,{sx:{width:"100%"},children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(gr.a,{})}),e.name]})})}var kr=r.a.memo(yr);function wr(){var e=Object($.b)().resourceMap,t=r.a.useMemo((function(){return null===e||void 0===e?void 0:e.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.buildings;return Object(O.jsx)(mr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(O.jsx)(br.a,{color:"primary"}),sx:{width:"100%"},children:r.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.rooms;return Object(O.jsx)(mr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(O.jsx)(dr.a,{color:"primary"}),sx:{pl:6,width:"100%"},children:r.map((function(e){return Object(O.jsx)(kr,Object(f.a)({},e),e.id)}))},t)}))},t)}))}),[e]);return Object(O.jsx)(R.a,{children:t})}function Cr(){var e=r.a.useState(!1),t=Object(B.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){e.stopPropagation(),a(!0)}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Ct,{open:n,onClose:function(){return a(!1)}}),Object(O.jsxs)(Ie.a,{button:!0,component:"div",onClick:c,sx:{color:"primary.dark"},children:[Object(O.jsx)(we.a,{children:Object(O.jsx)(nt.a,{color:"primary"})}),"Dodaj adres"]})]})}function Sr(e){var t=e.toggleOpen,n=e.open,a=Fe().premisesAdmin,r=Object(S.a)().user;return Object(O.jsxs)(Ha.a,{variant:"temporary",ModalProps:{keepMounted:!0},anchor:"left",open:n,onClose:t,children:[Object(O.jsxs)(or,{toggleOpen:t,children:[Object(O.jsx)(ur,{user:r}),Object(O.jsx)(Yt.a,{}),Object(O.jsx)(sr,{}),Object(O.jsx)(Yt.a,{}),Object(O.jsx)(Ie.a,{onClick:function(e){return e.stopPropagation()},component:"div",sx:{pb:0,color:"text.disabled"},children:Object(O.jsx)(Te.a,{children:"Zasoby:"})}),Object(O.jsx)(wr,{})]}),a&&Object(O.jsx)(Cr,{})]})}var zr=n(985),Ir=n(986),Er=n(472),Pr=n.n(Er),Rr=[{name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Panel G\u0142\xf3wny",link:C.a.HOME}];function Tr(e){var t=e.trigger,n=e.handleClose,a=Object(S.a)().logout,c=r.a.useMemo((function(){return Rr.map((function(e,t){var a=e.name,r=e.link;return Object(O.jsx)(Y.a,{onClick:n,href:r,component:Ee.a,children:a},t)}))}),[n]);return Object(O.jsxs)(ke.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:n,children:[c,Object(O.jsx)(Y.a,{onClick:function(){n(),a()},children:"Wyloguj"})]})}function Mr(e){var t=Object(S.a)().user,n=a.useState(null),r=Object(B.a)(n,2),c=r[0],i=r[1],s=a.useCallback((function(e){i(e.currentTarget)}),[]),u=a.useCallback((function(){i(null)}),[]);return Object(O.jsx)(o.a,{sx:{flexGrow:1},children:Object(O.jsx)(zr.a,{position:"static",children:Object(O.jsxs)(Ir.a,{children:[t&&Object(O.jsx)(_.a,{onClick:e.toggleDrawer,size:"large",edge:"start","aria-label":"menu",sx:{mr:2,color:"background.default"},children:Object(O.jsx)(Pr.a,{color:"inherit"})}),Object(O.jsx)(U.a,{variant:"h4",component:"span",sx:{flexGrow:1,fontFamily:"Dancing Script, cursive"},children:Object(O.jsx)(Ee.a,{href:t?C.a.HOME:C.a.PUBLIC,sx:{width:"fit-content",color:"background.default","&:hover":{textDecoration:"none"}},children:"Rav System"})}),t&&Object(O.jsxs)("div",{children:[Object(O.jsx)(_.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:s,color:"inherit",children:Object(O.jsx)(Re.a,{alt:t.name,src:Me.a.getLink(t.image),sx:{width:42,height:42}})}),Object(O.jsx)(Tr,{trigger:c,handleClose:u})]})]})})})}function Ar(){var e=r.a.useState(!1),t=Object(B.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.stopPropagation(),(!t||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a((function(e){return!e}))}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Mr,{toggleDrawer:c}),Object(O.jsx)(Sr,{open:n,toggleOpen:c})]})}var Dr=function(){return Object(O.jsx)(g,{children:Object(O.jsxs)(Ua.b,{dateAdapter:Na.a,locale:_a.a,children:[Object(O.jsx)(s.a,{}),Object(O.jsx)(o.a,{component:"div",className:"App",sx:{backgroundColor:"background.default"},children:Object(O.jsx)(h.a,{children:Object(O.jsx)(qa.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsxs)($.a,{children:[Object(O.jsx)(Ar,{}),Object(O.jsx)(u.a,{children:Object(O.jsx)(Ma,{})}),Object(O.jsx)(Wa,{})]})})})})})]})})},Br=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(Dr,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ravs-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ravs-client","/service-worker.js");Br?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Fr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Fr(t,e)}))}}()},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(13),r=n(480),c=n(87),i=n(1);function s(e){var t;return Object(i.jsxs)(r.a,{elevation:0,sx:Object(a.a)({p:2},e.sx),children:[(null===e||void 0===e?void 0:e.title)&&Object(i.jsx)(c.a,{variant:"body2",component:null!==(t=e.titleComponent)&&void 0!==t?t:"h2",color:"text.secondary",children:e.title}),e.children]})}},94:function(e,t,n){"use strict";var a,r=n(27),c=n(28),i=n(42),s=n(43),o=n(21),u=n(59);!function(e){e.success="#edf7ed",e.error="#fdeded",e.info="#e5f6fd",e.warning="#fff4e5",e.inert="#f5f5f5"}(a||(a={}));var l=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"emitStatus",value:function(e,t){return{message:e,color:t}}},{key:"localPreparPath",value:function(e){return window.location.toString().includes(o.a.HOME)&&0===Object.keys(e).length?"/users/"+this.userId.toString():this.preparePath(e)}},{key:"getReservations",value:function(e,t){return this.get("".concat(this.localPreparPath(e),"/reservations"),t)}},{key:"createOne",value:function(e){return this.post("/reservations",e)}},{key:"update",value:function(e,t){return this.patch("/reservations/".concat(e),t)}},{key:"pingKey",value:function(e,t){return this.patch("/reservations/".concat(e,"/keys"),{RFIDTag:t})}},{key:"remove",value:function(e){return this.delete("/reservations/".concat(e))}},{key:"resolveStatus",value:function(e){var t=Date.now(),n=new Date(t),r=new Date(t-9e5),c=new Date(t+9e5),i=e.actualStart,s=e.plannedStart,o=e.actualEnd,u=e.plannedEnd,l=new Date(i||s),d=new Date(o||u);if(!i)return l<n&&l>r?this.emitStatus("Powinna zosta\u0107 ju\u017c odebrana",a.warning):l>n&&l<c?this.emitStatus("Za chwil\u0119 zostanie odebrana",a.info):l<c?this.emitStatus("Nieodebrana.",a.error):this.emitStatus("Oczekuje",a.inert);if(i){if(o)return this.emitStatus("Rezerwacja zako\u0144czona.",a.inert);if(!o){if(n<d&&c>d)return this.emitStatus("Za chwil\u0119 si\u0119 ko\u0144czy.",a.info);if(n>d){var j=new Date(Date.parse(d.toString())+9e5);if(n<j)return this.emitStatus("Powinna si\u0119 zako\u0144czy\u0107.",a.warning);if(n>j)return this.emitStatus("Czas min\u0105\u0142, klucz nie oddany.",a.error)}return this.emitStatus("Rezerwacja trwa.",a.success)}}return this.emitStatus("Status nieznany",a.warning)}}]),n}(u.a);t.a=new l}},[[859,2,3]]]);
//# sourceMappingURL=main.ab40c0b5.chunk.js.map