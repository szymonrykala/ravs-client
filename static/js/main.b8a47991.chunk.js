(this["webpackJsonpravs-client"]=this["webpackJsonpravs-client"]||[]).push([[1],{100:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(5),r=n(1),c=n.n(r);function i(e){var t=c.a.useState(),n=Object(a.a)(t,2),r=n[0],i=n[1];return c.a.useEffect((function(){var t=setInterval((function(){return i((function(e){return!e}))}),e);return function(){return clearInterval(t)}}),[e]),r}},101:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(87),r=n(35),c=n(0);function i(e){return Object(c.jsxs)(a.a,{color:"text.secondary",variant:"body2",fontSize:"smaller",children:["Utworzono: ",Object(r.a)(e.model._created),Object(c.jsx)("br",{}),"Ostatnia aktualizacja: ",Object(r.a)(e.model._updated)]})}},109:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return L})),n.d(t,"d",(function(){return y.b}));var a=n(202),r=n(1),c=n.n(r),i=n(47),s=n(8),o=n.n(s),u=n(9),l=n(16),j=n(5),d=n(259),b=n(87),f=n(424),h=n(203),p=n(433),O=n(177),m=n(0),x=[{name:"tydzie\u0144",value:"1 week ago"},{name:"miesi\u0105c",value:"1 month ago"},{name:"6 miesi\u0119cy",value:"6 month ago"},{name:"rok",value:"1 year ago"}];function v(){var e=Object(i.b)(),t=e.queryParams,n=e.setQueryParams,r=c.a.useState({from:new Date,to:new Date}),s=Object(j.a)(r,2),v=s[0],g=s[1],y=c.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return Object(u.a)(Object(u.a)({},e),{},{from:t,to:"1 hour"})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),k=c.a.useCallback(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n({from:null===(a=v.from)||void 0===a?void 0:a.toDateString(),to:null===(r=v.to)||void 0===r?void 0:r.toDateString()});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v.from,v.to,n]);return Object(m.jsxs)(a.a,{direction:"column",spacing:2,children:[Object(m.jsxs)(d.a,{children:[Object(m.jsx)(b.a,{variant:"subtitle2",children:"Zakres czasu:"}),Object(m.jsx)(O.a,{onChange:y,buttons:x,value:t.from})]}),Object(m.jsxs)(d.a,{component:"form",onSubmit:k,children:[Object(m.jsx)(b.a,{variant:"subtitle2",pb:"5px",children:"Zakres niestandardowy:"}),Object(m.jsxs)(a.a,{direction:"row",spacing:1,children:[Object(m.jsx)(p.a,{label:"od",inputFormat:"yyyy-MM-dd",value:v.from,onChange:function(e){return g(Object(u.a)(Object(u.a)({},v),{},{from:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(m.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(m.jsx)(p.a,{label:"do",inputFormat:"yyyy-MM-dd",value:v.to,onChange:function(e){return g(Object(u.a)(Object(u.a)({},v),{},{to:null!==e&&void 0!==e?e:new Date}))},renderInput:function(e){return Object(m.jsx)(f.a,Object(u.a)(Object(u.a)({},e),{},{size:"small"}))}}),Object(m.jsx)(h.a,{type:"submit",variant:(null===t||void 0===t?void 0:t.from)===v.from.toDateString()?"contained":"outlined",children:"OK"})]})]})]})}var g=c.a.memo(v),y=n(157);function k(e){return Object(m.jsx)(i.a,{name:"charts-query-params",default:{from:"1 month ago",to:"1 hour"},children:Object(m.jsx)(y.a,{children:Object(m.jsxs)(a.a,{spacing:4,children:[Object(m.jsx)(g,{}),e.children]})})})}var w=c.a.memo(k),C=n(350),S=n(260),z=n(172),I=n.n(z),E=n(171),P=n.n(E),R=n(348),T=n(414),A=n(243),M=n.n(A);function D(e){var t=c.a.useState(!!(null===e||void 0===e?void 0:e.defaultOpen)),n=Object(j.a)(t,2),a=n[0],r=n[1];return Object(m.jsxs)(d.a,{children:[Object(m.jsxs)(d.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(m.jsxs)(b.a,{variant:"h6",component:"h5",id:e.title.replace(" ","_"),children:[e.title,Object(m.jsx)(R.a,{onClick:function(){return r((function(e){return!e}))},children:a?Object(m.jsx)(P.a,{}):Object(m.jsx)(I.a,{})})]}),Object(m.jsx)(R.a,{onClick:e.onClick,children:Object(m.jsx)(M.a,{})})]}),Object(m.jsxs)(C.a,{in:a,timeout:"auto",children:[Object(m.jsx)(S.a,{container:!0,spacing:2,children:e.children}),Object(m.jsx)("br",{}),Object(m.jsx)(T.a,{})]})]})}var B=n(254),N=n(244),F=n.n(N),W=["Niedziela","Poniedzia\u0142ek","Wtorek","\u015aroda","Czwartek","Pi\u0105tek","Sobota"];function L(e){var t=c.a.useMemo((function(){return{getValue:function(t){return e.resolveDay?W[Number(t.x)]:t.x},min:0}}),[e.resolveDay]),n=c.a.useMemo((function(){return[{getValue:function(e){return e.y},position:"left",elementType:"bar",minDomainLength:15,hardMin:0,scaleType:"linear",showDatumElements:!0}]}),[]),r=c.a.useMemo((function(){var t=e.y.map((function(e){return{label:e.label,data:[]}}));return e.data.forEach((function(n){e.y.forEach((function(a,r){var c=a.key;t[r].data.push({x:n[e.xKey],y:Number(n[c])})}))})),t}),[e.y,e.xKey,e.data]);return Object(m.jsxs)(S.a,{item:!0,xs:12,lg:e.fullWidth?12:6,children:[Object(m.jsxs)(a.a,{direction:"row",spacing:1,alignItems:"center",children:[Object(m.jsx)(b.a,{variant:"body2",component:"h4",color:"text.secondary",children:e.title}),Object(m.jsx)(F.a,{color:"primary"})]}),0===e.data.length?Object(m.jsx)(b.a,{component:"p",color:"text.secondary",children:"Brak danych do nakre\u015blenia wykresu"}):Object(m.jsx)(d.a,{sx:{maxHeight:"400px",height:"40vh",minHeight:"300px",width:"100%"},children:Object(m.jsx)(B.a,{options:{data:r,primaryAxis:t,secondaryAxes:n}})})]})}},157:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return k}));var a=n(8),r=n.n(a),c=n(16),i=n(5),s=n(1),o=n.n(s),u=n(43),l=n(36),j=n(28),d=n(47),b=n(23),f=n(24),h=n(37),p=n(38),O=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var a=0,r=Object.entries({"/settings":"/requests","/users":"/users"});a<r.length;a++){var c=Object(i.a)(r[a],2),s=c[0],o=c[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId,"/buildings"),"buildingId"in e&&(t+="/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&(t+="/users/".concat(e.userId));return t}},{key:"fetchData",value:function(e,t){return this.get(this.preparePath(e)+"/stats",t)}}]),n}(n(51).a),m=new O,x=n(100),v=n(0),g=o.a.createContext(null);function y(e){var t=Object(j.a)(),n=Object(u.h)(),a=Object(x.a)(6e4),s=Object(l.a)().user,b=Object(d.b)().queryParams,f=o.a.useState({}),h=Object(i.a)(f,2),p=h[0],O=h[1],y=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,"userId"in n&&"me"===n.userId&&(a={userId:"".concat(null===s||void 0===s?void 0:s.id)}),e.prev=2,e.next=5,m.fetchData(a,b);case 5:c=e.sent,O(c.data),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(e.t0.description,"error"),O({});case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[t,b,n,null===s||void 0===s?void 0:s.id]);return o.a.useEffect((function(){y()}),[y,a]),0===Object.keys(p).length?null:Object(v.jsx)(g.Provider,{value:{chartsData:p},children:e.children})}function k(){return o.a.useContext(g)}},159:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n(5),r=n(1),c=n.n(r),i=n(85),s={queryParams:{q:1},setQueryParams:function(e){}},o=n(0),u=c.a.createContext(s);function l(e){var t=c.a.useState((function(){return t=e.name,n=e.default,i.a.read(t)||n;var t,n})),n=Object(a.a)(t,2),r=n[0],s=n[1];return c.a.useEffect((function(){i.a.save(e.name,r)}),[r,e.name]),r?Object(o.jsx)(u.Provider,{value:{queryParams:r,setQueryParams:s},children:e.children}):null}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(9),r=n(1),c=n(340),i=n(202),s=n(264),o=n(263),u=n(345),l=n(342),j=n(47),d=n(0);function b(){var e,t=Object(j.b)(),n=t.queryParams,b=t.setQueryParams,f=r.useCallback((function(e,t){b((function(e){return Object(a.a)(Object(a.a)({},e),{},{currentPage:t})}))}),[b]),h=r.useCallback((function(e,t){b((function(t){return Object(a.a)(Object(a.a)({},t),{},{itemsOnPage:Number(e.target.value)})}))}),[b]),p=r.useMemo((function(){return[5,10,15,20].map((function(e){return Object(d.jsx)(s.a,{value:e,children:e},e)}))}),[]);return Object(d.jsxs)(i.a,{spacing:2,sx:{flexWrap:"wrap",flexDirection:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},children:[Object(d.jsx)(c.a,{count:n.pagesCount,size:"small",page:n.currentPage,onChange:f}),Object(d.jsxs)(o.a,{fullWidth:!0,sx:{maxWidth:"100px"},children:[Object(d.jsx)(u.a,{id:"items-on-page-label",children:"Na stronie"}),Object(d.jsxs)(l.a,{size:"small",labelId:"items-on-page-label",id:"items-on-page",label:"Na stronie",value:null!==(e=n.itemsOnPage)&&void 0!==e?e:5,onChange:h,children:[p,Object(d.jsx)(s.a,{value:1e4,children:"wszystko"})]})]})]})}},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(9),r=n(5),c=n(57),i=n(1),s=n.n(i),o=n(0);function u(e){var t=e.value,n=e.onChange,i=e.label,u=e.name,l=e.sx,j=s.a.useState(),d=Object(r.a)(j,2),b=d[0],f=d[1],h=s.a.useState(t),p=Object(r.a)(h,2),O=p[0],m=p[1],x=s.a.useCallback((function(e){m(e.target.value),clearTimeout(b);var t=setTimeout((function(){n(e)}),1e3);f(t)}),[b,n]);return Object(o.jsx)(c.c,{name:u,value:O,onChange:x,placeholder:i,sx:Object(a.a)({width:"100%",maxWidth:"600px",p:1,bgcolor:"background.default"},l),inputProps:{"aria-label":i}})}},168:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(23),r=n(24),c=n(37),i=n(38),s=n(143),o=function(e){Object(c.a)(n,e);var t=Object(i.a)(n);function n(e){var r,c;return Object(a.a)(this,n),(c=t.call(this,null===(r=e.error)||void 0===r?void 0:r.description)).data=void 0,c.data=e,c}return Object(r.a)(n,[{key:"code",get:function(){return this.data.statusCode}},{key:"description",get:function(){var e;return null===(e=this.data.error)||void 0===e?void 0:e.description}}]),n}(Object(s.a)(Error))},17:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a={PUBLIC:"/public",HOME:"/app"};a.LOGIN=a.PUBLIC+"/login",a.REGISTER=a.PUBLIC+"/register",a.ACTIVATE=a.PUBLIC+"/activate",a.REMIND_PASSWORD=a.PUBLIC+"/passwd",a.ACCESS=a.HOME+"/accesses",a.SETTINGS=a.HOME+"/settings",a.USERS=a.HOME+"/users",a.USER=a.USERS+"/:userId",a.MY_PROFILE=a.USERS+"/me",a.INFRASTRUCTURE=a.HOME+"/infrastructure",a.ADDRESS=a.HOME+"/addresses/:addressId",a.BUILDING=a.ADDRESS+"/buildings/:buildingId",a.ROOM=a.BUILDING+"/rooms/:roomId";var r={toAddress:function(e){return"/app/addresses/".concat(e)},toBuilding:function(e,t){return r.toAddress(e)+"/buildings/".concat(t)},toRoom:function(e,t,n){return r.toBuilding(e,t)+"/rooms/".concat(n)},toUser:function(e){return a.USERS+"/".concat(e)}};t.a=a},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(352),r=n(343),c=n(263),i=n(347),s=n(1),o=n.n(s),u=n(0);function l(e){var t=e.onChange,n=e.buttons,s=e.value,l=o.a.useCallback((function(e){t(e.target.value)}),[t]),j=o.a.useMemo((function(){return n.map((function(e){var t=e.value,n=e.name;return Object(u.jsx)(a.a,{value:t,control:Object(u.jsx)(r.a,{}),label:n,"aria-label":n,title:n},n)}))}),[n]);return Object(u.jsx)(c.a,{component:"fieldset",children:Object(u.jsx)(i.a,{row:!0,"aria-label":"wyb\xf3r opcji",name:"wyb\xf3r zdefiniowanej opcji",value:s,onChange:l,children:j})})}},181:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return R}));var a=n(8),r=n.n(a),c=n(16),i=n(5),s=n(1),o=n.n(s),u=n(43),l=n(28),j=n(23),d=n(24),b=n(37),f=n(38),h=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"login",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("/users/auth",{email:t.email,password:t.password});case 2:return(n=e.sent).data&&localStorage.setItem(this._TOKEN_NAME,n.data.toString()),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.removeItem(this._TOKEN_NAME)}},{key:"hasToken",value:function(){return Boolean(localStorage.getItem(this._TOKEN_NAME))}},{key:"hasSession",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.hasToken()){e.next=5;break}return e.next=4,this.get("/users/me");case 4:return e.abrupt("return",!0);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(n(51).a),p=new h,O=n(39),m=n(217),x=n(65),v=n(78),g=n(85),y=n(52),k=n(9),w=n(346),C=n(349),S=n(87),z=n(0);function I(e){return Object(z.jsxs)(w.a,{sx:Object(k.a)({display:"flex",flexDirection:"column",color:"primary.main",zIndex:function(e){return e.zIndex.drawer+1},backgroundColor:"background.default"},e.sx),open:e.open,children:[Object(z.jsx)(S.a,{variant:"h5",pb:2,children:e.text}),Object(z.jsx)(C.a,{color:"inherit"})]})}var E=n(17),P=Object(s.createContext)(null);function R(e){var t=e.children,n=Object(l.a)(),a=o.a.useState(!0),j=Object(i.a)(a,2),d=j[0],b=j[1],f=Object(s.useState)(null),h=Object(i.a)(f,2),k=h[0],w=h[1],C=o.a.useCallback((function(e){w(e),g.a.setIdentity(e.id),x.a.metadata=e.metadata,x.a.userId=e.id,v.a.userId=e.id,m.a.userId=e.id,O.a.userId=e.id,y.a.userId=e.id}),[]),S=o.a.useCallback(Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!p.hasToken()){e.next=19;break}return e.prev=2,e.next=5,p.hasSession();case 5:if(!e.sent){e.next=13;break}return e.next=8,y.a.getMe();case 8:t=e.sent,C(t),n("Witaj ponownie!","info"),e.next=14;break;case 13:n("Twoja sesja wygas\u0142a","info",(function(){return Object(z.jsx)(u.a,{to:E.a.LOGIN})}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),n(e.t0.description,"error",(function(){return Object(z.jsx)(u.a,{to:E.a.WELCOME})}));case 19:b(!1);case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),[n,C]);o.a.useEffect((function(){return S(),function(){}}),[S]);var R=o.a.useCallback(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.login(t);case 3:return e.next=5,y.a.getMe();case 5:a=e.sent,C(a),n("Pomy\u015blnie zalogowano!","success",(function(){return Object(z.jsx)(u.a,{to:E.a.HOME})})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),c=e.t0.description,404===e.t0.code&&(c="U\u017cytkownik nie istnieje"),n(c,"error");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,C]),T=o.a.useCallback((function(){n("Pomy\u015blnie wylogowano!","success",(function(){return Object(z.jsx)(u.a,{to:E.a.PUBLIC})})),w(null),p.logout()}),[n]);return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(I,{open:d,text:"\u0141adowanie Sesji..."}),Object(z.jsx)(P.Provider,{value:{user:k,login:R,logout:T},children:!d&&t})]})}},182:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return j}));var a=n(5),r=n(423),c=n(420),i=n(1),s=n.n(i),o=function(e){},u=n(0),l=Object(i.createContext)(o);function j(e){var t=e.children,n=s.a.useState(),i=Object(a.a)(n,2),o=i[0],j=i[1],d=s.a.useState(!1),b=Object(a.a)(d,2),f=b[0],h=b[1],p=s.a.useState("error"),O=Object(a.a)(p,2),m=O[0],x=O[1],v=s.a.useState(),g=Object(a.a)(v,2),y=g[0],k=g[1],w=s.a.useCallback((function(e,t){"clickaway"!==t&&(h(!1),j(""),k(null))}),[]),C=s.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};x(t),j(e),h(!0),k(n())}),[]);return Object(u.jsxs)(l.Provider,{value:C,children:[t,Object(u.jsx)(r.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,autoHideDuration:6e3,onClose:w,children:Object(u.jsx)(c.a,{onClose:w,severity:m,sx:{width:"100%"},children:o})}),y]})}},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(87),r=n(0);function c(e){return Object(r.jsxs)("span",{children:[Object(r.jsx)(a.a,{variant:"h4",component:"h2",color:"primary.dark",children:e.title}),e.subtitle&&Object(r.jsx)(a.a,{variant:"body1",color:"text.secondary",mt:"5px",children:e.subtitle})]})}},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(5),r=n(262),c=n(149),i=n(348),s=n(350),o=n(259),u=n(1),l=n.n(u),j=n(42),d=n(351),b=n(35),f=n(172),h=n.n(f),p=n(171),O=n.n(p),m=n(0);function x(e){var t=e.row,n=l.a.useState(!1),u=Object(a.a)(n,2),f=u[0],p=u[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(r.a,{hover:!0,sx:{"& > *":{borderBottom:"unset"}},children:[Object(m.jsx)(c.a,{children:Object(m.jsx)(i.a,{"aria-label":"szczeg\xf3\u0142y zapytania",size:"small",onClick:function(){return p(!f)},children:f?Object(m.jsx)(O.a,{}):Object(m.jsx)(h.a,{})})}),Object(m.jsx)(c.a,{component:"th",scope:"row",children:t.id}),Object(m.jsx)(c.a,{align:"left",children:t.endpoint}),Object(m.jsx)(c.a,{align:"left",children:Math.fround(1e3*t.time).toPrecision(6)})]}),Object(m.jsx)(r.a,{children:Object(m.jsx)(c.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(m.jsx)(s.a,{in:f,timeout:"auto",unmountOnExit:!0,children:Object(m.jsxs)(o.a,{component:"pre",sx:{margin:1},children:[Object(m.jsx)(d.a,{component:j.b,to:"/users/".concat(t.user),children:"Poka\u017c u\u017cytkownika"})," ",Object(m.jsx)("br",{}),Object(b.a)(t._created),"\xa0|\xa0",t.method,"\xa0",t.endpoint,Object(m.jsx)("br",{}),"czas przetwarzania: ",t.time," [s]",Object(m.jsx)("br",{}),"Cia\u0142o zapytania ",Object(m.jsx)("br",{}),JSON.stringify(JSON.parse(t.payload),void 0,3)]})})})})]})}},217:function(e,t,n){"use strict";var a=n(8),r=n.n(a),c=n(16),i=n(23),s=n(24),o=n(37),u=n(38),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"fetch",value:function(e,t){return this.get(this.preparePath(e)+"/requests",t)}},{key:"getStats",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/requests/stats");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(51).a);t.a=new l},225:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(8),r=n.n(a),c=n(16),i=n(5),s=n(203),o=n(87),u=n(410),l=n(241),j=n.n(l),d=n(1),b=n.n(d),f=n(52);function h(e,t){switch(t.statusCode){case 200:case 201:return{success:!0,message:"Kod zosta\u0142 wys\u0142any na podany email"};case 403:case 401:case 400:default:return{success:!1,message:t.payload};case 404:return{success:!1,message:"Taki u\u017cytkownik nie istnieje."};case 422:return{success:!1,message:"Adres email jest niepoprawny"};case"NO_ADDRESS":return{success:!1,message:"Musisz poda\u0107 adres email"}}}var p=n(0);function O(e){var t,n=b.a.useReducer(h,{success:null,message:e.text}),a=Object(i.a)(n,2),l=a[0],d=a[1],O=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.email||d({statusCode:"NO_ADDRESS"}),t.prev=1,t.next=4,f.a.generateKey(e.email);case 4:n=t.sent,d(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d({statusCode:t.t0.code,payload:t.t0.description});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(u.a,{component:"div",display:"flex",children:[Object(p.jsx)(s.a,{sx:{bgcolor:"primary.50","&:hover":{bgcolor:"primary.100"}},onClick:O,children:Object(p.jsx)(j.a,{fontSize:"large"})}),Object(p.jsx)(u.a,{sx:{display:"flex",alignItems:"center",ml:1},children:Object(p.jsx)(o.a,{variant:"body2",component:"p",color:(t=l.success,null===t?"inherit":!0===t?"green":"error"),children:l.message})})]})}},226:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(8),r=n.n(a),c=n(16),i=n(3),s=n(9),o=n(5),u=n(424),l=n(203),j=n(260),d=n(351),b=n(410),f=n(225),h=n(1),p=n.n(h),O=n(87),m=n(0);function x(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.a,{variant:"h5",sx:{mt:3},children:e.title}),Object(m.jsx)(O.a,{variant:"body2",sx:{mt:1},children:e.text}),e.children]})}var v=n(52),g=n(43),y=n(17),k=n(28);function w(e){var t,n,a=Object(k.a)(),h=p.a.useState({email:null!==(t=null===(n=localStorage.getItem("email"))||void 0===n?void 0:n.toString())&&void 0!==t?t:"",newPassword:"",code:""}),O=Object(o.a)(h,2),w=O[0],C=O[1],S=p.a.useCallback((function(e){C((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))}),[]),z=p.a.useCallback(function(){var t=Object(c.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,v.a.changePassword(w);case 4:a("Has\u0142o zosta\u0142o zmienione","success",(function(){return setTimeout((function(){return e.onSuccess&&e.onSuccess(),Object(m.jsx)(g.a,{to:y.a.LOGIN})}),2e3)})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),c=t.t0.description,404===t.t0.code&&(c="Taki u\u017cytkownik nie istnieje"),a(c,"error");case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),[w,a,e]);return Object(m.jsxs)(b.a,{component:"form",onSubmit:z,sx:{mt:1},children:[Object(m.jsxs)(x,{title:"1. Wygeneruj Kod",text:"Podaj sw\xf3j aders email i naci\u015bnij przycisk by otrzyma\u0107 email i kodem.",children:[Object(m.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Adres email",name:"email",autoComplete:"email",autoFocus:!0,value:w.email,onChange:S}),Object(m.jsx)(f.a,{text:"Kliknij przycisk by otrzyma\u0107 kod.",email:w.email})]}),Object(m.jsxs)(x,{title:"2. Podaj nowe has\u0142o i kod",text:"Podaj nowe has\u0142o i kod kt\xf3ry otrzyma\u0142e\u015b (je\u015bli nie, powt\xf3rz krok nr 1)",children:[Object(m.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"Has\u0142o",type:"password",id:"password",value:w.newPassword,onChange:S,autoComplete:"current-password"}),Object(m.jsx)(u.a,{margin:"normal",required:!0,fullWidth:!0,name:"code",label:"Kod",type:"text",id:"code",value:w.code,onChange:S,autoComplete:"email-code"})]}),Object(m.jsx)(l.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"3. Zmie\u0144 Has\u0142o"}),Object(m.jsx)(j.a,{container:!0,justifyContent:"flex-end",children:Object(m.jsx)(j.a,{item:!0,children:Object(m.jsx)(d.a,{href:y.a.LOGIN,children:"Has\u0142o zmienione? Zaloguj si\u0119!"})})})]})}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),r=n(182);function c(){return Object(a.useContext)(r.b)}},292:function(e,t,n){},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),r=n.n(a),c=n(36),i={owner:!1,accessAdmin:!1,premisesAdmin:!1,keysAdmin:!1,reservationsAdmin:!1,reservationsAbility:!1,logsAdmin:!1,statsViewer:!1,myId:function(e){return!1}};function s(){var e=Object(c.a)().user;return r.a.useMemo((function(){if(!e)return i;var t=e.access,n=t.owner,a=t.accessAdmin,r=t.premisesAdmin,c=t.keysAdmin,s=t.reservationsAdmin,o=t.reservationsAbility,u=t.logsAdmin,l=t.statsViewer;return{owner:n,accessAdmin:n||a,premisesAdmin:n||r,keysAdmin:n||c,reservationsAdmin:n||s,reservationsAbility:n||o,logsAdmin:n||u,statsViewer:n||l,myId:function(t){return n||e.id===t}}}),[e])}},326:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(77),i=n.n(c),s=(n(292),n(418)),o=n(259),u=n(450),l=(n(293),n(294),n(295),n(296),n(430)),j=n(402),d=n(403),b=n(201),f=n(9),h=n(127),p=n(42),O=n(0),m=["href"],x=a.forwardRef((function(e,t){var n=e.href,a=Object(h.a)(e,m);return Object(O.jsx)(p.b,Object(f.a)({"data-testid":"custom-link",ref:t,to:n},a))})),v=Object(b.a)({palette:{primary:j.a,secondary:{dark:"#f5f5f5",main:"#304ffe",light:"#fff"},background:{default:"#f3f3f3",paper:"#fff"}},shape:{borderRadius:4},components:{MuiCssBaseline:{styleOverrides:{body:Object(d.a)({track:"#f5f5f5",thumb:"#adadad",active:"#959595"})}},MuiTextField:{defaultProps:{size:"medium",variant:"outlined"}},MuiSelect:{defaultProps:{size:"medium"}},MuiButton:{defaultProps:{sx:{borderRadius:function(e){var t=e.shape;return Number(t.borderRadius)/2}}}},MuiLink:{defaultProps:{component:x}},MuiButtonBase:{defaultProps:{LinkComponent:x}},MuiSvgIcon:{defaultProps:{color:"inherit"}},MuiIconButton:{defaultProps:{color:"primary"}}}});function g(e){return Object(O.jsx)(l.a,{theme:v,children:e.children})}var y=n(181),k=n(410),w=n(43),C=n(17),S=n(36),z=n(53),I=r.a.lazy((function(){return n.e(10).then(n.bind(null,484))}));function E(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(I,{})})}var P=n(260),R=n(89),T=n(202),A=n(47),M=n(8),D=n.n(M),B=n(16),N=n(5),F=n(78),W=n(23),L=n(24),U=n(37),_=n(38),q=n(51),H=function(e){Object(U.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="",e}return Object(L.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId,a=e.roomId;this._path="/addresses/".concat(t,"/buildings/").concat(n,"/rooms/").concat(a)}},{key:"getView",value:function(){return this.get(this.path)}},{key:"create",value:function(e,t){var n=e.addressId,a=e.buildingId;return this.post("/addresses/".concat(n,"/buildings/").concat(a,"/rooms"),t)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"updateRFID",value:function(e){return this.patch("".concat(this.path,"/keys"),{RFIDTag:e})}},{key:"deleteRFIDTag",value:function(){return this.delete("".concat(this.path,"/keys"))}}]),n}(q.a),K=new H,G=n(28),Z=n(100),V=function(e){Object(U.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="",e}return Object(L.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e){return this.post("/addresses",e)}},{key:"getBuildings",value:function(){return this.get("".concat(this.path,"/buildings"))}},{key:"getResourcesMap",value:function(){return this.get("/addresses/resources")}}]),n}(q.a),J=new V,Q=r.a.createContext(null);function Y(e){var t=r.a.useState([]),n=Object(N.a)(t,2),a=n[0],c=n[1],i=r.a.useState(!1),s=Object(N.a)(i,2),o=s[0],u=s[1],l=Object(Z.a)(3e5),j=Object(S.a)().user,d=Object(G.a)(),b=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getResourcesMap();case 3:(null===(t=e.sent)||void 0===t?void 0:t.data)&&c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d]);r.a.useEffect((function(){j&&b(),u(!0)}),[j,b,l]);var f=r.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]),h=r.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return e.rooms}))})).flat(2)}),[a]),p=r.a.useMemo((function(){return a.map((function(e){return e.buildings.map((function(e){return{name:e.name,href:e.href,id:e.id}}))})).flat(2)}),[a]),m=r.a.useMemo((function(){return a.map((function(e){return{name:e.name,href:e.href,id:e.id}}))}),[a]),x=r.a.useCallback((function(e){var t,n;return null!==(t="/app"+(null===(n=a.map((function(e){return e.buildings})).flat(2).find((function(t){return t.id===e})))||void 0===n?void 0:n.href))&&void 0!==t?t:""}),[a]);return!1===o?null:Object(O.jsx)(Q.Provider,{value:{resourceMap:a,reloadMap:function(){b()},allRooms:h,getRoomLink:f,getBuildingLink:x,allAddresses:m,allBuildings:p},children:e.children})}function $(){return r.a.useContext(Q)}var X=Object(a.createContext)(null);function ee(e){var t=e.children,n=$(),a=n.getBuildingLink,c=n.reloadMap,i=Object(G.a)(),s=Object(w.h)(),o=r.a.useState(),u=Object(N.a)(o,2),l=u[0],j=u[1],d=Object(Z.a)(6e4);r.a.useLayoutEffect((function(){K.setPath(s)}),[s]);var b=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getView();case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)}))),[s,d]),h=r.a.useCallback((function(e){j((function(t){if(t)return Object(f.a)(Object(f.a)({},t),{},{occupied:e})}))}),[]),p=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,K.update(t);case 5:return j((function(e){if(e)return Object(f.a)(Object(f.a)({},e),t)})),i("Sala zosta\u0142a zaktualizowana","success"),("name"in t&&t.name!==l.name||"buildingId"in t&&t.buildingId!==(null===l||void 0===l?void 0:l.building.id))&&c(),e.abrupt("return",!0);case 11:e.prev=11,e.t0=e.catch(2),i(e.t0.description,"error");case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),[i,c,l]),m=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,K.remove();case 5:c(),i("Sala zosta\u0142a usuni\u0119ta","success",(function(){return Object(O.jsx)(w.a,{to:a(l.building.id)})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i(e.t0.description,"error");case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),[i,l,c,a]),x=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.updateRFID(t);case 3:return j((function(e){if(e)return Object(f.a)(Object(f.a)({},e),{},{RFIDTag:t})})),i("Tag zosta\u0142 przypisany","success"),e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),i(e.t0.description,"error"),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[i]),v=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.deleteRFIDTag();case 3:j((function(e){if(e)return Object(f.a)(Object(f.a)({},e),{},{RFIDTag:null})})),i("Tag zosta\u0142 usuni\u0119ty","success"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[i]);return r.a.useEffect((function(){return b(),function(){}}),[b]),Boolean(l)?Object(O.jsx)(X.Provider,{value:{room:l,updateRoom:p,deleteRoom:m,updateRFIDTag:x,deleteRFIDTag:v,setOccupied:h},children:t}):null}function te(){return r.a.useContext(X)}var ne=n(34),ae=n(87),re=n(348),ce=n(436),ie=n(35),se=n(91),oe=n(3),ue=n(424),le=n(345),je=n(263),de=n(342),be=n(264);function fe(){return r.a.useContext(nt)}var he=n(46),pe=n(422);function Oe(e){var t=e.value,n=e.onChange,a=e.label,c=r.a.useCallback((function(e){e&&n(e)}),[n]);return Object(O.jsx)(pe.a,{minDate:new Date,label:a,value:t,onChange:c,renderInput:function(e){return Object(O.jsx)(ue.a,Object(f.a)({sx:{width:"100%"}},e))}})}function me(e){var t,n,a,c=fe().updateReservation,i=$().allRooms,s=r.a.useState({}),o=Object(N.a)(s,2),u=o[0],l=o[1],j=r.a.useCallback((function(){e.onClose(),l({})}),[e]),d=r.a.useCallback(Object(B.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e.reservation.id,u);case 2:if(!t.sent){t.next=5;break}j(),l({});case 5:case"end":return t.stop()}}),t)}))),[e,u,j,c]),b=r.a.useCallback((function(e){l((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(oe.a)({},e.target.name,e.target.value))}))}),[]),h=r.a.useCallback((function(e,t){console.log(t),t&&l((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e,t.toLocaleString("pl")))}))}),[]);return console.log(e.reservation.plannedStart),Object(O.jsx)(ne.a,{open:e.open,onClose:j,"aria-label":"Okno do edycji rezerwacji",children:Object(O.jsxs)(he.a,{title:"Edycja rezerwacji",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:d,onCancel:e.onClose,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(t=u.title)&&void 0!==t?t:e.reservation.title,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(n=u.description)&&void 0!==n?n:e.reservation.description,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(Oe,{value:u.plannedStart?Object(ie.b)(u.plannedStart):new Date(e.reservation.plannedStart),label:"Pocz\u0105tek",onChange:function(e){return h("plannedStart",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(Oe,{value:u.plannedEnd?Object(ie.b)(u.plannedEnd):new Date(e.reservation.plannedEnd),label:"Koniec",onChange:function(e){return h("plannedEnd",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(de.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(a=u.roomId)&&void 0!==a?a:e.reservation.room.id,label:"Sala",onChange:function(e){return l((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:i.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(be.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var xe=n(203),ve=n(60),ge=n.n(ve);function ye(e){var t,n,a,c,i=fe().createReservation,s=$().allRooms,u=Object(G.a)(),l=r.a.useState({color:"",from:new Date(e.reservation.plannedStart),to:new Date(e.reservation.plannedEnd)}),j=Object(N.a)(l,2),d=j[0],b=j[1],h=r.a.useState([]),p=Object(N.a)(h,2),m=p[0],x=p[1],v=r.a.useState({title:e.reservation.title,description:e.reservation.description,roomId:null!==(t=e.reservation.room.id)&&void 0!==t?t:0}),g=Object(N.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback((function(){e.onClose()}),[e]),C=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.map(function(){var e=Object(B.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(Object(f.a)(Object(f.a)({},y),{},{plannedStart:t.from.toLocaleString("pl"),plannedEnd:t.to.toLocaleString("pl")}));case 2:return n=e.sent,t.color=n?"green":"red",e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,x(n);case 5:case"end":return e.stop()}}),e)}))),[y,m,i]),S=r.a.useCallback((function(e){x((function(t){return t.splice(e,1),Object.assign([],t)}))}),[]),z=r.a.useCallback((function(e,t){b((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e,t))}))}),[]),I=r.a.useCallback((function(){m.find((function(e){var t=e.from,n=e.to;return t===d.from||n===d.to}))?u("Daty powinny si\u0119 r\xf3\u017cni\u0107","error"):x((function(e){return e.push(Object(f.a)(Object(f.a)({},d),{},{color:""})),Object.assign([],e)}))}),[d,u,m]),E=r.a.useCallback((function(e){k((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(oe.a)({},e.target.name,e.target.value))}))}),[]);return Object(O.jsx)(ne.a,{open:e.open,onClose:w,"aria-label":"Okno do kopiowania rezerwacji",children:Object(O.jsxs)(he.a,{title:"Kopiowanie rezerwacji",subtitle:"Skopiuj rezerwacj\u0119 dla wybranych przez siebie nowych dat.",onSubmit:C,onCancel:e.onClose,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Tytu\u0142",multiline:!0,maxRows:4,name:"title",value:null!==(n=y.title)&&void 0!==n?n:e.reservation.title,onChange:E})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"outlined-multiline-flexible",label:"Opis",multiline:!0,maxRows:20,name:"description",value:null!==(a=y.description)&&void 0!==a?a:e.reservation.description,onChange:E})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:5,children:Object(O.jsx)(Oe,{label:"Pocz\u0105tek",value:d.from,onChange:function(e){return z("from",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:5,children:Object(O.jsx)(Oe,{label:"Koniec",value:d.to,onChange:function(e){return z("to",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:2,children:Object(O.jsx)(xe.a,{size:"large",sx:{height:"100%",width:"100%"},variant:"outlined",onClick:I,children:"Dodaj"})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(T.a,{spacing:1,sx:{border:"1px solid",borderColor:"divider",borderRadius:1,padding:.5,bgcolor:"background.default",maxHeight:"200px",overflow:"auto"},children:[0===m.length&&Object(O.jsx)(ae.a,{textAlign:"center",component:"p",children:"Brak dat"}),m.map((function(e,t){var n=e.color,a=e.from,r=e.to;return Object(O.jsxs)(o.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pl:"3px"},children:[Object(O.jsx)(ae.a,{component:"p",sx:{color:n},children:Object(O.jsxs)(O.Fragment,{children:[a.toLocaleString("pl"),"\xa0-\xa0",r.toLocaleString("pl")]})}),Object(O.jsx)(re.a,{onClick:function(){return S(t)},children:Object(O.jsx)(ge.a,{})})]},t)}))]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(de.a,{required:!0,labelId:"wybierz-sal\u0119",name:"roomId",value:null!==(c=y.roomId)&&void 0!==c?c:e.reservation.room.id,label:"Sala",onChange:function(e){return k((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:s.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(be.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})})}var ke=n(142),we=n.n(ke),Ce=n(409),Se=n(105),ze=n.n(Se),Ie=Object(Ce.a)("input")({position:"absolute",left:"-1000px",color:"transparent"});function Ee(e){var t=r.a.useState(""),n=Object(N.a)(t,2),a=n[0],c=n[1],i=r.a.useState("primary"),s=Object(N.a)(i,2),u=s[0],l=s[1],j=r.a.useRef(null),d=function(){var t=Object(B.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.onScan(a);case 3:t.sent?(l("success"),setTimeout(b,2e3)):l("error"),c("");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){e.onClose(),c(""),l("primary")};return Object(O.jsxs)(T.a,{onClick:function(){j.current&&console.log(j.current.focus())},component:"form",direction:"column",spacing:4,onSubmit:d,children:[Object(O.jsx)(we.a,{sx:{fontSize:140,alignSelf:"center"},color:u}),Object(O.jsx)(Ie,{ref:j,autoFocus:!0,type:"text",value:a,onChange:function(e){return c(e.target.value)}}),Object(O.jsxs)(o.a,{component:"span",textAlign:"center",children:[Object(O.jsx)(ae.a,{variant:"h5",color:"primary.dark",children:e.headline}),Object(O.jsx)(ae.a,{variant:"body2",color:"text.secondary",mt:"5px",children:e.bodyText})]}),Object(O.jsx)(xe.a,{startIcon:Object(O.jsx)(ze.a,{}),onClick:b,color:"error",children:"Zamknij"})]})}function Pe(e){var t=fe().pingKeyForReservation,n=r.a.useCallback(function(){var n=Object(B.a)(D.a.mark((function n(a){return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t(e.reservationId,a));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(O.jsx)(ne.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno do edycji rezerwacji",sx:{maxWidth:"400px"},children:Object(O.jsx)(Ee,{headline:"Wczytaj klucz z tagiem NFC",bodyText:'Przy pomocy czytnika, wczytaj wydawany klucz. Aby opu\u015bci\u0107 to okno, naci\u015bnij "Zamknij"',onScan:n,onClose:e.onClose})})}var Re=n(235),Te=n.n(Re),Ae=n(234),Me=n.n(Ae),De=n(413),Be=n(256),Ne=n(411),Fe=n(233),We=n.n(Fe);function Le(e){var t=r.a.useState(null),n=Object(N.a)(t,2),a=n[0],c=n[1],i=Boolean(a),s=r.a.useCallback((function(e){c(e.currentTarget)}),[]),o=function(){c(null)};return Object(O.jsxs)(k.a,{sx:e.sx,children:[Object(O.jsx)(re.a,{"aria-label":"more-options","aria-controls":"card-menu","aria-expanded":i?"true":void 0,"aria-haspopup":"true",onClick:s,children:Object(O.jsx)(We.a,{})}),Object(O.jsx)(Be.a,{MenuListProps:{"aria-labelledby":"more-options"},anchorEl:a,id:"card-menu",open:i,onClose:o,PaperProps:{sx:{minWidth:200,maxWidth:"100%"}},children:e.options.map((function(e,t){return Object(O.jsxs)(be.a,{onClick:function(){e.action(),o()},children:[Object(O.jsx)(Ne.a,{children:e.icon}),Object(O.jsx)(ae.a,{children:e.label})]},t)}))})]})}var Ue=n(438),_e=n(351),qe=n(440),He=n(427),Ke=n(412),Ge=n(39);function Ze(e){var t=e.user;return Object(O.jsxs)(Ue.a,{button:!0,component:_e.a,href:C.b.toUser(t.id),children:[Object(O.jsx)(qe.a,{children:Object(O.jsx)(He.a,{src:Ge.a.getLink(t.image),alt:"".concat(t.name," ").concat(t.surname)})}),Object(O.jsx)(Ke.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:t.email})]})}function Ve(e){var t=e.room,n=$().getRoomLink,a=r.a.useMemo((function(){return n(t.id)}),[t.id,n]);return Object(O.jsxs)(Ue.a,{button:!0,component:_e.a,href:a,children:[Object(O.jsx)(qe.a,{children:Object(O.jsx)(He.a,{src:Ge.a.getLink(t.image),alt:"zdj\u0119cie sali ".concat(t.name)})}),Object(O.jsx)(Ke.a,{primary:"Sala ".concat(t.name),secondary:t.roomType})]})}var Je=n(30),Qe=n(428);function Ye(e){return Object(O.jsxs)("div",{children:[Object(O.jsx)(ae.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(O.jsx)(ae.a,{variant:"body1",color:"text.secondary",textAlign:"left",component:"div",children:Object(O.jsx)(T.a,{direction:"row",alignItems:"center",flexWrap:"wrap",rowGap:1,columnGap:1,children:e.children.map((function(e){var t=e.label,n=e.value;return Object(O.jsxs)("div",{children:[t,":\xa0",Object(O.jsx)(Qe.a,{label:n})]},t)}))})})]})}function $e(e){return Object(O.jsxs)("span",{children:[Object(O.jsx)(ae.a,{component:"h3",variant:"subtitle1",children:e.title}),Object(O.jsx)(ae.a,{variant:"body1",color:"text.secondary",textAlign:"justify",component:"p",children:e.children})]})}function Xe(e){var t=Object(Je.a)(),n=t.reservationsAdmin,a=t.keysAdmin,c=t.myId,i=fe().deleteReservation,s=r.a.useState(!1),o=Object(N.a)(s,2),u=o[0],l=o[1],j=r.a.useState(!1),d=Object(N.a)(j,2),b=d[0],f=d[1],h=r.a.useState(!1),p=Object(N.a)(h,2),m=p[0],x=p[1],v=r.a.useState(!1),g=Object(N.a)(v,2),y=g[0],k=g[1],w=r.a.useCallback(Object(B.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e.reservation.id);case 2:if(!t.sent){t.next=4;break}l(!1);case 4:case"end":return t.stop()}}),t)}))),[e.reservation.id,i]),C=r.a.useMemo((function(){var t=[{icon:Object(O.jsx)(Me.a,{color:"primary"}),label:"Kopiuj",action:function(){return k(!0)}}];return a&&t.unshift({icon:Object(O.jsx)(we.a,{color:"primary"}),label:"Odbij klucz",action:function(){return x(!0)}}),(c(e.reservation.user.id)||n)&&t.push({icon:Object(O.jsx)(De.a,{color:"primary"}),label:"Edytuj",action:function(){return f(!0)}},{icon:Object(O.jsx)(ge.a,{color:"error"}),label:"Usu\u0144",action:function(){return l(!0)}}),t}),[c,a,e.reservation.user.id,n]);return Object(O.jsxs)(O.Fragment,{children:[(c(e.reservation.user.id)||n)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(se.a,{open:u,onClose:function(){return l(!1)},objectName:e.reservation.title,onSuccess:w}),Object(O.jsx)(me,{open:b,onClose:function(){return f(!1)},reservation:e.reservation})]}),Object(O.jsx)(ye,{open:y,onClose:function(){return k(!1)},reservation:e.reservation}),a&&Object(O.jsx)(Pe,{open:m,onClose:function(){return x(!1)},reservationId:e.reservation.id}),Object(O.jsx)(ne.a,{open:e.open,onClose:e.onClose,"aria-label":"Widok Rezerwacji",sx:{maxWidth:"800px",mt:"4vw"},children:Object(O.jsxs)(P.a,{container:!0,spacing:"15px",children:[Object(O.jsx)(P.a,{item:!0,xs:10,sm:11,children:Object(O.jsxs)(T.a,{spacing:4,alignItems:"stretch",children:[Object(O.jsx)(ae.a,{component:"h2",variant:"h4",children:e.reservation.title}),Object(O.jsx)(Ye,{title:"Planowany czas:",children:[{label:"Od",value:Object(ie.a)(e.reservation.plannedStart)},{label:"do",value:Object(ie.a)(e.reservation.plannedEnd)}]})]})}),Object(O.jsx)(P.a,{item:!0,xs:2,sm:1,children:Object(O.jsxs)(T.a,{alignItems:"flex-end",direction:"column",spacing:3,children:[Object(O.jsx)(re.a,{onClick:e.onClose,children:Object(O.jsx)(Te.a,{})}),Object(O.jsx)(Le,{options:C,sx:{justifySelf:"right"}}),a&&Object(O.jsx)(re.a,{onClick:function(){return x(!0)},title:"Odbij klucz","aria-label":"Odbij klucz",color:"success",children:Object(O.jsx)(we.a,{})})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(T.a,{spacing:4,alignItems:"stretch",children:[Object(O.jsx)(Ye,{title:"Faktyczny czas rezerwacji:",children:[{label:"Pocz\u0105tek",value:e.reservation.actualStart?Object(ie.a)(e.reservation.actualStart):"Brak"},{label:"Koniec",value:e.reservation.actualEnd?Object(ie.a)(e.reservation.actualEnd):"Brak"}]}),Object(O.jsx)($e,{title:"Opis:",children:e.reservation.description}),Object(O.jsxs)(ce.a,{component:"div",children:[Object(O.jsx)(Ze,{user:e.reservation.user}),Object(O.jsx)(Ve,{room:e.reservation.room})]})]})})]})})]})}var et=r.a.createContext({showReservation:function(e){},reservation:null});function tt(e){var t,n=fe().reservations,a=r.a.useState(!0),c=Object(N.a)(a,2),i=c[0],s=c[1],o=r.a.useState(null),u=Object(N.a)(o,2),l=u[0],j=u[1],d=null!==(t=r.a.useMemo((function(){if(l)return n.find((function(e){return e.id===l}))}),[n,l]))&&void 0!==t?t:null,b=r.a.useCallback((function(e){j(e),s(!0)}),[]);return Object(O.jsxs)(et.Provider,{value:{reservation:d,showReservation:b},children:[e.children,d&&Object(O.jsx)(Xe,{reservation:d,open:i,onClose:function(){return s(!1)}})]})}var nt=r.a.createContext(null);function at(e){var t=Object(A.b)(),n=t.queryParams,a=t.setQueryParams,c=Object(G.a)(),i=$().getRoomLink,s=te(),o=Object(S.a)().user,u=Object(w.h)(),l=Object(Z.a)(3e4),j=r.a.useState(),d=Object(N.a)(j,2),b=d[0],h=d[1],p=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t,r,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u,0===Object.keys(u).length&&window.location.pathname===C.a.HOME&&(t={userId:"me"}),e.next=5,F.a.getReservations(t,n);case 5:(r=e.sent).pagination&&a((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=r.pagination)||void 0===t?void 0:t.pagesCount})})),h(r.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c(null!==(i=e.t0.description)&&void 0!==i?i:e.t0.message,"error");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[n.currentPage,n.itemsOnPage,n.from,n.search,a,u,c,o]);r.a.useEffect((function(){p()}),[p,l]);var m=r.a.useCallback((function(){return a((function(e){return Object.assign({},e)}))}),[a]),x=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,a=b.find((function(e){return e.id===t}))){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,F.a.pingKey(t,n);case 8:r=e.sent,h((function(e){return e&&e.forEach((function(e){e.id===t&&(e.actualStart?e.actualEnd=(new Date).toString():e.actualStart=(new Date).toString())})),Object.assign([],e)})),s&&s.setOccupied(!a.room.occupied),(null===r||void 0===r?void 0:r.data)&&c(r.data.toString(),"success"),e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(2),c(e.t0.description,"error"),e.abrupt("return",!1);case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,s,c]),v=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.createOne(t);case 3:m(),c("Rezerwacja utworzona prawid\u0142owo!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[c,m]),g=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.remove(t);case 3:h((function(e){return e&&e.filter((function(e){return e.id!==t}))})),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c]),y=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.a.update(t,n);case 3:h((function(e){return e&&e.map((function(e){return e.id===t&&(["plannedStart","plannedEnd"].forEach((function(t){t in n&&(e[t]=Object(ie.b)(n[t]).toUTCString())})),["description","title"].forEach((function(t){t in n&&(e[t]=n[t])}))),e}))})),"roomId"in n?n.roomId&&c("Rezerwacja zaktualizowana i przeniesiona!","success",(function(){return Object(O.jsx)(w.a,{to:i(Number(n.roomId))})})):c("Rezerwacja zaktualizowana!","success"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),c(e.t0.description,"error"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,c]);return b?Object(O.jsx)(nt.Provider,{value:{reservations:b,updateReservation:y,deleteReservation:g,createReservation:v,pingKeyForReservation:x},children:Object(O.jsx)(tt,{children:e.children})}):null}var rt=n(161),ct=r.a.memo((function(e){return Object(O.jsx)(He.a,{alt:"u\u017cytkownik",src:Ge.a.getLink(e.img)})}));function it(e){var t,n=e.data,a=e.onClick,r=F.a.resolveStatus(n),c=r.message,i=r.color;return Object(O.jsxs)(Ue.a,{component:"li",button:!0,sx:{mb:"2px",bgcolor:i,"&:hover, &:focus":{bgcolor:i,filter:"brightness(97%)"}},onClick:a,children:[Object(O.jsx)(qe.a,{children:Object(O.jsx)(_e.a,{href:C.b.toUser(n.user.id),children:Object(O.jsx)(ct,{img:n.user.image})})}),Object(O.jsx)(Ke.a,{primary:n.title,secondary:Object(ie.a)(null!==(t=n.actualStart)&&void 0!==t?t:n.plannedStart)+" - "+c})]})}function st(){var e=r.a.useContext(et).showReservation,t=fe().reservations,n=r.a.useMemo((function(){return t.map((function(t){return Object(O.jsx)(it,{data:t,onClick:function(){return e(t.id)}},t.id)}))}),[t,e]);return Object(O.jsx)(ce.a,{"aria-label":"lista rezerwacji",children:0===t.length?Object(O.jsx)(Ue.a,{children:Object(O.jsx)(Ke.a,{primary:"Brak rezerwacji spe\u0142niaj\u0105cych kryteria."})}):n})}var ot=n(433),ut=n(177),lt=n(162),jt=n(179),dt=n.n(jt);function bt(e){var t,n=Object(G.a)(),a=$().allRooms,c=r.a.useState({start:new Date,end:new Date(Date.now()+36e5)}),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState({title:"",description:"",plannedStart:"",plannedEnd:"",roomId:null!==(t=e.roomId)&&void 0!==t?t:0}),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback((function(e){d((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(oe.a)({},e.target.name,e.target.value))}))}),[]),h=r.a.useCallback(Object(B.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j.plannedStart=s.start.toLocaleString("pl"),j.plannedEnd=s.end.toLocaleString("pl"),t.prev=2,t.next=5,F.a.createOne(j);case 5:n("Rezerwacja utworzona!","success"),e.onCancel(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(t.t0.description,"error");case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),[j,n,e,s.start,s.end]),p=r.a.useCallback((function(e,t){o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e,t))}))}),[]);return Object(O.jsxs)(he.a,{title:"Tworzenie rezerwacji",subtitle:"Stw\xf3rz rezerwacj\u0119 w wybranym przez siebie pokoju.",onSubmit:h,onCancel:e.onCancel,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{title:"Tytu\u0142 rezerwacji",inputProps:{title:"Tytu\u0142 rezerwacji"},autoFocus:!0,required:!0,fullWidth:!0,maxRows:4,label:"Tytu\u0142",id:"outlined-multiline-flexible",name:"title",value:j.title,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,multiline:!0,maxRows:20,label:"Opis",id:"outlined-multiline-flexible",name:"description",value:j.description,onChange:b})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(Oe,{label:"Pocz\u0105tek",value:s.start,onChange:function(e){return p("start",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)(Oe,{label:"Koniec",value:s.end,onChange:function(e){return p("end",e)}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"wybierz-sal\u0119",children:"Sala"}),Object(O.jsx)(de.a,{required:!0,labelId:"wybierz-budynek",name:"buildingId",value:j.roomId,label:"Budynek",onChange:function(e){return d((function(t){return Object(f.a)(Object(f.a)({},t),{},{roomId:Number(e.target.value)})}))},children:a.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(be.a,{value:n,children:["Sala \xa0",t," "]},t)}))})]})})]})}function ft(e){return Object(O.jsx)(ne.a,{open:e.open,"aria-label":"Okno do tworzenia rezerwacji",onClose:e.onClose,children:Object(O.jsx)(bt,{roomId:e.roomId,onCancel:e.onClose})})}var ht=r.a.memo(ft),pt=[{name:"Dzi\u015b",value:"today"},{name:"Ten tydzie\u0144",value:"this week"},{name:"Od wczoraj",value:"yesterday"}];function Ot(){var e,t,n,a=Object(Je.a)().reservationsAbility,c=Object(A.b)(),i=c.setQueryParams,s=c.queryParams,u=Object(w.h)(),l=r.a.useState(!1),j=Object(N.a)(l,2),d=j[0],b=j[1],h=r.a.useState(new Date(Object(ie.c)(s.from)?null!==(e=s.from)&&void 0!==e?e:"xxx":Date.now())),p=Object(N.a)(h,2),m=p[0],x=p[1],v=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{from:e})}))}),[i]),g=r.a.useCallback((function(e){e.preventDefault(),i((function(e){return Object(f.a)(Object(f.a)({},e),{},{from:m.toISOString()})}))}),[m,i]),y=r.a.useCallback((function(e){i((function(t){return Object(f.a)(Object(f.a)({},t),{},{search:e.target.value})}))}),[i]);return Object(O.jsxs)(O.Fragment,{children:[a&&Object(O.jsx)(ht,{open:d,onClose:function(){return b(!1)},roomId:"roomId"in u?Number(u.roomId):void 0}),Object(O.jsxs)(P.a,{container:!0,component:"form",onSubmit:g,spacing:2,alignItems:"center",children:[Object(O.jsxs)(P.a,{item:!0,xs:12,md:12,children:[Object(O.jsx)(ut.a,{onChange:v,buttons:pt,value:Object(ie.c)(s.from)?"":null!==(t=null===s||void 0===s?void 0:s.from)&&void 0!==t?t:pt[0].value}),Object(O.jsxs)(o.a,{display:"inline-flex",children:[Object(O.jsx)(ot.a,{label:"Od daty",inputFormat:"yyyy-MM-dd",value:m,onChange:function(e){return e&&x(e)},renderInput:function(e){return Object(O.jsx)(ue.a,Object(f.a)(Object(f.a)({},e),{},{size:"small"}))}}),Object(O.jsx)(xe.a,{variant:(null===s||void 0===s?void 0:s.from)===m.toISOString()?"contained":"outlined",type:"submit",sx:{ml:1},children:"OK"})]})]}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(lt.a,{name:"search",label:"wyszukaj",value:null!==(n=s.search)&&void 0!==n?n:"",onChange:y})}),a&&Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(xe.a,{startIcon:Object(O.jsx)(dt.a,{}),onClick:function(){return b(!0)},children:"Stw\xf3rz rezerwacj\u0119"})})]})]})}var mt=r.a.memo(Ot);function xt(){return Object(O.jsx)(A.a,{name:"reservations-query-params",default:{itemsOnPage:5,currentPage:1,from:"today"},children:Object(O.jsx)(at,{children:Object(O.jsxs)(T.a,{rowGap:3,children:[Object(O.jsx)(mt,{}),Object(O.jsx)(st,{}),Object(O.jsx)(rt.a,{})]})})})}var vt=r.a.memo(xt),gt=n(90),yt=r.a.createContext(null);function kt(e){var t=Object(G.a)(),n=$().reloadMap,a=Object(w.h)(),c=r.a.useState(),i=Object(N.a)(c,2),s=i[0],o=i[1];r.a.useLayoutEffect((function(){J.setPath(a)}),[a]);var u=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.getCurrentOne();case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);r.a.useEffect((function(){u()}),[u]);var l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.getBuildings();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),j=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.update(a);case 3:return o((function(e){return Object(f.a)(Object(f.a)({},e),a)})),n(),t("Adres zaktualizowany","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),t(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[t,n]),d=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.remove();case 3:n(),t("Adres zosta\u0142 usuni\u0119ty","success",(function(){return Object(O.jsx)(w.a,{to:C.a.HOME})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s&&t(e.t0.description,"error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t,s,n]);return Boolean(s)?Object(O.jsx)(yt.Provider,{value:{address:s,deleteAddress:d,getBuildingsInAddress:l,updateAddress:j},children:e.children}):null}function wt(){return r.a.useContext(yt)}var Ct=n(441),St=n(442),zt=n(443),It=n(444),Et=Object(Ce.a)("iframe")({width:"100%",height:"50vh",maxHeight:"400px",minHeight:"300px"});function Pt(e){var t=e.address,n=e.sx,a=r.a.useMemo((function(){var e=t.street,n=t.number,a=t.town,r=t.country,c=new URL("https://maps.google.com/maps"),i=new URLSearchParams({q:"".concat(e+" "+n+" "+a+" "+r),ie:"UTF8",z:"14",iwloc:"",output:"embed"});return c.search=i.toString(),c.toString()}),[t]);return Object(O.jsx)(o.a,{children:Object(O.jsx)(Et,{src:a,frameBorder:"0",sx:Object(f.a)({},n)})})}var Rt=n(106),Tt=n.n(Rt);function At(e){var t,n,a,c,i,s=e.open,o=e.onClose,u=wt(),l=u.address,j=u.updateAddress,d=r.a.useState({}),b=Object(N.a)(d,2),h=b[0],p=b[1],m=r.a.useCallback((function(){o(),p({})}),[o]),x=r.a.useCallback((function(e){p((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(oe.a)({},e.target.name,e.target.value))}))}),[]),v=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(h);case 2:if(!e.sent){e.next=4;break}m();case 4:case"end":return e.stop()}}),e)}))),[h,m,j]);return Object(O.jsx)(ne.a,{open:s,onClose:o,"aria-label":"Okno do edycji budynku",children:Object(O.jsxs)(he.a,{title:"Edycja adresu",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci adresu i zatwierd\u017a zmiany.",onSubmit:v,onCancel:o,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:null!==(t=h.country)&&void 0!==t?t:l.country,onChange:x})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{autoFocus:!0,required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",value:null!==(n=h.town)&&void 0!==n?n:l.town,onChange:x})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:null!==(a=h.postalCode)&&void 0!==a?a:l.postalCode,onChange:x})}),Object(O.jsx)(P.a,{item:!0,xs:8,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:null!==(c=h.street)&&void 0!==c?c:l.street,onChange:x})}),Object(O.jsx)(P.a,{item:!0,xs:4,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:null!==(i=h.number)&&void 0!==i?i:l.number,onChange:x})})]})})}var Mt=n(432);function Dt(e){var t=e.open,n=e.onClose,a=e.handleCreateBuilding,c=r.a.useState({name:"",openTime:new Date(0,0,0,7,0).toString(),closeTime:new Date(0,0,0,21,0).toString()}),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(f.a)(Object(f.a)({},s),{},{closeTime:ie.d.format(new Date(s.closeTime)),openTime:ie.d.format(new Date(s.openTime))}));case 2:e.sent&&n();case 4:case"end":return e.stop()}}),e)}))),[s,n,a]);return Object(O.jsx)(ne.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia budynku",children:Object(O.jsxs)(he.a,{title:"Dodaj nowy budynek!",subtitle:"Wype\u0142nij dane nowego budynku i kliknij zatwierd\u017a.",onSubmit:l,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Mt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:s.openTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{openTime:e})}))},renderInput:function(e){return Object(O.jsx)(ue.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Mt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:s.closeTime,onChange:function(e){return o((function(t){return Object(f.a)(Object(f.a)({},t),{},{closeTime:e})}))},renderInput:function(e){return Object(O.jsx)(ue.a,Object(f.a)({sx:{width:"100%"}},e))}})})]})})}function Bt(e){var t=e.open,n=e.onClose,a=Object(G.a)(),c=$().reloadMap,i=r.a.useState({country:"Polska",town:"",street:"",number:"",postalCode:""}),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback((function(e){u((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(oe.a)({},e.target.name,e.target.value))}))}),[]),j=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.create(o);case 3:c(),a("Adres zosta\u0142 dodany","success"),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0.description,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[o,a,n,c]);return Object(O.jsx)(ne.a,{open:t,onClose:n,"aria-label":"Okno do tworzenia adresu",children:Object(O.jsxs)(he.a,{title:"Dodaj nowy adres!",subtitle:"Wype\u0142nij dane nowego adresu i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"country",label:"Kraj",name:"country",value:o.country,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"town",label:"Miasto",name:"town",autoFocus:!0,value:o.town,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"postalCode",label:"Kod pocztowy",name:"postalCode",value:o.postalCode,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:8,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"street",label:"Ulica",name:"street",value:o.street,onChange:l})}),Object(O.jsx)(P.a,{item:!0,xs:4,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"number",label:"Number",name:"number",value:o.number,onChange:l})})]})})}var Nt=n(101);function Ft(){var e=Object(Je.a)().premisesAdmin,t=wt(),n=t.address,a=t.deleteAddress,c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return d(!0)},icon:Object(O.jsx)(Tt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(O.jsx)(ge.a,{color:"error"})}]}),[]);return Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(se.a,{objectName:"".concat(n.street," ").concat(n.number),open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(O.jsx)(At,{open:j,onClose:function(){return d(!1)}})]}),Object(O.jsxs)(Ct.a,{elevation:0,children:[Object(O.jsx)(St.a,{action:e&&Object(O.jsx)(Le,{options:b}),title:Object(O.jsxs)(O.Fragment,{children:[n.country,", ",n.town]}),subheader:Object(O.jsxs)(O.Fragment,{children:[n.street," ",n.number]})}),Object(O.jsx)(zt.a,{component:"div",children:Object(O.jsx)(Pt,{address:n})}),Object(O.jsxs)(It.a,{children:[Object(O.jsxs)(ae.a,{component:"p",children:["ul. ",n.street," ",n.number,Object(O.jsx)("br",{}),n.postalCode," ",n.town,", ",Object(O.jsx)("br",{}),n.country]}),Object(O.jsx)("br",{}),Object(O.jsx)(Nt.a,{model:n})]})]})]})}var Wt=function(e){Object(U.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(W.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="",e}return Object(L.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){var t=e.addressId,n=e.buildingId;this._path="/addresses/".concat(t,"/buildings/").concat(n)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"create",value:function(e,t){var n=e.addressId;return this.post("/addresses/".concat(n,"/buildings"),t)}},{key:"getRoomsInBuilding",value:function(){return this.get("".concat(this.path,"/rooms"))}}]),n}(q.a),Lt=new Wt,Ut=n(163),_t=n.n(Ut);function qt(e){var t=Object(Je.a)().premisesAdmin;return Object(O.jsx)(k.a,{children:Object(O.jsxs)(ce.a,{sx:{minHeight:"160px",maxHeight:"400px"},children:[t&&Object(O.jsxs)(Ue.a,{button:!0,onClick:e.onAddItem,children:[Object(O.jsx)(Ne.a,{children:Object(O.jsx)(_t.a,{color:"primary"})}),Object(O.jsx)(Ke.a,{primary:"Dodaj element"})]}),e.children]})})}var Ht=n(223),Kt=n.n(Ht);function Gt(e){return Object(O.jsxs)(Ue.a,{button:!0,component:_e.a,href:e.link,sx:{py:"2px"},children:[Object(O.jsx)(Ne.a,{children:Object(O.jsx)(Kt.a,{})}),Object(O.jsx)(Ke.a,{primary:e.primary})]})}var Zt=r.a.memo(Gt),Vt=n(76);function Jt(){var e=wt().getBuildingsInAddress,t=$().reloadMap,n=Object(G.a)(),a=Object(w.h)(),c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(B.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt.create(a,r);case 3:return b(),t(),n("Nowa sala utworzona!","success"),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n,t,b,a]),h=r.a.useMemo((function(){return null===j||void 0===j?void 0:j.map((function(e){return Object(O.jsx)(Zt,{primary:"Budynek ".concat(e.name),link:"./".concat(e.address,"/buildings/").concat(e.id)},e.id)}))}),[j]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Dt,{open:s,onClose:function(){return o(!1)},handleCreateBuilding:f}),Object(O.jsx)(Vt.a,{title:"Budynki pod adresem",children:Object(O.jsx)(qt,{onAddItem:function(){return o(!0)},children:h})}),Object(O.jsx)("br",{})]})}var Qt=r.a.memo(Jt),Yt=r.a.lazy((function(){return n.e(11).then(n.bind(null,480))})),$t=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Yt,{})})};function Xt(){var e=Object(Je.a)(),t=e.logsAdmin,n=e.statsViewer,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(O.jsx)(vt,{})}),n&&e.push({name:"Statystyki",component:Object(O.jsx)($t,{})}),t&&e.push({name:"Logi",component:Object(O.jsx)(R.a,{})}),e}),[t,n]);return Object(O.jsx)(kt,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(gt.a,{tabs:a})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Ft,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Qt,{})})]})]})})}var en=r.a.memo(Xt),tn=r.a.createContext(null);function nn(e){var t=Object(G.a)(),n=$().reloadMap,a=Object(w.h)(),c=r.a.useState(),i=Object(N.a)(c,2),s=i[0],o=i[1];r.a.useLayoutEffect((function(){Lt.setPath(a)}),[a]);var u=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lt.getCurrentOne();case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)}))),[a]);r.a.useEffect((function(){u()}),[u]);var l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt.getRoomsInBuilding();case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[a]),j=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt.update(a);case 3:if(!e.sent){e.next=8;break}return s&&("addressId"in a&&s.address.id!==a.addressId||"name"in a)&&n(),o((function(e){return e&&Object.keys(a).forEach((function(t){if("addressId"===t)e.address.id=Number(a[t]);else e[t]=a[t]})),Object.assign({},e)})),t("Bydynek zaktualizowany","success"),e.abrupt("return",!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(e.t0.description,"error");case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),[t,s,n]),d=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lt.remove();case 3:s&&t("Budynek usuni\u0119ty","success",(function(){return Object(O.jsx)(w.a,{to:C.b.toAddress(s.address.id)})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t(e.t0.description,"error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[t,s]);return Boolean(s)?Object(O.jsx)(tn.Provider,{value:{building:s,deleteBuilding:d,getRoomsInBuilding:l,updateBuilding:j},children:e.children}):null}function an(){return r.a.useContext(tn)}var rn=n(6),cn=n(122),sn=n.n(cn),on=Object(rn.a)("input")({display:"none"}),un=Object(rn.a)("img")({width:"fill-available",maxHeight:"350px"});function ln(e){var t=Object(G.a)(),n=Object(w.g)(),a=Object(w.h)(),c=r.a.useState(),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback(function(){var r=Object(B.a)(D.a.mark((function r(c){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),s){r.next=4;break}return t("Najpierw za\u0142aduj nowy obraz","warning"),r.abrupt("return");case 4:return r.prev=4,r.next=7,Ge.a.upload(a,s);case 7:e.onUpload&&e.onUpload(),t("Obraz zosta\u0142 zmieniony","success",(function(){return Object(O.jsx)(w.a,{to:n.pathname})})),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),t(r.t0.description,"error");case 14:case"end":return r.stop()}}),r,null,[[4,11]])})));return function(e){return r.apply(this,arguments)}}(),[s,e,t,n,a]),l=r.a.useCallback((function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];o(t)}}),[]),j=r.a.useCallback(Object(B.a)(D.a.mark((function r(){return D.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ge.a.remove(a);case 3:e.onDelete&&e.onDelete(),t("Przywr\xf3cono domy\u015blny obraz, za\u0142aduj ponownie aby zobaczy\u0107 rezultat.","success",(function(){return Object(O.jsx)(w.a,{to:n.pathname})})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),t(r.t0.description,"error");case 10:case"end":return r.stop()}}),r,null,[[0,7]])}))),[e,t,n,a]);return Object(O.jsxs)(P.a,{container:!0,component:"form",onSubmit:u,direction:"row",alignItems:"stretch",spacing:2,children:[Object(O.jsx)(P.a,{item:!0,xs:12,sm:9,children:Object(O.jsx)(un,{src:s?URL.createObjectURL(s):Ge.a.getLink(e.image),alt:"nowy obraz"})}),Object(O.jsxs)(P.a,{item:!0,xs:12,sm:3,sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[Object(O.jsxs)("label",{htmlFor:"upload-obrazu",children:[Object(O.jsx)(on,{accept:"*.(jpg|png)",id:"upload-obrazu",type:"file",onChange:l}),Object(O.jsx)(xe.a,{color:"primary",variant:"outlined",component:"span",children:"Wybierz zdj\u0119cie"})]}),Object(O.jsx)(xe.a,{color:"error",startIcon:Object(O.jsx)(ge.a,{}),onClick:j,children:"Usu\u0144"}),Object(O.jsx)(xe.a,{type:"submit",color:"success",startIcon:Object(O.jsx)(sn.a,{}),children:"Zapisz"})]})]})}var jn,dn=n(414);function bn(e){var t=e.split(":"),n=Object(N.a)(t,2),a=n[0],r=n[1];return new Date(0,0,0,Number(a),Number(r))}function fn(e){var t,n,a,c,i=e.open,s=e.onClose,o=$().allAddresses,u=an(),l=u.updateBuilding,j=u.building,d=r.a.useState({}),b=Object(N.a)(d,2),h=b[0],p=b[1],m=r.a.useCallback((function(){s(),p({})}),[s]),x=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);p((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]),v=r.a.useCallback((function(e,t){p((function(n){return n[e]=ie.d.format(t),Object.assign({},n)}))}),[]),g=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(h);case 2:if(!e.sent){e.next=4;break}m();case 4:case"end":return e.stop()}}),e)}))),[h,m,l]),y=r.a.useCallback((function(e){var t=e.target.value;"addressId"===e.target.name&&(t=Number(t)),e.target&&p((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]);return Object(O.jsx)(ne.a,{open:i,onClose:s,"aria-label":"Okno edycji budynku",children:Object(O.jsxs)(T.a,{spacing:3,children:[Object(O.jsx)(ln,{image:j.image}),Object(O.jsx)(dn.a,{}),Object(O.jsxs)(he.a,{title:"Edycja budynku",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci budynku i zatwierd\u017a zmiany.",onSubmit:g,onCancel:s,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=h.name)&&void 0!==t?t:j.name,onChange:x})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Mt.a,{label:"Godzina otwarcia",inputFormat:"HH:mm",value:bn(null!==(n=h.openTime)&&void 0!==n?n:j.openTime),onChange:function(e){return v("openTime",e)},renderInput:function(e){return Object(O.jsx)(ue.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(Mt.a,{label:"Godzina zamkni\u0119cia",inputFormat:"HH:mm",value:bn(null!==(a=h.closeTime)&&void 0!==a?a:j.closeTime),onChange:function(e){return v("closeTime",e)},renderInput:function(e){return Object(O.jsx)(ue.a,Object(f.a)({sx:{width:"100%"}},e))}})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"wybierz-adres",children:"Adres"}),Object(O.jsx)(de.a,{labelId:"wybierz-adres",name:"addressId",value:null!==(c=h.addressId)&&void 0!==c?c:j.address.id,label:"Adres",onChange:y,children:o.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(be.a,{value:n,children:[t," "]},t)}))})]})})]})]})})}function hn(e){var t=e.open,n=e.onClose,a=e.handleCreateRoom,c=r.a.useState({name:"",roomType:jn.LECTURE,seatsCount:50,floor:0}),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useCallback((function(e){var t=e.target.value;if("name"===e.target.name)t=String(t);else t=Number(t);o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]),l=r.a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&o((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]),j=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(s);case 2:if(!e.sent){e.next=4;break}n();case 4:case"end":return e.stop()}}),e)}))),[s,a,n]);return Object(O.jsx)(ne.a,{open:t,onClose:n,"aria-label":"Okno edycji budynku",children:Object(O.jsxs)(he.a,{title:"Dodaj now\u0105 sal\u0119",subtitle:"Wype\u0142nij dane nowej sali i kliknij zatwierd\u017a.",onSubmit:j,onCancel:n,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:s.name,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"room-type",children:"Typ Sali"}),Object(O.jsx)(de.a,{required:!0,labelId:"room-type",id:"roomType",value:s.roomType,name:"roomType",label:"Typ Sali",onChange:l,children:Object.values(jn).map((function(e){return Object(O.jsx)(be.a,{value:e,children:e},e)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:s.seatsCount,onChange:u})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:s.floor,onChange:u})})]})})}!function(e){e.LABORATORY="Sala laboratoryjna",e.CONFERENCE="Sala konferencyjna",e.LECTURE="Sala wyk\u0142adowa"}(jn||(jn={}));var pn,On=n(237),mn=n.n(On),xn=n(238),vn=n.n(xn),gn=n(65);function yn(e){var t=r.a.useState(!1),n=Object(N.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(gn.a.isFavourite(e.data))}),[e.data]);var i=r.a.useCallback((function(){a?gn.a.removeFavourite(e.data):gn.a.addFavourite(e.data),c((function(e){return!e}))}),[a,e.data]);return Object(O.jsx)(re.a,{sx:{display:"inline"},onClick:i,color:"warning",children:a?Object(O.jsx)(mn.a,{}):Object(O.jsx)(vn.a,{})})}function kn(){var e=Object(Je.a)().premisesAdmin,t=an(),n=t.building,a=t.deleteBuilding,c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(!1),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return d(!0)},icon:Object(O.jsx)(Tt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return o(!0)},icon:Object(O.jsx)(ge.a,{color:"error"})}]}),[]);return Boolean(n)?Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(se.a,{objectName:n.name,open:s,onClose:function(){return o(!1)},onSuccess:a}),Object(O.jsx)(fn,{open:j,onClose:function(){return d(!1)}})]}),Object(O.jsxs)(Ct.a,{elevation:0,children:[Object(O.jsx)(St.a,{action:e&&Object(O.jsx)(Le,{options:b}),title:Object(O.jsxs)(O.Fragment,{children:["Budynek ",n.name,Object(O.jsx)(yn,{data:{id:n.id,name:n.name,type:pn.Building,addressId:n.address.id}})]}),subheader:Object(O.jsxs)(O.Fragment,{children:[n.openTime," - ",n.closeTime]})}),Object(O.jsx)(zt.a,{component:"img",height:"350",image:Ge.a.getLink(n.image),alt:n.name}),Object(O.jsxs)(It.a,{children:[Object(O.jsxs)(_e.a,{href:C.b.toAddress(n.address.id),children:[n.address.town,",\xa0",n.address.street,"\xa0",n.address.number]}),Object(O.jsx)("br",{}),Object(O.jsx)(Nt.a,{model:n})]})]})]}):null}function wn(){var e=an().getRoomsInBuilding,t=$().reloadMap,n=Object(w.h)(),a=Object(G.a)(),c=r.a.useState(!1),i=Object(N.a)(c,2),s=i[0],o=i[1],u=r.a.useState(),l=Object(N.a)(u,2),j=l[0],d=l[1],b=r.a.useCallback(Object(B.a)(D.a.mark((function t(){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,d(n);case 4:case"end":return t.stop()}}),t)}))),[e]);r.a.useEffect((function(){b()}),[b]);var f=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.create(n,r);case 3:return a("Nowa sala utworzona!","success"),b(),t(),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),a(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[a,t,b,n]),h=r.a.useMemo((function(){return null===j||void 0===j?void 0:j.map((function(e){return Object(O.jsx)(Zt,{primary:"Sala ".concat(e.name),link:"./".concat(e.building,"/rooms/").concat(e.id)},e.id)}))}),[j]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(hn,{handleCreateRoom:f,open:s,onClose:function(){return o(!1)}}),Object(O.jsx)(Vt.a,{title:"Sale w budynku",children:Object(O.jsx)(qt,{onAddItem:function(){return o(!0)},children:h})}),Object(O.jsx)("br",{})]})}!function(e){e.Building="building-item",e.Room="room-item"}(pn||(pn={}));var Cn=r.a.memo(wn),Sn=r.a.lazy((function(){return n.e(0).then(n.bind(null,481))})),zn=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Sn,{})})};function In(){var e=Object(Je.a)(),t=e.logsAdmin,n=e.statsViewer,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(O.jsx)(vt,{})}),n&&e.push({name:"Statystyki",component:Object(O.jsx)(zn,{})}),t&&e.push({name:"Logi",component:Object(O.jsx)(R.a,{})}),e}),[t,n]);return Object(O.jsx)(nn,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(gt.a,{tabs:a})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,alignContent:"flex-start",xs:12,md:5,lg:4,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(kn,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Cn,{})})]})]})})}var En=r.a.memo(In),Pn=n(239),Rn=n.n(Pn);function Tn(e){switch(e.type){case pn.Building:var t=e,n=t.addressId,a=t.id,r=t.name;return Object(O.jsx)(Ke.a,{primary:Object(O.jsxs)(_e.a,{href:C.b.toBuilding(n,a),children:["Budynek ",r]})},r+a);case pn.Room:var c=e,i=c.addressId,s=c.buildingId,o=c.id,u=c.name;return Object(O.jsx)(Ke.a,{primary:Object(O.jsxs)(_e.a,{href:C.b.toRoom(i,s,o),children:["Sala ",u]})},u+o);default:return null}}function An(){var e=Object(S.a)().user,t=r.a.useState(),n=Object(N.a)(t,2),a=n[0],c=n[1];r.a.useEffect((function(){c(gn.a.favourites)}),[e]);var i=r.a.useCallback((function(e){gn.a.removeFavourite(e),c(gn.a.favourites)}),[]);return Object(O.jsx)(Vt.a,{title:"Ulubione",children:Object(O.jsxs)(ce.a,{sx:{minHeight:"160px"},children:[null===a||void 0===a?void 0:a.map((function(e){return Object(O.jsxs)(Ue.a,{disablePadding:!0,children:[Tn(e),Object(O.jsx)(re.a,{title:"usu\u0144 z ulubionych","aria-label":"usu\u0144 z ulubionych",onClick:function(){return i(e)},size:"small",children:Object(O.jsx)(Rn.a,{fontSize:"small"})})]},"".concat(e.name,"-").concat(e.id))})),0===(null===a||void 0===a?void 0:a.length)&&Object(O.jsx)(Ke.a,{color:"text.secondary",primary:"Brak ulubionych"})]})})}var Mn=r.a.memo(An),Dn=n(57);function Bn(){var e,t=Object(G.a)(),n=r.a.useState(),a=Object(N.a)(n,2),c=a[0],i=a[1];r.a.useEffect((function(){i(gn.a.notes)}),[]);var s=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c){e.next=3;break}return e.abrupt("return");case 3:try{gn.a.notes=c,t("Notatki zosta\u0142y zapisane","success"),i(void 0)}catch(a){t(a.description,"error")}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,t]),o=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(O.jsx)(Vt.a,{title:"Notatnik",children:Object(O.jsxs)(k.a,{component:"form",onSubmit:s,sx:{display:"flex",justifyContent:"flex-end",flexDirection:"column"},children:[Object(O.jsx)(Dn.c,{"aria-label":"twoje notatki",title:"twoje notatki",multiline:!0,minRows:4,maxRows:10,name:"search",value:null!==(e=null!==c&&void 0!==c?c:gn.a.notes)&&void 0!==e?e:"",onChange:o,placeholder:"Twoje notatki",sx:{width:"100%",height:"100%",p:1,bgcolor:"background.default"},inputProps:{"aria-label":"Twoje notatki"}}),Object(O.jsx)(xe.a,{title:"Zapisz notatki","aria-label":"Zapisz notatki",sx:{mr:"0px",ml:"auto"},startIcon:Object(O.jsx)(sn.a,{}),type:"submit",children:"Zapisz"})]})})}var Nn=r.a.memo(Bn);function Fn(){return Object(O.jsx)(Vt.a,{title:"Rezerwacje",children:Object(O.jsx)(vt,{})})}function Wn(){return Object(O.jsxs)(P.a,{container:!0,spacing:2,children:[Object(O.jsx)(P.a,{item:!0,xs:12,lg:8,children:Object(O.jsx)(Fn,{})}),Object(O.jsxs)(P.a,{item:!0,container:!0,spacing:2,xs:12,lg:4,alignContent:"flex-start",children:[Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,lg:12,children:Object(O.jsx)(Nn,{})}),Object(O.jsx)(P.a,{item:!0,xs:12,sm:6,lg:12,children:Object(O.jsx)(Mn,{})})]})]})}var Ln=n(262),Un=n(149),_n=n(446),qn=n(447),Hn=n(448),Kn=n(449),Gn=n(445),Zn=n(352);function Vn(e){var t,n,r,c,i,s,o=e.open,u=e.onClose,l=te(),j=l.room,d=l.updateRoom,b=$().allBuildings,h=a.useState({}),p=Object(N.a)(h,2),m=p[0],x=p[1],v=a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"name":t=String(t);break;case"blocked":t=!e.target.checked;break;default:t=Number(t)}x((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]),g=a.useCallback((function(e){var t=e.target.value;"buildingId"===e.target.name&&(t=Number(t)),e.target&&x((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[]),y=a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(m);case 2:if(!e.sent){e.next=4;break}u();case 4:case"end":return e.stop()}}),e)}))),[m,d,u]);return Object(O.jsx)(ne.a,{open:o,onClose:u,"aria-label":"Okno usuwania obiektu",sx:{maxWidth:"450px"},children:Object(O.jsxs)(T.a,{spacing:2,children:[Object(O.jsx)(ln,{image:j.image}),Object(O.jsx)(dn.a,{}),Object(O.jsxs)(he.a,{title:"Edycja sali",subtitle:"Zmie\u0144 w\u0142a\u015bciwo\u015bci pokoju i zatwierd\u017a zmiany.",onSubmit:y,onCancel:u,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"name",label:"Nazwa",name:"name",autoFocus:!0,value:null!==(t=m.name)&&void 0!==t?t:j.name,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"room-type",children:"Typ Sali"}),Object(O.jsx)(de.a,{labelId:"room-type",id:"roomType",value:null!==(n=m.roomType)&&void 0!==n?n:j.roomType,name:"roomType",label:"Typ Sali",onChange:g,children:Object.values(jn).map((function(e){return Object(O.jsx)(be.a,{value:e,children:e},e)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,name:"seatsCount",label:"Ilo\u015b\u0107 miejsc",type:"number",id:"seatsCount",value:null!==(r=m.seatsCount)&&void 0!==r?r:j.seatsCount,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:6,children:Object(O.jsx)(ue.a,{required:!0,name:"floor",label:"Pi\u0119tro",type:"number",id:"floor",value:null!==(c=m.floor)&&void 0!==c?c:j.floor,onChange:v})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsxs)(je.a,{fullWidth:!0,children:[Object(O.jsx)(le.a,{id:"wybierz-budynek",children:"Budynek"}),Object(O.jsx)(de.a,{labelId:"wybierz-budynek",name:"buildingId",value:null!==(i=m.buildingId)&&void 0!==i?i:j.building.id,label:"Budynek",onChange:g,children:b.map((function(e){var t=e.name,n=e.id;return Object(O.jsxs)(be.a,{value:n,children:["Budynek \xa0",t," "]},t)}))})]})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(Zn.a,{labelPlacement:"start",control:Object(O.jsx)(Gn.a,{id:"room-blocked",name:"blocked",inputProps:{"aria-label":"controlled"},onChange:v,checked:!(null!==(s=m.blocked)&&void 0!==s?s:j.blocked)}),label:"Dost\u0119pno\u015b\u0107 Sali"})})]})]})})}function Jn(e){var t=te().updateRFIDTag;return Object(O.jsx)(ne.a,{open:e.open,onClose:e.onClose,"aria-label":"Okno przypisania tagu RFID",sx:{maxWidth:"400px"},children:Object(O.jsx)(Ee,{headline:"U\u017cyj czytnika, aby wprowadzi\u0107 tag.",bodyText:'Je\u015bli nie chcesz wprowadza\u0107 zmian, naci\u015bnij "Zamknij"',onScan:t,onClose:e.onClose})})}var Qn=n(240),Yn=n.n(Qn),$n=["value"];function Xn(e){var t=e.value,n=Object(h.a)(e,$n);return t?Object(O.jsx)(Yn.a,Object(f.a)({color:"success"},n)):Object(O.jsx)(ze.a,Object(f.a)({sx:{color:"red"}},n))}function ea(e){var t=e.room,n=e.deleteTag,a=Object(Je.a)().keysAdmin,c=$().getBuildingLink,i=r.a.useState(!1),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useMemo((function(){var e=[{label:"Ilo\u015b\u0107 miejsc",value:t.seatsCount},{label:"Pi\u0119tro",value:0===t.floor?"parter":t.floor},{label:"Budynek",value:Object(O.jsxs)(_e.a,{href:c(t.building.id),children:[" ",t.building.name," "]})},{label:"Aktualnie wolny",value:Object(O.jsx)(Xn,{value:!t.occupied})}];return a&&e.push({label:"Tag RFID",value:t.RFIDTag?Object(O.jsx)(Qe.a,{label:t.RFIDTag,onDelete:n,sx:{maxWidth:"120px"}}):Object(O.jsx)(re.a,{size:"small",onClick:function(){return u(!0)},sx:{p:"0px"},children:Object(O.jsx)(_t.a,{})})}),e.push({label:"Dost\u0119pny do rezerwacji",value:Object(O.jsx)(Xn,{value:!t.blocked})}),e}),[a,t,n,c]),j=r.a.useMemo((function(){return l.map((function(e){var t=e.label,n=e.value;return Object(O.jsxs)(Ln.a,{hover:!0,children:[Object(O.jsx)(Un.a,{sx:{color:"text.secondary"},align:"left",children:t}),Object(O.jsx)(Un.a,{sx:{color:"primary.main",fontWeight:"bold"},align:"left",children:n})]},t)}))}),[l]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Jn,{open:o,onClose:function(){return u(!1)}}),Object(O.jsx)(_n.a,{children:Object(O.jsxs)(qn.a,{"aria-label":"room-info-table",size:"small",children:[Object(O.jsx)(Hn.a,{sx:{display:"none"},children:Object(O.jsxs)(Ln.a,{children:[Object(O.jsx)(Un.a,{align:"left",children:"W\u0142a\u015bciwo\u015b\u0107"}),Object(O.jsx)(Un.a,{align:"left",children:"stan"})]})}),Object(O.jsx)(Kn.a,{children:j})]})})]})}function ta(){var e=Object(Je.a)().premisesAdmin,t=te(),n=t.room,a=t.deleteRoom,c=t.deleteRFIDTag,i=r.a.useState(!1),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useState(!1),j=Object(N.a)(l,2),d=j[0],b=j[1],f=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return b(!0)},icon:Object(O.jsx)(Tt.a,{color:"success"})},{label:"Usu\u0144",action:function(){return u(!0)},icon:Object(O.jsx)(ge.a,{color:"error"})}]}),[]);return Boolean(n)?Object(O.jsxs)(O.Fragment,{children:[e&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(se.a,{objectName:n.name,open:o,onClose:function(){return u(!1)},onSuccess:a}),Object(O.jsx)(Vn,{open:d,onClose:function(){return b(!1)}})]}),Object(O.jsxs)(Ct.a,{elevation:0,children:[Object(O.jsx)(St.a,{action:e&&Object(O.jsx)(Le,{options:f}),title:Object(O.jsxs)(O.Fragment,{children:[n.name,Object(O.jsx)(yn,{data:{id:n.id,name:n.name,type:pn.Room,addressId:n.building.address,buildingId:n.building.id}})]}),subheader:Object(O.jsx)(O.Fragment,{children:n.roomType})}),Object(O.jsx)(zt.a,{component:"img",height:"350",image:Ge.a.getLink(n.image),alt:n.name}),Object(O.jsxs)(It.a,{children:[Object(O.jsx)(ea,{room:n,deleteTag:c}),Object(O.jsx)("br",{}),Object(O.jsx)(Nt.a,{model:n})]})]})]}):Object(O.jsx)(z.a,{})}var na=r.a.lazy((function(){return n.e(0).then(n.bind(null,481))})),aa=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(na,{})})};function ra(){var e=Object(Je.a)(),t=e.logsAdmin,n=e.statsViewer,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(O.jsx)(vt,{})}),n&&e.push({name:"Statystyki",component:Object(O.jsx)(aa,{})}),t&&e.push({name:"Logi",component:Object(O.jsx)(R.a,{})}),e}),[t,n]);return Object(O.jsx)(ee,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(gt.a,{tabs:a})}),Object(O.jsx)(P.a,{item:!0,xs:12,md:5,lg:4,children:Object(O.jsx)(ta,{})})]})})}var ca=r.a.lazy((function(){return n.e(12).then(n.bind(null,483))}));function ia(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(ca,{})})}var sa=n(52),oa=r.a.createContext(null);function ua(e){var t=Object(w.h)(),n=Object(G.a)(),a=Object(S.a)(),c=r.a.useState(),i=Object(N.a)(c,2),s=i[0],o=i[1];r.a.useLayoutEffect((function(){var e="me"===t.userId&&a.user?{userId:a.user.id.toString()}:t;sa.a.setPath(e)}),[t,a]);var u=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sa.a.getCurrentOne();case 3:t=e.sent,o(t.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])}))),[t]);r.a.useEffect((function(){u()}),[u]);var l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sa.a.remove();case 3:return r=function(){return null},a&&(null===(t=a.user)||void 0===t?void 0:t.id)===(null===s||void 0===s?void 0:s.id)?a.logout():r=function(){return Object(O.jsx)(w.a,{to:C.a.USERS})},n("U\u017cytkownik zosta\u0142 usuni\u0119ty","success",r),e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[n,a,null===s||void 0===s?void 0:s.id]),j=r.a.useCallback(function(){var e=Object(B.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sa.a.update(t);case 3:if(!e.sent){e.next=6;break}o((function(e){return Object(f.a)(Object(f.a)({},e),t)})),n("U\u017cytkownik zosta\u0142 zaktualizowany","success");case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),n(e.t0.description,"error");case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[n]);return s?Object(O.jsx)(oa.Provider,{value:{user:s,deleteUser:l,updateUser:j},children:e.children}):null}function la(){return r.a.useContext(oa)}var ja=n(242),da=n.n(ja),ba=n(226);function fa(e){var t=e.open,n=e.onClose,a=Object(S.a)().logout,c=r.a.useCallback((function(){n()}),[n]),i=r.a.useCallback((function(){a()}),[a]);return Object(O.jsx)(ne.a,{open:t,onClose:c,sx:{maxWidth:"450px"},children:Object(O.jsx)(ba.a,{onSuccess:i})})}function ha(e){var t,n,a=e.open,c=e.onClose,i=e.user,s=la().updateUser,o=r.a.useState({}),u=Object(N.a)(o,2),l=u[0],j=u[1],d=r.a.useCallback((function(){c(),j({})}),[c]),b=r.a.useCallback(Object(B.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l);case 2:if(!e.sent){e.next=4;break}d();case 4:case"end":return e.stop()}}),e)}))),[l,d,s]),h=r.a.useCallback((function(e){j((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(oe.a)({},e.target.name,e.target.value))}))}),[]);return Object(O.jsx)(ne.a,{open:a,onClose:d,sx:{maxWidth:"450px"},children:Object(O.jsxs)(T.a,{spacing:3,children:[Object(O.jsx)(ln,{image:i.image}),Object(O.jsx)(dn.a,{}),Object(O.jsxs)(he.a,{title:"Edycja u\u017cytkownika",subtitle:"Zmie\u0144 dane u\u017cytkownika. Zmiany w ca\u0142ej aplikacji b\u0119d\u0105 widoczne po ponownym prze\u0142adowaniu aplikacji.",onSubmit:b,onCancel:d,children:[Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"name",label:"Imi\u0119",name:"name",autoFocus:!0,value:null!==(t=l.name)&&void 0!==t?t:i.name,onChange:h})}),Object(O.jsx)(P.a,{item:!0,xs:12,children:Object(O.jsx)(ue.a,{required:!0,fullWidth:!0,id:"surname",label:"Nazwisko",name:"surname",value:null!==(n=l.surname)&&void 0!==n?n:i.surname,onChange:h})})]})]})})}function pa(){var e=Object(Je.a)(),t=e.myId,n=e.owner,a=la(),c=a.user,i=a.deleteUser,s=r.a.useState(!1),o=Object(N.a)(s,2),u=o[0],l=o[1],j=r.a.useState(!1),d=Object(N.a)(j,2),b=d[0],f=d[1],h=r.a.useState(!1),p=Object(N.a)(h,2),m=p[0],x=p[1],v=r.a.useMemo((function(){return[{label:"Edytuj",action:function(){return l(!0)},icon:Object(O.jsx)(Tt.a,{color:"success"})},{label:"Zmie\u0144 has\u0142o",action:function(){return f(!0)},icon:Object(O.jsx)(da.a,{color:"warning"})},{label:"Usu\u0144 konto",action:function(){return x(!0)},icon:Object(O.jsx)(ge.a,{color:"error"})}]}),[]);return Object(O.jsxs)(O.Fragment,{children:[(t(c.id)||n)&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(se.a,{objectName:"".concat(c.email),open:m,onClose:function(){return x(!1)},onSuccess:i}),Object(O.jsx)(ha,{user:c,open:u,onClose:function(){return l(!1)}}),Object(O.jsx)(fa,{open:b,onClose:function(){return f(!1)}})]}),Object(O.jsxs)(Ct.a,{elevation:0,children:[Object(O.jsx)(St.a,{action:(t(c.id)||n)&&Object(O.jsx)(Le,{options:v}),title:Object(O.jsxs)(O.Fragment,{children:[c.name," ",c.surname]}),subheader:Object(O.jsx)("a",{href:"mailto:".concat(c.email),children:c.email})}),Object(O.jsx)(zt.a,{component:"img",height:"350",image:Ge.a.getLink(c.image),alt:c.email}),Object(O.jsxs)(It.a,{children:[Object(O.jsxs)(ae.a,{color:"text.secondary",variant:"subtitle1",children:["Ostatnio aktywny: ",Object(ie.a)(c.lastActivity),Object(O.jsx)("br",{}),"Klasa dost\u0119pu: ",Object(O.jsx)(_e.a,{href:C.a.ACCESS,children:c.access.name})]}),Object(O.jsx)("br",{}),Object(O.jsx)(Nt.a,{model:c})]})]})]})}var Oa=r.a.lazy((function(){return n.e(6).then(n.bind(null,482))})),ma=function(){return Object(O.jsx)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:Object(O.jsx)(Oa,{})})};function xa(){var e=Object(Je.a)(),t=e.statsViewer,n=e.logsAdmin,a=r.a.useMemo((function(){var e=[];return e.push({name:"Rezerwacje",component:Object(O.jsx)(vt,{})}),t&&e.push({name:"Statystyki",component:Object(O.jsx)(ma,{})}),n&&e.push({name:"Logi",component:Object(O.jsx)(R.a,{})}),e}),[t,n]);return Object(O.jsx)(ua,{children:Object(O.jsxs)(P.a,{container:!0,spacing:2,flexWrap:"wrap-reverse",children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:7,lg:8,children:Object(O.jsx)(gt.a,{tabs:a})}),Object(O.jsx)(P.a,{item:!0,xs:12,md:5,lg:4,children:Object(O.jsx)(pa,{})})]})})}var va=r.a.createContext(null);function ga(e){var t=Object(G.a)(),n=Object(A.b)(),a=n.queryParams,c=n.setQueryParams,i=r.a.useState(),s=Object(N.a)(i,2),o=s[0],u=s[1],l=r.a.useCallback(Object(B.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,sa.a.getUsers(a);case 3:n=e.sent,c((function(e){var t;return Object(f.a)(Object(f.a)({},e),{},{pagesCount:null===(t=n.pagination)||void 0===t?void 0:t.pagesCount})})),u(n.data),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0.description,"error"),u([]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t,a.itemsOnPage,a.currentPage,a.search,a.deleted,a.activated]);return r.a.useEffect((function(){l()}),[l]),o?Object(O.jsx)(va.Provider,{value:{users:o},children:e.children}):null}var ya=n(205);function ka(){var e,t=Object(A.b)(),n=t.setQueryParams,a=t.queryParams,c=r.a.useCallback((function(e){var t=e.target.value;switch(e.target.name){case"deleted":case"activated":t=Boolean(e.target.checked)}n((function(n){return Object(f.a)(Object(f.a)({},n),{},Object(oe.a)({},e.target.name,t))}))}),[n]);return Object(O.jsxs)(P.a,{container:!0,children:[Object(O.jsx)(P.a,{item:!0,xs:12,md:8,children:Object(O.jsx)(lt.a,{label:"wyszukaj",name:"search",value:null!==(e=a.search)&&void 0!==e?e:"",onChange:c})}),Object(O.jsxs)(P.a,{item:!0,xs:12,md:4,display:"flex",justifyContent:"start",flexWrap:"wrap",color:"text.secondary",children:[Object(O.jsx)(Zn.a,{labelPlacement:"start",control:Object(O.jsx)(Gn.a,{id:"aktywni-u\u017cytkownicy",name:"activated",inputProps:{"aria-label":"aktywni-u\u017cytkownicy"},onChange:c,checked:a.activated}),label:"Aktywne konta"}),Object(O.jsx)(Zn.a,{labelPlacement:"start",control:Object(O.jsx)(Gn.a,{id:"unsuni\u0119ci-u\u017cytkownicy",name:"deleted",inputProps:{"aria-label":"unsuni\u0119ci-u\u017cytkownicy"},onChange:c,checked:a.deleted}),label:"Usuni\u0119te konta"})]})]})}var wa=r.a.memo(ka);function Ca(e){var t=e.user;return Object(O.jsxs)(Ue.a,{button:!0,component:_e.a,href:C.b.toUser(t.id),children:[Object(O.jsx)(qe.a,{title:t.email,"aria-label":t.email,children:Object(O.jsx)(He.a,{src:Ge.a.getLink(t.image)})}),Object(O.jsx)(Ke.a,{primary:"".concat(t.name," ").concat(t.surname),secondary:Object(O.jsx)(O.Fragment,{children:t.email})})]})}function Sa(){var e=r.a.useContext(va).users;return Object(O.jsxs)(ce.a,{children:[0===e.length&&Object(O.jsx)(Ue.a,{children:Object(O.jsx)(Ke.a,{primary:"Brak u\u017cytkownik\xf3w spe\u0142niaj\u0105cych kryteria"})}),e.map((function(e){return Object(O.jsx)(Ca,{user:e},e.id)}))]})}function za(){return Object(O.jsxs)(T.a,{spacing:3,children:[Object(O.jsx)(ya.a,{title:"Lista u\u017cytkownik\xf3w",subtitle:"Wyszukuj u\u017cytkownik\xf3w wed\u0142ug podanych kryteri\xf3w."}),Object(O.jsx)(wa,{}),Object(O.jsx)(Sa,{}),Object(O.jsx)(rt.a,{})]})}var Ia=n(109);function Ea(){return Object(O.jsx)(Ia.c,{children:Object(O.jsx)(Pa,{})})}function Pa(){var e=Object(Ia.d)().chartsData;return Object(O.jsxs)(Ia.b,{defaultOpen:!0,title:"Statystyki u\u017cytkownik\xf3w",children:[Object(O.jsx)(Ia.a,{fullWidth:e.users.length>=6,title:"Ilo\u015b\u0107 rezerwacji na u\u017cytkownika",data:e.users,xKey:"email",y:[{label:"Ilo\u015b\u0107 rezerwacji",key:"reservationsCount"}]}),Object(O.jsx)(Ia.a,{fullWidth:e.users.length>=6,title:"Czas wszystkich reserwacji w dany dzie\u0144",data:e.users,xKey:"email",y:[{label:"Czas ca\u0142kowity",key:"allTimeMinutes"}]}),Object(O.jsx)(Ia.a,{fullWidth:!0,title:"\u015arednie czasy rezerwacji",data:e.users,xKey:"email",y:[{label:"\u015aredni planowany czas",key:"avgPlannedTimeMinutes"},{label:"\u015aredni faktyczny czas",key:"avgActualTimeMinutes"}]})]})}function Ra(){var e=Object(Je.a)(),t=e.statsViewer,n=e.logsAdmin,a=r.a.useMemo((function(){var e=[{name:"U\u017cytkownicy",component:Object(O.jsx)(za,{})}];return t&&e.push({name:"Statystyki",component:Object(O.jsx)(Ea,{})}),n&&e.push({name:"Logi",component:Object(O.jsx)(R.a,{})}),e}),[n,t]);return Object(O.jsx)(A.a,{name:"users-query-params",default:{deleted:!1,activated:!0,search:"",itemsOnPage:10,currentPage:1},children:Object(O.jsx)(ga,{children:Object(O.jsx)(gt.a,{tabs:a})})})}function Ta(){return Object(S.a)().user?Object(O.jsxs)(w.d,{children:[Object(O.jsx)(w.b,{path:C.a.ROOM,component:ra}),Object(O.jsx)(w.b,{path:C.a.BUILDING,component:En}),Object(O.jsx)(w.b,{path:C.a.ADDRESS,component:en}),Object(O.jsx)(w.b,{path:C.a.SETTINGS,component:ia}),Object(O.jsx)(w.b,{path:C.a.ACCESS,component:E}),Object(O.jsx)(w.b,{path:C.a.USER,component:xa}),Object(O.jsx)(w.b,{path:C.a.USERS,component:Ra}),Object(O.jsx)(w.b,{path:C.a.HOME,component:Wn}),Object(O.jsx)(w.b,{path:C.a.INFRASTRUCTURE,children:"Zasoby"}),Object(O.jsx)(w.b,{path:C.a.HOME+"/*",children:Object(O.jsx)(w.a,{to:C.a.HOME})})]}):Object(O.jsx)(w.a,{to:C.a.PUBLIC})}var Aa=r.a.lazy((function(){return n.e(7).then(n.bind(null,485))})),Ma=r.a.lazy((function(){return n.e(5).then(n.bind(null,486))})),Da=r.a.lazy((function(){return n.e(9).then(n.bind(null,487))})),Ba=r.a.lazy((function(){return n.e(8).then(n.bind(null,488))})),Na=r.a.lazy((function(){return n.e(4).then(n.bind(null,489))}));function Fa(){return Object(S.a)().user?Object(O.jsx)(w.a,{to:C.a.HOME}):Object(O.jsxs)(w.d,{children:[Object(O.jsxs)(r.a.Suspense,{fallback:Object(O.jsx)(z.a,{}),children:[Object(O.jsx)(w.b,{path:C.a.LOGIN,component:Ma}),Object(O.jsx)(w.b,{path:C.a.REGISTER,component:Da}),Object(O.jsx)(w.b,{path:C.a.ACTIVATE,component:Aa}),Object(O.jsx)(w.b,{path:C.a.REMIND_PASSWORD,component:Ba}),Object(O.jsx)(w.b,{path:C.a.PUBLIC,exact:!0,component:Na})]}),Object(O.jsx)(w.b,{path:"*",children:Object(O.jsx)(w.a,{to:C.a.PUBLIC})})]})}var Wa={minHeight:"84vh",padding:"1.5vh 0px"};function La(){return Object(O.jsx)(k.a,{sx:Wa,children:Object(O.jsxs)(w.d,{children:[Object(O.jsx)(w.b,{path:C.a.HOME,component:Ta}),Object(O.jsx)(w.b,{path:C.a.PUBLIC,component:Fa}),Object(O.jsx)(w.b,{path:"*",children:Object(O.jsx)(w.a,{to:C.a.PUBLIC})})]})})}function Ua(){return Object(O.jsx)(ae.a,{align:"center",sx:{backgroundColor:"primary.dark",padding:2,color:"primary.light"},children:"\xa9 Szymon Ryka\u0142a 2021/2022"})}var _a=r.a.memo(Ua),qa=function(e){return Object(O.jsx)(Ue.a,{sx:{width:"30%",minWidth:"200px"},children:Object(O.jsx)(_e.a,{sx:{color:"background.default"},href:e.link,children:e.name})})};function Ha(){var e=Object(S.a)().user,t=Object(Je.a)(),n=r.a.useMemo((function(){var n=[];return e?(n.push({name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Home",link:C.a.HOME}),t.accessAdmin&&n.push({name:"Dost\u0119py",link:C.a.ACCESS}),t.owner&&n.push({name:"Ustawienia",link:C.a.SETTINGS})):n.push({name:"Strona g\u0142\xf3wna",link:C.a.PUBLIC},{name:"Logowanie",link:C.a.LOGIN},{name:"Rejestracja",link:C.a.REGISTER},{name:"Aktywacja Konta",link:C.a.ACTIVATE}),n}),[e,null===t||void 0===t?void 0:t.accessAdmin,null===t||void 0===t?void 0:t.owner]),a=r.a.useMemo((function(){return n.filter((function(e){return e.link})).map((function(e){return Object(O.jsx)(qa,Object(f.a)({},e),e.name)}))}),[n]);return Object(O.jsx)(k.a,{sx:{backgroundColor:"primary.main"},children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)(ae.a,{sx:{pt:2},component:"p",variant:"body2",color:"background.default",children:"Przydatne linki:"}),Object(O.jsx)(ce.a,{sx:{display:"flex",flexDirection:"row",alignContent:"center",justifyContent:"flex-start",flexWrap:"wrap"},children:a})]})})}var Ka=r.a.memo(Ha);function Ga(){return Object(O.jsx)(k.a,{children:Object(O.jsxs)(P.a,{container:!0,direction:"column",alignItems:"stretch",children:[Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(Ka,{})}),Object(O.jsx)(P.a,{item:!0,children:Object(O.jsx)(_a,{})})]})})}var Za=n(419),Va=n(338),Ja=n(255),Qa=n(182),Ya=n(429),$a=n(245),Xa=n.n($a),er=n(224),tr=n.n(er),nr=n(246),ar=n.n(nr),rr=n(247),cr=n.n(rr),ir=n(248),sr=n.n(ir),or=[{label:"Panel G\u0142\xf3wny",href:C.a.HOME,icon:Xa.a},{label:"Moje Konto",href:C.a.MY_PROFILE,icon:tr.a}],ur={label:"Ustawienia Platformy",href:C.a.SETTINGS,icon:ar.a},lr={label:"Klasy dost\u0119pu",href:C.a.ACCESS,icon:cr.a},jr={label:"U\u017cytkownicy",href:C.a.USERS,icon:sr.a},dr=r.a.memo((function(e){return Object(O.jsxs)(Ue.a,{button:!0,component:_e.a,href:e.href,children:[Object(O.jsx)(Ne.a,{color:"primary",children:Object(O.jsx)(e.icon,{color:"primary"})}),Object(O.jsx)(Ke.a,{primary:e.label})]})}));function br(){var e=Object(Je.a)(),t=e.accessAdmin,n=e.owner,a=r.a.useMemo((function(){var e=Object.assign([],or);return e.push(jr),t&&e.push(lr),n&&e.push(ur),e}),[t,n]),c=r.a.useMemo((function(){return a.map((function(e){return Object(O.jsx)(dr,Object(f.a)({},e),e.label)}))}),[a]);return Object(O.jsx)(ce.a,{children:c})}function fr(e){var t=e.children,n=e.toggleOpen;return Object(O.jsx)(o.a,{sx:{width:320},role:"presentation",onClick:n,onKeyDown:n,children:t})}function hr(e){var t=e.user;return Object(O.jsxs)(k.a,{onClick:function(e){return e.stopPropagation()},sx:{display:"flex",flexDirection:"column",alignItems:"center",padding:2,color:"primary.dark"},children:[Object(O.jsx)(He.a,{alt:"".concat(null===t||void 0===t?void 0:t.name," ").concat(null===t||void 0===t?void 0:t.surname),src:Ge.a.getLink(null===t||void 0===t?void 0:t.image),sx:{width:"120px",height:"120px",fontSize:"36px",mt:2,mb:2}}),Object(O.jsxs)(ae.a,{children:[null===t||void 0===t?void 0:t.name,"\xa0",null===t||void 0===t?void 0:t.surname]}),Object(O.jsx)(ae.a,{children:Object(O.jsx)("a",{href:"mailto:".concat(null===t||void 0===t?void 0:t.email),children:null===t||void 0===t?void 0:t.email})})]})}var pr=n(251),Or=n.n(pr),mr=n(250),xr=n.n(mr),vr=n(416),gr=n(417),yr=n(415),kr=n(350),wr=n(85);function Cr(e){var t=r.a.useState(!1),n=Object(N.a)(t,2),a=n[0],c=n[1],i=r.a.useMemo((function(){return"".concat(e.name,"-nav-item")}),[e.name]);r.a.useEffect((function(){c(wr.a.read(i))}),[i]);var s=r.a.useCallback((function(e){e.stopPropagation(),wr.a.save(i,!a),c((function(e){return!e}))}),[i,a]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(T.a,{direction:"row",children:[Object(O.jsxs)(yr.a,{component:_e.a,href:e.href,sx:e.sx,children:[Object(O.jsx)(Ne.a,{children:e.icon}),Object(O.jsx)(Ke.a,{primary:e.name})]}),Object(O.jsx)(re.a,{sx:{width:"42px",height:"42px"},size:"medium",onClick:s,children:a?Object(O.jsx)(vr.a,{}):Object(O.jsx)(gr.a,{})})]}),Object(O.jsx)(kr.a,{in:a,timeout:"auto",children:Object(O.jsx)(T.a,{sx:e.sx,children:e.children})})]})}var Sr=n(249),zr=n.n(Sr);function Ir(e){return Object(O.jsx)(Ue.a,{button:!0,component:_e.a,href:"".concat(C.a.HOME).concat(e.href),children:Object(O.jsxs)(o.a,{sx:{width:"100%"},children:[Object(O.jsx)(Ne.a,{children:Object(O.jsx)(zr.a,{})}),e.name]})})}var Er=r.a.memo(Ir);function Pr(){var e=$().resourceMap,t=r.a.useMemo((function(){return null===e||void 0===e?void 0:e.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.buildings;return Object(O.jsx)(Cr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(O.jsx)(xr.a,{color:"primary"}),sx:{width:"100%"},children:r.map((function(e){var t=e.id,n=e.name,a=e.href,r=e.rooms;return Object(O.jsx)(Cr,{name:n,href:"".concat(C.a.HOME).concat(a),icon:Object(O.jsx)(Or.a,{color:"primary"}),sx:{pl:6,width:"100%"},children:r.map((function(e){return Object(O.jsx)(Er,Object(f.a)({},e),e.id)}))},t)}))},t)}))}),[e]);return Object(O.jsx)(T.a,{children:t})}function Rr(){var e=r.a.useState(!1),t=Object(N.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){e.stopPropagation(),a(!0)}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Bt,{open:n,onClose:function(){return a(!1)}}),Object(O.jsxs)(Ue.a,{button:!0,component:"div",onClick:c,sx:{color:"primary.dark"},children:[Object(O.jsx)(Ne.a,{children:Object(O.jsx)(dt.a,{color:"primary"})}),"Dodaj adres"]})]})}function Tr(e){var t=e.toggleOpen,n=e.open,a=Object(Je.a)().premisesAdmin,r=Object(S.a)().user;return Object(O.jsxs)(Ya.a,{variant:"temporary",ModalProps:{keepMounted:!0},anchor:"left",open:n,onClose:t,children:[Object(O.jsxs)(fr,{toggleOpen:t,children:[Object(O.jsx)(hr,{user:r}),Object(O.jsx)(dn.a,{}),Object(O.jsx)(br,{}),Object(O.jsx)(dn.a,{}),Object(O.jsx)(Ue.a,{onClick:function(e){return e.stopPropagation()},component:"div",sx:{pb:0,color:"text.disabled"},children:Object(O.jsx)(Ke.a,{children:"Zasoby:"})}),Object(O.jsx)(Pr,{})]}),a&&Object(O.jsx)(Rr,{})]})}var Ar=n(451),Mr=n(452),Dr=n(252),Br=n.n(Dr),Nr=[{name:"M\xf3j Profil",link:C.a.MY_PROFILE},{name:"Panel G\u0142\xf3wny",link:C.a.HOME}];function Fr(e){var t=e.trigger,n=e.handleClose,a=Object(S.a)().logout,c=r.a.useMemo((function(){return Nr.map((function(e,t){var a=e.name,r=e.link;return Object(O.jsx)(be.a,{onClick:n,href:r,component:_e.a,children:a},t)}))}),[n]);return Object(O.jsxs)(Be.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(t),onClose:n,children:[c,Object(O.jsx)(be.a,{onClick:function(){n(),a()},children:"Wyloguj"})]})}function Wr(e){var t=Object(S.a)().user,n=a.useState(null),r=Object(N.a)(n,2),c=r[0],i=r[1],s=a.useCallback((function(e){i(e.currentTarget)}),[]),u=a.useCallback((function(){i(null)}),[]);return Object(O.jsx)(o.a,{sx:{flexGrow:1},children:Object(O.jsx)(Ar.a,{position:"static",children:Object(O.jsxs)(Mr.a,{children:[t&&Object(O.jsx)(re.a,{onClick:e.toggleDrawer,size:"large",edge:"start","aria-label":"menu",sx:{mr:2,color:"background.default"},children:Object(O.jsx)(Br.a,{color:"inherit"})}),Object(O.jsx)(ae.a,{variant:"h4",component:"span",sx:{flexGrow:1,fontFamily:"Dancing Script, cursive"},children:Object(O.jsx)(_e.a,{href:t?C.a.HOME:C.a.PUBLIC,sx:{width:"fit-content",color:"background.default","&:hover":{textDecoration:"none"}},children:"Rav System"})}),t&&Object(O.jsxs)("div",{children:[Object(O.jsx)(re.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:s,color:"inherit",children:Object(O.jsx)(He.a,{alt:t.name,src:Ge.a.getLink(t.image),sx:{width:42,height:42}})}),Object(O.jsx)(Fr,{trigger:c,handleClose:u})]})]})})})}function Lr(){var e=r.a.useState(!1),t=Object(N.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.stopPropagation(),(!t||"keydown"!==e.type||"Tab"!==e.key&&"Shift"!==e.key)&&a((function(e){return!e}))}),[]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Wr,{toggleDrawer:c}),Object(O.jsx)(Tr,{open:n,toggleOpen:c})]})}var Ur=function(){return Object(O.jsx)(g,{children:Object(O.jsxs)(Va.b,{dateAdapter:Za.a,locale:Ja.a,children:[Object(O.jsx)(s.a,{}),Object(O.jsx)(o.a,{component:"div",className:"App",sx:{backgroundColor:"background.default"},children:Object(O.jsx)(p.a,{children:Object(O.jsx)(Qa.a,{children:Object(O.jsx)(y.a,{children:Object(O.jsxs)(Y,{children:[Object(O.jsx)(Lr,{}),Object(O.jsx)(u.a,{children:Object(O.jsx)(La,{})}),Object(O.jsx)(Ga,{})]})})})})})]})})},_r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function qr(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(Ur,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/ravs-client",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/ravs-client","/service-worker.js");_r?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):qr(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):qr(t,e)}))}}()},34:function(e,t,n){"use strict";var a=n(9),r=n(1),c=n(346),i=n(341),s=n(330),o=n(261),u=n(0);function l(e){var t=e.children,n=e.open,r=e.sx,l=e.onClose;return Object(u.jsx)(i.a,{open:n,onClose:l,closeAfterTransition:!0,BackdropComponent:c.a,BackdropProps:{timeout:500},sx:{display:"flex",justifyContent:"center",alignItems:"flex-start",overflow:"auto"},children:Object(u.jsx)(s.a,{in:n,children:Object(u.jsx)(o.a,{sx:Object(a.a)({bgcolor:"background.paper",position:"absolute",width:"95%",mt:"5vw",maxWidth:"500px",boxShadow:24,p:3},r),children:t})})})}t.a=r.memo(l)},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));var a=n(5);function r(e){var t=new Date(e);return new Intl.DateTimeFormat("pl-PL",{dateStyle:"medium",timeStyle:"medium"}).format(t)}var c=new Intl.DateTimeFormat("pl-PL",{timeStyle:"medium"});function i(e){if(!e)return!1;var t=new Date(e);return Boolean(t.getDate())}function s(e){var t=e.split(/\.|:|,\s/).map((function(e){return Number(e)})),n=Object(a.a)(t,6),r=n[0],c=n[1],i=n[2],s=n[3],o=n[4],u=n[5];return new Date(i,c-1,r,s,o,u)}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),r=n(181);function c(){return Object(a.useContext)(r.b)}},39:function(e,t,n){"use strict";var a=n(8),r=n.n(a),c=n(16),i=n(23),s=n(24),o=n(37),u=n(38),l=n(168),j=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"sendImage",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t,{method:"POST",cache:"no-cache",mode:"cors",body:n,headers:{Authorization:this.authToken}});case 2:return a=e.sent,e.next=5,a.json();case 5:if(c=e.sent,console.debug(c),a.ok){e.next=10;break}throw console.error("".concat(a.status,"\t").concat(null===c||void 0===c||null===(i=c.error)||void 0===i?void 0:i.type,"\t").concat(null===c||void 0===c||null===(s=c.error)||void 0===s?void 0:s.description)),new l.a(c);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLink",value:function(e){return(null===e||void 0===e?void 0:e.url.includes("http"))?e.url:this._BASE_URL.slice(0,this._BASE_URL.length-3)+(null===e||void 0===e?void 0:e.url)}},{key:"upload",value:function(e,t){var n=new FormData;return n.append("file",t),this.sendImage(this.preparePath(e)+"/image",n)}},{key:"remove",value:function(e){return this.delete(this.preparePath(e)+"/image")}}]),n}(n(51).a);t.a=new j},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(260),r=n(87),c=n(1),i=n.n(c),s=n(105),o=n.n(s),u=n(122),l=n.n(u),j=n(202),d=n(203),b=n(0);function f(e){var t=e.title,n=e.subtitle,c=e.onSubmit,s=e.onCancel,u=e.children,f=i.a.useCallback((function(e){e.preventDefault(),c()}),[c]);return Object(b.jsxs)(j.a,{rowGap:3,children:[Object(b.jsxs)("span",{children:[Object(b.jsx)(r.a,{variant:"h5",color:"primary.dark",children:t}),n&&Object(b.jsx)(r.a,{variant:"body2",color:"text.secondary",mt:"5px",children:n})]}),Object(b.jsxs)(a.a,{container:!0,spacing:2,component:"form",onSubmit:f,children:[u,Object(b.jsx)(a.a,{item:!0,xs:12,children:Object(b.jsxs)(j.a,{direction:"row",justifyContent:"space-around",mt:1.5,children:[Object(b.jsx)(d.a,{"aria-label":"Zamknij",title:"Zamknij",startIcon:Object(b.jsx)(o.a,{}),onClick:s,children:"Zamknij"}),Object(b.jsx)(d.a,{"aria-label":"Zatwierd\u017a",title:"Zatwierd\u017a",startIcon:Object(b.jsx)(l.a,{color:"inherit"}),type:"submit",color:"success",children:"Zatwierd\u017a"})]})})]})]})}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return i}));var a=n(159),r=n(1),c=n.n(r);function i(){return c.a.useContext(a.b)}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(5),r=n(8),c=n.n(r),i=n(16),s=n(23),o=n(24),u=n(168),l=function(){function e(){Object(s.a)(this,e),this._BASE_URL="https://ravsapi.herokuapp.com/v1",this._TOKEN_NAME="auth_token",this._userId=-1}return Object(o.a)(e,[{key:"userId",get:function(){if(-1===this._userId)throw Error("user id was not set");return this._userId},set:function(e){this._userId=e}},{key:"authToken",get:function(){return"Bearer "+window.localStorage.getItem(this._TOKEN_NAME)}},{key:"_fetch",value:function(){var e=Object(i.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._BASE_URL+t.endpoint,{method:t.method,cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json",Authorization:this.authToken},body:JSON.stringify(t.body)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,401!==n.status||t.endpoint.match("/auth|me|activate")||window.location.reload(),n.ok){e.next=11;break}throw new u.a(a);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preparePath",value:function(e){var t="",n=window.location.toString();if(0===Object.keys(e).length)for(var r=0,c=Object.entries({"/accesses":"/accesses","/settings":"/configurations","/users":"/users"});r<c.length;r++){var i=Object(a.a)(c[r],2),s=i[0],o=i[1];n.includes(s)&&(t=o)}else"addressId"in e?(t+="/addresses/".concat(e.addressId),"buildingId"in e&&(t+="/buildings/".concat(e.buildingId),"roomId"in e&&(t+="/rooms/".concat(e.roomId)))):"userId"in e&&("me"===e.userId?t+="/users/"+this.userId.toString():t+="/users/"+e.userId);return t}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._fetch({method:"GET",endpoint:e+"?"+new URLSearchParams(t).toString()})}},{key:"post",value:function(e,t){return this._fetch({method:"POST",endpoint:e,body:t})}},{key:"patch",value:function(e,t){if(0!==Object.keys(t).length)return this._fetch({method:"PATCH",endpoint:e,body:t})}},{key:"delete",value:function(e){return this._fetch({method:"DELETE",endpoint:e})}}]),e}()},52:function(e,t,n){"use strict";var a=n(8),r=n.n(a),c=n(16),i=n(23),s=n(24),o=n(37),u=n(38),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r)))._path="/users",e}return Object(s.a)(n,[{key:"path",get:function(){return this._path}},{key:"setPath",value:function(e){this._path=this.preparePath(e)}},{key:"getCurrentOne",value:function(){return this.get(this.path)}},{key:"getMe",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/users/me");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(e){return this.get("/users",e)}},{key:"register",value:function(e){return this.post("/users",e)}},{key:"activate",value:function(e){return this.patch("/users/activate",e)}},{key:"generateKey",value:function(e){return this.post("/users/key",{email:e})}},{key:"updateAccess",value:function(e,t){return this.patch("/users/".concat(e,"/access"),{accessId:t})}},{key:"update",value:function(e){return this.patch(this.path,e)}},{key:"remove",value:function(){return this.delete(this.path)}},{key:"changePassword",value:function(e){return this.patch("/users/password",e)}}]),n}(n(51).a);t.a=new l},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(349),r=n(259),c=n(0);function i(){return Object(c.jsx)(r.a,{sx:{display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",minHeight:"200px",height:"100%"},children:Object(c.jsx)(a.a,{})})}},65:function(e,t,n){"use strict";var a=n(9),r=n(8),c=n.n(r),i=n(16),s=n(23),o=n(24),u=n(85),l=n(52),j=function(){function e(){var t;Object(s.a)(this,e),this.STORAGE_NAME="user-metadata",this.data=void 0,this._userId=void 0,this.data=null!==(t=u.a.read(this.STORAGE_NAME))&&void 0!==t?t:{notes:"",favourites:[]}}return Object(o.a)(e,[{key:"save",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.a.save(this.STORAGE_NAME,this.data),this._userId){e.next=3;break}return e.abrupt("return");case 3:return l.a.setPath({userId:null===(t=this._userId)||void 0===t?void 0:t.toString()}),e.prev=4,e.next=7,l.a.update({metadata:this.data});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"userId",set:function(e){this._userId=e}},{key:"metadata",set:function(e){this.data=Object(a.a)(Object(a.a)({},this.data),e)}},{key:"notes",get:function(){var e;return null!==(e=this.data.notes)&&void 0!==e?e:""},set:function(e){this.data.notes=e,this.save()}},{key:"favourites",get:function(){var e;return null!==(e=this.data.favourites)&&void 0!==e?e:[]}},{key:"addFavourite",value:function(e){var t,n;null===(t=this.data.favourites)||void 0===t||t.push(e),null===(n=this.data.favourites)||void 0===n||n.sort((function(e,t){return e.type>=t.type?e.type===t.type?e.name>t.name?1:-1:1:-1})),console.log(this.data),this.save()}},{key:"isFavourite",value:function(e){var t;return Boolean(null===(t=this.data.favourites)||void 0===t?void 0:t.find((function(t){var n=t.id;return t.type===e.type&&n===e.id})))}},{key:"removeFavourite",value:function(e){var t;this.data.favourites=null===(t=this.data.favourites)||void 0===t?void 0:t.filter((function(t){return t.id+t.type!==e.id+e.type})),this.save()}}]),e}();t.a=new j},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(9),r=n(261),c=n(87),i=n(0);function s(e){var t;return Object(i.jsxs)(r.a,{elevation:0,sx:Object(a.a)({p:2},e.sx),children:[(null===e||void 0===e?void 0:e.title)&&Object(i.jsx)(c.a,{variant:"body2",component:null!==(t=e.titleComponent)&&void 0!==t?t:"h2",color:"text.secondary",children:e.title}),e.children]})}},78:function(e,t,n){"use strict";var a,r=n(23),c=n(24),i=n(37),s=n(38),o=n(17),u=n(51);!function(e){e.success="#edf7ed",e.error="#fdeded",e.info="#e5f6fd",e.warning="#fff4e5",e.inert="#f5f5f5"}(a||(a={}));var l=function(e){Object(i.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"emitStatus",value:function(e,t){return{message:e,color:t}}},{key:"localPreparPath",value:function(e){return window.location.toString().includes(o.a.HOME)&&0===Object.keys(e).length?"/users/"+this.userId.toString():this.preparePath(e)}},{key:"getReservations",value:function(e,t){return this.get("".concat(this.localPreparPath(e),"/reservations"),t)}},{key:"createOne",value:function(e){return this.post("/reservations",e)}},{key:"update",value:function(e,t){return this.patch("/reservations/".concat(e),t)}},{key:"pingKey",value:function(e,t){return this.patch("/reservations/".concat(e,"/keys"),{RFIDTag:t})}},{key:"remove",value:function(e){return this.delete("/reservations/".concat(e))}},{key:"resolveStatus",value:function(e){var t=Date.now(),n=new Date(t),r=new Date(t-9e5),c=new Date(t+9e5),i=e.actualStart,s=e.plannedStart,o=e.actualEnd,u=e.plannedEnd,l=new Date(i||s),j=new Date(o||u);if(!i)return l<n&&l>r?this.emitStatus("Powinna zosta\u0107 ju\u017c odebrana",a.warning):l>n&&l<c?this.emitStatus("Za chwil\u0119 zostanie odebrana",a.info):l<c?this.emitStatus("Nieodebrana.",a.error):this.emitStatus("Oczekuje",a.inert);if(i){if(o)return this.emitStatus("Rezerwacja zako\u0144czona.",a.inert);if(!o){if(n<j&&c>j)return this.emitStatus("Za chwil\u0119 si\u0119 ko\u0144czy.",a.info);if(n>j){var d=new Date(Date.parse(j.toString())+9e5);if(n<d)return this.emitStatus("Powinna si\u0119 zako\u0144czy\u0107.",a.warning);if(n>d)return this.emitStatus("Czas min\u0105\u0142, klucz nie oddany.",a.error)}return this.emitStatus("Rezerwacja trwa.",a.success)}}return this.emitStatus("Status nieznany",a.warning)}}]),n}(u.a);t.a=new l},85:function(e,t,n){"use strict";var a=n(23),r=n(24),c=function(){function e(){Object(a.a)(this,e),this.id=""}return Object(r.a)(e,[{key:"setIdentity",value:function(e){this.id=e.toString()}},{key:"codeName",value:function(e){return btoa(encodeURI(e+this.id))}},{key:"save",value:function(e,t){var n=JSON.stringify(t);localStorage.setItem(this.codeName(e),n)}},{key:"delete",value:function(e){localStorage.removeItem(this.codeName(e))}},{key:"read",value:function(e){var t=localStorage.getItem(this.codeName(e));if(!t)return null;try{return JSON.parse(t)}catch(n){return null}}}]),e}();t.a=new c},89:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1),r=n.n(a),c=n(53),i=n(0),s=(n(210),r.a.lazy((function(){return n.e(13).then(n.bind(null,358))})));function o(){return Object(i.jsx)(r.a.Suspense,{fallback:Object(i.jsx)(c.a,{}),children:Object(i.jsx)(s,{})})}},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(9),r=n(5),c=n(44),i=n(437),s=n(87),o=n(421),u=n(1),l=n.n(u),j=n(236),d=n.n(j),b=n(127),f=n(259),h=n(76),p=n(0),O=["children","hidden","index"];function m(e){var t=e.children,n=e.hidden,r=e.index,c=Object(b.a)(e,O);return l.a.useMemo((function(){return Object(p.jsx)(f.a,Object(a.a)(Object(a.a)({role:"tabpanel",hidden:n,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r)},c),{},{children:Object(p.jsx)(h.a,{children:t})}))}),[n,r,t,c])}function x(e){var t=Object(c.a)(),n=l.a.useState(0),u=Object(r.a)(n,2),j=u[0],b=u[1],f=l.a.useCallback((function(e,t){b(t)}),[]),h=l.a.useCallback((function(e){b(e)}),[]),O=l.a.useMemo((function(){return e.tabs.map((function(e,t){return Object(p.jsx)(i.a,Object(a.a)({label:Object(p.jsx)(s.a,{component:"h2",variant:"button",children:e.name})},function(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}(t)),t)}))}),[e.tabs]),x=l.a.useMemo((function(){return e.tabs.map((function(e,n){return Object(p.jsx)(m,{index:n,hidden:j!==n,dir:t.direction,children:e.component},n)}))}),[e.tabs,j,t.direction]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(o.a,{allowScrollButtonsMobile:!0,value:j,onChange:f,indicatorColor:"primary",variant:"scrollable",sx:{borderBottom:2,borderColor:"divider"},children:O}),Object(p.jsx)("br",{}),Object(p.jsx)(d.a,{enableMouseEvents:!0,axis:"x",index:j,onChangeIndex:h,children:x})]})}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(8),r=n.n(a),c=n(16),i=n(5),s=n(202),o=n(87),u=n(424),l=n(203),j=n(1),d=n.n(j),b=n(60),f=n.n(b),h=n(105),p=n.n(h),O=n(28),m=n(34),x=n(0);function v(e){var t=e.open,n=e.onSuccess,a=e.onClose,j=e.objectName,b=Object(O.a)(),h=d.a.useState(""),v=Object(i.a)(h,2),g=v[0],y=v[1],k=d.a.useCallback(Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g===j){e.next=3;break}return b("Wpisana nazwa jest niepoprawna","error"),e.abrupt("return");case 3:n(),y("");case 5:case"end":return e.stop()}}),e)}))),[j,g,n,b]),w=d.a.useCallback((function(){y(""),a()}),[a]);return Object(x.jsx)(m.a,{open:t,onClose:w,"aria-label":"Okno do usuwania obiektu",sx:{maxWidth:"400px"},children:Object(x.jsxs)(s.a,{direction:"column",spacing:3,children:[Object(x.jsx)(o.a,{variant:"h5",color:"primary.dark",children:"Usuwanie obiektu"}),Object(x.jsxs)(o.a,{variant:"body1",color:"text.secondary",children:["Tej operacji nie da si\u0119 cofn\u0105\u0107.",Object(x.jsx)("br",{}),"1. Przepisz nazw\u0119 ",Object(x.jsx)("b",{children:j}),Object(x.jsx)("br",{}),"2. Naci\u015bnij 'Zatwierd\u017a'"]}),Object(x.jsx)(u.a,{id:"resource-name",label:"nazwa",variant:"outlined",value:g,onChange:function(e){return y(e.target.value)}}),Object(x.jsxs)(s.a,{direction:"row",justifyContent:"space-around",children:[Object(x.jsx)(l.a,{startIcon:Object(x.jsx)(p.a,{}),onClick:w,children:"Anuluj"}),Object(x.jsx)(l.a,{startIcon:Object(x.jsx)(f.a,{color:"inherit"}),onClick:k,color:"error",children:"Zatwierd\u017a"})]})]})})}}},[[326,2,3]]]);
//# sourceMappingURL=main.b8a47991.chunk.js.map