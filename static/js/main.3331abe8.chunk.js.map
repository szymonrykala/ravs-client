{"version":3,"sources":["components/pages/protected/components/SwipeableTabs/SwipeablePanel.tsx","components/pages/protected/components/SwipeableTabs/SwipeableTabs.tsx","components/pages/protected/RoomPage/RoomContext/RoomContextProvider.tsx","components/pages/protected/RoomPage/RoomContext/useRoomContext.ts","components/pages/protected/components/DeleteModal/DeleteModal.tsx","services/AddressService.ts","services/RoomService.ts","components/pages/protected/hooks/useTrigger.ts","components/pages/protected/components/DatesFooter.tsx","components/pages/protected/AddressPage/AddressContext/AddressContextProvider.tsx","components/pages/protected/AddressPage/AddressContext/useAddress.ts","components/pages/protected/BuildingPage/BuildingContext/BuildingContextProvider.tsx","components/pages/protected/BuildingPage/BuildingContext/useBuilding.ts","services/BuildingService.ts","components/pages/protected/components/Charts/ChartOptionsBar.tsx","components/pages/protected/components/Charts/ChartsTab.tsx","components/pages/protected/components/Charts/ChartSection.tsx","contexts/ResourceMapContext/useResourceMap.ts","components/pages/protected/UserPage/UserContext/UserContextProvider.tsx","components/pages/protected/UserPage/UserContext/useUser.tsx","shared/path.ts","services/ChartService.ts","components/pages/protected/components/Charts/ChartsContext/ChartsContextProvider.tsx","components/pages/protected/components/Charts/ChartsContext/useCharts.ts","contexts/QueryParamsContext/QueryParamsContextValue.tsx","contexts/QueryParamsContext/QueryParamsContextProvider.tsx","contexts/ResourceMapContext/ResourceMapContextProvider.tsx","components/pages/protected/components/ListPagination.tsx","components/pages/protected/components/LazyInput.tsx","services/APIServiceError.ts","components/pages/protected/components/SelectButtonGroup.tsx","services/AuthService.ts","shared/components/LoadingView.tsx","auth/sessionProvider.tsx","contexts/NotificationContext/NotificationContextValue.ts","contexts/NotificationContext/NotificationContextProvider.tsx","shared/components/TabHeadLine.tsx","components/pages/protected/components/Charts/Chart.tsx","components/pages/protected/components/PDF/PDFPage.tsx","components/pages/protected/components/PDF/Table.tsx","contexts/NotificationContext/useNotification.ts","services/LogService.ts","shared/components/Loading.tsx","components/pages/protected/components/GenericModal.tsx","contexts/ResourceMapContext/index.ts","auth/useSession.ts","shared/utils.ts","shared/components/UniqueCodeButton/statusReducer.ts","shared/components/UniqueCodeButton/UniqueCodeButton.tsx","components/pages/public/ChangePassword/FormStep.tsx","components/pages/public/ChangePassword/Form.tsx","services/ImageService.ts","shared/components/FormGridContainer.tsx","contexts/QueryParamsContext/userQueryParams.ts","services/Service.ts","services/UserService.ts","components/pages/protected/components/Tutorial/TutorialContext/TutorialContextProvider.tsx","components/pages/protected/components/Tutorial/Tip.tsx","components/pages/protected/components/Tutorial/TutorialContext/useTutorial.ts","services/MetadataService.ts","services/StorageService.ts","shared/Theme/LinkBehavior.tsx","shared/Theme/theme.ts","shared/Theme/index.tsx","components/pages/protected/AccessPage/index.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/useReservations.ts","components/pages/protected/components/DateTimePicker.tsx","components/pages/protected/components/ReservationViewModal/ModalForms/EditModalForm.tsx","components/pages/protected/components/ReservationViewModal/ModalForms/CopyModalForm.tsx","components/pages/protected/components/RfidForm.tsx","components/pages/protected/components/ReservationViewModal/ModalForms/PingKeyModalForm.tsx","components/pages/protected/components/MoreVertMenu.tsx","components/pages/protected/components/ReservationViewModal/UserItem.tsx","components/pages/protected/components/ReservationViewModal/RoomItem.tsx","components/pages/protected/hooks/useResolvedAccess.ts","components/pages/protected/components/ReservationViewModal/DatesView.tsx","components/pages/protected/components/ReservationViewModal/ReservationViewModal.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/ModalContext/ModalContextProvider.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/ReservationsContextProvider.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsList/ReservationsListItem.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsList/ReservationsList.tsx","components/pages/protected/components/GenericReservationsTab/ReservationsContext/ModalContext/useReservationModalContext.ts","components/pages/protected/components/CreateReservationModal/CreateReservationForm.tsx","components/pages/protected/components/CreateReservationModal/CreateReservationModal.tsx","components/pages/protected/components/GenericReservationsTab/ReservationTabBar.tsx","components/pages/protected/components/GenericReservationsTab/GenericReservationsTab.tsx","components/pages/protected/AddressPage/components/Map.tsx","components/pages/protected/AddressPage/Forms/AddressEditForm.tsx","components/pages/protected/AddressPage/Forms/CreateBuildingForm.tsx","components/pages/protected/AddressPage/Forms/CreateAddressForm.tsx","components/pages/protected/AddressPage/components/AddressCard.tsx","components/pages/protected/components/ScrollableList/ScrollableList.tsx","components/pages/protected/components/ScrollableList/ScrollableListItem.tsx","components/pages/protected/AddressPage/components/BuildingsList.tsx","components/pages/protected/AddressPage/AddressPage.tsx","components/pages/protected/components/ImageUploadField.tsx","models/Room.ts","components/pages/protected/BuildingPage/Forms/BuildingEditForm.tsx","components/pages/protected/BuildingPage/Forms/CreateRoomForm.tsx","models/Metadata.ts","components/pages/protected/components/FavouriteButton.tsx","components/pages/protected/BuildingPage/components/BuildingCard.tsx","components/pages/protected/BuildingPage/components/RoomsList.tsx","components/pages/protected/BuildingPage/BuildingPage.tsx","components/pages/protected/HomePage/Favourites.tsx","components/pages/protected/HomePage/Notebook.tsx","components/pages/protected/HomePage/HomeReservations.tsx","components/pages/protected/HomePage/HomePage.tsx","components/pages/protected/LogsPage/index.tsx","components/pages/protected/RoomPage/Forms/RoomEditForm.tsx","components/pages/protected/RoomPage/Forms/RfidModalForm.tsx","components/pages/protected/RoomPage/components/YesNoIcon.tsx","components/pages/protected/RoomPage/components/RoomTableInfo.tsx","components/pages/protected/RoomPage/components/RoomCard.tsx","components/pages/protected/RoomPage/RoomPage.tsx","components/pages/protected/SettingsPage/index.tsx","components/pages/protected/UserPage/Forms/PasswordChangeModal.tsx","components/pages/protected/UserPage/Forms/EditUserForm.tsx","components/pages/protected/UserPage/components/UserCard.tsx","components/pages/protected/UserPage/UserPage.tsx","components/pages/protected/UsersPage/UsersContext/UsersContextProvider.tsx","components/pages/protected/UsersPage/components/UsersView/SearchBar.tsx","components/pages/protected/UsersPage/components/UsersView/UsersList/UserListItem.tsx","components/pages/protected/UsersPage/components/UsersView/UsersList/UsersList.tsx","components/pages/protected/UsersPage/UsersContext/useUsers.ts","components/pages/protected/UsersPage/components/UsersView/UsersView.tsx","components/pages/protected/UsersPage/components/UsersCharts.tsx","components/pages/protected/UsersPage/UsersPage.tsx","components/pages/protected/index.tsx","components/pages/public/PublicPages.tsx","components/pages/index.tsx","components/Footer/Copyrights.tsx","components/Footer/Links.tsx","components/Footer/index.tsx","components/Navigation/Drawer/MainDrawerList.tsx","components/Navigation/Drawer/DrawerPanel.tsx","components/Navigation/Drawer/AvatarView.tsx","components/Navigation/Drawer/ResourcesList/CollapseableListItem.tsx","components/Navigation/Drawer/ResourcesList/RoomListItem.tsx","components/Navigation/Drawer/ResourcesList/ResourceList.tsx","components/Navigation/Drawer/CreateAddressButton.tsx","components/Navigation/Drawer/index.tsx","components/Navigation/NavigationBar/AccountMenu.tsx","components/Navigation/NavigationBar/index.tsx","components/Navigation/Navigation.tsx","App.tsx","serviceWorkerRegistration.ts","index.tsx","components/pages/protected/components/SmallCard.tsx","services/ReservationService.ts"],"names":["SwipeablePanel","props","children","hidden","index","other","React","useMemo","Box","role","id","SmallCard","SwipeableTabs","theme","useTheme","useState","tabIndex","setTabIndex","handleTabChange","useCallback","event","newValue","handleChangeIndex","renderedTabs","tabs","map","page","Tab","label","Typography","component","variant","name","a11yProps","renderedTabPanels","dir","direction","Tabs","allowScrollButtonsMobile","value","onChange","indicatorColor","sx","borderBottom","borderColor","axis","onChangeIndex","RoomContext","createContext","RoomContextProvider","useResourceMap","getBuildingLink","reloadMap","notify","useNotification","urlParams","useParams","room","setRoom","refresh","useTrigger","useLayoutEffect","RoomService","setPath","getRoom","a","getView","resp","data","setOccupied","state","old","occupied","updateRoom","body","update","buildingId","building","description","deleteRoom","remove","to","updateRFIDTag","key","updateRFID","RFIDTag","deleteRFIDTag","useEffect","Boolean","Provider","Loading","useRoomContext","useContext","DeleteModal","open","onSuccess","onClose","input","setInput","objectName","Math","random","toString","substring","toUpperCase","handleConfirm","close","GenericModal","maxWidth","Stack","spacing","color","TextField","evt","target","justifyContent","Button","startIcon","onClick","AddressService","_path","this","params","preparePath","get","path","delete","patch","post","Service","addressId","roomId","timeInterval","trigger","setTrigger","int","setInterval","clearInterval","DatesFooter","fontSize","displayDate","model","_created","_updated","addressContext","AddressContextProvider","address","setAddress","getAddress","getCurrentOne","getBuildingsInAddress","getBuildings","updateAddress","deleteAddress","paths","HOME","useAddress","buildingContext","BuildingContextProvider","setBuilding","BuildingService","getBuilding","getRoomsInBuilding","updateBuilding","Object","keys","forEach","Number","assign","deleteBuilding","dynamicPaths","toAddress","useBuilding","predefinedButtons","isProperDate","date","getDate","ChartOptionsBar","useQueryParams","queryParams","setQueryParams","from","Date","now","customDates","setCustomDates","handleButtonChange","buttonValue","handleSubmitCustomDate","preventDefault","toDateString","SelectButtonGroup","buttons","onSubmit","pb","MobileDatePicker","inputFormat","renderInput","size","type","memo","ChartsTab","QueryParamsContext","default","ChartsContext","ChartSection","defaultOpen","setOpen","display","alignItems","title","replace","IconButton","Collapse","in","timeout","Grid","container","Divider","resourceMapContext","userContext","UserContextProvider","session","useSession","user","setUser","userId","UserService","load","deleteUser","action","logout","USERS","updateUser","useUser","PUBLIC","LOGIN","REGISTER","ACTIVATE","REMIND_PASSWORD","ACCESS","SETTINGS","USER","MY_PROFILE","INFRASTRUCTURE","ADDRESS","BUILDING","ROOM","LOGS","toBuilding","toRoom","toUser","ChartService","endp","url","window","location","length","entries","newPath","includes","chartsContext","ChartsContextProvider","chartsData","setData","fetchData","useCharts","queryParamsContextDefaults","q","param","queryParamsContext","QueryParamsContextProvider","keyName","defaultValue","StorageService","read","save","ResourceMapContextProvider","resourceMap","setResources","loaded","setLoaded","loadResourceMap","getResourcesMap","getRoomLink","addr","buildings","bld","rooms","flat","find","item","href","allRooms","allBuildings","allAddresses","ListPagination","handlePageChange","currentPage","handleCountChange","child","itemsOnPage","onPageList","num","flexWrap","flexDirection","alignContent","count","pagesCount","fullWidth","labelId","LazyInput","str","setStr","handleSearchFieldChange","clearTimeout","timer","setTimeout","placeholder","width","p","bgcolor","inputProps","APIServiceError","error","statusCode","Error","handleChange","renderedButtons","control","row","AuthService","email","password","response","localStorage","setItem","_TOKEN_NAME","removeItem","getItem","hasToken","LoadingView","Backdrop","zIndex","drawer","backgroundColor","text","CircularProgress","sessionContext","SessionProvider","loading","setLoading","setUpUser","setIdentity","MetadataService","metadata","ReservationService","LogService","ImageService","checkIfUserHasSession","hasSession","getMe","sessionUser","WELCOME","login","message","code","NotificationContextDefault","notificationContext","NotificationContextProvider","setMessage","severity","setSeverity","setComponent","closeSnack","reason","setSnack","_severity","componentCallback","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","TabHeadLine","subtitle","mt","weekDays","Chart","primaryAxis","getValue","resolveDay","x","min","secondaryAxes","y","position","elementType","minDomainLength","hardMin","scaleType","showDatumElements","obj","push","xKey","xs","lg","maxHeight","height","minHeight","options","Font","register","family","src","styles","StyleSheet","create","fontFamily","section","marginBottom","padding","head","PDFPage","style","wrap","toLocaleString","subject","sections","node","table","cell","margin","wordBreak","textAlign","Row","cols","col","Cell","val","emptyMonthList","rows","every","slice","Table","closeAfterTransition","BackdropComponent","BackdropProps","overflow","boxShadow","dateString","Intl","DateTimeFormat","dateStyle","timeStyle","format","timeFormat","isDate","fromLocaleDateTimeString","dateTime","split","d","m","h","i","s","statusReducer","success","payload","UniqueCodeButton","useReducer","result","dispatchResult","handleSubmit","generateKey","ml","FormStep","Form","newPassword","e","changePassword","required","autoComplete","autoFocus","mb","Link","endpoint","formBody","fetch","_BASE_URL","method","cache","mode","headers","authToken","json","console","debug","ok","status","image","formData","FormData","append","sendImage","FormGridContainer","onCancel","rowGap","process","_userId","fetchObject","JSON","stringify","match","reload","query","_fetch","URLSearchParams","RegisterState","search","NO_ACTIVATION_NEEDED","ACTIVATION_NEEDED","accessId","tutorialContext","TutorialContextProvider","registered","setRegistered","startUp","setStartUp","shift","registerTip","callback","priority","sort","b","Tip","holder","useRef","disposeFunc","setDispose","observerRef","isOnScreen","setIsOnScreen","current","IntersectionObserver","entry","isIntersecting","observe","disconnect","handleClose","ref","Popover","anchorEl","px","STORAGE_NAME","notes","favourites","log","filter","btoa","encodeURI","codeName","parse","LinkBehavior","createTheme","palette","primary","indigo","secondary","dark","main","light","background","paper","shape","borderRadius","components","MuiCssBaseline","styleOverrides","scrollbar","track","thumb","active","MuiTextField","defaultProps","MuiSelect","MuiButton","MuiLink","MuiButtonBase","LinkComponent","MuiSvgIcon","MuiIconButton","Theme","ThemeProvider","LazyAccessPage","lazy","AccessPage","Suspense","fallback","useReservations","reservationsContext","DateTimePicker","MobileDateTimePicker","minDate","EditModalForm","updateReservation","closeForm","reservation","handleDateChange","multiline","maxRows","sm","plannedStart","plannedEnd","FormControl","InputLabel","Select","MenuItem","CopyModalForm","createReservation","dates","setDates","copyDates","setCopyDates","createCalls","Promise","all","processed","handleDeleteCopyDate","splice","setDate","handleAddDate","border","pl","HiddenInput","styled","left","RfidForm","setText","setColor","onScan","handleDecline","focus","alignSelf","headline","bodyText","PingKeyModalForm","pingKeyForReservation","handleKeyScan","reservationId","MoreVertMenu","setAnchorEl","handleClick","currentTarget","undefined","Menu","MenuListProps","PaperProps","minWidth","opt","ListItemIcon","icon","UserItem","ListItem","button","ListItemAvatar","Avatar","getLink","alt","surname","ListItemText","RoomItem","roomLink","roomType","defaultAccess","useResolvedAccess","access","owner","accessAdmin","premisesAdmin","keysAdmin","reservationsAdmin","reservationsAbility","logsAdmin","statsViewer","DatesView","columnGap","Chip","TextSection","ReservationViewModal","myId","deleteReservation","history","useHistory","deleteModalOpen","setDeleteModalOpen","editModalOpen","setEditModalOpen","nfcModalOpen","setNFCModalOpen","copyModalOpen","setCopyModalOpen","onDelete","menuOptions","unshift","Edit","justifySelf","actualStart","actualEnd","List","ReservationModalViewContext","showReservation","ModalContextProvider","reservations","modalOpen","setModalOpen","setReservationId","ReservationsContextProvider","roomContext","setReservations","pathname","getReservations","pagination","triggerReload","pingKey","createOne","field","toUTCString","MemAvatar","img","ReservationListItem","resolveStatus","ReservationsList","renderedList","CreateReservationForm","start","end","CreateReservationModal","ReservationTabBar","createReservationModalOpen","setCreateReservationModalOpen","customDate","setCustomDate","toISOString","md","GenericReservationsTab","StyledIframe","Map","street","number","town","country","base","URL","ie","z","iwloc","output","frameBorder","AddressEditForm","postalCode","CreateBuildingForm","handleCreateBuilding","openTime","closeTime","String","MobileTimePicker","CreateAddressForm","AddressCard","Card","elevation","CardHeader","subheader","CardMedia","CardContent","ScrollableList","onAddItem","ScrollableListItem","link","py","EmptyScrollableListItem","BuildingsList","createBuildingModalOpen","setCreateBuildingModalOpen","setBuildings","createBuilding","renderedBuildings","LazyAddressCharts","AddressCharts","AddressPage","pages","arr","AddressContext","Input","StyledImage","ImageUploadField","useLocation","uploadedImage","setUploadedImage","upload","onUpload","handleImageUpload","files","handleRemoveImgae","createObjectURL","htmlFor","accept","RoomTypes","timeToDate","BuildingEditForm","handleTime","handleSelectChange","CreateRoomForm","handleCreateRoom","LECTURE","seatsCount","floor","values","FavType","FavouriteButton","marked","setMarked","isFavourite","addToFavourites","removeFavourite","addFavourite","BuildingView","Building","RoomsList","createRoomModalOpen","setCreateRoomModalOpen","setRooms","createRoom","renderedRooms","LazyRoomOrBuildingChartTab","RoomOrBuildingChartTab","BuildingPage","BuildingContext","getCorrectListItem","Room","Favourites","handleRemoveFavourite","disablePadding","Notebook","err","InputBase","minRows","mr","HomeReservations","HomePage","LazyLogsPage","LogsPage","RoomEditForm","checked","FormControlLabel","labelPlacement","Switch","blocked","RfidModalRorm","YesNoIcon","rest","RoomTableInfo","deleteTag","rfidTagModalOpen","setRfidTagModalOpen","tableRows","RenderedRows","TableRow","hover","TableCell","align","fontWeight","TableContainer","TableHead","TableBody","RoomCard","RoomPage","LazySettingsPage","SettingsPage","PasswordChangeModal","EditUserForm","UserCard","editModal","setEditModal","passModal","setPassModal","deleteModal","setDeleteModal","lastActivity","LazyUserCharts","UserCharts","UserPage","UserContext","usersContext","UsersContextProvider","users","setUsers","getUsers","deleted","activated","SearchBar","UserListItem","UsersList","UsersView","UsersCharts","Charts","ActualLoader","usePDF","document","r","reservationsCount","allTimeMinutes","avgActualTimeMinutes","avgPlannedTimeMinutes","PDF","download","UsersPage","ProtectedPages","Activation","Login","Register","ChangePassword","Welcome","PublicPages","exact","tabStyle","Copyright","LinkItem","Links","linksList","list","links","Container","pt","Footer","navListItems","HomeIcon","AccountIcon","settingsItem","SettingsIcon","accessLinkItem","VerifiedUserIcon","usersLinkItem","PeopleIcon","logsLinkItem","SearchIcon","MainListItem","MainDrawerList","DrawerPanel","toggleOpen","onKeyDown","AvatarView","ev","stopPropagation","CollapseableListItem","OPENED_NAME","handleOpen","ListItemButton","ExpandLess","ExpandMore","RoomListItem","ResourcesList","rendered","roomEntry","CreateAddressButton","formOpen","setFormOpen","AppDrawer","Drawer","ModalProps","keepMounted","anchor","AccountMenu","linksComp","transformOrigin","NavigationBar","handleMenu","flexGrow","AppBar","Toolbar","toggleDrawer","edge","textDecoration","Navigation","shouldWork","App","LocalizationProvider","dateAdapter","AdapterDateFns","locale","plLocale","CssBaseline","className","ResourceMapContext","Tutorial","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","catch","ReactDOM","render","StrictMode","getElementById","origin","addEventListener","contentType","indexOf","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration","titleComponent","Colors","mess","localPreparPath","nowTimestamp","now_minus15","now_plus15","emitStatus","warning","info","inert","end_plus15"],"mappings":"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","file":"static/js/main.3331abe8.chunk.js","sourcesContent":["import { Box } from \"@mui/material\";\nimport React from \"react\";\nimport SmallCard from \"../../components/SmallCard\";\n\n\ninterface TabPanelProps {\n    children?: React.ReactNode;\n    dir?: string;\n    hidden: boolean,\n    index: number\n}\n\n\nexport default function SwipeablePanel(props: TabPanelProps) {\n    const { children, hidden, index, ...other } = props;\n\n    // should component update\n    const render = React.useMemo(() =>\n        <Box\n            role=\"tabpanel\"\n            hidden={hidden}\n            id={`full-width-tabpanel-${index}`}\n            aria-labelledby={`full-width-tab-${index}`}\n            {...other}\n        >\n            <SmallCard>{children}</SmallCard>\n        </Box>\n        , [hidden, index, children, other]);\n\n    return render;\n}","import { Tab, Tabs, Typography, useTheme } from \"@mui/material\";\nimport React from \"react\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport SwipeablePanel from \"./SwipeablePanel\";\n\n\ninterface SwipeableTabsProps {\n    tabs: { name: string, component: React.ReactNode }[],\n}\n\n\nfunction a11yProps(index: number) {\n    return {\n        id: `full-width-tab-${index}`,\n        'aria-controls': `full-width-tabpanel-${index}`,\n    };\n}\n\n\nexport default function SwipeableTabs(props: SwipeableTabsProps) {\n    const theme = useTheme();\n    const [tabIndex, setTabIndex] = React.useState(0);\n\n\n    const handleTabChange = React.useCallback((event: React.SyntheticEvent, newValue: number) => {\n        setTabIndex(newValue);\n    }, []);\n\n\n    const handleChangeIndex = React.useCallback((index: number) => {\n        setTabIndex(index);\n    }, []);\n\n\n    const renderedTabs = React.useMemo(() => {\n        return props.tabs.map((page, index) => <Tab\n            key={index}\n            label={<Typography component='h2' variant='button'>{page.name}</Typography>}\n            {...a11yProps(index)}\n        />)\n    }, [props.tabs]);\n\n\n    const renderedTabPanels = React.useMemo(() => {\n        return props.tabs.map((page, index) => <SwipeablePanel\n            key={index}\n            index={index}\n            hidden={tabIndex !== index}\n            dir={theme.direction}\n        >\n            {page.component}\n        </SwipeablePanel>)\n    }, [\n        props.tabs,\n        tabIndex,\n        theme.direction,\n    ]);\n\n\n    return (\n        <div>\n            <Tabs\n                allowScrollButtonsMobile\n                value={tabIndex}\n                onChange={handleTabChange}\n                indicatorColor=\"primary\"\n                variant=\"scrollable\"\n                sx={{ borderBottom: 2, borderColor: 'divider' }}\n            >\n                {renderedTabs}\n            </Tabs>\n            <br />\n            <SwipeableViews\n                axis='x'\n                index={tabIndex}\n                onChangeIndex={handleChangeIndex}\n            >\n                {renderedTabPanels}\n            </SwipeableViews>\n        </div>\n    );\n}","import React, { createContext } from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport { DetailedRoom } from \"../../../../../models/Room\";\nimport RoomService, { RoomUpdateParams, RoomViewParams } from \"../../../../../services/RoomService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport RoomContextValue from \"./RoomContextValue\";\nimport useResourceMap from \"../../../../../contexts/ResourceMapContext/useResourceMap\";\nimport useTrigger from \"../../hooks/useTrigger\";\nimport Loading from \"../../../../../shared/components/Loading\";\n\n\ninterface RoomContextProviderProps {\n    children?: React.ReactNode\n}\n\nexport const RoomContext: any = createContext(null);\n\n\nexport default function RoomContextProvider({\n    children\n}: RoomContextProviderProps) {\n    const { getBuildingLink, reloadMap } = useResourceMap();\n    const notify = useNotification();\n    const urlParams = useParams<RoomViewParams>();\n    const [room, setRoom] = React.useState<DetailedRoom>();\n    const refresh = useTrigger(60_000);\n\n    React.useLayoutEffect(() => {\n        RoomService.setPath(urlParams);\n    }, [urlParams]); // set new urlParams to service so it get data for propper room\n\n\n    const getRoom = React.useCallback(async () => {\n        const resp = await RoomService.getView();\n        setRoom(resp.data as DetailedRoom);\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        urlParams,\n        refresh\n    ]); // recompute after change of room\n\n\n    const setOccupied = React.useCallback((state: boolean) => {\n        setRoom(old => {\n            if (old)\n                return { ...old, occupied: state };\n        });\n    }, []);\n\n\n    const updateRoom = React.useCallback(async (body: RoomUpdateParams) => {\n        if (!room) return false;\n\n        try {\n            await RoomService.update(body);\n            setRoom(old => {\n                if (old)\n                    return { ...old, ...body };\n            });\n            notify(\"Sala została zaktualizowana\", 'success');\n\n            if (('name' in body && body.name !== room.name)\n                || ('buildingId' in body && body.buildingId !== room?.building.id)\n            ) {\n                reloadMap();\n            }\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n        room\n    ]);\n\n\n    const deleteRoom = React.useCallback(async () => {\n        if (!room) return;\n\n        try {\n            await RoomService.remove();\n            reloadMap();\n            notify(\"Sala została usunięta\", 'success', () => <Redirect to={getBuildingLink(room.building.id)} />);\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        notify,\n        room,\n        reloadMap,\n        getBuildingLink,\n    ]);\n\n\n    const updateRFIDTag = React.useCallback(async (key: string) => {\n        try {\n            await RoomService.updateRFID(key);\n            setRoom(old => {\n                if (old)\n                    return { ...old, RFIDTag: key };\n            });\n\n            notify(\"Tag został przypisany\", 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n    }, [notify]);\n\n\n    const deleteRFIDTag = React.useCallback(async () => {\n        try {\n            await RoomService.deleteRFIDTag();\n            setRoom(old => {\n                if (old)\n                    return { ...old, RFIDTag: null };\n            });\n            notify(\"Tag został usunięty\", \"success\");\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [notify]);\n\n\n    React.useEffect(() => {\n        getRoom();\n        return () => { }\n    }, [getRoom]);\n\n\n    if (!Boolean(room)) return <Loading />;\n\n    return (\n        <RoomContext.Provider value={{\n            room,\n            updateRoom,\n            deleteRoom,\n            updateRFIDTag,\n            deleteRFIDTag,\n            setOccupied\n        } as RoomContextValue}>\n            {children}\n        </RoomContext.Provider>\n    );\n}\n","import React from \"react\";\nimport { RoomContext } from \"./RoomContextProvider\";\nimport RoomContextValue from \"./RoomContextValue\";\n\n\nexport default function useRoomContext() {\n    return React.useContext(RoomContext) as RoomContextValue\n}","import { Button, Stack, TextField, Typography } from \"@mui/material\";\nimport React from \"react\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport GenericModal from \"../../components/GenericModal\";\n\n\ninterface DeleteModalProps {\n    open: boolean,\n    onClose: () => void,\n    onSuccess: () => void\n}\n\nexport default function DeleteModal({\n    open, onSuccess, onClose\n}: DeleteModalProps) {\n    const notify = useNotification();\n    const [input, setInput] = React.useState<string>('');\n\n    const objectName = React.useMemo(()=> (Math.random()).toString(36).substring(5).toUpperCase() ,[]);\n\n    const handleConfirm = React.useCallback(async () => {\n        if (input !== objectName) {\n            notify(\"Wpisany tekst jest niepoprawny\", 'error');\n            return;\n        }\n        onSuccess();\n        setInput('');\n    }, [objectName, input, onSuccess, notify]);\n\n\n    const close = React.useCallback(() => {\n        setInput('');\n        onClose();\n    }, [onClose]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n            aria-label=\"Okno do usuwania obiektu\"\n            sx={{\n                maxWidth: \"400px\",\n            }}\n        >\n            <Stack direction=\"column\" spacing={3}>\n                <Typography variant=\"h5\" color='primary.dark'>\n                    Usuwanie obiektu\n                </Typography>\n                <Typography variant=\"body1\" color='text.secondary'>\n                    Tej operacji nie da się cofnąć.\n                    <br />\n                    1. Przepisz tekst: <b>{objectName}</b><br />\n                    2. Naciśnij \"Zatwierdź\"\n                </Typography>\n                <TextField\n                    id=\"random-tekst\"\n                    label=\"tekst\"\n                    variant=\"outlined\"\n                    value={input}\n                    onChange={(evt) => setInput(evt.target.value)}\n                />\n                <Stack direction=\"row\" justifyContent=\"space-around\">\n                    <Button startIcon={<CancelIcon />} onClick={close}>Anuluj</Button>\n                    <Button startIcon={<DeleteIcon color=\"inherit\" />} onClick={handleConfirm} color=\"error\">Zatwierdź</Button>\n                </Stack>\n            </Stack>\n        </GenericModal>\n    );\n}","import Service from \"./Service\";\n\n\nexport interface AddressViewParams {\n    addressId: string,\n}\n\n\nexport interface UpdateAddressParams {\n    [index: string]: string | undefined,\n    country?: string,\n    town?: string,\n    postalCode?: string,\n    street?: string,\n    number?: string\n}\n\n\nexport interface CreateAddressParams {\n    country: string,\n    town: string,\n    postalCode: string,\n    street?: string,\n    number?: string,\n}\n\n\nclass AddressService extends Service {\n    _path = '';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath(params: AddressViewParams) {\n        this._path = this.preparePath(params);\n    }\n\n    public getCurrentOne() {\n        return this.get(this.path);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public update(data: UpdateAddressParams) {\n        return this.patch(this.path, data);\n    }\n\n    public create(data: CreateAddressParams) {\n        return this.post('/addresses', data);\n    }\n\n    public getBuildings() {\n        return this.get(`${this.path}/buildings`);\n    }\n\n    public getResourcesMap() {\n        return this.get('/addresses/resources');\n    }\n}\n\n\nexport default new AddressService();","import { RoomType } from \"../models/Room\";\nimport { BuildingViewParams } from \"./BuildingService\";\nimport Service from \"./Service\";\n\n\nexport interface RoomViewParams {\n    roomId: string,\n    buildingId: string,\n    addressId: string\n}\n\n\nexport interface RoomUpdateParams {\n    name?: string,\n    roomType?: RoomType,\n    seatsCount?: number,\n    floor?: number,\n    buildingId?: number,\n    blocked?: boolean,\n}\n\n\nexport interface CreateRoomParams {\n    name: string,\n    roomType: RoomType,\n    seatsCount: number,\n    floor:number\n}\n\n\n\nclass RoomService extends Service {\n    _path = '';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath({ addressId, buildingId, roomId }: RoomViewParams) {\n        this._path = `/addresses/${addressId}/buildings/${buildingId}/rooms/${roomId}`;\n    }\n\n    public getView() {\n        return this.get(this.path);\n    }\n\n    public create({ addressId, buildingId }: BuildingViewParams, data: CreateRoomParams) {\n        return this.post(`/addresses/${addressId}/buildings/${buildingId}/rooms`, data);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public update(body: RoomUpdateParams) {\n        return this.patch(this.path, body);\n    }\n\n    public updateRFID(key: string) {\n        return this.patch(`${this.path}/keys`, {\n            \"RFIDTag\": key\n        });\n    }\n\n    public deleteRFIDTag() {\n        return this.delete(`${this.path}/keys`);\n    }\n}\n\nexport default new RoomService()","import React from \"react\";\n\n\nexport default function useTrigger(timeInterval: number) {\n    const [trigger, setTrigger] = React.useState<boolean>();\n\n\n    React.useEffect(() => {\n        const int = setInterval(() => setTrigger(old => !old), timeInterval);\n\n        return () => clearInterval(int);\n    }, [\n        timeInterval\n    ]);\n\n    return trigger;\n}","import React from 'react';\nimport Typography from \"@mui/material/Typography\";\nimport Model from \"../../../../models/Model\";\nimport { displayDate } from \"../../../../shared/utils\";\n\n\n\ninterface DatesFooterProps {\n    model: Model\n}\n\nexport default function DatesFooter(props: DatesFooterProps) {\n    return (\n        <Typography color=\"text.secondary\" variant='body2' fontSize='smaller'>\n            Utworzono: {displayDate(props.model._created)}<br />\n            Ostatnia aktualizacja: {displayDate(props.model._updated)}\n        </Typography>\n    )\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport paths from \"../../../../../shared/path\";\nimport AddressService, { AddressViewParams, UpdateAddressParams } from \"../../../../../services/AddressService\";\nimport AddressContextValue from \"./AddressContextValue\";\nimport Address from \"../../../../../models/Address\";\nimport Building from \"../../../../../models/Building\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport Loading from \"../../../../../shared/components/Loading\";\n\n\n\ninterface AddressContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport const addressContext: any = React.createContext(null);\n\n\nexport default function AddressContextProvider(props: AddressContextProviderProps) {\n    const notify = useNotification();\n    const { reloadMap } = useResourceMap();\n\n    const urlParams = useParams<AddressViewParams>();\n\n    const [address, setAddress] = React.useState<Address>();\n\n    // set service params before render component\n    React.useLayoutEffect(() => {\n        AddressService.setPath(urlParams);\n    }, [urlParams])\n\n\n    const getAddress = React.useCallback(async () => {\n        const resp = await AddressService.getCurrentOne();\n        setAddress(resp.data as Address);\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    // get address on render\n    React.useEffect(() => {\n        getAddress();\n    }, [getAddress]);\n\n\n    const getBuildingsInAddress = React.useCallback(async () => {\n        try {\n            const resp = await AddressService.getBuildings();\n            return resp.data as Building[];\n        } catch (err: any) {\n            return [];\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    const updateAddress = React.useCallback(async (data: UpdateAddressParams) => {\n        try {\n            await AddressService.update(data)\n\n            setAddress(old => {\n                return {\n                    ...old,\n                    ...data as Address\n                }\n            });\n\n            reloadMap()\n\n            notify('Adres zaktualizowany', 'success');\n            return true;\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n    ])\n\n\n\n    const deleteAddress = React.useCallback(async () => {\n        try {\n            await AddressService.remove();\n            reloadMap();\n            notify(\"Adres został usunięty\", 'success', () => <Redirect to={paths.HOME} />);\n        } catch (err: any) {\n            address &&\n                notify(err.description, 'error');\n        }\n    }, [\n        notify,\n        address,\n        reloadMap,\n    ]);\n\n\n    if (!Boolean(address)) return <Loading />;\n\n    return (\n        <addressContext.Provider value={{\n            address,\n            deleteAddress,\n            getBuildingsInAddress,\n            updateAddress\n        } as AddressContextValue}>\n\n            {props.children}\n\n        </addressContext.Provider>\n    );\n}","import React from \"react\";\nimport { addressContext } from \"./AddressContextProvider\";\nimport AddressContextValue from \"./AddressContextValue\";\n\n\nexport default function useAddress() {\n    return React.useContext(addressContext) as AddressContextValue;\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { DetailedBuilding } from \"../../../../../models/Building\";\nimport BuildingService, { BuildingUpdateParams, BuildingViewParams } from \"../../../../../services/BuildingService\";\nimport BuildingContextValue from \"./BuildingContextValue\";\nimport { dynamicPaths } from \"../../../../../shared/path\";\nimport Room from \"../../../../../models/Room\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport Loading from \"../../../../../shared/components/Loading\";\n\n\ninterface BuildingContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport const buildingContext: any = React.createContext(null);\n\n\nexport default function BuildingContextProvider(props: BuildingContextProviderProps) {\n    const notify = useNotification();\n    const { reloadMap } = useResourceMap();\n    const urlParams = useParams<BuildingViewParams>();\n\n    const [building, setBuilding] = React.useState<DetailedBuilding>();\n\n\n    React.useLayoutEffect(() => {\n        BuildingService.setPath(urlParams);\n    }, [urlParams])\n\n\n    const getBuilding = React.useCallback(async () => {\n        const resp = await BuildingService.getCurrentOne();\n        setBuilding(resp.data as DetailedBuilding);\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    React.useEffect(() => {\n        getBuilding();\n    }, [getBuilding]);\n\n\n    const getRoomsInBuilding = React.useCallback(async () => {\n        try {\n            const resp = await BuildingService.getRoomsInBuilding();\n            return resp.data as Room[];\n        } catch (err: any) {\n            return [];\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams])\n\n\n    const updateBuilding = React.useCallback(async (data: BuildingUpdateParams) => {\n        try {\n            if (await BuildingService.update(data)) {\n\n                if (\n                    building &&\n                    (\n                        ('addressId' in data && building.address.id !== data.addressId)\n                        || ('name' in data)\n                    )\n                ) {\n                    reloadMap();\n                }\n\n                setBuilding((old) => {\n                    old && Object.keys(data).forEach((key) => {\n                        switch (key) {\n                            case 'addressId':\n                                old.address.id = Number(data[key]);\n                                break;\n                            default:\n                                old[key] = data[key];\n                                break;\n                        }\n                    });\n                    return Object.assign({}, old);\n                })\n                notify('Bydynek zaktualizowany', 'success');\n                return true;\n            }\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify, building, reloadMap]);\n\n\n    const deleteBuilding = React.useCallback(async () => {\n        try {\n            await BuildingService.remove();\n            reloadMap();\n            building && notify(\"Budynek usunięty\", 'success', () => <Redirect to={dynamicPaths.toAddress(building.address.id)} />);\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        notify,\n        building,\n        reloadMap\n    ]);\n\n\n    if (!Boolean(building)) return <Loading />;\n\n    return (\n        <buildingContext.Provider value={{\n            building,\n            deleteBuilding,\n            getRoomsInBuilding,\n            updateBuilding,\n        } as BuildingContextValue}>\n\n            {props.children}\n\n        </buildingContext.Provider>\n    );\n}","import React from \"react\";\nimport { buildingContext } from \"./BuildingContextProvider\";\nimport BuildingContextValue from \"./BuildingContextValue\";\n\n\nexport default function useBuilding() {\n    return React.useContext(buildingContext) as BuildingContextValue;\n}","import Service from \"./Service\";\nimport { AddressViewParams } from \"./AddressService\";\n\n\n\nexport interface BuildingViewParams {\n    addressId: string,\n    buildingId: string,\n}\n\n\nexport interface BuildingUpdateParams {\n    [index: string]: string | number | undefined,\n    name?: string,\n    closeTime?: string,\n    openTime?: string,\n    addressId?: number\n}\n\nexport interface BuildingCreateParams {\n    name: string,\n    closeTime: string,\n    openTime: string,\n}\n\n\nclass BuildingService extends Service {\n    _path = '';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath({ addressId, buildingId }: BuildingViewParams) {\n        this._path = `/addresses/${addressId}/buildings/${buildingId}`;\n    }\n\n    public getCurrentOne() {\n        return this.get(this.path);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public update(data: BuildingUpdateParams) {\n        return this.patch(this.path, data);\n    }\n\n    public create({ addressId }: AddressViewParams, data: BuildingCreateParams) {\n        return this.post(`/addresses/${addressId}/buildings`, data)\n    }\n\n    public getRoomsInBuilding() {\n        return this.get(`${this.path}/rooms`);\n    }\n}\n\nexport default new BuildingService()","import React from \"react\";\nimport { Box, Button, Stack, TextField, Typography } from \"@mui/material\";\nimport MobileDatePicker from '@mui/lab/MobileDatePicker';\nimport SelectButtonGroup, { SelectButtonInterface } from \"../../components/SelectButtonGroup\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport { ChartsQueryData } from \"../../../../../services/ChartService\";\n\n\nconst predefinedButtons: SelectButtonInterface[] = [\n    { name: \"tydzień\", value: \"1 week ago\" },\n    { name: \"miesiąc\", value: \"1 month ago\" },\n    { name: \"6 miesięcy\", value: \"6 month ago\" },\n    { name: \"rok\", value: \"1 year ago\" },\n];\n\n\nfunction isProperDate(date: Date): boolean {\n\n    if (date.getDate()) {\n        return true;\n    }\n\n    return false;\n}\n\n\nfunction ChartOptionsBar() {\n    const { queryParams, setQueryParams } = useQueryParams<ChartsQueryData>();\n\n    const [customDates, setCustomDates] = React.useState<{ from: Date, to: Date }>({\n        from: new Date(isProperDate(new Date(queryParams.from)) ? queryParams.from : (Date.now() - (21600 * 24000))),\n        to: new Date(isProperDate(new Date(queryParams?.to))? queryParams.to : (Date.now() + (21600 * 24)))\n    });\n\n\n    const handleButtonChange = React.useCallback(async (buttonValue: string) => {\n        setQueryParams(old => ({\n            ...old,\n            from: buttonValue,\n            to: \"1 hour\"\n        }));\n    }, [\n        setQueryParams\n    ]);\n\n\n    const handleSubmitCustomDate = React.useCallback(async (evt: any) => {\n        evt.preventDefault();\n\n        setQueryParams({\n            from: customDates.from?.toDateString(),\n            to: customDates.to?.toDateString()\n        });\n    }, [\n        customDates.from,\n        customDates.to,\n        setQueryParams\n    ]);\n\n\n    return (\n        <Stack direction=\"column\" spacing={2}>\n            <Box>\n                <Typography variant=\"subtitle2\">\n                    Zakres czasu:\n                </Typography>\n                <SelectButtonGroup\n                    onChange={handleButtonChange}\n                    buttons={predefinedButtons}\n                    value={queryParams.from}\n                />\n\n            </Box>\n            <Box component=\"form\" onSubmit={handleSubmitCustomDate}>\n                <Typography variant=\"subtitle2\" pb='5px'>\n                    Zakres niestandardowy:\n                </Typography>\n                <Stack direction=\"row\" spacing={1}>\n                    <MobileDatePicker\n                        label=\"od\"\n                        inputFormat=\"yyyy-MM-dd\"\n                        value={customDates.from}\n                        onChange={(value) => setCustomDates({ ...customDates, from: value ?? new Date() })}\n                        renderInput={(params) => <TextField {...params} size='small' />}\n                    />\n                    <MobileDatePicker\n                        label=\"do\"\n                        inputFormat=\"yyyy-MM-dd\"\n                        value={customDates.to}\n                        onChange={(value) => setCustomDates({ ...customDates, to: value ?? new Date() })}\n                        renderInput={(params) => <TextField {...params} size='small' />}\n                    />\n                    <Button\n                        type=\"submit\"\n                        variant={queryParams?.from === customDates.from.toDateString() ? 'contained' : 'outlined'}\n                    >\n                        OK\n                    </Button>\n                </Stack>\n            </Box>\n        </Stack>\n    );\n}\n\nexport default React.memo(ChartOptionsBar);","import React from \"react\";\nimport Stack from \"@mui/material/Stack\";\nimport { QueryParamsContext } from \"../../../../../contexts/QueryParamsContext\";\nimport { ChartsQueryData } from \"../../../../../services/ChartService\";\nimport ChartOptionsBar from \"./ChartOptionsBar\";\nimport { ChartsContext } from \"./ChartsContext\";\n\n\ninterface GenericChartsTabProps {\n    children: React.ReactNode[] | React.ReactNode\n}\n\nfunction ChartsTab(props: GenericChartsTabProps) {\n    return (\n        <QueryParamsContext\n            name=\"charts-query-params\"\n            default={{ from: '1 month ago', to: '1 hour' } as ChartsQueryData}\n        >\n            <ChartsContext>\n                <Stack spacing={4}>\n                    <ChartOptionsBar />\n                    {props.children}\n                </Stack>\n            </ChartsContext>\n        </QueryParamsContext>\n    )\n}\n\nexport default React.memo(ChartsTab);","import React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Collapse from \"@mui/material/Collapse\";\nimport Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport IconButton from \"@mui/material/IconButton\";\nimport { Divider } from \"@mui/material\";\n\n\ninterface ChartSectionProps {\n    title: string,\n    children: React.ReactNode[] | React.ReactNode,\n    defaultOpen?: boolean,\n}\n\n\nexport default function ChartSection(props: ChartSectionProps) {\n    const [open, setOpen] = React.useState<boolean>(props?.defaultOpen ? true : false);\n\n    return (\n        <Box>\n            <Box sx={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n            }}>\n                <Typography variant='h6' component='h5' id={props.title.replace(' ', '_')}>\n                    {props.title}\n                    <IconButton onClick={() => setOpen(old => !old)}>\n                        {open ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                    </IconButton>\n                </Typography>\n            </Box>\n            <Collapse in={open} timeout=\"auto\" >\n                <Grid container spacing={2}>\n                    {props.children}\n                </Grid>\n                <br />\n                <Divider />\n            </Collapse>\n        </Box>\n    );\n}","import React from \"react\";\nimport { resourceMapContext } from \"./ResourceMapContextProvider\";\nimport ResourceMapContextValue from \"./ResourceMapContextValue\";\n\n\nexport default function useResourceMap() {\n    return React.useContext(resourceMapContext) as ResourceMapContextValue;\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useSession from \"../../../../../auth/useSession\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { DetailedUser } from \"../../../../../models/User\";\nimport UserService, { UpdateUserParams, UserViewParams } from \"../../../../../services/UserService\";\nimport Loading from \"../../../../../shared/components/Loading\";\nimport paths from \"../../../../../shared/path\";\n\n\n\nexport const userContext: any = React.createContext(null);\n\n\ninterface UserContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function UserContextProvider(props: UserContextProviderProps) {\n    const urlParams = useParams<UserViewParams>();\n    const notify = useNotification();\n    const session = useSession();\n\n    const [user, setUser] = React.useState<DetailedUser>();\n\n\n    React.useLayoutEffect(() => {\n        let params = (urlParams.userId === 'me' && session.user) ? { userId: session.user.id.toString() } : urlParams;\n        UserService.setPath(params);\n    }, [\n        urlParams,\n        session\n    ]);\n\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await UserService.getCurrentOne();\n            setUser(resp.data as DetailedUser);\n        } catch (err: any) {\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [urlParams]);\n\n\n    React.useEffect(() => {\n        load()\n    }, [\n        load\n    ]);\n\n\n    const deleteUser = React.useCallback(async () => {\n        try {\n            await UserService.remove();\n\n            let action = (): React.ReactNode => null\n\n            if (session && session.user?.id === user?.id) {\n                session.logout();\n            } else {\n                action = () => <Redirect to={paths.USERS} />\n            }\n\n            notify('Użytkownik został usunięty', 'success', action);\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        session,\n        user?.id,\n    ]);\n\n\n    const updateUser = React.useCallback(async (data: UpdateUserParams) => {\n        try {\n            if (await UserService.update(data)) {\n                setUser(old => {\n                    return { ...old, ...data as DetailedUser };\n                });\n\n                notify('Użytkownik został zaktualizowany', 'success');\n            }\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [notify]);\n\n\n    if (!user) return <Loading />;\n\n    return (\n        <userContext.Provider value={{\n            user,\n            deleteUser,\n            updateUser,\n        }}>\n            {props.children}\n        </userContext.Provider>\n    );\n}","import React from \"react\";\nimport { userContext } from \"./UserContextProvider\";\nimport UserContextValue from \"./UserContextValue\";\n\n\n\nexport default function useUser() {\n    return React.useContext(userContext) as UserContextValue;\n}\n","\ninterface AppPathsInterface {\n    readonly [index: string]: string\n    PUBLIC: string,\n    LOGIN: string,\n    REGISTER: string,\n    ACTIVATE: string,\n    REMIND_PASSWORD: string,\n\n    HOME: string,\n    SETTINGS: string,\n    MY_PROFILE: string,\n    INFRASTRUCTURE: string,\n    ADDRESS: string,\n    BUILDING: string,\n    ROOM: string,\n    USERS: string,\n    ACCESS: string,\n    LOGS:string,\n};\n\n\ninterface AppDynamicPaths {\n    readonly [indes: string]: (...params: any) => string,\n\n    toRoom: (addressId: number, buildingId: number, roomId: number) => string,\n    toBuilding: (addressId: number, buildingId: number) => string,\n    toAddress: (addressId: number) => string,\n    toUser: (userId: number) => string\n}\n\n\nconst paths: { [index: string]: string } = {\n    PUBLIC: '/public',\n    HOME: '/app',\n}\n\n// set of client application paths\n\npaths.LOGIN = paths.PUBLIC + '/login';\npaths.REGISTER = paths.PUBLIC + '/register';\npaths.ACTIVATE = paths.PUBLIC + '/activate';\npaths.REMIND_PASSWORD = paths.PUBLIC + '/passwd';\n\npaths.ACCESS = paths.HOME + '/accesses'\npaths.SETTINGS = paths.HOME + '/settings';\n\npaths.USERS = paths.HOME + '/users';\npaths.USER = paths.USERS + '/:userId';\npaths.MY_PROFILE = paths.USERS + '/me';\npaths.INFRASTRUCTURE = paths.HOME + '/infrastructure';\npaths.ADDRESS = paths.HOME + '/addresses/:addressId';\npaths.BUILDING = paths.ADDRESS + '/buildings/:buildingId';\npaths.ROOM = paths.BUILDING + '/rooms/:roomId';\npaths.LOGS = paths.HOME + '/logsexplorer';\n\nexport const dynamicPaths: AppDynamicPaths = {\n    toAddress: (addressId: number) => `/app/addresses/${addressId}`,\n    toBuilding: (addressId: number, buildingId: number) => dynamicPaths.toAddress(addressId) + `/buildings/${buildingId}`,\n    toRoom: (addressId: number, buildingId: number, roomId: number) => dynamicPaths.toBuilding(addressId, buildingId) + `/rooms/${roomId}`,\n    toUser: (userId: number) => paths.USERS + `/${userId}`\n}\n\nexport default paths as AppPathsInterface;","import { BuildingOrRoomChartsData, BuildingsOrRoomsChartsData, LogsChartsData, UserChartsData } from \"../models/Stats\";\nimport { AppURLParams } from \"./interfaces\";\nimport Service from \"./Service\";\n\n\nexport interface ChartsQueryData {\n    from: string,\n    to: string\n}\n\n\n\nexport type ChartsData = (\n    BuildingOrRoomChartsData |\n    BuildingsOrRoomsChartsData |\n    LogsChartsData |\n    UserChartsData\n);\n\n\nclass ChartService extends Service {\n\n    /**\n     * prepares path for charts service because different placement of resources charts\n     * @param urlParams \n     * @returns \n     */\n    protected preparePath(urlParams: AppURLParams): string {\n        let endp = '';\n        let url = window.location.toString();\n\n        const map = {\n            '/settings': '/requests',\n            '/users': '/users'\n        }\n\n        if (Object.keys(urlParams).length === 0) {\n            for (const [path, newPath] of Object.entries(map)) {\n                if (url.includes(path)) {\n                    endp = newPath;\n                }\n            }\n        } else if ('addressId' in urlParams) {\n            endp += `/addresses/${urlParams.addressId}/buildings`;\n\n            if ('buildingId' in urlParams) {\n                endp += `/${urlParams.buildingId}`;\n\n                if ('roomId' in urlParams) endp += `/rooms/${urlParams.roomId}`;\n            }\n        } else if ('userId' in urlParams) {\n            endp += `/users/${urlParams.userId}`\n        }\n        return endp;\n    }\n\n    public fetchData(urlParams: AppURLParams, queryParams: ChartsQueryData) {\n        return this.get(this.preparePath(urlParams) + '/stats', queryParams);\n    }\n\n\n\n}\n\nexport default new ChartService();","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useSession from \"../../../../../../auth/useSession\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport ChartService, { ChartsData, ChartsQueryData } from \"../../../../../../services/ChartService\";\nimport { AppURLParams } from \"../../../../../../services/interfaces\";\nimport Loading from \"../../../../../../shared/components/Loading\";\nimport useTrigger from \"../../../hooks/useTrigger\";\n\n\nexport const chartsContext: any = React.createContext(null);\n\n\n\ninterface ChartsContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\n\nexport default function ChartsContextProvider(props: ChartsContextProviderProps) {\n    const notify = useNotification();\n    const urlParams = useParams<AppURLParams>();\n    const refresh = useTrigger(60_000);\n\n    const { user } = useSession();\n    const { queryParams } = useQueryParams<ChartsQueryData>();\n\n    const [chartsData, setData] = React.useState<ChartsData | {}>({});\n\n\n    const load = React.useCallback(async () => {\n        let params = urlParams;\n        if ('userId' in urlParams && urlParams.userId === 'me') {\n            params = { userId: `${user?.id}` }\n        }\n\n        try {\n            const resp = await ChartService.fetchData(params, queryParams);\n            setData(resp.data as ChartsData);\n        } catch (err: any) {\n            notify(err.description, 'error');\n            setData({});\n        }\n    }, [\n        notify,\n        queryParams,\n        urlParams,\n        user?.id,\n    ]);\n\n    React.useEffect(() => {\n        load();\n    }, [\n        load,\n        refresh\n    ]);\n\n    if (Object.keys(chartsData).length === 0) return <Loading />;\n\n    return (\n        <chartsContext.Provider value={{\n            chartsData\n        }}>\n            {props.children}\n        </chartsContext.Provider>\n    );\n}","import React from \"react\";\nimport { chartsContext } from \"./ChartsContextProvider\";\nimport ChartsContextValue from \"./ChartsContextValue\";\n\n\nexport default function useCharts<T>() {\n    return React.useContext(chartsContext) as ChartsContextValue<T>;\n}","\nexport default interface QueryParamsContextValue<T> {\n    setQueryParams: React.Dispatch<React.SetStateAction<T>>\n    queryParams: T,\n}\n\n\nexport const queryParamsContextDefaults = {\n    queryParams: { q: 1 },\n    setQueryParams: (param: { q: number }) => { }\n}","import React from \"react\";\nimport StorageService from \"../../services/StorageService\";\nimport QueryParamsContextValue, { queryParamsContextDefaults } from \"./QueryParamsContextValue\";\n\n\nexport const queryParamsContext = React.createContext<QueryParamsContextValue<any>>(queryParamsContextDefaults);\n\n\nfunction initQueryParams<T>(keyName: string, defaultValue: T): T {\n    const confString = StorageService.read(keyName);\n    if (confString) {\n        return confString;\n    }\n    return defaultValue;\n};\n\n\ninterface QueryParamsContextProviderProps<T> {\n    default: T,\n    name: string,\n    children: React.ReactNode[] | React.ReactNode\n}\n\n\nexport default function QueryParamsContextProvider<T>(props: QueryParamsContextProviderProps<T>) {\n\n    const [queryParams, setQueryParams] = React.useState<T>(\n       ()=> initQueryParams<T>(props.name, props.default)\n    );\n\n    React.useEffect(() => {\n        StorageService.save(props.name, queryParams);\n    }, [queryParams, props.name]);\n\n    if(!queryParams) return null;\n\n    return (\n        <queryParamsContext.Provider value={{ queryParams, setQueryParams }}>\n            {props.children}\n        </queryParamsContext.Provider>\n    );\n}","import React from \"react\";\nimport useSession from \"../../auth/useSession\";\nimport AddressMap from \"../../models/AddressMap\";\nimport useTrigger from \"../../components/pages/protected/hooks/useTrigger\";\nimport AddressService from \"../../services/AddressService\";\nimport useNotification from \"../NotificationContext/useNotification\";\nimport ResourceMapContextValue from \"./ResourceMapContextValue\";\n\n\n\n\nexport const resourceMapContext: any = React.createContext(null);\n\n\ninterface ResourceMapContextProviderProps {\n    children?: React.ReactNode[] | React.ReactNode\n}\n\n\nexport default function ResourceMapContextProvider(props: ResourceMapContextProviderProps) {\n    const [resourceMap, setResources] = React.useState<AddressMap[]>([]);\n    const [loaded, setLoaded] = React.useState<boolean>(false);\n    const refresh = useTrigger(300_000);\n\n    const { user } = useSession();\n    const notify = useNotification();\n\n    const loadResourceMap = React.useCallback(async (): Promise<void> => {\n        try {\n            const resp = await AddressService.getResourcesMap();\n            resp?.data && setResources(resp.data as any);\n        } catch (err: any) {\n            notify(err.description, \"error\");\n        }\n    }, [notify]);\n\n    const reloadMap = (): void => {\n        loadResourceMap();\n    }\n\n    React.useEffect(() => {\n        user && loadResourceMap();\n        setLoaded(true);\n    }, [\n        user,\n        loadResourceMap,\n        refresh\n    ]);\n\n\n    const getRoomLink = React.useCallback((roomId: number): string => {\n        return '/app' + resourceMap.map(addr => addr.buildings.map(bld => bld.rooms))\n            .flat(2)\n            .find(item => item.id === roomId)\n            ?.href ?? '';\n    }, [resourceMap]);\n\n\n    const allRooms = React.useMemo(() => {\n        return resourceMap.map(addr => addr.buildings.map(bld => bld.rooms)).flat(2)\n    }, [resourceMap]);\n\n\n    const allBuildings = React.useMemo(() => {\n        return resourceMap.map(addr => addr.buildings.map(({ name, href, id }) => ({ name, href, id }))).flat(2);\n    }, [resourceMap]);\n\n\n    const allAddresses = React.useMemo(() => {\n        return resourceMap.map(({ name, href, id }) => ({ name, href, id }));\n    }, [resourceMap]);\n\n\n    const getBuildingLink = React.useCallback((buildingId: number): string => {\n        return '/app' + resourceMap.map(addr => addr.buildings)\n            .flat(2)\n            .find(item => item.id === buildingId)\n            ?.href ?? '';\n    }, [resourceMap]);\n\n\n    if (loaded === false) return null;\n\n    return (\n        <resourceMapContext.Provider value={{\n            resourceMap,\n            reloadMap,\n            allRooms,\n            getRoomLink,\n            getBuildingLink,\n            allAddresses,\n            allBuildings,\n        } as ResourceMapContextValue}>\n            {props.children}\n        </resourceMapContext.Provider>\n    );\n}","import * as React from 'react';\nimport Pagination from '@mui/material/Pagination';\nimport Stack from '@mui/material/Stack';\nimport { FormControl, InputLabel, MenuItem, Select, SelectChangeEvent } from '@mui/material';\nimport { useQueryParams } from '../../../../contexts/QueryParamsContext';\nimport { APIPagination } from '../../../../services/interfaces';\n\n\nexport default function ListPagination() {\n    const { queryParams, setQueryParams } = useQueryParams<APIPagination>();\n\n\n    const handlePageChange = React.useCallback((event: React.ChangeEvent<unknown>, value: number) => {\n        setQueryParams(old => ({\n            ...old,\n            currentPage: value\n        }));\n    }, [\n        setQueryParams\n    ]);\n\n    const handleCountChange = React.useCallback((event: SelectChangeEvent<number>, child: React.ReactNode) => {\n        setQueryParams(old => ({\n            ...old,\n            itemsOnPage: Number(event.target.value)\n        }));\n    }, [\n        setQueryParams\n    ]);\n\n    const onPageList = React.useMemo(() =>\n        [5, 10, 15, 20].map(num => <MenuItem key={num} value={num}>{num}</MenuItem>)\n        , []);\n\n    return (\n        <Stack spacing={2} sx={{\n            flexWrap: 'wrap',\n            flexDirection: 'row',\n            justifyContent: 'center',\n            alignContent: 'center',\n            alignItems: 'center'\n        }}>\n            <Pagination\n                count={queryParams.pagesCount}\n                size='small'\n                page={queryParams.currentPage}\n                onChange={handlePageChange}\n            />\n            <FormControl fullWidth sx={{ maxWidth: '100px' }}>\n                <InputLabel id=\"items-on-page-label\">Na stronie</InputLabel>\n                <Select\n                    size='small'\n                    labelId=\"items-on-page-label\"\n                    id=\"items-on-page\"\n                    label=\"Na stronie\"\n                    value={queryParams.itemsOnPage ?? 5}\n                    onChange={handleCountChange}\n                >\n                    {onPageList}\n                    <MenuItem value={10000}>wszystko</MenuItem>\n                </Select>\n            </FormControl>\n        </Stack>\n    );\n}\n","import InputBase from \"@mui/material/InputBase\";\nimport { SxProps } from \"@mui/system\";\nimport React from \"react\";\n\n\ninterface SimpleInputProps {\n    value: string,\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void,\n    label: string,\n    name: string,\n    sx?: SxProps\n}\n\nexport default function LazyInput({\n    value,\n    onChange,\n    label,\n    name,\n    sx,\n}: SimpleInputProps) {\n    const [trigger, setTrigger] = React.useState<any>();\n    const [str, setStr] = React.useState<string>(value);\n\n\n    const handleSearchFieldChange = React.useCallback((evt) => {\n        setStr(evt.target.value);\n        clearTimeout(trigger);\n\n        let timer = setTimeout(() => {\n            onChange(evt);\n        }, 1000);\n        setTrigger(timer);\n    }, [\n        trigger,\n        onChange,\n    ]);\n\n\n    return <InputBase\n        name={name}\n        value={str}\n        onChange={handleSearchFieldChange}\n        placeholder={label}\n        sx={{\n            width: '100%',\n            maxWidth: '600px',\n            p: 1,\n            bgcolor: 'background.default',\n            ...sx\n        }}\n        inputProps={{ 'aria-label': label }}\n    />;\n}","import { ResponseData } from \"./Service\";\n\n\n\n\nexport default class APIServiceError extends Error {\n\n    private data: ResponseData;\n\n    get code() {\n        return this.data.statusCode;\n    }\n\n    get description() {\n        return this.data.error?.description;\n    }\n\n    constructor(data: ResponseData) {\n        super(data.error?.description);\n        this.data = data;\n    }\n}\n","import { FormControl, FormControlLabel, Radio, RadioGroup } from \"@mui/material\";\nimport React from \"react\";\n\nexport interface SelectButtonInterface {\n    name: string, value: string\n}\n\nexport interface SelectButtonGroupProps {\n    onChange: (value: string) => void,\n    buttons: SelectButtonInterface[],\n    value: string\n}\n\nexport default function SelectButtonGroup({\n    onChange, buttons, value\n}: SelectButtonGroupProps) {\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n        onChange((event.target as HTMLInputElement).value);\n    }, [onChange]);\n\n\n    const renderedButtons = React.useMemo(() => {\n        return buttons.map(({ value, name }) =>\n            <FormControlLabel\n                key={name}\n                value={value}\n                control={<Radio />}\n                label={name}\n                aria-label={name}\n                title={name}\n            />\n        )\n    }, [buttons]);\n\n\n    return (\n        <FormControl component=\"fieldset\">\n            <RadioGroup\n                row\n                aria-label=\"wybór opcji\"\n                name=\"wybór zdefiniowanej opcji\"\n                value={value}\n                onChange={handleChange}\n            >\n                {renderedButtons}\n            </RadioGroup>\n        </FormControl>\n    );\n}","import { APIResponse } from \"./interfaces\";\nimport Service, { ServiceFormData } from \"./Service\";\n\n\n\nexport interface LoginFormData extends ServiceFormData {\n    email: string,\n    password: string\n}\n\n\n\nclass AuthService extends Service {\n\n    async login(data: LoginFormData): Promise<APIResponse> {\n        const response = await this.post(\n            '/users/auth',\n            {\n                'email': data.email,\n                'password': data.password\n            }\n        );\n\n        // set the token to local storage\n        if (response.data) {\n            localStorage.setItem(this._TOKEN_NAME, response.data.toString());\n        }\n\n        return response;\n    }\n\n    logout(): void {\n        localStorage.removeItem(this._TOKEN_NAME);\n    }\n\n    hasToken(): boolean {\n        return Boolean(localStorage.getItem(this._TOKEN_NAME));\n    }\n\n    /**\n     * checks if user session and token are valid\n     * @returns boolean\n     */\n    async hasSession(): Promise<boolean> {\n        try {\n            if (this.hasToken()) {\n                await this.get('/users/me'); // change to ping\n                return true\n            }\n        } catch (err: any) {\n            // localStorage.removeItem(this._TOKEN_NAME);\n            \n        }\n        return false\n    }\n}\n\nexport default new AuthService();","import React from 'react';\nimport Backdrop from \"@mui/material/Backdrop\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Typography from \"@mui/material/Typography\";\nimport { SxProps } from \"@mui/system\";\n\n\ninterface ContextLoaderProps {\n    open: boolean,\n    text?: string,\n    sx?: SxProps\n}\n\nexport default function LoadingView(props: ContextLoaderProps) {\n    return (\n        <Backdrop\n            sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                color: 'primary.main',\n                zIndex: (theme) => theme.zIndex.drawer + 1,\n                backgroundColor:'background.default',\n                ...props.sx\n            }}\n            open={props.open}\n        >\n            <Typography variant=\"h5\" pb={2}>\n                {props.text}\n            </Typography>\n            <CircularProgress color=\"inherit\" />\n        </Backdrop>\n    );\n}","import React, { createContext, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport useNotification from \"../contexts/NotificationContext/useNotification\";\n\nimport { SessionUser } from \"../models/User\";\n\nimport AuthService, { LoginFormData } from \"../services/AuthService\";\nimport ImageService from \"../services/ImageService\";\nimport LogService from \"../services/LogService\";\nimport MetadataService from \"../services/MetadataService\";\nimport ReservationService from \"../services/ReservationService\";\nimport StorageService from \"../services/StorageService\";\nimport UserService from \"../services/UserService\";\nimport LoadingView from \"../shared/components/LoadingView\";\nimport paths from \"../shared/path\";\nimport SessionValue from \"./SessionValue\";\n\n\ninterface SessionProviderProps {\n    children?: React.ReactNode\n}\n\n\nexport const sessionContext: any = createContext(null);\n\n\nexport default function SessionProvider({ children }: SessionProviderProps) {\n    const notify = useNotification();\n    const [loading, setLoading] = React.useState(true);\n    const [user, setUser] = useState<SessionUser | null>(null);\n\n\n    // config services which require identity data\n    const setUpUser = React.useCallback((user: SessionUser) => {\n        setUser(user);\n\n        StorageService.setIdentity(user.id);\n        MetadataService.userId = user.id;\n        MetadataService.metadata = user.metadata;\n        ReservationService.userId = user.id;\n        LogService.userId = user.id;\n        ImageService.userId = user.id;\n        UserService.userId = user.id;\n    }, []);\n\n    // chceck if user token aand session is valid\n    const checkIfUserHasSession = React.useCallback(async () => {\n        setLoading(true);\n        if (AuthService.hasToken()) {\n            try {\n                if (await AuthService.hasSession()) {\n                    const sessionUser = await UserService.getMe();\n                    setUpUser(sessionUser);\n                    notify(\"Witaj ponownie!\", 'info');\n                } else {\n                    notify('Twoja sesja wygasła', 'info', () => <Redirect to={paths.LOGIN} />);\n                }\n            } catch (err: any) {\n                notify(err.description, 'error', () => <Redirect to={paths.WELCOME} />);\n            }\n        }\n        setLoading(false)\n    }, [\n        notify,\n        setUpUser\n    ]);\n\n\n    React.useEffect(() => {\n        checkIfUserHasSession();\n        return () => { }\n    }, [checkIfUserHasSession]);\n\n\n    const login = React.useCallback(async (data: LoginFormData): Promise<void> => {\n        try {\n            await AuthService.login(data);\n            const sessionUser = await UserService.getMe();\n            setUpUser(sessionUser);\n\n            notify(\"Pomyślnie zalogowano!\", \"success\", () => <Redirect to={paths.HOME} />);\n\n        } catch (err: any) {\n            let message = err.description;\n\n            if (err.code === 404) message = \"Użytkownik nie istnieje\";\n\n            notify(message, \"error\");\n        }\n    }, [\n        notify,\n        setUpUser\n    ]);\n\n\n    const logout = React.useCallback(() => {\n        notify(\"Pomyślnie wylogowano!\", \"success\", () => <Redirect to={paths.PUBLIC} />);\n        setUser(null);\n        AuthService.logout();\n    }, [notify]);\n\n\n    return (\n        <>\n            <LoadingView\n                open={loading}\n                text=\"Ładowanie Sesji...\"\n            />\n            <sessionContext.Provider value={{ user, login, logout } as SessionValue}>\n                {!loading && children}\n            </sessionContext.Provider>\n        </>\n    );\n}\n","import { AlertProps } from \"@mui/material/Alert\";\n\nexport type NotificationContextValue = (message: string,\n    _severity: AlertProps[\"severity\"],\n    componentCallback?: () => null | React.ReactNode\n) => void;\n\n\nexport const NotificationContextDefault = (\n    message: string,\n    _severity: AlertProps[\"severity\"] = \"error\",\n    componentCallback: () => null | React.ReactNode = () => null\n) => { }","import { Alert, AlertProps, Snackbar, SnackbarCloseReason } from \"@mui/material\";\nimport React, { createContext } from \"react\";\nimport { NotificationContextValue, NotificationContextDefault } from \"./NotificationContextValue\";\n\n\n\ninterface NotificationContextProviderProps {\n    children?: React.ReactChild\n}\n\n\nexport const notificationContext: any = createContext<NotificationContextValue>(NotificationContextDefault);\n\n\nexport default function NotificationContextProvider({\n    children\n}: NotificationContextProviderProps) {\n    const [message, setMessage] = React.useState<string | null>();\n    const [open, setOpen] = React.useState<boolean>(false);\n    const [severity, setSeverity] = React.useState<AlertProps[\"severity\"]>(\"error\");\n    const [component, setComponent] = React.useState<React.ReactNode>();\n\n\n    const closeSnack = React.useCallback((\n        event?: Event | React.SyntheticEvent<any, Event>,\n        reason?: SnackbarCloseReason\n    ) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpen(false);\n        setMessage('');\n        setComponent(null);\n    }, []);\n\n\n    const setSnack = React.useCallback((\n        message: string,\n        _severity: AlertProps[\"severity\"] = \"error\",\n        componentCallback: () => null | React.ReactNode = () => null\n    ) => {\n        setSeverity(_severity);\n        setMessage(message);\n        setOpen(true);\n        setComponent(componentCallback());\n    }, []);\n\n\n    return (\n        <notificationContext.Provider value={setSnack}>\n            {children}\n\n            <Snackbar\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}\n                open={open} autoHideDuration={6000} onClose={closeSnack}>\n                <Alert onClose={closeSnack} severity={severity} sx={{ width: '100%' }}>\n                    {message}\n                </Alert>\n            </Snackbar>\n\n            {component}\n        </notificationContext.Provider>\n    );\n}","import React from 'react';\nimport Typography from \"@mui/material/Typography\";\n\n\ninterface TabHeadLineProps {\n    title: string | React.ReactNode,\n    subtitle?: string | React.ReactNode,\n}\n\n\nexport default function TabHeadLine(props: TabHeadLineProps) {\n    return (\n        <span>\n            <Typography variant='h4' component='h2' color='primary.dark'>\n                {props.title}\n            </Typography>\n            {\n                props.subtitle &&\n                <Typography variant=\"body1\" color='text.secondary' mt='5px'>\n                    {props.subtitle}\n                </Typography>\n            }\n        </span>\n    )\n}","import React from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Grid from \"@mui/material/Grid\";\nimport Stack from \"@mui/material/Stack\";\nimport Typography from \"@mui/material/Typography\";\nimport { AxisOptions } from \"react-charts\";\nimport { Chart as ReactChart } from 'react-charts'\nimport BarChartIcon from '@mui/icons-material/BarChart';\n\n\n\nexport const weekDays = [\n    'Niedziela',\n    'Poniedziałek',\n    'Wtorek',\n    'Środa',\n    'Czwartek',\n    'Piątek',\n    'Sobota',\n];\n\n\ninterface ChartSeries {\n    x: any\n    y: number,\n}\n\n\ninterface ChartProps<T> {\n    data: T[],\n    title: string,\n    fullWidth?: boolean,\n    resolveDay?: boolean\n    xKey: keyof T,\n    y: { label: string, key: keyof T }[]\n}\n\n\nexport default function Chart<DataType>(props: ChartProps<DataType>) {\n\n    const primaryAxis = React.useMemo((): AxisOptions<ChartSeries> => ({\n        getValue: item => props.resolveDay ? weekDays[Number(item.x)] : item.x,\n        min: 0\n    }), [props.resolveDay]);\n\n\n    const secondaryAxes = React.useMemo((): AxisOptions<ChartSeries>[] => [\n        {\n            getValue: item => item.y,\n            position: 'left',\n            elementType: 'bar',\n            minDomainLength: 15,\n            hardMin: 0,\n            scaleType: 'linear',\n            showDatumElements: true\n        }\n    ], []);\n\n\n    const data = React.useMemo(() => {\n        const obj: { label: string, data: ChartSeries[] }[] = props.y.map(({ label }) => ({ label: label, data: [] }))\n\n        props.data.forEach((item) => {\n            props.y.forEach(({ key }, index) => {\n                obj[index].data.push({\n                    x: item[props.xKey],\n                    y: Number(item[key]),\n                });\n            })\n        })\n        return obj;\n    }, [\n        props.y,\n        props.xKey,\n        props.data,\n    ]);\n\n\n    return (\n        <Grid item\n            xs={12}\n            lg={props.fullWidth ? 12 : 6}\n        >\n            <Stack direction='row' spacing={1} alignItems='center'>\n                <Typography variant=\"body2\" component='h4' color='text.secondary'>\n                    {props.title}\n                </Typography>\n                <BarChartIcon color='primary' />\n\n            </Stack>\n            {props.data.length === 0 ?\n                <Typography component='p' color='text.secondary'>\n                    Brak danych do nakreślenia wykresu\n                </Typography>\n                : <Box\n                    sx={{\n                        maxHeight: '400px',\n                        height: '40vh',\n                        minHeight: '300px',\n                        width: '100%',\n                    }}>\n\n                    <ReactChart\n                        options={{\n                            data,\n                            primaryAxis,\n                            secondaryAxes,\n                        }}\n                    />\n                </Box>}\n        </Grid>\n    )\n}","import React from 'react';\nimport { Page, Font, View, Document, StyleSheet, Text } from '@react-pdf/renderer';\n\n\n// Register Font\nFont.register({\n    family: \"Roboto\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/ink/3.1.10/fonts/Roboto/roboto-light-webfont.ttf\"\n});\n\n\nconst styles = StyleSheet.create({\n    page: {\n        fontSize: 11,\n        fontFamily: \"Roboto\",\n        flexDirection: 'column',\n        backgroundColor: '#ffffff'\n    },\n    section: {\n        marginBottom: '15px',\n        justifyContent: 'flex-start',\n        padding: '15px',\n    },\n    head: {\n        fontSize: '16px'\n    }\n});\n\n\ninterface PDFPageProps {\n    sections: React.ReactNode[],\n    subject: string\n};\n\n\nexport default function PDFPage(props: PDFPageProps) {\n    return (\n        <Document>\n            <Page size=\"A4\" style={styles.page} wrap>\n                <View style={styles.section}>\n                    <Text style={styles.head}>\n                        Rav System, dnia {(new Date()).toLocaleString('pl')}\n                    </Text>\n                    <Text style={styles.head}>\n                        {props.subject}\n                    </Text>\n                </View>\n                {\n                    props.sections.map((node, id) =>\n                        <View\n                            key={id}\n                            style={styles.section}\n                        >\n                            {node}\n                        </View>\n                    )\n                }\n            </Page>\n        </Document>\n    )\n}","import React from 'react';\nimport { Text, View, StyleSheet } from \"@react-pdf/renderer\";\n\n\nconst styles = StyleSheet.create({\n    title: {\n        padding: '5px',\n        marginBottom: '5px',\n        fontSize: '18px'\n    },\n    table: {\n\n    },\n    row: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between',\n        borderBottom: '1px solid black',\n    },\n    cell: {\n        padding: '5px',\n        width: '80px',\n        alignItems: 'center',\n    },\n    text: {\n        margin: '0px',\n        padding: '0px',\n        wordBreak: 'keep-all',\n        textAlign: 'center',\n    }\n});\n\n\ninterface RowProps {\n    cols: Array<(number | string)>\n}\n\nfunction Row({\n    cols\n}: RowProps) {\n    return (\n        <View style={styles.row}>\n            {\n                cols.map((col, id) => <Cell key={id} val={col} />)\n            }\n        </View>\n    )\n}\n\n\ninterface CellProps {\n    val: string | number\n}\n\nfunction Cell(props: CellProps) {\n    return (\n        <View style={styles.cell}>\n            <Text style={styles.text}>{props.val}</Text>\n        </View>\n    )\n}\n\n\ntype TRow = (number | string)[];\n\nexport interface TableProps {\n    title: string,\n    rows: TRow[]\n};\n\nfunction emptyMonthList(rows: TRow[]): boolean {\n    // if every item in list except first element is 0\n    return rows.every(row => row.slice(1).every(val => val === 0));\n};\n\nexport default function Table({\n    rows,\n    title\n}: TableProps) {\n    return (\n        <View>\n            <Text style={styles.title}>{title}</Text>\n            {\n                emptyMonthList(rows.slice(1)) ?\n                    <Text style={styles.text}>Brak danych w wybranym przedziale czasu</Text>\n                    : rows.map((row, id) => <Row key={id} cols={row} />)\n            }\n        </View>\n    )\n}\n","import { useContext } from \"react\";\nimport { notificationContext } from \"./NotificationContextProvider\";\nimport { NotificationContextValue } from \"./NotificationContextValue\";\n\n\n\nexport default function useNotification() {\n    return useContext(notificationContext) as NotificationContextValue;\n}","import { AppURLParams, PaginationQueryParams } from \"./interfaces\";\nimport Service from \"./Service\";\n\n\nexport interface LogsQueryParams extends PaginationQueryParams {\n    method?: \"GET\" | \"POST\" | \"PATCH\" | \"DELETE\",\n    userId?: string | number,\n    endpoint: string\n}\n\n\nclass LogService extends Service {\n\n    fetch(urlParams: AppURLParams, queryParams: LogsQueryParams) {\n        return this.get(\n            this.preparePath(urlParams) + '/requests',\n            queryParams\n        );\n    }\n\n    async getStats() {\n        return await this.get(`/requests/stats`);\n    }\n}\n\n\nexport default new LogService();","import React from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Box from '@mui/material/Box';\n\n\nexport default function Loading() {\n  return (\n    <Box sx={{\n      display: 'flex',\n      alignContent: 'center',\n      justifyContent: 'center',\n      alignItems: 'center',\n      minHeight: '200px',\n      height: '100%',\n    }}>\n      <CircularProgress />\n    </Box>\n  );\n}","import * as React from 'react';\nimport Backdrop from '@mui/material/Backdrop';\nimport Modal from '@mui/material/Modal';\nimport Fade from '@mui/material/Fade';\nimport { SxProps } from '@mui/system';\nimport { Paper } from '@mui/material';\n\n\ninterface GenericModalProps {\n  children: React.ReactNode | React.ReactNode[],\n  open: boolean,\n  sx?: SxProps,\n  onClose: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nfunction GenericModal({\n  children, open, sx, onClose\n}: GenericModalProps) {\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      closeAfterTransition\n      BackdropComponent={Backdrop}\n      BackdropProps={{\n        timeout: 500,\n      }}\n      sx={{\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'flex-start',\n        overflow: 'auto'\n      }}\n    >\n      <Fade in={open}>\n        <Paper sx={{\n          bgcolor: 'background.paper',\n          position: 'absolute',\n          width: '95%',\n          mt: '5vw',\n          maxWidth: '500px',\n          boxShadow: 24,\n          p: 3,\n          ...sx\n        }}>\n          {children}\n        </Paper>\n      </Fade>\n    </Modal >\n  );\n}\n\nexport default React.memo(GenericModal);","export {default as useResourceMap } from './useResourceMap';\nexport {default as ResourceMapContextProvider} from './ResourceMapContextProvider'","import { useContext } from \"react\";\nimport { sessionContext } from \"./sessionProvider\";\nimport SessionValue from \"./SessionValue\";\n\n\n\nexport default function useSession() {\n  return useContext(sessionContext) as SessionValue;\n}","\n\n\nexport function displayDate(dateString: string): string {\n    const date = new Date(dateString);\n    const format = new Intl.DateTimeFormat('pl-PL', {\n        dateStyle: \"medium\",\n        timeStyle: \"medium\"\n    })\n\n    return format.format(date);\n}\n\n\nexport const timeFormat = new Intl.DateTimeFormat('pl-PL', {\n    timeStyle: \"medium\"\n});\n\n\nexport function isDate(str: string | undefined): boolean {\n    if (!str) return false;\n\n    let date = new Date(str);\n    return Boolean(date.getDate())\n}\n\n// creates unique id from url\nexport function urlToId(): string {\n    let url = window.location.pathname.toLocaleLowerCase()\n    return url.replaceAll(/\\d/gi, '*')\n}\n\n\nexport function fromLocaleDateTimeString(dateTime: string) {\n    const [d, m, y, h, i, s] = dateTime.split(/\\.|:|,\\s/).map(item => Number(item));\n    \n    return new Date(y, m - 1, d, h, i, s);\n}","\n\nexport interface ButtonStatus {\n    success: boolean | null,\n    message: string,\n}\n\ninterface Action {\n    statusCode: number | string,\n    payload?: any\n}\n\nexport const initialResult = {\n    success: null,\n    message: ''\n}\n\nexport function statusReducer(state: ButtonStatus, action: Action): ButtonStatus {\n    switch (action.statusCode) {\n        case 200:\n        case 201:\n            return {\n                success: true,\n                message: \"Kod został wysłany na podany email\"\n            };\n        case 403:\n        case 401:\n        case 400:\n            return {\n                success: false,\n                message: action.payload\n            };\n        case 404:\n            return {\n                success: false,\n                message: \"Taki użytkownik nie istnieje.\"\n            };\n        case 422:\n            return {\n                success: false,\n                message: \"Adres email jest niepoprawny\"\n            };\n        case \"NO_ADDRESS\":\n            return {\n                success: false,\n                message: \"Musisz podać adres email\"\n            };\n        default:\n            return {\n                success: false,\n                message: action.payload\n            };\n            // throw new Error();\n    }\n}","import { Button, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\n\nimport SyncIcon from '@mui/icons-material/Sync';\nimport React from \"react\";\nimport UserService from \"../../../services/UserService\";\nimport { statusReducer } from \"./statusReducer\";\n\n\ninterface UniqueCodeButtonProps {\n    email: string,\n    text: string\n}\n\n\nfunction resolveColor(value: null | boolean): string {\n    if (value === null) return \"inherit\";\n    if (value === true) return \"green\";\n    return \"error\";\n}\n\n\nexport default function UniqueCodeButton(props: UniqueCodeButtonProps) {\n    const [result, dispatchResult] = React.useReducer(statusReducer, {\n        success: null,\n        message: props.text\n    });\n\n    const handleSubmit = async () => {\n        if (!props.email) {\n            dispatchResult({ statusCode: \"NO_ADDRESS\" });\n        }\n        try {\n            const resp = await UserService.generateKey(props.email);\n            dispatchResult(resp);\n\n        } catch (err: any) {\n            dispatchResult({\n                statusCode: err.code,\n                payload: err.description\n            });\n        }\n    };\n\n    return (\n        <Box\n            component=\"div\"\n            display=\"flex\"\n        >\n            <Button sx={{\n                bgcolor: \"primary.50\",\n                \"&:hover\": {\n                    bgcolor: \"primary.100\",\n                }\n            }}\n                onClick={handleSubmit} >\n                <SyncIcon fontSize=\"large\" />\n            </Button>\n\n            <Box\n                sx={{\n                    display: \"flex\",\n                    alignItems: 'center',\n                    ml: 1\n                }}\n            >\n                <Typography\n                    variant=\"body2\"\n                    component=\"p\"\n                    color={resolveColor(result.success)}\n                >\n                    {result.message}\n                </Typography>\n            </Box>\n\n        </Box>\n    );\n}","import { Typography } from \"@mui/material\";\nimport React from 'react';\n\n\ninterface StepProps {\n    title: string,\n    text?:string,\n    children: React.ReactNode | React.ReactNodeArray\n}\n\nexport default function FormStep(props: StepProps) {\n    return (\n        <>\n            <Typography variant=\"h5\" sx={{ mt: 3 }}>\n                {props.title}\n            </Typography>\n            <Typography variant=\"body2\" sx={{ mt: 1 }}>\n                {props.text}\n            </Typography>\n            {props.children}\n        </>\n    );\n}","import { Button, Grid, Link, TextField } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport UniqueCodeButton from \"../../../../shared/components/UniqueCodeButton\";\nimport React from \"react\";\nimport FormStep from \"./FormStep\";\nimport UserService, { ChangePasswordData } from \"../../../../services/UserService\";\nimport { Redirect } from 'react-router-dom';\nimport paths from \"../../../../shared/path\";\nimport useNotification from \"../../../../contexts/NotificationContext/useNotification\";\n\n\ninterface FormProps {\n    onSuccess?: () => void\n}\n\nexport default function Form(props: FormProps) {\n    const notify = useNotification();\n\n    const [data, setData] = React.useState<ChangePasswordData>({\n        email: localStorage.getItem('email')?.toString() ?? '',\n        newPassword: '',\n        code: ''\n    });\n\n\n    const onChange = React.useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n        setData(old => ({ ...old, [e.target.name]: e.target.value }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n\n        try {\n            await UserService.changePassword(data);\n\n            notify(\"Hasło zostało zmienione\", 'success',\n                () => {\n                    if (props.onSuccess) props.onSuccess();\n                    return <Redirect to={paths.LOGIN} />\n                }\n            );\n        } catch (err: any) {\n            let message = err.description;\n            if (err.code === 404) message = \"Taki użytkownik nie istnieje\";\n\n            notify(message, 'error');\n        }\n    }, [\n        data,\n        notify,\n        props\n    ]);\n\n    return (\n        <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n            <FormStep\n                title=\"1. Wygeneruj Kod\"\n                text=\"Podaj swój aders email i naciśnij przycisk by otrzymać email i kodem.\"\n            >\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    id=\"email\"\n                    label=\"Adres email\"\n                    name=\"email\"\n                    autoComplete=\"email\"\n                    autoFocus\n                    value={data.email}\n                    onChange={onChange}\n                />\n                <UniqueCodeButton\n                    text=\"Kliknij przycisk by otrzymać kod.\"\n                    email={data.email}\n                />\n            </FormStep>\n            <FormStep\n                title=\"2. Podaj nowe hasło i kod\"\n                text=\"Podaj nowe hasło i kod który otrzymałeś (jeśli nie, powtórz krok nr 1)\"\n            >\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    name=\"newPassword\"\n                    label=\"Hasło\"\n                    type=\"password\"\n                    id=\"password\"\n                    value={data.newPassword}\n                    onChange={onChange}\n                    autoComplete=\"current-password\"\n                />\n                <TextField\n                    margin=\"normal\"\n                    required\n                    fullWidth\n                    name=\"code\"\n                    label=\"Kod\"\n                    type=\"text\"\n                    id=\"code\"\n                    value={data.code}\n                    onChange={onChange}\n                    autoComplete=\"email-code\"\n                />\n            </FormStep>\n            <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                sx={{ mt: 3, mb: 2 }}\n            >\n                3. Zmień Hasło\n            </Button>\n            <Grid container justifyContent=\"flex-end\">\n                <Grid item>\n                    <Link href={paths.LOGIN}>\n                        Hasło zmienione? Zaloguj się!\n                    </Link>\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}","import Image from \"../models/Image\";\nimport APIServiceError from \"./APIServiceError\";\nimport { BuildingViewParams } from \"./BuildingService\";\nimport { APIResponse } from \"./interfaces\";\nimport { RoomViewParams } from \"./RoomService\";\nimport Service, { ResponseData } from \"./Service\";\nimport { UserViewParams } from \"./UserService\";\n\n\n\nclass ImageService extends Service {\n\n    private async sendImage(endpoint: string, formBody: FormData) {\n        const resp = await fetch(\n            this._BASE_URL + endpoint,\n            {\n                method: \"POST\",\n                cache: 'no-cache',\n                mode: 'cors',\n                body: formBody,\n                headers: {\n                    'Authorization': this.authToken,\n                }\n            }\n        );\n\n        const data = await resp.json() as ResponseData;\n        console.debug(data);\n\n        if (!resp.ok) {\n            console.error(`${resp.status}\\t${data?.error?.type}\\t${data?.error?.description}`);\n            throw new APIServiceError(data);\n        }\n\n        return data as APIResponse;\n    }\n\n    public getLink(image?: Image): string {\n        if (image?.url.includes('http')) return image.url;\n\n        return this._BASE_URL.slice(0, this._BASE_URL.length - 3) + image?.url;\n    }\n\n    public upload(\n        urlParams: (UserViewParams | BuildingViewParams | RoomViewParams),\n        image: Blob\n    ) {\n        const formData = new FormData();\n        formData.append(\n            'file',\n            image\n        );\n        return this.sendImage(this.preparePath(urlParams) + '/image', formData);\n    }\n\n    public remove(urlParams: (UserViewParams | BuildingViewParams | RoomViewParams)) {\n        return this.delete(this.preparePath(urlParams) + '/image');\n    }\n}\n\n\nexport default new ImageService();","import Grid from \"@mui/material/Grid\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport SaveIcon from '@mui/icons-material/Save';\nimport Stack from \"@mui/material/Stack\";\nimport Button from \"@mui/material/Button\";\n\n\n\ninterface FormGridContainerProps {\n    title: string,\n    subtitle?: string,\n    onSubmit: () => void,\n    onCancel: () => void,\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\nexport default function FormGridContainer({\n    title,\n    subtitle,\n    onSubmit,\n    onCancel,\n    children,\n}: FormGridContainerProps) {\n\n\n    const handleSubmit = React.useCallback((event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        onSubmit();\n    }, [\n        onSubmit\n    ]);\n\n\n    return (\n        <Stack rowGap={3}>\n            <span>\n                <Typography variant=\"h5\" color='primary.dark'>\n                    {title}\n                </Typography>\n\n                {subtitle && <Typography variant=\"body2\" color='text.secondary' mt='5px'>\n                    {subtitle}\n                </Typography>}\n            </span>\n\n            <Grid container spacing={2} component=\"form\" onSubmit={handleSubmit} >\n                {children}\n                <Grid item xs={12}>\n                    <Stack direction=\"row\" justifyContent=\"space-around\" mt={1.5}>\n                        <Button\n                            aria-label=\"Zamknij\"\n                            title='Zamknij'\n                            startIcon={<CancelIcon />}\n                            onClick={onCancel}\n                        >\n                            Zamknij\n                        </Button>\n                        <Button\n                            aria-label=\"Zatwierdź\"\n                            title='Zatwierdź'\n                            startIcon={<SaveIcon color='inherit' />}\n                            type=\"submit\"\n                            color=\"success\"\n                        >\n                            Zatwierdź\n                        </Button>\n                    </Stack>\n                </Grid>\n            </Grid>\n        </Stack>\n    );\n}","import React from \"react\";\nimport { queryParamsContext } from \"./QueryParamsContextProvider\";\nimport QueryParamsContextValue from \"./QueryParamsContextValue\";\n\n\nexport default function useQueryParams<T>() {\n    return React.useContext(queryParamsContext) as QueryParamsContextValue<T>;\n}","import APIServiceError from \"./APIServiceError\";\nimport { APIResponse, AppURLParams } from \"./interfaces\";\n\n\nexport interface ServiceFormData {\n    [index: string]: string | number | boolean | undefined | object\n}\n\n\n\n\ninterface FetchData {\n    endpoint: string\n    method: string,\n    body?: object\n}\n\ninterface ErrorData {\n    type: string,\n    description: string\n}\n\nexport interface ResponseData {\n    statusCode: number,\n    data?: any,\n    error?: ErrorData\n}\n\n\n\nexport interface StatusMessages {\n    [index: number]: string\n}\n\n\nexport default abstract class Service {\n\n    _BASE_URL: string = process.env.REACT_APP_API_URL as string; // api url from env\n    _TOKEN_NAME: string = 'auth_token'; // local storage token variable name\n    _userId: number = -1;\n\n    public set userId(value: number) {\n        this._userId = value\n    }\n\n    public get userId(): number {\n        if (this._userId === -1)\n            throw Error('user id was not set');\n\n        return this._userId;\n    }\n\n    /**\n     * gets auth token\n     */\n    protected get authToken() {\n        return 'Bearer ' + window.localStorage.getItem(this._TOKEN_NAME);\n    }\n \n    /**\n     * fetch wrap function to implement unified respoonse and handle authorization header\n     * @param fetchObject \n     * @returns \n     */\n    private async _fetch(fetchObject: FetchData): Promise<APIResponse> {\n        const response = await fetch(\n            this._BASE_URL + fetchObject.endpoint,\n            {\n                method: fetchObject.method,\n                cache: 'no-cache',\n                mode: 'cors',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': this.authToken,\n                },\n                body: JSON.stringify(fetchObject.body)\n            }\n        );\n        const data = await response.json() as ResponseData;\n\n        if (process.env.NODE_ENV !== 'production') console.debug(data);\n\n        // if user is not authenticated - \n        // redirect to let sessionContext to resolve redirections\n        if (response.status === 401 && !fetchObject.endpoint.match('/auth|me|activate')) {\n            window.location.reload();\n        }\n\n        if (!response.ok) {\n            if (process.env.NODE_ENV !== 'production') console.error(`${response.status} ${data?.error?.type} ${data?.error?.description}`);\n            throw new APIServiceError(data);\n        }\n\n        return data as APIResponse;\n    }\n\n    /**\n     * parsing path with current url params\n     * @param urlParams \n     * @returns \n     */\n    protected preparePath(urlParams: AppURLParams): string {\n        let endp = '';\n        let url = window.location.toString();\n        const map = {\n            '/accesses': '/accesses',\n            '/settings': '/configurations',\n            '/users': '/users'\n        }\n\n        if (Object.keys(urlParams).length === 0) {\n            for (const [path, newPath] of Object.entries(map)) {\n                if (url.includes(path)) {\n                    endp = newPath;\n                }\n            }\n        } else if ('addressId' in urlParams) {\n            endp += `/addresses/${urlParams.addressId}`;\n\n            if ('buildingId' in urlParams) {\n                endp += `/buildings/${urlParams.buildingId}`;\n\n                if ('roomId' in urlParams) endp += `/rooms/${urlParams.roomId}`;\n            }\n        } else if ('userId' in urlParams) {\n            if (urlParams.userId === 'me') {\n                endp += '/users/' + this.userId.toString();\n            } else {\n                endp += '/users/' + urlParams.userId;\n            }\n        }\n        return endp;\n    }\n\n    /**\n     * HTTP GET\n     * @param endpoint \n     * @param query \n     * @returns \n     */\n    protected get(endpoint: string, query = {}) {\n        return this._fetch({\n            method: 'GET',\n            endpoint: endpoint + '?' + new URLSearchParams(query).toString()\n        });\n    }\n\n    /**\n     * HTTP POST\n     * @param endpoint \n     * @param body \n     * @returns \n     */\n    protected post(endpoint: string, body: object) {\n        return this._fetch({\n            method: 'POST',\n            endpoint: endpoint,\n            body: body\n        });\n    }\n\n    /**\n     * HTTP PATCH\n     * @param endpoint \n     * @param body \n     * @returns \n     */\n    protected patch(endpoint: string, body: object) {\n        if (Object.keys(body).length === 0) return;\n\n        return this._fetch({\n            method: 'PATCH',\n            endpoint: endpoint,\n            body: body\n        });\n    }\n\n    /**\n     * HTTP DELETE\n     * @param endpoint \n     * @returns \n     */\n    protected delete(endpoint: string) {\n        return this._fetch({\n            method: 'DELETE',\n            endpoint: endpoint\n        });\n    }\n}","import { SessionUser } from \"../models/User\";\nimport { PaginationQueryParams } from \"./interfaces\";\nimport Service, { ServiceFormData } from \"./Service\";\n\n\nexport interface RegisterUserData extends ServiceFormData {\n    email: string,\n    password: string,\n    name: string,\n    surname: string\n}\n\nexport interface ActivationData extends ServiceFormData {\n    email: string,\n    password: string,\n    code: string,\n}\n\nexport interface ChangePasswordData extends ServiceFormData {\n    code: string,\n    newPassword: string,\n    email: string\n}\n\nexport interface UpdateUserParams extends ServiceFormData {\n    name?: string,\n    surname?: string,\n    metadata?: object\n}\n\nexport interface UserViewParams {\n    userId: string;\n}\n\nexport interface UserQueryParams extends PaginationQueryParams {\n    [index: string]: any,\n    accessId?: number,\n    deleted?: boolean,\n    search?: string,\n    activated?: boolean,\n}\n\nexport enum RegisterState {\n    ACTIVATION_NEEDED,\n    NO_ACTIVATION_NEEDED\n}\n\n\nclass UserService extends Service {\n    _path = '/users';\n\n    get path(): string {\n        return this._path;\n    }\n\n    public setPath(urlParams: UserViewParams) {\n        this._path = this.preparePath(urlParams);\n    }\n\n    public getCurrentOne() {\n        return this.get(this.path);\n    }\n\n    public async getMe() {\n        const resp = await this.get('/users/me');\n        return resp.data as SessionUser;\n    }\n\n    public getUsers(data?: UserQueryParams) {\n        return this.get('/users', data);\n    }\n\n    public async register(data: RegisterUserData) {\n        const message = (await this.post('/users', data)).data as string;\n        if(message.search(/aktywacji|mailowy/) > 0){\n            return RegisterState.NO_ACTIVATION_NEEDED\n        }\n        return RegisterState.ACTIVATION_NEEDED\n    }\n\n    public activate(data: ActivationData) {\n        return this.patch('/users/activate', data);\n    }\n\n    public generateKey(email: string) {\n        return this.post('/users/key', {\n            email: email\n        });\n    }\n\n    public updateAccess(userId: number, accessId: number) {\n        return this.patch(`/users/${userId}/access`, {\n            accessId: accessId\n        })\n    }\n\n    public update(data: UpdateUserParams) {\n        return this.patch(this.path, data);\n    }\n\n    public remove() {\n        return this.delete(this.path);\n    }\n\n    public changePassword(data: ChangePasswordData) {\n        return this.patch('/users/password', data);\n    }\n}\n\n\nexport default new UserService();","import React from \"react\";\n\n\ninterface TutorialProviderProps {\n    children: React.ReactNode\n}\n\ninterface TipItem {\n    id: number,\n    trigger: () => void,\n    priority: number\n}\n\nexport type registerTipType = (callback: () => void, priority?: number) => () => void\n\nexport const tutorialContext: any = React.createContext(null);\n\n\nexport default function TutorialContextProvider({ children }: TutorialProviderProps) {\n    const [registered, setRegistered] = React.useState<TipItem[]>([]);\n    const [startUp, setStartUp] = React.useState<boolean>(true);\n\n    React.useEffect(() => {\n        if (startUp) {\n            setTimeout(() => {\n                if (registered.length > 0) {\n                    registered.shift()?.trigger();\n                    setStartUp(false);\n                }\n            }, 1000);\n        }\n\n    }, [registered, startUp]);\n\n\n    const registerTip: registerTipType = React.useCallback((callback: () => void, priority: number = 1) => {\n        const key = Date.now();\n\n        setRegistered(old => {\n            if (!old.find(({ id }) => id === key)) {\n\n                old.push({ trigger: callback, priority: priority, id: key });\n                return Object.assign([], old.sort((a, b) => b.priority - a.priority));\n            }\n            return old;\n        });\n\n        return () => {\n            setRegistered(old => {\n                if (old.length === 0) {\n                    setStartUp(true);\n                } else {\n                    old.shift()?.trigger();\n                }\n\n                return Object.assign([], old);\n            });\n        };\n    }, [\n        setStartUp,\n        setRegistered\n    ]);\n\n    return (\n        <tutorialContext.Provider value={registerTip}>\n            {children}\n        </tutorialContext.Provider>\n    );\n}\n\n","import { Popover, Stack, Button, Typography } from \"@mui/material\";\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward';\nimport React from \"react\";\nimport StorageService from \"../../../../../services/StorageService\";\nimport useTutorial from \"./TutorialContext/useTutorial\";\n\n\ninterface TipChild {\n    children: React.ReactNode | React.ReactNode[],\n    text: string,\n    priority?: number\n}\n\n\nexport default function Tip(props: TipChild) {\n    const holder = React.useRef(null);\n\n    const registerTip = useTutorial();\n    const [open, setOpen] = React.useState<boolean>(false);\n    const [disposeFunc, setDispose] = React.useState<() => void>(() => () => { });\n\n    const observerRef = React.useRef<any>(null);\n    const [isOnScreen, setIsOnScreen] = React.useState(false);\n\n\n    React.useEffect(() => {\n        observerRef.current = new IntersectionObserver(([entry]) =>\n            setIsOnScreen(entry.isIntersecting)\n        );\n    }, [observerRef]);\n\n\n    React.useEffect(() => {\n        observerRef.current.observe(holder.current);\n\n        return () => {\n            observerRef.current.disconnect();\n        };\n    }, [holder, observerRef]);\n\n\n    React.useEffect(() => {\n        const key = props.text.slice(0, 15);\n\n        if (!StorageService.read(key) && isOnScreen) {\n            const callback = registerTip(\n                () => setTimeout(() => setOpen(true), 300),\n                props.priority ?? 1\n            );\n            setDispose(() => callback);\n            StorageService.save(key, true);\n        }\n    }, [\n        props.text,\n        props.priority,\n        registerTip,\n        isOnScreen\n    ]);\n\n\n    const handleClose = React.useCallback(() => {\n        disposeFunc();\n        setOpen(false);\n    }, [disposeFunc]);\n\n    return (\n        <span ref={holder}>\n            {\n                <Popover\n                    open={open}\n                    anchorEl={holder.current}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'left',\n                    }}\n                // sx={{\n                //     bgcolor: '#44444466',\n                //     transition: '0.5s'\n                // }}\n                // transformOrigin={{\n                //     vertical: 'bottom',\n                //     horizontal: 'left',\n                // }}\n                >\n                    <Stack direction='row'\n                        alignItems='center'\n                        justifyContent='space-between'\n                        sx={{\n                            px: 1,\n                            bgcolor: 'warning.light'\n                        }}\n                    >\n                        <ArrowUpwardIcon color='primary' />\n                        <Button onClick={handleClose} color='primary'>OK</Button>\n                    </Stack>\n                    <Typography sx={{ p: 1, maxWidth: '220px',bgcolor: 'warning.light' }}>\n                        {props.text}\n                    </Typography>\n                </Popover>\n            }\n            {props.children}\n        </span >\n    );\n}","import React from \"react\";\nimport { registerTipType, tutorialContext } from \"./TutorialContextProvider\";\n\n\nexport default function useTutorial() {\n    return React.useContext(tutorialContext) as registerTipType\n}","import Metadata, { FavouriteBuilding, FavouriteRoom } from \"../models/Metadata\";\nimport StorageService from \"./StorageService\";\nimport UserService from \"./UserService\";\n\n\n\n/**\n * handles synchronization with user's metadata field and local storage\n * favourites and notes\n */\nclass MetadataService {\n    private STORAGE_NAME = 'user-metadata';\n\n    private data: Metadata;\n    private _userId: number | undefined;\n\n\n    constructor() {\n        this.data = {\n            notes: '',\n            favourites: []\n        };\n    }\n\n    private async save(): Promise<void> {\n        StorageService.save(this.STORAGE_NAME, this.data);\n\n        if (!this._userId) return;\n\n        UserService.setPath({ userId: this._userId?.toString() });\n        try {\n            await UserService.update({\n                metadata: this.data\n            });\n        } catch (err: any) { console.error(err) }\n    }\n\n    public set userId(id: number) {\n        this._userId = id;\n        this.data = StorageService.read(this.STORAGE_NAME) ?? {\n            notes: '',\n            favourites: []\n        };\n    }\n\n    public set metadata(value: Metadata) {\n        this.data = {\n            ...this.data,\n            ...value\n        };\n    }\n\n    public get notes() {\n        return this.data.notes ?? '';\n    }\n\n    public get favourites() {\n        return this.data.favourites ?? [];\n    }\n\n    public set notes(value: string) {\n        this.data.notes = value;\n        this.save();\n    }\n\n    public addFavourite(item: FavouriteBuilding | FavouriteRoom): void {\n        this.data.favourites?.push(item);\n        this.data.favourites?.sort((a, b) => {\n            if (a.type >= b.type) {\n                if (a.type === b.type) {\n                    return a.name > b.name ? 1 : -1;\n                }\n                return 1;\n            }\n            return -1;\n        });\n        console.log(this.data);\n        this.save();\n    }\n\n    public isFavourite(item: FavouriteBuilding | FavouriteRoom): boolean {\n        return Boolean(this.data.favourites?.find(({ id, type }) => (type === item.type && id === item.id)));\n    }\n\n    public removeFavourite(item: FavouriteBuilding | FavouriteRoom): void {\n        this.data.favourites = this.data.favourites?.filter(({ id, type }) => id + type !== item.id + item.type)\n        this.save();\n    }\n}\n\n\nexport default new MetadataService();","\n\n/**\n * provides unified way to work with local storage in app\n */\nclass StorageService {\n\n    private id: string = '';\n\n    public setIdentity(value: string | number) {\n        this.id = value.toString();\n    }\n\n    /**\n     * encodes name of the variable\n     * @param name \n     * @returns \n     */\n    private codeName(name: string) {\n        return btoa(encodeURI(name + this.id));\n    }\n\n    public save(name: string, value: any): void {\n        const str = JSON.stringify(value);\n        localStorage.setItem(this.codeName(name), str);\n    }\n\n    public delete(name: string):void {\n        localStorage.removeItem(this.codeName(name));\n    }\n\n    /**\n     * read params from local storage\n     * @param name \n     * @returns \n     */\n    public read(name: string) {\n        const str = localStorage.getItem(this.codeName(name));\n        if (!str) return null;\n\n        try {\n            return JSON.parse(str);\n        } catch {\n            return null;\n        }\n    }\n\n}\n\nexport default new StorageService();","import * as React from 'react';\nimport {\n    Link as RouterLink,\n    LinkProps as RouterLinkProps,\n} from 'react-router-dom';\n\n/**\n * custom link for react app to behavior like react link and look like material UI one\n */\nconst LinkBehavior = React.forwardRef<\n    any,\n    Omit<RouterLinkProps, 'to'> & { href: RouterLinkProps['to'] }\n>((props, ref) => {\n    const { href, ...other } = props;\n    // Map href (MUI) -> to (react-router)\n    return <RouterLink data-testid=\"custom-link\" ref={ref} to={href} {...other} />;\n});\n\n\nexport default LinkBehavior; ","import { indigo } from '@mui/material/colors';\nimport { darkScrollbar as scrollbar } from '@mui/material';\nimport { LinkProps } from '@mui/material/Link';\nimport { createTheme } from '@mui/material/styles';\nimport LinkBehavior from './LinkBehavior';\n\n\nconst light = {\n  track: '#f5f5f5',\n  thumb: '#adadad',\n  active: '#959595'\n};\n\n\n\nconst theme = createTheme({\n  palette: {\n    primary: indigo,\n    secondary: {\n      dark: \"#f5f5f5\",\n      main: \"#304ffe\",\n      light: \"#fff\"\n    },\n    background: {\n      default: '#f3f3f3',\n      paper: '#fff'\n    }\n  },\n  // spacing: 10,\n  shape: {\n    borderRadius: 4\n  },\n  components: {\n    MuiCssBaseline: {\n      styleOverrides: {\n        body: scrollbar(light),\n      },\n    },\n    MuiTextField: {\n      defaultProps: {\n        size: 'medium',\n        variant: 'outlined',\n      }\n    },\n    MuiSelect: {\n      defaultProps: {\n        size: 'medium'\n      }\n    },\n    MuiButton: {\n      defaultProps: {\n        sx: {\n          borderRadius: ({ shape }) => Number(shape.borderRadius) / 2\n        }\n      },\n    },\n    MuiLink: {\n      defaultProps: {\n        component: LinkBehavior,\n      } as LinkProps,\n    },\n    MuiButtonBase: {\n      defaultProps: {\n        LinkComponent: LinkBehavior,\n      },\n    },\n    MuiSvgIcon: {\n      defaultProps: {\n        color: 'inherit',\n      }\n    },\n    MuiIconButton: {\n      defaultProps: {\n        color: 'primary'\n      }\n    }\n  },\n  // typography:{\n\n  // }\n})\n\nexport default theme;","import React from 'react';\nimport { ThemeProvider } from '@mui/material/styles';\n\n\nimport theme from './theme';\n\n\ninterface ThemeProps {\n    children: React.ReactNode\n}\n\n\nexport default function Theme(props: ThemeProps) {\n    return (\n        <ThemeProvider theme={theme}>\n            {props.children}\n        </ThemeProvider>\n    );\n}","import React from 'react';\nimport Loading from '../../../../shared/components/Loading';\n\nconst LazyAccessPage = React.lazy(() => import('./AccessPage'));\n\n\nexport default function AccessPage() {\n    return <React.Suspense fallback={<Loading />}>\n        <LazyAccessPage />\n    </React.Suspense>\n}\n","import React from \"react\";\nimport { reservationsContext } from \"./ReservationsContextProvider\";\nimport ReservationsContextValue from \"./ReservationsContextValue\";\n\nexport default function useReservations() {\n    return React.useContext(reservationsContext) as ReservationsContextValue;\n}","import MobileDateTimePicker from \"@mui/lab/MobileDateTimePicker\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\n\n\ninterface Props {\n    value: Date,\n    label: string,\n    onChange: (value: Date) => void,\n}\n\nexport default function DateTimePicker({\n    value,\n    onChange,\n    label,\n}: Props) {\n\n    const handleChange = React.useCallback((newValue: Date | null) => {\n        if (newValue) {\n            onChange(newValue);\n        }\n    }, [\n        onChange\n    ]);\n\n    return (\n        <MobileDateTimePicker\n            minDate={new Date()}\n            label={label}\n            value={value}\n            onChange={handleChange}\n            renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n        />\n    )\n}\n\n","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../../components/GenericModal\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport { UpdateReservationData } from \"../../../../../../services/ReservationService\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport { useResourceMap } from \"../../../../../../contexts/ResourceMapContext\";\nimport React from \"react\";\nimport useReservations from \"../../GenericReservationsTab/ReservationsContext/useReservations\";\nimport FormGridContainer from \"../../../../../../shared/components/FormGridContainer\";\nimport DateTimePicker from \"../../DateTimePicker\";\nimport { fromLocaleDateTimeString } from \"../../../../../../shared/utils\";\n\n\ninterface EditModalFormProps {\n    open: boolean,\n    onClose: () => void,\n    reservation: Reservation\n}\n\nexport default function EditModalForm(props: EditModalFormProps) {\n    const { updateReservation } = useReservations()\n    const { allRooms } = useResourceMap();\n\n    const [data, setData] = React.useState<UpdateReservationData>({});\n\n\n    const closeForm = React.useCallback(() => {\n        props.onClose();\n        setData({});\n    }, [\n        props\n    ]);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateReservation(props.reservation.id, data)) {\n            closeForm();\n            setData({});\n        }\n\n    }, [\n        props,\n        data,\n        closeForm,\n        updateReservation,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleDateChange = React.useCallback((name: keyof UpdateReservationData, value: Date) => {\n        value && setData(old => ({\n            ...old,\n            [name]: value.toLocaleString('pl')\n        }));\n    }, []);\n\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={closeForm}\n            aria-label=\"Okno do edycji rezerwacji\"\n        >\n            <FormGridContainer\n                title='Edycja rezerwacji'\n                subtitle=\"Zmień właściwości pokoju i zatwierdź zmiany.\"\n                onSubmit={handleSubmit}\n                onCancel={props.onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Tytuł\"\n                        multiline\n                        maxRows={4}\n                        name='title'\n                        value={data.title ?? props.reservation.title}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Opis\"\n                        multiline\n                        maxRows={20}\n                        name='description'\n                        value={data.description ?? props.reservation.description}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={6}>\n                    <DateTimePicker\n                        value={\n                            data.plannedStart ?\n                                fromLocaleDateTimeString(data.plannedStart) :\n                                new Date(props.reservation.plannedStart)\n                        }\n                        label=\"Początek\"\n                        onChange={(value) => handleDateChange('plannedStart', value)}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={6}>\n                    <DateTimePicker\n                        value={\n                            data.plannedEnd ?\n                                fromLocaleDateTimeString(data.plannedEnd) :\n                                new Date(props.reservation.plannedEnd)\n                        }\n                        label=\"Koniec\"\n                        onChange={(value) => handleDateChange('plannedEnd', value)}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <InputLabel id=\"wybierz-salę\">Sala</InputLabel>\n                        <Select\n                            required\n                            labelId=\"wybierz-salę\"\n                            name=\"roomId\"\n                            value={data.roomId ?? props.reservation.room.id}\n                            label=\"Sala\"\n                            onChange={(evt: any) => setData(old => ({ ...old, roomId: Number(evt.target.value) }))}\n                        >\n                            {allRooms.map(({ name, id }) => <MenuItem key={name} value={id} >Sala &nbsp;{name} </MenuItem>)}\n                        </Select>\n                    </FormControl>\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../../components/GenericModal\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Stack from \"@mui/material/Stack\";\nimport Button from \"@mui/material/Button\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useResourceMap } from \"../../../../../../contexts/ResourceMapContext\";\nimport React from \"react\";\nimport useReservations from \"../../GenericReservationsTab/ReservationsContext/useReservations\";\nimport Box from \"@mui/material/Box\";\nimport Typography from \"@mui/material/Typography\";\nimport { IconButton } from \"@mui/material\";\nimport { CreateReservationData } from \"../../../../../../services/ReservationService\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport FormGridContainer from \"../../../../../../shared/components/FormGridContainer\";\nimport DateTimePicker from \"../../DateTimePicker\";\n\n\ninterface CopyModalFormProps {\n    open: boolean,\n    onClose: () => void,\n    reservation: Reservation\n}\n\ninterface DateTimeSlot {\n    color: string | null,\n    from: Date,\n    to: Date,\n}\n\ninterface CopyReservationData {\n    title: string,\n    description: string,\n    roomId?: number\n}\n\n\nexport default function CopyModalForm(props: CopyModalFormProps) {\n    const { createReservation } = useReservations()\n    const { allRooms } = useResourceMap();\n    const notify = useNotification();\n\n    const [dates, setDates] = React.useState<DateTimeSlot>({\n        color: '',\n        from: new Date(props.reservation.plannedStart),\n        to: new Date(props.reservation.plannedEnd),\n    });\n\n    const [copyDates, setCopyDates] = React.useState<DateTimeSlot[]>([]);\n    const [data, setData] = React.useState<CopyReservationData>({\n        title: props.reservation.title,\n        description: props.reservation.description,\n        roomId: props.reservation.room.id ?? 0\n    });\n\n\n    const closeForm = React.useCallback(() => {\n        props.onClose();\n        // setCopyDates([]);\n    }, [props]);\n\n\n    const handleSubmit = React.useCallback(async () => {\n\n        const createCalls = copyDates.map(async (date) => {\n            const success = await createReservation({\n                ...data,\n                plannedStart: date.from.toLocaleString('pl'),\n                plannedEnd: date.to.toLocaleString('pl')\n            } as CreateReservationData);\n            date.color = success ? 'green' : 'red';\n            return date;\n        })\n        const processed = await Promise.all(createCalls);\n        setCopyDates(processed);\n\n    }, [data, copyDates, createReservation]);\n\n\n    const handleDeleteCopyDate = React.useCallback((index: number) => {\n        setCopyDates(old => {\n            old.splice(index, 1);\n            return Object.assign([], old);\n        });\n    }, []);\n\n\n    const setDate = React.useCallback((key: keyof DateTimeSlot, dateTime: Date) => {\n        setDates(old => ({\n            ...old,\n            [key]: dateTime,\n        }));\n    }, []);\n\n\n    const handleAddDate = React.useCallback(() => {\n        if (copyDates.find(({ from, to }) => from === dates.from || to === dates.to)) {\n            notify(\"Daty powinny się różnić\", 'error');\n            return;\n        };\n\n        setCopyDates(old => {\n            old.push({\n                ...dates,\n                color: ''\n            });\n            return Object.assign([], old);\n        });\n    }, [\n        dates,\n        notify,\n        copyDates,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={closeForm}\n            aria-label=\"Okno do kopiowania rezerwacji\"\n        >\n\n            <FormGridContainer\n                title='Kopiowanie rezerwacji'\n                subtitle=\"Skopiuj rezerwację dla wybranych przez siebie nowych dat.\"\n                onSubmit={handleSubmit}\n                onCancel={props.onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Tytuł\"\n                        multiline\n                        maxRows={4}\n                        name='title'\n                        value={data.title ?? props.reservation.title}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"outlined-multiline-flexible\"\n                        label=\"Opis\"\n                        multiline\n                        maxRows={20}\n                        name='description'\n                        value={data.description ?? props.reservation.description}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={5}>\n                    <DateTimePicker\n                        label=\"Początek\"\n                        value={dates.from}\n                        onChange={(value) => setDate('from', value)}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={5}>\n                    <DateTimePicker\n                        label=\"Koniec\"\n                        value={dates.to}\n                        onChange={(value) => setDate('to', value)}\n                    />\n                </Grid>\n\n                <Grid item xs={12} sm={2}>\n                    <Button\n                        size='large'\n                        sx={{\n                            height: '100%',\n                            width: '100%'\n                        }}\n                        variant='outlined'\n                        onClick={handleAddDate}\n                    >\n                        Dodaj\n                    </Button>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <Stack\n                        spacing={1}\n                        sx={{\n                            border: '1px solid',\n                            borderColor: 'divider',\n                            borderRadius: 1,\n                            padding: 0.5,\n                            bgcolor: 'background.default',\n                            maxHeight: '200px',\n                            overflow: 'auto',\n                        }}>\n                        {copyDates.length === 0 && <Typography textAlign='center' component='p'>\n                            Brak dat\n                        </Typography>}\n                        {\n                            copyDates.map(({ color, from, to }, index) =>\n                                <Box\n                                    key={index}\n                                    sx={{\n                                        display: 'flex',\n                                        alignItems: 'center',\n                                        justifyContent: 'space-between',\n                                        pl: '3px'\n                                    }}>\n                                    <Typography component='p' sx={{ color: color }}>\n                                        <>\n                                            {from.toLocaleString('pl')}&nbsp;-&nbsp;{to.toLocaleString('pl')}\n                                        </>\n                                    </Typography>\n                                    <IconButton\n                                        onClick={() => handleDeleteCopyDate(index)}\n                                    >\n                                        <DeleteIcon />\n                                    </IconButton>\n                                </Box>\n                            )\n                        }\n                    </Stack>\n                </Grid>\n\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <InputLabel id=\"wybierz-salę\">Sala</InputLabel>\n                        <Select\n                            required\n                            labelId=\"wybierz-salę\"\n                            name=\"roomId\"\n                            value={data.roomId ?? props.reservation.room.id}\n                            label=\"Sala\"\n                            onChange={(evt: any) => setData(old => ({ ...old, roomId: Number(evt.target.value) }))}\n                        >\n                            {allRooms.map(({ name, id }) => <MenuItem key={name} value={id} >Sala &nbsp;{name} </MenuItem>)}\n                        </Select>\n                    </FormControl>\n                </Grid>\n            </FormGridContainer>\n\n        </GenericModal >\n    );\n}","import { Box, Button, Stack, Typography } from \"@mui/material\";\nimport NfcIcon from '@mui/icons-material/Nfc';\nimport { styled } from \"@mui/system\";\nimport React from \"react\";\nimport CancelIcon from '@mui/icons-material/Cancel';\n\n\ninterface RfidFormProps {\n    headline: string,\n    bodyText: string,\n    onScan: (keyText: string) => Promise<boolean>,\n    onClose: () => void,\n}\n\nconst HiddenInput = styled('input')({\n    position: \"absolute\",\n    left: \"-1000px\",\n    color: \"transparent\"\n});\n\n\nexport default function RfidForm(props: RfidFormProps) {\n    const [text, setText] = React.useState<string>('');\n    const [color, setColor] = React.useState<string>('primary');\n    const input = React.useRef<HTMLInputElement | null>(null);\n\n    const handleSubmit = async (evt: React.FormEvent) => {\n        evt.preventDefault();\n        const success = await props.onScan(text);\n        if (success) {\n            setColor('success');\n            setTimeout(handleDecline, 2000);\n        } else {\n            setColor('error');\n        }\n        setText('');\n    }\n\n    const handleDecline = () => {\n        props.onClose();\n        setText('');\n        setColor('primary');\n    }\n\n    const focusOnInput = () => {\n        input.current && console.log(input.current.focus())\n    }\n\n    return (\n        <Stack\n            onClick={focusOnInput}\n            component=\"form\"\n            direction=\"column\"\n            spacing={4}\n            onSubmit={handleSubmit}\n        >\n            <NfcIcon\n                sx={{ fontSize: 140, alignSelf: \"center\" }}\n                color={color as any}\n            />\n            <HiddenInput\n                ref={input}\n                autoFocus\n                type=\"text\"\n                value={text}\n                onChange={(evt: any) => setText(evt.target.value)}\n            />\n            <Box component=\"span\" textAlign='center'>\n                <Typography variant=\"h5\" color='primary.dark'>\n                    {props.headline}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" mt='5px'>\n                    {props.bodyText}\n                </Typography>\n            </Box>\n\n            <Button startIcon={<CancelIcon />}\n                onClick={handleDecline}\n                color=\"error\"\n            >\n                Zamknij\n            </Button>\n\n        </Stack>\n    );\n}","import { useReservations } from \"../../GenericReservationsTab/ReservationsContext\";\nimport React from \"react\";\nimport GenericModal from \"../../GenericModal\";\nimport RfidForm from \"../../RfidForm\";\n\n\ninterface PingKeyModalFormProps {\n    reservationId: number,\n    open: boolean,\n    onClose: () => void,\n}\n\n\nexport default function PingKeyModalForm(props: PingKeyModalFormProps) {\n    const { pingKeyForReservation } = useReservations();\n\n    const handleKeyScan = React.useCallback(\n        async (key: string) => pingKeyForReservation(props.reservationId, key)\n        , [props, pingKeyForReservation]);\n\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={props.onClose}\n            aria-label=\"Okno do edycji rezerwacji\"\n            sx={{ maxWidth: '400px' }}\n        >\n            <RfidForm\n                headline=\"Wczytaj klucz z tagiem NFC\"\n                bodyText='Przy pomocy czytnika, wczytaj wydawany klucz. Aby opuścić to okno, naciśnij \"Zamknij\"'\n                onScan={handleKeyScan}\n                onClose={props.onClose}\n            />\n        </GenericModal>\n    );\n}","import React from \"react\";\nimport { ListItemIcon, Menu, MenuItem, SxProps, Typography } from \"@mui/material\";\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport IconButton from '@mui/material/IconButton';\nimport { Box } from \"@mui/system\";\n\n\ninterface MoreVertMenuProps {\n    options: { action: () => void, icon?: React.ReactNode, label: string }[],\n    sx?: SxProps\n}\n\nexport default function MoreVertMenu(props: MoreVertMenuProps) {\n    const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n    const open = Boolean(anchorEl);\n\n\n    const handleClick = React.useCallback((event: React.MouseEvent<HTMLElement>) => {\n        setAnchorEl(event.currentTarget);\n    }, []);\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    return (\n        <Box sx={props.sx}>\n            <IconButton\n                aria-label='more-options'\n                aria-controls=\"card-menu\"\n                aria-expanded={open ? 'true' : undefined}\n                aria-haspopup=\"true\"\n                onClick={handleClick}\n            >\n                <MoreVertIcon />\n            </IconButton>\n            <Menu\n                MenuListProps={{\n                    'aria-labelledby': 'more-options',\n                }}\n                anchorEl={anchorEl}\n                id=\"card-menu\"\n                open={open}\n                onClose={handleClose}\n                PaperProps={{\n                    sx: {\n                        minWidth: 200,\n                        maxWidth: '100%'\n                    }\n                }}\n            >\n                {\n                    props.options.map((opt, id) => <MenuItem\n                        key={id}\n                        onClick={() => {\n                            opt.action();\n                            handleClose();\n                        }}\n                    >\n                        <ListItemIcon>\n                            {opt.icon}\n                        </ListItemIcon>\n                        <Typography>{opt.label}</Typography>\n                    </MenuItem>)\n                }\n            </Menu>\n        </Box>\n    );\n}\n\n","import React from 'react';\nimport { Avatar, Link, ListItem, ListItemAvatar, ListItemText } from \"@mui/material\";\nimport User from \"../../../../../models/User\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport { dynamicPaths } from \"../../../../../shared/path\";\n\n\n\ninterface UserItemProps {\n    user: User\n}\n\nexport default function UserItem({\n    user\n}: UserItemProps) {\n    return (\n        <ListItem button component={Link} href={dynamicPaths.toUser(user.id)}>\n            <ListItemAvatar>\n                <Avatar\n                    src={ImageService.getLink(user.image)}\n                    alt={`${user.name} ${user.surname}`}\n                />\n            </ListItemAvatar>\n            <ListItemText\n                primary={`${user.name} ${user.surname}`}\n                secondary={user.email}\n            />\n        </ListItem>\n    );\n}","import { Avatar, Link, ListItem, ListItemAvatar, ListItemText } from \"@mui/material\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport Room from \"../../../../../models/Room\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport React from \"react\";\n\ninterface RoomItemProps {\n    room: Room\n}\n\nexport default function RoomItem({\n    room\n}: RoomItemProps) {\n    const { getRoomLink } = useResourceMap();\n\n    const roomLink = React.useMemo(() => getRoomLink(room.id), [\n        room.id,\n        getRoomLink\n    ]);\n\n    return (\n        <ListItem button component={Link} href={roomLink}>\n            <ListItemAvatar>\n                <Avatar\n                    src={ImageService.getLink(room.image)}\n                    alt={`zdjęcie sali ${room.name}`}\n                />\n            </ListItemAvatar>\n\n            <ListItemText\n                primary={`Sala ${room.name}`}\n                secondary={room.roomType}\n            />\n        </ListItem>\n    );\n}","import React from \"react\";\nimport useSession from \"../../../../auth/useSession\";\n\n\nconst defaultAccess = {\n    'owner': false,\n    'accessAdmin': false,\n    'premisesAdmin': false,\n    'keysAdmin': false,\n    'reservationsAdmin': false,\n    'reservationsAbility': false,\n    'logsAdmin': false,\n    'statsViewer': false,\n    'myId': (id: number): boolean => false\n}\n\nexport default function useResolvedAccess() {\n    const { user } = useSession();\n\n    const access = React.useMemo(() => {\n        if (!user) return defaultAccess;\n\n        const { owner,\n            accessAdmin,\n            premisesAdmin,\n            keysAdmin,\n            reservationsAdmin,\n            reservationsAbility,\n            logsAdmin,\n            statsViewer\n        } = user.access;\n\n        return {\n            'owner': owner,\n            'accessAdmin': owner || accessAdmin,\n            'premisesAdmin': owner || premisesAdmin,\n            'keysAdmin': owner || keysAdmin,\n            'reservationsAdmin': owner || reservationsAdmin,\n            'reservationsAbility': owner || reservationsAbility,\n            'logsAdmin': owner || logsAdmin,\n            'statsViewer': owner || statsViewer,\n            'myId': (id: number) => owner || (user.id === id)\n        } as typeof defaultAccess;\n    }, [user]);\n\n    return access;\n}\n","import Chip from \"@mui/material/Chip\";\nimport Stack from \"@mui/material/Stack\";\nimport Typography from \"@mui/material/Typography\";\nimport React from \"react\";\n\n\n\ninterface Props {\n    title: string | React.ReactNode\n    children: {\n        label: string,\n        value: string | React.ReactNode\n    }[]\n}\n\n\nexport default function DatesView(props: Props) {\n    return (\n        <div>\n            <Typography component=\"h3\" variant=\"subtitle1\">\n                {props.title}\n            </Typography>\n            <Typography\n                variant=\"body1\"\n                color='text.secondary'\n                textAlign='left'\n                component='div'\n            >\n                <Stack\n                    direction='row'\n                    alignItems='center'\n                    flexWrap='wrap'\n                    rowGap={1}\n                    columnGap={1}\n                >\n                    {\n                        props.children.map(({ label, value }) =>\n                            <div key={label} >\n                                {label}:&nbsp;<Chip label={value} />\n                            </div>\n                        )\n                    }\n                </Stack>\n            </Typography>\n        </div>\n    );\n}","import Reservation from '../../../../../models/Reservation';\nimport GenericModal from '../../components/GenericModal';\nimport Stack from '@mui/material/Stack';\nimport { Grid, IconButton, List, Typography } from '@mui/material';\nimport { displayDate } from '../../../../../shared/utils';\nimport React from 'react';\nimport DeleteModal from '../DeleteModal';\nimport { CopyForm, EditForm, PingNFCForm } from './ModalForms';\nimport { useReservations } from '../GenericReservationsTab/ReservationsContext';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CopyIcon from '@mui/icons-material/CopyAll';\nimport NFCIcon from '@mui/icons-material/Nfc';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { Edit } from '@mui/icons-material';\nimport MoreVertMenu from '../../components/MoreVertMenu';\nimport UserItem from './UserItem';\nimport RoomItem from './RoomItem';\nimport useResolvedAccess from '../../hooks/useResolvedAccess';\nimport DatesView from './DatesView';\nimport { useHistory } from 'react-router-dom';\nimport paths from '../../../../../shared/path';\n\n\n\ninterface ReservationViewModalProps {\n    reservation: Reservation,\n    open: boolean,\n    onClose: () => void\n}\n\n\nfunction TextSection(props: {\n    title: string, children: React.ReactNode | React.ReactNode[]\n}) {\n    return (\n        <span>\n            <Typography component=\"h3\" variant=\"subtitle1\">\n                {props.title}\n            </Typography>\n            <Typography\n                variant=\"body1\"\n                color='text.secondary'\n                textAlign='justify'\n                component='p'\n            >\n                {props.children}\n            </Typography>\n        </span>\n    );\n}\n\n\n\n\n\nexport default function ReservationViewModal(props: ReservationViewModalProps) {\n    const { reservationsAdmin, keysAdmin, myId, logsAdmin } = useResolvedAccess();\n    const { deleteReservation } = useReservations();\n    const history = useHistory();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState<boolean>(false);\n    const [editModalOpen, setEditModalOpen] = React.useState<boolean>(false);\n    const [nfcModalOpen, setNFCModalOpen] = React.useState<boolean>(false);\n    const [copyModalOpen, setCopyModalOpen] = React.useState<boolean>(false);\n\n\n    const onDelete = React.useCallback(async () => {\n        if (await deleteReservation(props.reservation.id)) {\n            setDeleteModalOpen(false);\n        }\n    }, [\n        props.reservation.id,\n        deleteReservation,\n    ]);\n\n\n    const menuOptions = React.useMemo(() => {\n        const opt = [\n            {\n                icon: <CopyIcon color='primary' />,\n                label: 'Kopiuj',\n                action: () => setCopyModalOpen(true)\n            },\n        ];\n        keysAdmin && opt.unshift({\n            icon: <NFCIcon color='primary' />,\n            label: 'Odbij klucz',\n            action: () => setNFCModalOpen(true)\n        });\n\n        logsAdmin && opt.push({\n            icon: <SearchIcon color='primary' />,\n            label: 'Logs Explorer',\n            action: () => history.push(`${paths.LOGS}?endpoint=%/reservations/${props.reservation.id}`)\n        })\n\n        if (myId(props.reservation.user.id) || reservationsAdmin)\n            opt.push({\n                icon: <Edit color='primary' />,\n                label: 'Edytuj',\n                action: () => setEditModalOpen(true)\n            }, {\n                icon: <DeleteIcon color='error' />,\n                label: 'Usuń',\n                action: () => setDeleteModalOpen(true)\n            });\n\n        return opt;\n    }, [\n        myId,\n        keysAdmin,\n        logsAdmin,\n        props.reservation.user.id,\n        props.reservation.id,\n        reservationsAdmin,\n        history\n    ]);\n\n\n    return (\n        <>\n            {(myId(props.reservation.user.id) || reservationsAdmin) &&\n                <>\n                    <DeleteModal\n                        open={deleteModalOpen}\n                        onClose={() => setDeleteModalOpen(false)}\n                        onSuccess={onDelete}\n                    />\n\n                    <EditForm\n                        open={editModalOpen}\n                        onClose={() => setEditModalOpen(false)}\n                        reservation={props.reservation}\n                    />\n                </>\n            }\n            <CopyForm\n                open={copyModalOpen}\n                onClose={() => setCopyModalOpen(false)}\n                reservation={props.reservation}\n            />\n\n            {keysAdmin &&\n                <PingNFCForm\n                    open={nfcModalOpen}\n                    onClose={() => setNFCModalOpen(false)}\n                    reservationId={props.reservation.id}\n                />\n            }\n\n            <GenericModal\n                open={props.open}\n                onClose={props.onClose}\n                aria-label=\"Widok Rezerwacji\"\n                sx={{\n                    maxWidth: '800px',\n                    mt: '4vw'\n                }}\n            >\n                <Grid container spacing='15px'>\n\n                    <Grid item xs={10} sm={11}>\n                        <Stack spacing={4} alignItems='stretch'>\n                            <Typography component=\"h2\" variant=\"h4\">\n                                {props.reservation.title}\n                            </Typography>\n\n                            <DatesView title='Planowany czas:'>\n                                {[\n                                    {\n                                        label: 'Od',\n                                        value: displayDate(props.reservation.plannedStart)\n                                    }, {\n                                        label: 'do',\n                                        value: displayDate(props.reservation.plannedEnd)\n                                    },\n                                ]}\n                            </DatesView>\n                        </Stack>\n                    </Grid>\n\n                    <Grid item xs={2} sm={1}>\n                        <Stack\n                            alignItems='flex-end'\n                            direction='column'\n                            spacing={3}\n                        >\n                            <IconButton onClick={props.onClose}>\n                                <CloseIcon />\n                            </IconButton>\n\n                            <MoreVertMenu options={menuOptions} sx={{ justifySelf: \"right\" }} />\n\n                            {keysAdmin &&\n                                <IconButton\n                                    onClick={() => setNFCModalOpen(true)}\n                                    title=\"Odbij klucz\"\n                                    aria-label=\"Odbij klucz\"\n                                    color='success'\n                                >\n                                    <NFCIcon />\n                                </IconButton>\n                            }\n                        </Stack>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <Stack spacing={4} alignItems='stretch'>\n                            <DatesView title='Faktyczny czas rezerwacji:'>\n                                {[\n                                    {\n                                        label: 'Początek',\n                                        value: props.reservation.actualStart ?\n                                            displayDate(props.reservation.actualStart)\n                                            : 'Brak'\n                                    }, {\n                                        label: 'Koniec',\n                                        value: props.reservation.actualEnd ?\n                                            displayDate(props.reservation.actualEnd)\n                                            : 'Brak'\n                                    },\n                                ]}\n                            </DatesView>\n\n                            <TextSection title='Opis:'>\n                                {props.reservation.description}\n                            </TextSection>\n\n                            <List component='div'>\n                                <UserItem user={props.reservation.user} />\n                                <RoomItem room={props.reservation.room} />\n                            </List>\n\n                        </Stack>\n                    </Grid>\n\n                </Grid>\n            </GenericModal>\n        </>\n    );\n}\n\n\n","import React from \"react\";\nimport ReservationViewModal from \"../../../ReservationViewModal\";\nimport { useReservations } from \"..\";\nimport ModalContextValue from \"./ModalContextValue\";\n\n\nexport const ReservationModalViewContext = React.createContext<ModalContextValue>({\n    showReservation: (id: number) => { },\n    reservation: null\n});\n\n\ninterface ModalContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\nexport default function ModalContextProvider(props: ModalContextProviderProps) {\n    const { reservations } = useReservations();\n\n    const [modalOpen, setModalOpen] = React.useState<boolean>(true);\n    const [reservationId, setReservationId] = React.useState<number | null>(null);\n\n\n    const reservation = React.useMemo(() => {\n        if (reservationId) {\n            return reservations.find(({ id }) => id === reservationId);\n        }\n    }, [reservations, reservationId]) ?? null;\n\n\n    const showReservation = React.useCallback((id: number) => {\n        setReservationId(id);\n        setModalOpen(true);\n    }, []);\n\n\n    return (\n        <ReservationModalViewContext.Provider value={{ reservation, showReservation }}>\n            {props.children}\n\n            {reservation &&\n                <ReservationViewModal\n                    reservation={reservation}\n                    open={modalOpen}\n                    onClose={() => setModalOpen(false)}\n                />}\n        </ReservationModalViewContext.Provider>\n    );\n}","import React from \"react\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport useSession from \"../../../../../../auth/useSession\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport { AppURLParams } from \"../../../../../../services/interfaces\";\nimport ReservationService, { CreateReservationData, ReservationsQueryParams, UpdateReservationData } from \"../../../../../../services/ReservationService\";\nimport { useRoomContext } from \"../../../RoomPage/RoomContext\";\nimport useNotification from \"../../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport ReservationModalContext from \"./ModalContext\";\nimport useResourceMap from \"../../../../../../contexts/ResourceMapContext/useResourceMap\";\nimport ReservationsContextValue from \"./ReservationsContextValue\";\nimport paths from \"../../../../../../shared/path\";\nimport { UserViewParams } from \"../../../../../../services/UserService\";\nimport useTrigger from \"../../../hooks/useTrigger\";\nimport { fromLocaleDateTimeString } from \"../../../../../../shared/utils\";\n\n\nexport const reservationsContext: any = React.createContext(null);\n\n\ninterface ReservationsContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\n\n\nexport default function ReservationsContextProvider(props: ReservationsContextProviderProps) {\n    const { queryParams, setQueryParams } = useQueryParams<ReservationsQueryParams>();\n    const notify = useNotification();\n    const { getRoomLink } = useResourceMap();\n    const roomContext = useRoomContext();\n    const { user } = useSession();\n    const urlParams = useParams<AppURLParams>();\n    const refresh = useTrigger(30_000);\n\n    const [reservations, setReservations] = React.useState<Reservation[]>();\n\n\n    const load = React.useCallback(async () => {\n        try {\n            let params = urlParams;\n            if (Object.keys(urlParams).length === 0 && window.location.pathname === paths.HOME) {\n                params = { userId: 'me' } as UserViewParams;\n            }\n            const resp = await ReservationService.getReservations(params, queryParams);\n\n            resp.pagination && setQueryParams((old) => ({\n                ...old,\n                pagesCount: resp.pagination?.pagesCount,\n            }));\n            setReservations(resp.data as Reservation[]);\n        } catch (err: any) {\n            notify(err.description ?? err.message, 'error');\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        queryParams.currentPage,\n        queryParams.itemsOnPage,\n        queryParams.from,\n        queryParams.search,\n        setQueryParams,\n        urlParams,\n        notify,\n        user\n    ]);\n\n\n    // when loading function is recalculated - trigger the loading\n    React.useEffect(() => {\n        load();\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        load,\n        refresh\n    ]);\n\n\n    const triggerReload = React.useCallback(() => setQueryParams(old => Object.assign({}, old)), [\n        setQueryParams\n    ]);\n\n\n    const pingKeyForReservation = React.useCallback(async (id: number, key: string) => {\n        if (!reservations) return;\n        try {\n            const reservation = reservations.find(item => item.id === id);\n            if (!reservation) return false;\n\n            const resp = await ReservationService.pingKey(id, key);\n\n            setReservations(old => {\n                old && old.forEach(item => {\n                    if (item.id !== id) return;\n\n                    if (item.actualStart) {\n                        item.actualEnd = new Date().toString();\n                    } else {\n                        item.actualStart = new Date().toString();\n                    }\n\n                });\n                return Object.assign([], old);\n            });\n\n            roomContext && roomContext.setOccupied(!reservation.room.occupied);\n            resp?.data && notify(resp.data.toString(), 'success');\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true;\n    }, [\n        reservations,\n        roomContext,\n        notify,\n    ]);\n\n\n    const createReservation = React.useCallback(async (data: CreateReservationData) => {\n        try {\n            await ReservationService.createOne(data);\n\n            triggerReload();\n            notify(\"Rezerwacja utworzona prawidłowo!\", 'success');\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true\n    }, [\n        notify,\n        triggerReload,\n    ]);\n\n\n    const deleteReservation = React.useCallback(async (reservationId: number) => {\n        try {\n            await ReservationService.remove(reservationId);\n            setReservations(old => old && old.filter(({ id }) => id !== reservationId));\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true;\n    }, [notify]);\n\n\n    const updateReservation = React.useCallback(async (id: number, data: UpdateReservationData) => {\n        try {\n            await ReservationService.update(id, data); //call to API\n\n            //update state\n            setReservations((old) => {\n                return old && old.map(item => {\n                    if (item.id === id) {\n                        ['plannedStart', 'plannedEnd']\n                            .forEach(field => {\n                                if (field in data) {\n                                    item[field] = fromLocaleDateTimeString(data[field]).toUTCString();\n                                }\n                            });\n                        ['description', 'title']\n                            .forEach(field => {\n                                if (field in data) {\n                                    item[field] = data[field];\n                                }\n                            });\n                    }\n                    return item;\n                });\n            });\n\n            // when reservation room is changing\n            if ('roomId' in data) {\n                data.roomId && notify(\n                    'Rezerwacja zaktualizowana i przeniesiona!',\n                    'success',\n                    () => <Redirect to={getRoomLink(Number(data.roomId))} />\n                )\n            } else {\n                notify('Rezerwacja zaktualizowana!', 'success');\n            }\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n            return false;\n        }\n        return true;\n    }, [getRoomLink, notify]);\n\n\n    // if (!reservations) return <Loading />;\n\n    return (\n        <reservationsContext.Provider value={{\n            reservations,\n            updateReservation,\n            deleteReservation,\n            createReservation,\n            pingKeyForReservation,\n        } as ReservationsContextValue}>\n            <ReservationModalContext>\n                {props.children}\n            </ReservationModalContext>\n        </reservationsContext.Provider>\n    );\n}","import Avatar from \"@mui/material/Avatar\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport Reservation from \"../../../../../../models/Reservation\";\nimport { dynamicPaths } from \"../../../../../../shared/path\";\nimport ImageService from \"../../../../../../services/ImageService\";\nimport { displayDate } from \"../../../../../../shared/utils\";\nimport ReservationService from \"../../../../../../services/ReservationService\";\nimport { Link } from \"@mui/material\";\nimport React from \"react\";\nimport Image from \"../../../../../../models/Image\";\n\n\ninterface ReservationListItemProps {\n    data: Reservation,\n    onClick: () => void\n}\n\n// memoize avatar\nconst MemAvatar = React.memo((props: { img: Image }) => <Avatar alt=\"użytkownik\" src={ImageService.getLink(props.img)} />)\n\n\nexport default function ReservationListItem({\n    data, onClick\n}: ReservationListItemProps) {\n    const { message, color } = ReservationService.resolveStatus(data);\n\n    return (\n        <ListItem\n            component='li'\n            button\n            sx={{\n                mb: '2px',\n                bgcolor: color,\n                '&:hover, &:focus': {\n                    bgcolor: color,\n                    filter: 'brightness(97%)',\n                }\n            }}\n            onClick={onClick}\n        >\n            <ListItemAvatar>\n                <Link href={dynamicPaths.toUser(data.user.id)}>\n                    <MemAvatar img={data.user.image} />\n                </Link>\n            </ListItemAvatar>\n\n            <ListItemText\n                primary={data.title}\n                secondary={displayDate(data.actualStart ?? data.plannedStart) + ' - ' + message}\n            />\n        </ListItem>\n    )\n}","import { List, ListItem, ListItemText } from \"@mui/material\";\nimport useReservationModalContext from \"../ReservationsContext/ModalContext/useReservationModalContext\";\nimport { useReservations } from \"../ReservationsContext\";\nimport ReservationListItem from \"./ReservationsListItem\";\nimport React from \"react\";\nimport Loading from \"../../../../../../shared/components/Loading\";\n\n\n\nexport default function ReservationsList() {\n    const { showReservation } = useReservationModalContext();\n    const { reservations } = useReservations();\n\n\n    const renderedList = React.useMemo(() =>\n        reservations?.map((item) => <ReservationListItem\n            key={item.id}\n            data={item}\n            onClick={() => showReservation(item.id)}\n        />)\n        , [\n            reservations,\n            showReservation\n        ]);\n\n    if (!reservations) return <Loading />;\n\n    return (\n        <List aria-label='lista rezerwacji'>\n            {reservations.length === 0 ?\n                <ListItem>\n                    <ListItemText primary='Brak rezerwacji spełniających kryteria.' />\n                </ListItem> :\n                renderedList\n            }\n        </List>\n    );\n}\n\n\n","import React from \"react\";\nimport { ReservationModalViewContext } from \"./ModalContextProvider\";\nimport ModalContextValue from \"./ModalContextValue\";\n\n\nexport default function useReservationModalContext() {\n    return React.useContext(ReservationModalViewContext) as ModalContextValue;\n}","import FormControl from \"@mui/material/FormControl\";\nimport Grid from \"@mui/material/Grid\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select from \"@mui/material/Select\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport ReservationService, { CreateReservationData, UpdateReservationData } from \"../../../../../services/ReservationService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\nimport DateTimePicker from \"../DateTimePicker\";\n\n\n\ninterface CreateReservationFormProps {\n    roomId?: number\n    onCancel: () => void\n}\n\n\nexport default function CreateReservationForm(props: CreateReservationFormProps) {\n    const notify = useNotification();\n    const { allRooms } = useResourceMap();\n\n    const [dates, setDates] = React.useState({\n        start: (new Date(Date.now() + 3_600_000)),\n        end: (new Date(Date.now() + (3_600_000 * 2)))\n    });\n\n    const [data, setData] = React.useState<CreateReservationData>({\n        title: '',\n        description: '',\n        plannedStart: '',\n        plannedEnd: '',\n        roomId: props.roomId ?? 0\n    });\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        data.plannedStart = dates.start.toLocaleString('pl');\n        data.plannedEnd = dates.end.toLocaleString('pl');\n\n        try {\n            await ReservationService.createOne(data);\n            notify(\"Rezerwacja utworzona!\", 'success');\n            props.onCancel()\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        data,\n        notify,\n        props,\n        dates.start,\n        dates.end\n    ]);\n\n\n    const setDate = React.useCallback((key: keyof UpdateReservationData, dateTime: Date) => {\n        setDates(old => ({\n            ...old,\n            [key]: dateTime,\n        }));\n    }, []);\n\n\n    return (\n        <FormGridContainer\n            title='Tworzenie rezerwacji'\n            subtitle=\"Stwórz rezerwację w wybranym przez siebie pokoju.\"\n            onSubmit={handleSubmit}\n            onCancel={props.onCancel}\n        >\n            <Grid item xs={12}>\n                <TextField\n                    title=\"Tytuł rezerwacji\"\n                    inputProps={{ title: \"Tytuł rezerwacji\" }}\n                    autoFocus\n                    required\n                    fullWidth\n                    // multiline\n                    maxRows={4}\n                    label=\"Tytuł\"\n                    id=\"outlined-multiline-flexible\"\n                    name='title'\n                    value={data.title}\n                    onChange={handleChange}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <TextField\n                    required\n                    fullWidth\n                    multiline\n                    maxRows={20}\n                    label=\"Opis\"\n                    id=\"outlined-multiline-flexible\"\n                    name='description'\n                    value={data.description}\n                    onChange={handleChange}\n                />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <DateTimePicker\n                    label=\"Początek\"\n                    value={dates.start}\n                    onChange={(value) => setDate('start', value)}\n                />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n                <DateTimePicker\n                    label=\"Koniec\"\n                    value={dates.end}\n                    onChange={(value) => setDate('end', value)}\n                />\n            </Grid>\n            <Grid item xs={12}>\n                <FormControl fullWidth>\n                    <InputLabel id=\"wybierz-salę\">Sala</InputLabel>\n                    <Select\n                        required\n                        labelId=\"wybierz-budynek\"\n                        name=\"buildingId\"\n                        value={data.roomId}\n                        label=\"Budynek\"\n                        onChange={(evt: any) => setData(old => ({ ...old, roomId: Number(evt.target.value) }))}\n                    >\n                        {allRooms.map(({ name, id }) => <MenuItem key={name} value={id} >Sala &nbsp;{name} </MenuItem>)}\n                    </Select>\n                </FormControl>\n            </Grid>\n        </FormGridContainer>\n    );\n}","import React from \"react\";\nimport GenericModal from \"../../components/GenericModal\";\nimport CreateReservationForm from \"./CreateReservationForm\";\n\n\ninterface CreateReservationModalProps {\n    open: boolean,\n    onClose: () => void,\n    roomId?: number\n}\n\nfunction CreateReservationModal(props: CreateReservationModalProps) {\n    return (\n        <GenericModal\n            open={props.open}\n            aria-label='Okno do tworzenia rezerwacji'\n            onClose={props.onClose}\n        >\n            <CreateReservationForm\n                roomId={props.roomId}\n                onCancel={props.onClose}\n            />\n\n        </GenericModal>\n    );\n}\n\nexport default React.memo(CreateReservationModal);","import MobileDatePicker from \"@mui/lab/MobileDatePicker\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport { ReservationsQueryParams } from \"../../../../../services/ReservationService\";\nimport SelectButtonGroup from \"../../components/SelectButtonGroup\";\nimport LazyInput from \"../../components/LazyInput\";\nimport { isDate } from \"../../../../../shared/utils\";\nimport AddIcon from '@mui/icons-material/Add';\nimport CreateReservationModal from \"../CreateReservationModal\";\nimport { useParams } from \"react-router-dom\";\nimport { RoomViewParams } from \"../../../../../services/RoomService\";\nimport { BuildingViewParams } from \"../../../../../services/BuildingService\";\nimport { AddressViewParams } from \"../../../../../services/AddressService\";\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\nimport { Tip } from \"../Tutorial\";\n\n\nconst buttons = [\n    { name: 'Dziś', value: 'today' },\n    { name: 'Ten tydzień', value: 'this week' },\n    { name: 'Od wczoraj', value: 'yesterday' },\n];\n\n\nfunction ReservationTabBar() {\n    const { reservationsAbility } = useResolvedAccess();\n    const { setQueryParams, queryParams } = useQueryParams<ReservationsQueryParams>();\n    const urlParams = useParams<RoomViewParams | BuildingViewParams | AddressViewParams>();\n\n    const [createReservationModalOpen, setCreateReservationModalOpen] = React.useState<boolean>(false);\n    const [customDate, setCustomDate] = React.useState(new Date(isDate(queryParams.from) ? queryParams.from ?? 'xxx' : Date.now()));\n\n    const handleButtonChange = React.useCallback((value: string) => {\n        setQueryParams((old: ReservationsQueryParams) => ({ ...old, from: value }));\n    }, [setQueryParams]);\n\n\n    const handleSubmitCustomDate = React.useCallback((evt: React.FormEvent) => {\n        evt.preventDefault();\n        setQueryParams((old: ReservationsQueryParams) => ({ ...old, from: customDate.toISOString() }))\n    }, [customDate, setQueryParams])\n\n\n    const handleSearchFieldChange = React.useCallback((evt) => {\n        setQueryParams(old => ({ ...old, search: evt.target.value }));\n    }, [setQueryParams]);\n\n\n    return (\n        <>\n            {reservationsAbility &&\n                <CreateReservationModal\n                    open={createReservationModalOpen}\n                    onClose={() => setCreateReservationModalOpen(false)}\n                    roomId={'roomId' in urlParams ? Number(urlParams.roomId) : undefined}\n                />\n            }\n\n            <Grid container\n                component='form'\n                onSubmit={handleSubmitCustomDate}\n                spacing={2}\n                alignItems='center'\n            >\n\n                <Grid item xs={12} md={12}>\n                    <Tip text='Możesz wyszukiwać rezerwacje według daty lub używając słów kluczowych' priority={2}>\n                        <SelectButtonGroup\n                            onChange={handleButtonChange}\n                            buttons={buttons}\n                            value={isDate(queryParams.from) ? '' : queryParams?.from ?? buttons[0].value}\n                        />\n                        <Box display='inline-flex' >\n                            <MobileDatePicker\n                                label=\"Od daty\"\n                                inputFormat=\"yyyy-MM-dd\"\n                                value={customDate}\n                                onChange={(value: Date | null) => value && setCustomDate(value)}\n                                renderInput={(params) => <TextField {...params} size='small' />}\n                            />\n                            <Button\n                                variant={queryParams?.from === customDate.toISOString() ? 'contained' : 'outlined'}\n                                type='submit'\n                                sx={{ ml: 1 }}\n                            >\n                                OK\n                            </Button>\n                        </Box>\n                    </Tip>\n                </Grid>\n                <Grid item xs={12}>\n                    <LazyInput\n                        name=\"search\"\n                        label='wyszukaj'\n                        value={queryParams.search ?? ''}\n                        onChange={handleSearchFieldChange}\n                    />\n                </Grid>\n\n                {reservationsAbility &&\n                    <Grid item xs={12}>\n                        <Tip text='Kliknij ten przycisk, aby stworzyć rezerwację!' priority={10}>\n                            <Button\n                                startIcon={<AddIcon />}\n                                onClick={() => setCreateReservationModalOpen(true)}\n                            >\n                                Stwórz rezerwację\n                            </Button>\n                        </Tip>\n                    </Grid>\n                }\n            </Grid>\n        </>\n    );\n}\n\nexport default React.memo(ReservationTabBar);","import { Stack } from \"@mui/material\";\nimport { QueryParamsContext } from \"../../../../../contexts/QueryParamsContext\";\nimport ReservationsContext from \"./ReservationsContext\";\nimport { ReservationsQueryParams } from \"../../../../../services/ReservationService\";\nimport ListPagination from \"../../components/ListPagination\";\nimport ReservationsList from \"./ReservationsList\";\nimport ReservationTabBar from \"./ReservationTabBar\";\nimport React from \"react\";\n\n\n\nfunction GenericReservationsTab() {\n    return (\n        <QueryParamsContext name='reservations-query-params' default={{\n            itemsOnPage: 5,\n            currentPage: 1,\n            from: 'today'\n        } as ReservationsQueryParams}>\n            <ReservationsContext>\n                <Stack rowGap={3}>\n                    <ReservationTabBar />\n                    <ReservationsList />\n                    <ListPagination />\n                </Stack>\n            </ReservationsContext>\n        </QueryParamsContext>\n    );\n}\n\nexport default React.memo(GenericReservationsTab);","import React from \"react\";\nimport { styled, SxProps } from \"@mui/system\";\nimport Box from \"@mui/material/Box\";\nimport Address from \"../../../../../models/Address\";\n\n\n\ninterface MapProps {\n    address: Address,\n    sx?: SxProps\n}\n\nconst StyledIframe = styled('iframe')({\n    width: '100%',\n    height: '50vh',\n    maxHeight: '400px',\n    minHeight: '300px'\n});\n\n\nexport default function Map({ address, sx }: MapProps) {\n\n    const url = React.useMemo(() => {\n        const { street, number, town, country } = address;\n\n        const base = new URL('https://maps.google.com/maps');\n        const params = new URLSearchParams({\n            q: `${street + \" \" + number + \" \" + town + \" \" + country}`,\n            ie: 'UTF8',\n            z: '14',\n            iwloc: '',\n            output: 'embed'\n        });\n        base.search = params.toString();\n\n        return base.toString();\n    }, [address]);\n\n    return (\n        <Box>\n            <StyledIframe\n                src={url}\n                frameBorder=\"0\"\n                sx={{ ...sx }}\n            />\n        </Box>\n    );\n}","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../components/GenericModal\";\nimport { useAddress } from \"../AddressContext\";\nimport { UpdateAddressParams } from \"../../../../../services/AddressService\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\n\ninterface AddressEditFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\n\n\nexport default function AddressEditForm({\n    open,\n    onClose\n}: AddressEditFormProps) {\n    const { address, updateAddress } = useAddress();\n\n    const [data, setData] = React.useState<UpdateAddressParams>({});\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old: UpdateAddressParams) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateAddress(data)) {\n            close();\n        }\n    }, [\n        data,\n        close,\n        updateAddress,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno do edycji budynku\"\n        >\n            <FormGridContainer\n                title='Edycja adresu'\n                subtitle=\"Zmień właściwości adresu i zatwierdź zmiany.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"country\"\n                        label=\"Kraj\"\n                        name=\"country\"\n                        value={data.country ?? address.country}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        autoFocus\n                        required\n                        fullWidth\n                        id=\"town\"\n                        label=\"Miasto\"\n                        name=\"town\"\n                        value={data.town ?? address.town}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"postalCode\"\n                        label=\"Kod pocztowy\"\n                        name=\"postalCode\"\n                        value={data.postalCode ?? address.postalCode}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={8}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"street\"\n                        label=\"Ulica\"\n                        name=\"street\"\n                        value={data.street ?? address.street}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={4}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"number\"\n                        label=\"Number\"\n                        name=\"number\"\n                        value={data.number ?? address.number}\n                        onChange={handleChange}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../components/GenericModal\";\nimport { BuildingCreateParams } from \"../../../../../services/BuildingService\";\nimport MobileTimePicker from \"@mui/lab/MobileTimePicker\";\nimport { timeFormat } from \"../../../../../shared/utils\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\ninterface CreateBuildingFormProps {\n    open: boolean,\n    onClose: () => void,\n    handleCreateBuilding: (data: BuildingCreateParams) => Promise<boolean>\n}\n\n\nexport default function CreateBuildingForm({\n    open,\n    onClose,\n    handleCreateBuilding,\n}: CreateBuildingFormProps) {\n    const [data, setData] = React.useState<BuildingCreateParams>({\n        name: '',\n        openTime: (new Date(0, 0, 0, 7, 0)).toString(),\n        closeTime: (new Date(0, 0, 0, 21, 0)).toString()\n    });\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n        setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        const success = await handleCreateBuilding({\n            ...data,\n            closeTime: timeFormat.format(new Date(data.closeTime)),\n            openTime: timeFormat.format(new Date(data.openTime))\n        });\n\n        if (success) {\n            onClose();\n        }\n\n    }, [\n        data,\n        onClose,\n        handleCreateBuilding,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno do tworzenia budynku\"\n        >\n            <FormGridContainer\n                title='Dodaj nowy budynek!'\n                subtitle=\"Wypełnij dane nowego budynku i kliknij zatwierdź.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"name\"\n                        label=\"Nazwa\"\n                        name=\"name\"\n                        autoFocus\n                        value={data.name}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6} >\n                    <MobileTimePicker\n                        label=\"Godzina otwarcia\"\n                        inputFormat=\"HH:mm\"\n                        value={data.openTime}\n                        onChange={(value: any) => setData(old => ({ ...old, openTime: value }))}\n                        renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <MobileTimePicker\n                        label=\"Godzina zamknięcia\"\n                        inputFormat=\"HH:mm\"\n                        value={data.closeTime}\n                        onChange={(value: any) => setData(old => ({ ...old, closeTime: value }))}\n                        renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../components/GenericModal\";\nimport AddressService, { CreateAddressParams } from \"../../../../../services/AddressService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\ninterface CreateAddressFormProps {\n    open: boolean,\n    onClose: () => void,\n}\n\n\nexport default function CreateAddressForm({\n    open,\n    onClose,\n}: CreateAddressFormProps) {\n    const notify = useNotification();\n    const { reloadMap } = useResourceMap();\n\n    const [data, setData] = React.useState<CreateAddressParams>({\n        country: 'Polska',\n        town: '',\n        street: '',\n        number: '',\n        postalCode: '',\n    });\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old: CreateAddressParams) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        try {\n            await AddressService.create(data);\n            reloadMap();\n            notify('Adres został dodany', 'success');\n            onClose();\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        data,\n        notify,\n        onClose,\n        reloadMap,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno do tworzenia adresu\"\n        >\n            <FormGridContainer\n                title='Dodaj nowy adres!'\n                subtitle=\"Wypełnij dane nowego adresu i kliknij zatwierdź.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"country\"\n                        label=\"Kraj\"\n                        name=\"country\"\n                        value={data.country}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"town\"\n                        label=\"Miasto\"\n                        name=\"town\"\n                        autoFocus\n                        value={data.town}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"postalCode\"\n                        label=\"Kod pocztowy\"\n                        name=\"postalCode\"\n                        value={data.postalCode}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={8}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"street\"\n                        label=\"Ulica\"\n                        name=\"street\"\n                        value={data.street}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={4}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"number\"\n                        label=\"Number\"\n                        name=\"number\"\n                        value={data.number}\n                        onChange={handleChange}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal>\n    );\n}","import React from \"react\";\nimport { Card, CardContent, CardHeader, CardMedia, Typography } from \"@mui/material\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport Map from \"./Map\";\nimport { useAddress } from \"../AddressContext\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { AddressEditForm } from \"../Forms\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport DatesFooter from \"../../components/DatesFooter\";\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\n\n\n\n\nexport default function AddressCard() {\n    const { premisesAdmin } = useResolvedAccess();\n    const { address, deleteAddress } = useAddress();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState(false);\n    const [editModalOpen, setEditModalOpen] = React.useState(false);\n\n    const options = React.useMemo(() => [\n        {\n            label: 'Edytuj',\n            action: () => setEditModalOpen(true),\n            icon: <EditIcon color='success' />\n        }, {\n            label: 'Usuń',\n            action: () => setDeleteModalOpen(true),\n            icon: <DeleteIcon color='error' />\n        }\n    ], []);\n\n    return (\n        <>\n            {premisesAdmin &&\n                <>\n                    <DeleteModal\n                        open={deleteModalOpen}\n                        onClose={() => setDeleteModalOpen(false)}\n                        onSuccess={deleteAddress}\n                    />\n\n                    <AddressEditForm\n                        open={editModalOpen}\n                        onClose={() => setEditModalOpen(false)}\n                    />\n                </>\n            }\n            <Card elevation={0}>\n                <CardHeader\n                    action={premisesAdmin && <MoreVertMenu options={options} />}\n                    title={<>{address.country}, {address.town}</>}\n                    subheader={<>{address.street} {address.number}</>}\n                />\n                <CardMedia component=\"div\">\n                    <Map address={address} />\n                </CardMedia>\n                <CardContent>\n                    <Typography component='p'>\n                        ul. {address.street} {address.number}<br />\n                        {address.postalCode} {address.town}, <br />\n                        {address.country}\n                    </Typography>\n                    <br />\n                    <DatesFooter model={address} />\n                </CardContent>\n            </Card>\n        </>\n    )\n}","import { Button, List } from \"@mui/material\";\nimport Box from \"@mui/system/Box\";\nimport React from \"react\";\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\n\n\ninterface ScrollableListProps {\n    onAddItem: () => void,\n    children: React.ReactNode[] | React.ReactNode,\n}\n\n\nexport default function ScrollableList(props: ScrollableListProps) {\n    const { premisesAdmin } = useResolvedAccess();\n\n    return (\n        <Box >\n            {premisesAdmin && \n                <>\n                    <br />\n                    <Button\n                        startIcon={<AddCircleIcon color='primary' />}\n                        onClick={props.onAddItem}>\n                        Dodaj element\n                    </Button>\n                </>\n            }\n            <List\n                sx={{\n                    minHeight: '100px',\n                    maxHeight: '270px',\n                    overflow: 'auto'\n                }}\n            >\n                {props.children}\n            </List>\n        </Box>\n    )\n}\n\n\n","import { Link, ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\nimport LinkIcon from '@mui/icons-material/Link';\nimport React from \"react\";\n\n\ninterface ScrollableListItemProps {\n    primary: string | React.ReactNode,\n    link: string,\n}\n\n\nfunction ScrollableListItem(props: ScrollableListItemProps) {\n    return (\n        <ListItem button\n            component={Link}\n            href={props.link}\n            sx={{ py: '2px' }}\n        >\n            <ListItemIcon>\n                <LinkIcon />\n            </ListItemIcon>\n            <ListItemText primary={props.primary} />\n        </ListItem>\n    );\n}\n\nexport function EmptyScrollableListItem(props: { text: string }) {\n    return (\n        <ListItem\n            sx={{ py: '2px' }}\n        >\n            <ListItemText primary={props.text} />\n        </ListItem>\n    );\n}\n\nexport default React.memo(ScrollableListItem);","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport Building from \"../../../../../models/Building\";\nimport { AddressViewParams } from \"../../../../../services/AddressService\";\nimport BuildingService, { BuildingCreateParams } from \"../../../../../services/BuildingService\";\nimport ScrollableList, { ScrollableListItem } from \"../../components/ScrollableList\";\nimport { EmptyScrollableListItem } from \"../../components/ScrollableList/ScrollableListItem\";\nimport SmallCard from \"../../components/SmallCard\";\nimport { Tip } from \"../../components/Tutorial\";\nimport { useAddress } from \"../AddressContext\";\nimport { CreateBuildingForm } from \"../Forms\";\n\n\nfunction BuildingsList() {\n    const { getBuildingsInAddress } = useAddress();\n    const { reloadMap } = useResourceMap();\n    const notify = useNotification();\n\n    const urlParams = useParams() as AddressViewParams;\n\n    const [createBuildingModalOpen, setCreateBuildingModalOpen] = React.useState<boolean>(false);\n    const [buildings, setBuildings] = React.useState<Building[]>();\n\n\n    const load = React.useCallback(async () => {\n        const buildings = await getBuildingsInAddress();\n        setBuildings(buildings);\n    }, [getBuildingsInAddress])\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    const createBuilding = React.useCallback(async (data: BuildingCreateParams) => {\n        try {\n            await BuildingService.create(urlParams, data);\n            load();\n            reloadMap();\n            notify('Nowy Budynek utworzony!', 'success');\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n        load,\n        urlParams,\n    ]);\n\n\n    const renderedBuildings = React.useMemo(() => {\n        if (buildings && buildings.length > 0) {\n\n            return buildings?.map(item => <ScrollableListItem key={item.id}\n                primary={`Budynek ${item.name}`}\n                link={`./${item.address}/buildings/${item.id}`}\n            />)\n        } else {\n            return <EmptyScrollableListItem text=\"Aktualnie brak budynków dla adresu.\"/>\n        }\n    }, [buildings]);\n\n\n    return (\n        <>\n            <CreateBuildingForm\n                open={createBuildingModalOpen}\n                onClose={() => setCreateBuildingModalOpen(false)}\n                handleCreateBuilding={createBuilding}\n            />\n\n            <Tip text='To jest lista budynków pod tym adresem.' priority={10}>\n                <SmallCard title='Budynki pod adresem'>\n                    <ScrollableList\n                        onAddItem={() => setCreateBuildingModalOpen(true)}\n                    >\n                        {renderedBuildings}\n                    </ScrollableList>\n                </SmallCard>\n            </Tip>\n            <br />\n        </>\n    );\n}\n\nexport default React.memo(BuildingsList);","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport Loading from \"../../../../shared/components/Loading\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport useResolvedAccess from \"../hooks/useResolvedAccess\";\nimport AddressContext from \"./AddressContext\";\nimport AddressCard from \"./components/AddressCard\";\nimport BuildingsList from \"./components/BuildingsList\";\n\nconst LazyAddressCharts = React.lazy(() => import(\"./components/AddressCharts\"));\nconst AddressCharts = () => <React.Suspense fallback={<Loading />}>\n    <LazyAddressCharts />\n</React.Suspense>\n\n\n\nfunction AddressPage() {\n    const { statsViewer } = useResolvedAccess();\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        statsViewer && arr.push({ name: 'Statystyki', component: <AddressCharts /> });\n\n        return arr;\n    }, [\n        statsViewer\n    ]);\n\n\n    return (\n        <AddressContext>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item container spacing={2} alignContent='flex-start' xs={12} md={5} lg={4}>\n                    <Grid item xs={12}>\n                        <AddressCard />\n                    </Grid>\n                    <Grid item xs={12} >\n                        <BuildingsList />\n                    </Grid>\n                </Grid>\n            </Grid>\n        </AddressContext>\n    );\n}\n\nexport default React.memo(AddressPage);","import { Button, Grid } from \"@mui/material\";\nimport { styled } from '@mui/material/styles';\nimport React from \"react\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport SaveIcon from '@mui/icons-material/Save';\nimport { Redirect, useLocation, useParams } from \"react-router-dom\";\nimport Image from \"../../../../models/Image\";\nimport useNotification from \"../../../../contexts/NotificationContext/useNotification\";\nimport { UserViewParams } from \"../../../../services/UserService\";\nimport { BuildingViewParams } from \"../../../../services/BuildingService\";\nimport { RoomViewParams } from \"../../../../services/RoomService\";\nimport ImageService from \"../../../../services/ImageService\";\n\n\n\nconst Input = styled('input')({\n    display: 'none',\n});\n\nconst StyledImage = styled('img')({\n    width: \"fill-available\",\n    maxHeight: '350px'\n});\n\ninterface ImageUploadFieldProps {\n    image?: Image,\n    onUpload?: () => void;\n    onDelete?: () => void;\n}\n\nexport default function ImageUploadField(props: ImageUploadFieldProps) {\n    const notify = useNotification();\n    const location = useLocation();\n    const urlParams = useParams<UserViewParams | BuildingViewParams | RoomViewParams>();\n    const [uploadedImage, setUploadedImage] = React.useState<Blob>();\n\n\n    const handleSubmit = React.useCallback(async (evt: React.FormEvent) => {\n        evt.preventDefault();\n        if (!uploadedImage) {\n            notify(\"Najpierw załaduj nowy obraz\", \"warning\");\n            return;\n        }\n        try {\n            await ImageService.upload(urlParams, uploadedImage);\n            props.onUpload && props.onUpload();\n            notify(\"Obraz został zmieniony\", 'success',\n                () => <Redirect to={location.pathname} /> // rerender the current page\n            );\n\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        uploadedImage,\n        props,\n        notify,\n        location,\n        urlParams,\n    ]);\n\n\n    const handleImageUpload = React.useCallback((evt: any) => {\n        if (evt.target.files && evt.target.files[0]) {\n            const img = evt.target.files[0];\n            setUploadedImage(img);\n        }\n    }, []);\n\n\n    const handleRemoveImgae = React.useCallback(async () => {\n        try {\n            await ImageService.remove(urlParams);\n            props.onDelete && props.onDelete();\n            notify(\"Przywrócono domyślny obraz, załaduj ponownie aby zobaczyć rezultat.\", \"success\",\n                () => <Redirect to={location.pathname} /> // rerender the current page\n            );\n\n        } catch (err: any) {\n            notify(err.description, \"error\");\n        }\n    }, [\n        props,\n        notify,\n        location,\n        urlParams,\n    ]);\n\n\n    return (\n        <Grid container component=\"form\"\n            onSubmit={handleSubmit}\n            direction=\"row\"\n            alignItems=\"stretch\"\n            spacing={2}\n        >\n            <Grid item xs={12} sm={9}>\n                <StyledImage\n                    src={uploadedImage ? URL.createObjectURL(uploadedImage) : ImageService.getLink(props.image)}\n                    alt='nowy obraz'\n                />\n            </Grid>\n            <Grid item xs={12} sm={3} sx={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                alignItems: \"center\",\n                justifyContent: \"space-between\",\n            }}>\n                <label htmlFor=\"upload-obrazu\">\n                    <Input\n                        accept=\"*.(jpg|png)\"\n                        id=\"upload-obrazu\"\n                        type=\"file\"\n                        onChange={handleImageUpload}\n                    />\n                    <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        component=\"span\">\n                        Wybierz zdjęcie\n                    </Button>\n                </label>\n\n                <Button color=\"error\"\n                    startIcon={<DeleteIcon />}\n                    onClick={handleRemoveImgae}\n                >\n                    Usuń\n                </Button>\n\n                <Button\n                    type=\"submit\"\n                    color=\"success\"\n                    startIcon={<SaveIcon />}\n                >\n                    Zapisz\n                </Button>\n            </Grid>\n        </Grid>\n    )\n}","import Model from './Model';\nimport Image from './Image';\nimport Building from './Building';\n\nexport enum RoomTypes {\n    LABORATORY = \"Sala laboratoryjna\",\n    CONFERENCE = \"Sala konferencyjna\",\n    LECTURE = \"Sala wykładowa\"\n}\n\nexport type RoomType = RoomTypes.LABORATORY | RoomTypes.CONFERENCE | RoomTypes.LECTURE;\n\ninterface BaseRoom extends Model {\n    name: string,\n    image: Image,\n    roomType: RoomType,\n    seatsCount: number,\n    floor: number,\n    blocked: boolean,\n    occupied: boolean,\n    RFIDTag: null | string\n}\n\nexport default interface Room extends BaseRoom {\n    building: number\n}\n\nexport interface DetailedRoom extends BaseRoom {\n    building: Building\n}","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport { SelectChangeEvent } from \"@mui/material/Select/SelectInput\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport GenericModal from \"../../components/GenericModal\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Select from \"@mui/material/Select\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport { BuildingUpdateParams } from \"../../../../../services/BuildingService\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport { useBuilding } from \"../BuildingContext\";\nimport MobileTimePicker from \"@mui/lab/MobileTimePicker\";\nimport { timeFormat } from \"../../../../../shared/utils\";\nimport ImageUploadField from \"../../components/ImageUploadField\";\nimport Divider from \"@mui/material/Divider\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\n\ninterface BuildingEditFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\n\n\nfunction timeToDate(value: string) {\n    const [h, m] = value.split(':');\n    return new Date(0, 0, 0, Number(h), Number(m));\n}\n\n\nexport default function BuildingEditForm({\n    open,\n    onClose,\n}: BuildingEditFormProps) {\n    const { allAddresses } = useResourceMap();\n    const { updateBuilding, building } = useBuilding();\n\n    const [data, setData] = React.useState<BuildingUpdateParams>({});\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n\n        setData((old: BuildingUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleTime = React.useCallback((field: 'closeTime' | 'openTime', value: Date) => {\n        setData(old => {\n            old[field] = timeFormat.format(value);\n            return Object.assign({}, old);\n        });\n    }, [])\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateBuilding(data)) {\n            close();\n        }\n    }, [\n        data,\n        close,\n        updateBuilding,\n    ]);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<string | number>): void => {\n        let value: string | number = event.target.value;\n        if (event.target.name === 'addressId') value = Number(value);\n\n        event.target && setData((old: BuildingUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno edycji budynku\"\n        >\n            <Stack spacing={3}>\n\n                <ImageUploadField image={building.image} />\n                <Divider />\n\n                <FormGridContainer\n                    title='Edycja budynku'\n                    subtitle=\"Zmień właściwości budynku i zatwierdź zmiany.\"\n                    onSubmit={handleSubmit}\n                    onCancel={onClose}\n                >\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"name\"\n                            label=\"Nazwa\"\n                            name=\"name\"\n                            autoFocus\n                            value={data.name ?? building.name}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6} >\n                        <MobileTimePicker\n                            label=\"Godzina otwarcia\"\n                            inputFormat=\"HH:mm\"\n                            value={timeToDate(data.openTime ?? building.openTime)}\n                            onChange={(value: any) => handleTime('openTime', value)}\n                            renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <MobileTimePicker\n                            label=\"Godzina zamknięcia\"\n                            inputFormat=\"HH:mm\"\n                            value={timeToDate(data.closeTime ?? building.closeTime)}\n                            onChange={(value: any) => handleTime('closeTime', value)}\n                            renderInput={(params: any) => <TextField sx={{ width: '100%' }} {...params} />}\n                        />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControl fullWidth>\n                            <InputLabel id=\"wybierz-adres\">Adres</InputLabel>\n                            <Select\n                                labelId=\"wybierz-adres\"\n                                name=\"addressId\"\n                                value={data.addressId ?? building.address.id}\n                                label=\"Adres\"\n                                onChange={handleSelectChange}\n                            >\n                                {allAddresses.map(({ name, id }) => <MenuItem key={name} value={id} >{name} </MenuItem>)}\n                            </Select>\n                        </FormControl>\n                    </Grid>\n                </FormGridContainer>\n            </Stack>\n        </GenericModal>\n    );\n}","import React from \"react\";\nimport FormControl from \"@mui/material/FormControl\";\nimport Grid from \"@mui/material/Grid\";\nimport InputLabel from \"@mui/material/InputLabel\";\nimport MenuItem from \"@mui/material/MenuItem\";\nimport Select, { SelectChangeEvent } from \"@mui/material/Select\";\nimport TextField from \"@mui/material/TextField\";\nimport { RoomType, RoomTypes } from \"../../../../../models/Room\";\nimport { CreateRoomParams } from \"../../../../../services/RoomService\";\nimport GenericModal from \"../../components/GenericModal\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\n\n\ninterface CreateRoomFormProps {\n    open: boolean,\n    onClose: () => void,\n    handleCreateRoom: (data: CreateRoomParams) => Promise<boolean>\n}\n\n\nexport default function CreateRoomForm({\n    open,\n    onClose,\n    handleCreateRoom,\n}: CreateRoomFormProps) {\n\n    const [data, setData] = React.useState<CreateRoomParams>({\n        name: '',\n        roomType: RoomTypes.LECTURE,\n        seatsCount: 50,\n        floor: 0\n    });\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n        setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<RoomType | number>): void => {\n        let value: string | number = event.target.value;\n        if (event.target.name === 'buildingId') value = Number(value);\n\n        event.target && setData((old) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await handleCreateRoom(data)) {\n            onClose();\n        }\n\n    }, [\n        data,\n        handleCreateRoom,\n        onClose,\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno edycji budynku\"\n        >\n            <FormGridContainer\n                title='Dodaj nową salę'\n                subtitle=\"Wypełnij dane nowej sali i kliknij zatwierdź.\"\n                onSubmit={handleSubmit}\n                onCancel={onClose}\n            >\n                <Grid item xs={12}>\n                    <TextField\n                        required\n                        fullWidth\n                        id=\"name\"\n                        label=\"Nazwa\"\n                        name=\"name\"\n                        autoFocus\n                        value={data.name}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <InputLabel id=\"room-type\">Typ Sali</InputLabel>\n                        <Select\n                            required\n                            labelId=\"room-type\"\n                            id=\"roomType\"\n                            value={data.roomType}\n                            name=\"roomType\"\n                            label=\"Typ Sali\"\n                            onChange={handleSelectChange}\n                        >\n                            {Object.values(RoomTypes).map(val => <MenuItem key={val} value={val}>{val}</MenuItem>)}\n\n                        </Select>\n                    </FormControl>\n                </Grid>\n\n                <Grid item xs={6} >\n                    <TextField\n                        required\n                        name=\"seatsCount\"\n                        label=\"Ilość miejsc\"\n                        type=\"number\"\n                        id=\"seatsCount\"\n                        value={data.seatsCount}\n                        onChange={handleChange}\n                    />\n                </Grid>\n\n                <Grid item xs={6}>\n                    <TextField\n                        required\n                        name=\"floor\"\n                        label=\"Piętro\"\n                        type=\"number\"\n                        id=\"floor\"\n                        value={data.floor}\n                        onChange={handleChange}\n                    />\n                </Grid>\n            </FormGridContainer>\n        </GenericModal >\n    );\n}","\n\n\nexport enum FavType {\n    Building = 'building-item',\n    Room = 'room-item'\n}\n\n\ninterface FavouriteItem {\n    id: number,\n    name: string,\n    type: FavType,\n}\n\nexport interface FavouriteBuilding extends FavouriteItem {\n    addressId: number,\n}\n\nexport interface FavouriteRoom extends FavouriteBuilding {\n    buildingId: number,\n}\n\n\nexport default interface Metadata {\n    notes?: string,\n    favourites?: (FavouriteBuilding | FavouriteRoom)[]\n}\n","import StarIcon from '@mui/icons-material/Star';\nimport StarBorderIcon from '@mui/icons-material/StarBorder';\nimport IconButton from '@mui/material/IconButton';\nimport React from 'react';\nimport { FavouriteBuilding, FavouriteRoom } from '../../../../models/Metadata';\nimport MetadataService from '../../../../services/MetadataService';\nimport { Tip } from './Tutorial';\n\n\n\ninterface FavouriteButtonProps {\n    data: FavouriteBuilding | FavouriteRoom\n}\n\n\nexport default function FavouriteButton(props: FavouriteButtonProps) {\n    const [marked, setMarked] = React.useState(false);\n\n    React.useEffect(() => {\n        setMarked(MetadataService.isFavourite(props.data));\n    }, [props.data]);\n\n\n    const addToFavourites = React.useCallback(() => {\n        if (marked) {\n            MetadataService.removeFavourite(props.data);\n        } else {\n            MetadataService.addFavourite(props.data);\n        }\n\n        setMarked(old => !old);\n    }, [\n        marked,\n        props.data,\n    ]);\n\n\n    return (\n        <Tip text='Kliknij aby dodać do ulubionych' priority={0}>\n            <IconButton sx={{ display: 'inline' }} onClick={addToFavourites} color='warning'>\n                {marked ? <StarIcon /> : <StarBorderIcon />}\n            </IconButton>\n        </Tip>\n    );\n}","import React from \"react\";\nimport { Card, CardContent, CardHeader, CardMedia, Link } from \"@mui/material\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteModal from \"../../components/DeleteModal\";\nimport { useBuilding } from \"../BuildingContext\";\nimport { BuildingEditForm } from \"../Forms\";\nimport FavouriteButton from \"../../components/FavouriteButton\";\nimport { FavType } from \"../../../../../models/Metadata\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport { dynamicPaths } from \"../../../../../shared/path\";\nimport DatesFooter from \"../../components/DatesFooter\";\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\n\n\n\n\nexport default function BuildingView() {\n    const { premisesAdmin } = useResolvedAccess();\n    const { building, deleteBuilding } = useBuilding();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState<boolean>(false);\n    const [editModalOpen, setEditModalOpen] = React.useState<boolean>(false);\n\n\n    const options = React.useMemo(() => [\n        {\n            label: 'Edytuj',\n            action: () => setEditModalOpen(true),\n            icon: <EditIcon color='success' />\n        }, {\n            label: 'Usuń',\n            action: () => setDeleteModalOpen(true),\n            icon: <DeleteIcon color='error' />\n        }\n    ], []);\n\n\n    if (!Boolean(building)) return null;\n\n    return (\n        <>\n            {premisesAdmin &&\n                <>\n                    <DeleteModal\n                        open={deleteModalOpen}\n                        onClose={() => setDeleteModalOpen(false)}\n                        onSuccess={deleteBuilding}\n                    />\n\n                    <BuildingEditForm\n                        open={editModalOpen}\n                        onClose={() => setEditModalOpen(false)}\n                    />\n                </>\n            }\n\n            <Card elevation={0}>\n                <CardHeader\n                    action={\n                        premisesAdmin &&\n                        <MoreVertMenu options={options} />\n                    }\n                    title={\n                        <>\n                            Budynek {building.name}\n                            <FavouriteButton data={{\n                                id: building.id,\n                                name: building.name,\n                                type: FavType.Building,\n                                addressId: building.address.id,\n                            }} />\n                        </>\n                    }\n                    subheader={<>{building.openTime} - {building.closeTime}</>}\n                />\n                <CardMedia\n                    component=\"img\"\n                    height=\"350\"\n                    image={ImageService.getLink(building.image)}\n                    alt={building.name}\n                />\n                <CardContent>\n                    <Link href={dynamicPaths.toAddress(building.address.id)}>\n                        {building.address.town},&nbsp;{building.address.street}&nbsp;{building.address.number}\n                    </Link>\n                    <br />\n                    <DatesFooter model={building} />\n                </CardContent>\n            </Card>\n        </>\n    );\n}","import React from \"react\";\nimport Room from \"../../../../../models/Room\";\nimport ScrollableList, { ScrollableListItem } from \"../../components/ScrollableList\";\nimport { useBuilding } from \"../BuildingContext\";\nimport { CreateRoomForm } from \"../Forms\";\nimport RoomService, { CreateRoomParams } from \"../../../../../services/RoomService\";\nimport { useParams } from \"react-router-dom\";\nimport { BuildingViewParams } from \"../../../../../services/BuildingService\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport SmallCard from \"../../components/SmallCard\";\nimport { Tip } from \"../../components/Tutorial\";\nimport { EmptyScrollableListItem } from \"../../components/ScrollableList/ScrollableListItem\";\n\n\n\nfunction RoomsList() {\n    const { getRoomsInBuilding } = useBuilding();\n    const { reloadMap } = useResourceMap();\n\n    const urlParams = useParams() as BuildingViewParams;\n    const notify = useNotification();\n\n    const [createRoomModalOpen, setCreateRoomModalOpen] = React.useState<boolean>(false);\n    const [rooms, setRooms] = React.useState<Room[]>();\n\n\n    const load = React.useCallback(async () => {\n        const rooms = await getRoomsInBuilding();\n        setRooms(rooms);\n    }, [\n        getRoomsInBuilding\n    ]);\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    const createRoom = React.useCallback(async (data: CreateRoomParams) => {\n        try {\n            await RoomService.create(urlParams, data);\n            notify('Nowa sala utworzona!', 'success');\n            load();\n            reloadMap();\n            return true;\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n        return false;\n    }, [\n        notify,\n        reloadMap,\n        load,\n        urlParams,\n    ]);\n\n\n    const renderedRooms = React.useMemo(() => {\n        if (rooms && rooms.length > 0) {\n            return rooms?.map(item => <ScrollableListItem\n                key={item.id}\n                primary={`Sala ${item.name}`}\n                link={`./${item.building}/rooms/${item.id}`}\n            />)\n        } else{\n            return <EmptyScrollableListItem text=\"Aktualnie brak sal dla budynku.\"/>\n        }\n    }, [rooms])\n\n\n    return (\n        <>\n            <CreateRoomForm\n                handleCreateRoom={createRoom}\n                open={createRoomModalOpen}\n                onClose={() => setCreateRoomModalOpen(false)}\n            />\n\n            <Tip text='Lista Sal znajdujących się w wybranym budynku.' priority={1}>\n                <SmallCard title=\"Sale w budynku\">\n                    <ScrollableList onAddItem={() => setCreateRoomModalOpen(true)}>\n                        {renderedRooms}\n                    </ScrollableList>\n                </SmallCard>\n            </Tip>\n            <br />\n        </>\n    );\n}\n\nexport default React.memo(RoomsList);","import React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport BuildingContext from \"./BuildingContext\";\nimport BuildingCard from \"./components/BuildingCard\";\nimport RoomsList from \"./components/RoomsList\";\nimport useResolvedAccess from \"../hooks/useResolvedAccess\";\nimport Loading from \"../../../../shared/components/Loading\";\n\n\n\nconst LazyRoomOrBuildingChartTab = React.lazy(() => import(\"../components/RoomOrBuildingChartTab\"));\nconst RoomOrBuildingChartTab = () => <React.Suspense fallback={<Loading />}>\n    <LazyRoomOrBuildingChartTab />\n</React.Suspense>\n\n\nfunction BuildingPage() {\n    const { statsViewer } = useResolvedAccess();\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        statsViewer && arr.push({ name: 'Statystyki', component: <RoomOrBuildingChartTab /> });\n\n        return arr;\n    }, [\n        statsViewer\n    ]);\n\n\n    return (\n        <BuildingContext>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item container spacing={2} alignContent='flex-start' xs={12} md={5} lg={4}>\n                    <Grid item xs={12}>\n                        <BuildingCard />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <RoomsList />\n                    </Grid>\n                </Grid>\n            </Grid>\n        </BuildingContext>\n    );\n};\n\nexport default React.memo(BuildingPage);","import { IconButton, Link, List, ListItem, ListItemText } from \"@mui/material\";\nimport React from \"react\";\nimport useSession from \"../../../../auth/useSession\";\nimport { FavouriteBuilding, FavouriteRoom, FavType } from \"../../../../models/Metadata\";\nimport MetadataService from \"../../../../services/MetadataService\";\nimport SmallCard from \"../components/SmallCard\";\nimport { dynamicPaths } from \"../../../../shared/path\";\nimport RemoveCircleOutlineIcon from '@mui/icons-material/RemoveCircleOutline';\n\n\nfunction getCorrectListItem(data: FavouriteBuilding | FavouriteRoom): React.ReactNode {\n    switch (data.type) {\n        case FavType.Building: {\n            const { addressId, id, name } = data as FavouriteBuilding;\n            return <ListItemText key={name + id} primary={<Link href={dynamicPaths.toBuilding(addressId, id)}>Budynek {name}</Link>} />\n        }\n        case FavType.Room: {\n            const { addressId, buildingId, id, name } = data as FavouriteRoom;\n            return <ListItemText key={name + id} primary={<Link href={dynamicPaths.toRoom(addressId, buildingId, id)}>Sala {name}</Link>} />\n        }\n        default: return null;\n    }\n}\n\n\nfunction Favourites() {\n    const { user } = useSession();\n\n    const [data, setData] = React.useState<(FavouriteBuilding | FavouriteRoom)[]>()\n\n\n    React.useEffect(() => {\n        setData(MetadataService.favourites);\n    }, [user])\n\n    const handleRemoveFavourite = React.useCallback((item: FavouriteBuilding | FavouriteRoom) => {\n        MetadataService.removeFavourite(item);\n        setData(MetadataService.favourites);\n    }, []);\n\n    return (\n        <SmallCard title='Ulubione'>\n            <List sx={{ minHeight: '160px' }}>\n                {\n                    data?.map((item) => <ListItem disablePadding key={`${item.name}-${item.id}`}>\n                        {getCorrectListItem(item)}\n                        <IconButton\n                            title='usuń z ulubionych'\n                            aria-label='usuń z ulubionych'\n                            onClick={() => handleRemoveFavourite(item)}\n                            size='small'>\n                            <RemoveCircleOutlineIcon fontSize=\"small\" />\n                        </IconButton>\n                    </ListItem>\n                    )\n                }\n                {\n                    data?.length === 0 &&\n                    <ListItemText color='text.secondary' primary='Brak ulubionych' />\n                }\n            </List>\n        </SmallCard>\n    )\n}\n\nexport default React.memo(Favourites);\n","import { Button, InputBase } from \"@mui/material\";\nimport Box from \"@mui/system/Box\";\nimport React from \"react\";\nimport SaveIcon from '@mui/icons-material/Save';\nimport useNotification from \"../../../../contexts/NotificationContext/useNotification\";\nimport SmallCard from \"../components/SmallCard\";\nimport MetadataService from \"../../../../services/MetadataService\";\n\n\n\nfunction Notebook() {\n    const notify = useNotification();\n\n    const [data, setData] = React.useState<string>();\n\n\n    React.useEffect(() => {\n        setData(MetadataService.notes)\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n        if (!data) return;\n\n        try {\n            MetadataService.notes = data;\n\n            notify('Notatki zostały zapisane', 'success');\n            setData(undefined);\n        } catch (err: any) {\n            notify(err.description, 'error');\n        }\n    }, [\n        data,\n        notify,\n    ]);\n\n\n    const handleChange = React.useCallback(async (event: React.ChangeEvent<HTMLInputElement>) => {\n        setData(event.target.value)\n    }, []);\n\n\n    return (\n        <SmallCard title='Notatnik'>\n            <Box component='form' onSubmit={handleSubmit} sx={{\n                display: 'flex',\n                justifyContent: 'flex-end',\n                flexDirection: 'column',\n            }}>\n                <InputBase\n                    aria-label=\"twoje notatki\"\n                    title='twoje notatki'\n                    multiline\n                    minRows={4}\n                    maxRows={10}\n                    name='search'\n                    value={data ?? MetadataService.notes ?? ''}\n                    onChange={handleChange}\n                    placeholder=\"Twoje notatki\"\n                    sx={{\n                        width: '100%',\n                        height: '100%',\n                        p: 1,\n                        bgcolor: 'background.default'\n                    }}\n                    inputProps={{\n                        'aria-label': 'Twoje notatki'\n                    }}\n                />\n                <Button\n                    title='Zapisz notatki'\n                    aria-label='Zapisz notatki'\n                    sx={{ mr: '0px', ml: 'auto' }}\n                    startIcon={<SaveIcon />}\n                    type=\"submit\">\n                    Zapisz\n                </Button>\n            </Box>\n        </SmallCard >\n    );\n}\n\nexport default React.memo(Notebook);","import React from 'react';\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SmallCard from \"../components/SmallCard\";\n\n\n\nexport default function HomeReservations() {\n    return (\n        <SmallCard title='Rezerwacje'>\n            <GenericReservationsTab />\n        </SmallCard>\n    );\n}\n","import React from 'react';\nimport { Grid } from \"@mui/material\";\nimport Favourites from \"./Favourites\";\nimport Notebook from \"./Notebook\";\nimport HomeReservations from \"./HomeReservations\";\n\n\n\nexport default function HomePage() {\n    return (\n        <Grid container spacing={2}>\n            <Grid item xs={12} lg={8}>\n                <HomeReservations />\n            </Grid>\n            <Grid item container spacing={2} xs={12} lg={4}\n                alignContent='flex-start'\n            >\n                <Grid item xs={12} sm={6} lg={12}>\n                    <Notebook />\n                </Grid>\n                <Grid item xs={12} sm={6} lg={12}>\n                    <Favourites />\n                </Grid>\n            </Grid>\n        </Grid>\n    );\n}","import React from 'react';\nimport Loading from '../../../../shared/components/Loading';\n\nconst LazyLogsPage = React.lazy(() => import('./LogsPage'));\n\n\nexport default function LogsPage() {\n    return <React.Suspense fallback={<Loading />}>\n        <LazyLogsPage />\n    </React.Suspense>\n}\n","import * as React from 'react';\nimport TextField from '@mui/material/TextField';\nimport { Divider, FormControl, Grid, InputLabel, MenuItem, Select, SelectChangeEvent, Stack } from '@mui/material';\nimport { RoomUpdateParams } from '../../../../../services/RoomService';\nimport { RoomType, RoomTypes } from '../../../../../models/Room';\nimport { useRoomContext } from '../RoomContext';\nimport ImageUploadField from '../../components/ImageUploadField';\nimport { useResourceMap } from '../../../../../contexts/ResourceMapContext';\nimport Switch from '@mui/material/Switch';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport GenericModal from '../../components/GenericModal';\nimport FormGridContainer from '../../../../../shared/components/FormGridContainer';\n\n\n\ninterface RoomEditFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\n\nexport default function RoomEditForm({\n    open,\n    onClose,\n}: RoomEditFormProps) {\n    const { room, updateRoom } = useRoomContext();\n    const { allBuildings } = useResourceMap();\n\n    const [data, setData] = React.useState<RoomUpdateParams>({});\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        let value: string | number | boolean = event.target.value;\n\n        switch (event.target.name) {\n            case \"name\":\n                value = String(value);\n                break;\n            case \"blocked\":\n                value = !event.target.checked;\n                break;\n            default:\n                value = Number(value);\n                break;\n        }\n\n        setData((old: RoomUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSelectChange = React.useCallback((event: SelectChangeEvent<RoomType | number>): void => {\n        let value: string | number = event.target.value;\n        if (event.target.name === 'buildingId') value = Number(value);\n\n        event.target && setData((old: RoomUpdateParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, []);\n\n\n    const handleSubmit = React.useCallback(async () => {\n        if (await updateRoom(data)) {\n            onClose();\n        }\n    }, [\n        data,\n        updateRoom,\n        onClose\n    ]);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={onClose}\n            aria-label=\"Okno usuwania obiektu\"\n            sx={{\n                maxWidth: \"450px\",\n            }}\n        >\n            <Stack spacing={2}>\n                <ImageUploadField image={room.image} />\n                <Divider />\n\n                <FormGridContainer\n                    title='Edycja sali'\n                    subtitle=\"Zmień właściwości pokoju i zatwierdź zmiany.\"\n                    onSubmit={handleSubmit}\n                    onCancel={onClose}\n                >\n\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"name\"\n                            label=\"Nazwa\"\n                            name=\"name\"\n                            autoFocus\n                            value={data.name ?? room.name}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControl fullWidth>\n                            <InputLabel id=\"room-type\">Typ Sali</InputLabel>\n                            <Select\n                                labelId=\"room-type\"\n                                id=\"roomType\"\n                                value={data.roomType ?? room.roomType}\n                                name=\"roomType\"\n                                label=\"Typ Sali\"\n                                onChange={handleSelectChange}\n                            >\n                                {Object.values(RoomTypes).map(val => <MenuItem key={val} value={val}>{val}</MenuItem>)}\n\n                            </Select>\n                        </FormControl>\n                    </Grid>\n\n                    <Grid item xs={6} >\n                        <TextField\n                            required\n                            name=\"seatsCount\"\n                            label=\"Ilość miejsc\"\n                            type=\"number\"\n                            id=\"seatsCount\"\n                            value={data.seatsCount ?? room.seatsCount}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <TextField\n                            required\n                            name=\"floor\"\n                            label=\"Piętro\"\n                            type=\"number\"\n                            id=\"floor\"\n                            value={data.floor ?? room.floor}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControl fullWidth>\n                            <InputLabel id=\"wybierz-budynek\">Budynek</InputLabel>\n                            <Select\n                                labelId=\"wybierz-budynek\"\n                                name=\"buildingId\"\n                                value={data.buildingId ?? room.building.id}\n                                label=\"Budynek\"\n                                onChange={handleSelectChange}\n                            >\n                                {allBuildings.map(({ name, id }) => <MenuItem key={name} value={id} >Budynek &nbsp;{name} </MenuItem>)}\n                            </Select>\n                        </FormControl>\n                    </Grid>\n\n                    <Grid item xs={12}>\n                        <FormControlLabel\n                            labelPlacement=\"start\"\n                            control={<Switch id=\"room-blocked\" name=\"blocked\"\n                                inputProps={{ 'aria-label': 'controlled' }}\n                                onChange={handleChange}\n                                checked={!(data.blocked ?? room.blocked)}\n                            />}\n                            label=\"Dostępność Sali\"\n                        />\n                    </Grid>\n\n                </FormGridContainer>\n            </Stack>\n        </GenericModal>\n    );\n}","import React from 'react';\nimport GenericModal from \"../../components/GenericModal\";\nimport RfidForm from \"../../components/RfidForm\";\nimport { useRoomContext } from \"../RoomContext\";\n\n\ninterface RfidModalRormProps {\n    open: boolean,\n    onClose: () => void,\n}\n\nexport default function RfidModalRorm(props: RfidModalRormProps) {\n    const { updateRFIDTag } = useRoomContext();\n\n    return (\n        <GenericModal\n            open={props.open}\n            onClose={props.onClose}\n            aria-label=\"Okno przypisania tagu RFID\"\n            sx={{\n                maxWidth: \"400px\"\n            }}\n        >\n            <RfidForm\n                headline=\"Użyj czytnika, aby wprowadzić tag.\"\n                bodyText='Jeśli nie chcesz wprowadzać zmian, naciśnij \"Zamknij\"'\n                onScan={updateRFIDTag}\n                onClose={props.onClose}\n            />\n        </GenericModal>\n    );\n}\n","import React from 'react';\nimport CancelIcon, { } from '@mui/icons-material/Cancel';\nimport CheckCircleOutlineIcon from '@mui/icons-material/CheckCircleOutline';\n\n\ninterface YesNoIconProps {\n    value: boolean,\n    title?: string,\n    fontSize?: 'small' | 'medium' | 'large',\n}\n\n\nexport default function YesNoIcon(props: YesNoIconProps) {\n    const { value, ...rest } = props;\n\n    return (\n        value ?\n            <CheckCircleOutlineIcon color=\"success\" {...rest} />\n            : <CancelIcon sx={{ color: \"red\" }} {...rest} />\n    )\n}","import { Chip, IconButton, Link, Table, TableBody, TableCell, TableContainer, TableHead, TableRow } from \"@mui/material\";\nimport React from \"react\";\nimport { useResourceMap } from \"../../../../../contexts/ResourceMapContext\";\nimport { DetailedRoom } from \"../../../../../models/Room\";\nimport { RfidForm } from \"../Forms\";\nimport AddCircleIcon from '@mui/icons-material/AddCircle';\nimport YesNoIcon from \"./YesNoIcon\";\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\nimport { Tip } from \"../../components/Tutorial\";\n\n\ninterface RoomTableInfoProps {\n    room: DetailedRoom,\n    deleteTag: () => Promise<void>\n}\n\n\nexport default function RoomTableInfo({\n    room, deleteTag\n}: RoomTableInfoProps) {\n    const { keysAdmin } = useResolvedAccess();\n    const { getBuildingLink } = useResourceMap();\n    const [rfidTagModalOpen, setRfidTagModalOpen] = React.useState<boolean>(false);\n\n    const tableRows = React.useMemo(() => {\n        const rows = [\n            {\n                label: \"Ilość miejsc\",\n                value: room.seatsCount\n            }, {\n                label: \"Piętro\",\n                value: room.floor === 0 ? \"parter\" : room.floor\n            }, {\n                label: \"Budynek\",\n                value: <Link href={getBuildingLink(room.building.id)}> {room.building.name} </Link>\n            }, {\n                label: \"Aktualnie wolny\",\n                value: <YesNoIcon value={!room.occupied} />\n            }\n        ];\n        keysAdmin && rows.push({\n            label: \"Tag RFID\",\n            value: room.RFIDTag ?\n                <Chip label={room.RFIDTag} onDelete={deleteTag} sx={{ maxWidth: '120px' }} />\n                : <Tip text='Kliknij \"+\" by przypisać klucz RFID' priority={10}>\n                    <IconButton size=\"small\"\n                        onClick={() => setRfidTagModalOpen(true)}\n                        sx={{ p: '0px' }}\n                    >\n                        <AddCircleIcon />\n                    </IconButton>\n                </Tip>\n        });\n        rows.push({\n            label: \"Dostępny do rezerwacji\",\n            value: <YesNoIcon value={!room.blocked} />\n        });\n\n        return rows;\n    }, [\n        keysAdmin,\n        room,\n        deleteTag,\n        getBuildingLink,\n    ]);\n\n\n    const RenderedRows = React.useMemo(() => {\n        return tableRows.map(({ label, value }) =>\n            <TableRow hover key={label}>\n                <TableCell sx={{ color: \"text.secondary\" }} align=\"left\">{label}</TableCell>\n                <TableCell sx={{ color: \"primary.main\", fontWeight: \"bold\" }} align=\"left\">{value}</TableCell>\n            </TableRow>\n        )\n    }, [tableRows])\n\n\n    return (\n        <>\n            <RfidForm\n                open={rfidTagModalOpen}\n                onClose={() => setRfidTagModalOpen(false)}\n            />\n\n            <TableContainer >\n                <Table aria-label=\"room-info-table\" size=\"small\">\n                    <TableHead sx={{ display: 'none' }}>\n                        <TableRow>\n                            <TableCell align=\"left\">Właściwość</TableCell>\n                            <TableCell align=\"left\">stan</TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {RenderedRows}\n                    </TableBody>\n                </Table>\n            </TableContainer>\n        </>\n    );\n}\n","import { Card, CardContent, CardHeader, CardMedia } from \"@mui/material\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport RoomTableInfo from \"./RoomTableInfo\";\nimport React from \"react\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport { useRoomContext } from \"../RoomContext\";\nimport Loading from \"../../../../../shared/components/Loading\";\nimport { RoomEditForm } from \"../Forms\";\nimport FavouriteButton from \"../../components/FavouriteButton\";\nimport { FavType } from \"../../../../../models/Metadata\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport DatesFooter from \"../../components/DatesFooter\";\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\nimport SearchIcon from '@mui/icons-material/Search';\nimport { useHistory } from \"react-router-dom\";\nimport paths from \"../../../../../shared/path\";\nimport { Tip } from \"../../components/Tutorial\";\n\n\n\nexport default function RoomCard() {\n    const { premisesAdmin, logsAdmin } = useResolvedAccess();\n    const { room, deleteRoom, deleteRFIDTag } = useRoomContext();\n    const history = useHistory();\n\n    const [deleteModalOpen, setDeleteModalOpen] = React.useState<boolean>(false);\n    const [editModalOpen, setEditModalOpen] = React.useState<boolean>(false);\n\n\n    const options = React.useMemo(() => {\n        const opt = [\n            {\n                label: 'Edytuj',\n                action: () => setEditModalOpen(true),\n                icon: <EditIcon color='success' />\n            }, {\n                label: 'Usuń',\n                action: () => setDeleteModalOpen(true),\n                icon: <DeleteIcon color='error' />\n            }\n        ];\n        logsAdmin && opt.push({\n            icon: <SearchIcon color='primary' />,\n            label: 'Logs Explorer',\n            action: () => history.push(`${paths.LOGS}?endpoint=%/rooms/${room.id}`)\n        });\n        return opt;\n    }, [\n        history,\n        logsAdmin,\n        room.id\n    ]);\n\n\n    return (\n        !Boolean(room) ? <Loading /> :\n            <>\n                {premisesAdmin &&\n                    <>\n                        <DeleteModal\n                            open={deleteModalOpen}\n                            onClose={() => setDeleteModalOpen(false)}\n                            onSuccess={deleteRoom}\n                        />\n\n                        <RoomEditForm\n                            open={editModalOpen}\n                            onClose={() => setEditModalOpen(false)}\n                        />\n                    </>\n                }\n\n                <Card elevation={0}>\n                    <CardHeader\n                        action={\n                            premisesAdmin &&\n                            <MoreVertMenu options={options} />\n                        }\n                        title={\n                            <>\n                                {room.name}\n                                <FavouriteButton data={{\n                                    id: room.id,\n                                    name: room.name,\n                                    type: FavType.Room,\n                                    addressId: room.building.address,\n                                    buildingId: room.building.id\n                                }} />\n                            </>\n                        }\n                        subheader={<>\n                            {room.roomType}\n                        </>}\n                    />\n                    <CardMedia\n                        component=\"img\"\n                        height=\"350\"\n                        image={ImageService.getLink(room.image)}\n                        alt={room.name}\n                    />\n                    <CardContent>\n                        <Tip text='Tutaj znajdują się informacje na temat Sali' priority={20}>\n                            <RoomTableInfo room={room} deleteTag={deleteRFIDTag} />\n                        </Tip>\n                        <br />\n                        <DatesFooter model={room} />\n                    </CardContent>\n                </Card>\n            </>\n    );\n}\n","import { RoomContextProvider } from \"./RoomContext\";\nimport React from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport RoomCard from \"./components/RoomCard\";\nimport useResolvedAccess from \"../hooks/useResolvedAccess\";\nimport Loading from \"../../../../shared/components/Loading\";\n\n\nconst LazyRoomOrBuildingChartTab = React.lazy(() => import(\"../components/RoomOrBuildingChartTab\"));\nconst RoomOrBuildingChartTab = () => <React.Suspense fallback={<Loading />}>\n    <LazyRoomOrBuildingChartTab />\n</React.Suspense>\n\n\nexport default function RoomPage() {\n    const { statsViewer } = useResolvedAccess();\n\n    const pages = React.useMemo(() => {\n        let arr = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        statsViewer && arr.push({ name: 'Statystyki', component: <RoomOrBuildingChartTab /> });\n\n        return arr;\n    }, [\n        statsViewer\n    ]);\n\n\n    return (\n        <RoomContextProvider>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item xs={12} md={5} lg={4}>\n                    <RoomCard />\n                </Grid>\n            </Grid>\n        </RoomContextProvider>\n    );\n}\n","import React from 'react';\nimport Loading from '../../../../shared/components/Loading';\n\nconst LazySettingsPage = React.lazy(() => import('./SettingsPage'));\n\n\nexport default function SettingsPage() {\n    return <React.Suspense fallback={<Loading />}>\n        <LazySettingsPage />\n    </React.Suspense>\n};\n\n","import React from \"react\";\nimport useSession from \"../../../../../auth/useSession\";\nimport GenericModal from \"../../components/GenericModal\";\nimport PasswordChangeForm from '../../../public/ChangePassword/Form';\n\ninterface EditUserFormProps {\n    open: boolean,\n    onClose: () => void\n}\n\nexport default function PasswordChangeModal({\n    open,\n    onClose\n}: EditUserFormProps) {\n    const { logout } = useSession();\n\n    const close = React.useCallback(() => {\n        onClose();\n\n    }, [onClose]);\n\n    const onSuccess = React.useCallback(() => {\n        logout();\n    }, [logout]);\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n            sx={{\n                maxWidth: '450px'\n            }}\n        >\n            <PasswordChangeForm onSuccess={onSuccess} />\n        </GenericModal>\n    )\n}","import Divider from \"@mui/material/Divider\";\nimport Grid from \"@mui/material/Grid\";\nimport Stack from \"@mui/material/Stack\";\nimport TextField from \"@mui/material/TextField\";\nimport React from \"react\";\nimport { DetailedUser } from \"../../../../../models/User\";\nimport { UpdateUserParams } from \"../../../../../services/UserService\";\nimport FormGridContainer from \"../../../../../shared/components/FormGridContainer\";\nimport GenericModal from \"../../components/GenericModal\";\nimport ImageUploadField from \"../../components/ImageUploadField\";\nimport { useUser } from \"../UserContext\";\n\n\n\ninterface EditUserFormProps {\n    open: boolean,\n    onClose: () => void,\n    user: DetailedUser,\n}\n\n\nexport default function EditUserForm({\n    open,\n    onClose,\n    user,\n}: EditUserFormProps) {\n    const { updateUser } = useUser();\n\n    const [data, setData] = React.useState<UpdateUserParams>({});\n\n\n    const close = React.useCallback(() => {\n        onClose();\n        setData({});\n    }, [\n        onClose\n    ]);\n\n\n    const onSubmit = React.useCallback(async () => {\n        if (await updateUser(data)) {\n            close();\n        }\n    }, [\n        data,\n        close,\n        updateUser,\n    ]);\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>): void => {\n        setData((old) => ({\n            ...old,\n            [event.target.name]: event.target.value\n        }));\n    }, []);\n\n\n    return (\n        <GenericModal\n            open={open}\n            onClose={close}\n            sx={{\n                maxWidth: '450px'\n            }}\n        >\n            <Stack spacing={3}>\n\n                <ImageUploadField image={user.image} />\n\n                <Divider />\n\n                <FormGridContainer\n                    title=\"Edycja użytkownika\"\n                    subtitle=\"Zmień dane użytkownika. Zmiany w całej aplikacji będą widoczne po ponownym przeładowaniu aplikacji.\"\n                    onSubmit={onSubmit}\n                    onCancel={close}\n                >\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"name\"\n                            label=\"Imię\"\n                            name=\"name\"\n                            autoFocus\n                            value={data.name ?? user.name}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n                    <Grid item xs={12}>\n                        <TextField\n                            required\n                            fullWidth\n                            id=\"surname\"\n                            label=\"Nazwisko\"\n                            name=\"surname\"\n                            value={data.surname ?? user.surname}\n                            onChange={handleChange}\n                        />\n                    </Grid>\n\n                </FormGridContainer>\n            </Stack>\n        </GenericModal>\n    )\n}","import React from \"react\";\nimport MoreVertMenu from \"../../components/MoreVertMenu\";\nimport { useUser } from \"../UserContext\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport PasswordIcon from '@mui/icons-material/Password';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { ChangePasswordForm, UserEditForm } from \"../Forms\";\nimport DeleteModal from \"../../components/DeleteModal\";\nimport Card from \"@mui/material/Card\";\nimport CardHeader from \"@mui/material/CardHeader\";\nimport CardMedia from \"@mui/material/CardMedia\";\nimport ImageService from \"../../../../../services/ImageService\";\nimport CardContent from \"@mui/material/CardContent\";\nimport { displayDate } from \"../../../../../shared/utils\";\nimport { Link, Typography } from \"@mui/material\";\nimport DatesFooter from \"../../components/DatesFooter\";\nimport useResolvedAccess from \"../../hooks/useResolvedAccess\";\nimport SearchIcon from '@mui/icons-material/Search';\nimport { useHistory } from \"react-router-dom\";\nimport paths from \"../../../../../shared/path\";\n\n\n\nexport default function UserCard() {\n    const { myId, owner, logsAdmin } = useResolvedAccess();\n    const { user, deleteUser } = useUser();\n    const history = useHistory();\n\n    const [editModal, setEditModal] = React.useState(false);\n    const [passModal, setPassModal] = React.useState(false);\n    const [deleteModal, setDeleteModal] = React.useState(false);\n\n\n    const options = React.useMemo(() => {\n        const opt = [\n            {\n                label: 'Edytuj',\n                action: () => setEditModal(true),\n                icon: <EditIcon color='success' />\n            }, {\n                label: 'Zmień hasło',\n                action: () => setPassModal(true),\n                icon: <PasswordIcon color='warning' />\n            }, {\n                label: 'Usuń konto',\n                action: () => setDeleteModal(true),\n                icon: <DeleteIcon color='error' />\n            }\n        ];\n        logsAdmin && opt.push({\n            icon: <SearchIcon color='primary' />,\n            label: 'Logs Explorer',\n            action: () => history.push(`${paths.LOGS}?endpoint=%/users/${user.id}`)\n        });\n        \n        return opt;\n    }, [\n        history,\n        logsAdmin,\n        user.id\n    ]);\n\n\n    return (\n        <>\n\n            {(myId(user.id) || owner) && <>\n                <DeleteModal\n                    open={deleteModal}\n                    onClose={() => setDeleteModal(false)}\n                    onSuccess={deleteUser}\n                />\n\n                <UserEditForm\n                    user={user}\n                    open={editModal}\n                    onClose={() => setEditModal(false)}\n                />\n\n                <ChangePasswordForm\n                    open={passModal}\n                    onClose={() => setPassModal(false)}\n                />\n            </>\n            }\n\n            <Card elevation={0}>\n                <CardHeader\n                    action={(myId(user.id) || owner) && <MoreVertMenu options={options} />}\n                    title={<>{user.name} {user.surname}</>}\n                    subheader={<a href={`mailto:${user.email}`}>\n                        {user.email}\n                    </a>}\n                />\n                <CardMedia\n                    component=\"img\"\n                    height=\"350\"\n                    image={ImageService.getLink(user.image)}\n                    alt={user.email}\n                />\n                <CardContent>\n                    <Typography color='text.secondary' variant=\"subtitle1\">\n                        Ostatnio aktywny: {displayDate(user.lastActivity)}<br />\n                        Klasa dostępu: {<Link href={paths.ACCESS}>{user.access.name}</Link>}\n                    </Typography>\n                    <br />\n                    <DatesFooter model={user} />\n                </CardContent>\n            </Card>\n        </>\n    );\n}","import Grid from \"@mui/material/Grid\";\nimport React from \"react\";\nimport Loading from \"../../../../shared/components/Loading\";\nimport GenericReservationsTab from \"../components/GenericReservationsTab\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport useResolvedAccess from \"../hooks/useResolvedAccess\";\nimport UserCard from \"./components/UserCard\";\nimport { UserContext } from \"./UserContext\";\n\n\n\nconst LazyUserCharts = React.lazy(() => import(\"./components/UserCharts\"));\nconst UserCharts = () => <React.Suspense fallback={<Loading />}>\n    <LazyUserCharts />\n</React.Suspense>\n\n\nexport default function UserPage() {\n    const { statsViewer } = useResolvedAccess();\n\n    const pages = React.useMemo(() => {\n        let arr: any = [];\n        arr.push({ name: 'Rezerwacje', component: <GenericReservationsTab /> });\n        statsViewer && arr.push({ name: 'Statystyki', component: <UserCharts /> });\n\n        return arr;\n    }, [\n        statsViewer,\n    ]);\n\n\n    return (\n        <UserContext>\n            <Grid container spacing={2} flexWrap='wrap-reverse'>\n                <Grid item xs={12} md={7} lg={8}>\n                    <SwipeableTabs tabs={pages} />\n                </Grid>\n                <Grid item xs={12} md={5} lg={4}>\n                    <UserCard />\n                </Grid>\n            </Grid>\n        </UserContext>\n    );\n}","import React from \"react\";\nimport useNotification from \"../../../../../contexts/NotificationContext/useNotification\";\nimport { useQueryParams } from \"../../../../../contexts/QueryParamsContext\";\nimport User from \"../../../../../models/User\";\nimport UserService, { UserQueryParams } from \"../../../../../services/UserService\";\nimport Loading from \"../../../../../shared/components/Loading\";\nimport UsersContextValue from \"./UsersContextValue\";\n\n\n\nexport const usersContext: any = React.createContext(null);\n\n\ninterface UsersContextProviderProps {\n    children: React.ReactNode | React.ReactNode[]\n}\n\nexport default function UsersContextProvider(props: UsersContextProviderProps) {\n    const notify = useNotification();\n    const { queryParams, setQueryParams } = useQueryParams<UserQueryParams>();\n\n    const [users, setUsers] = React.useState<User[]>();\n\n\n    const load = React.useCallback(async () => {\n        try {\n            const resp = await UserService.getUsers(queryParams);\n            setQueryParams(old => ({\n                ...old,\n                pagesCount: resp.pagination?.pagesCount\n            }));\n            setUsers(resp.data as User[]);\n        } catch (err: any) {\n            notify(err.description, 'error');\n            setUsers([]);\n        }\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        notify,\n        queryParams.itemsOnPage,\n        queryParams.currentPage,\n        queryParams.search,\n        queryParams.deleted,\n        queryParams.activated\n    ]);\n\n\n    React.useEffect(() => {\n        load();\n    }, [load]);\n\n\n    if (!users) return <Loading />;\n\n    return (\n        <usersContext.Provider value={{\n            users,\n        } as UsersContextValue}>\n            {props.children}\n        </usersContext.Provider>\n    )\n}","import { FormControlLabel, Grid, Switch } from \"@mui/material\";\nimport { useQueryParams } from \"../../../../../../contexts/QueryParamsContext\";\nimport { UserQueryParams } from \"../../../../../../services/UserService\";\nimport React from \"react\";\nimport LazyInput from \"../../../components/LazyInput\";\n\n\nfunction SearchBar() {\n    const { setQueryParams, queryParams } = useQueryParams<UserQueryParams>();\n\n\n    const handleChange = React.useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n        let value: string | number | boolean = event.target.value;\n\n        switch (event.target.name) {\n            case \"deleted\":\n            case \"activated\":\n                value = Boolean(event.target.checked);\n                break;\n            case 'search':\n                break;\n            default:\n                break;\n        }\n\n        setQueryParams((old: UserQueryParams) => ({\n            ...old,\n            [event.target.name]: value\n        }));\n    }, [setQueryParams]);\n\n\n    return (\n        <Grid container>\n            <Grid item xs={12} md={8}>\n                <LazyInput\n                    label='wyszukaj'\n                    name='search'\n                    value={queryParams.search ?? ''}\n                    onChange={handleChange}\n                />\n            </Grid>\n            <Grid item xs={12} md={4} display='flex' justifyContent='start' flexWrap='wrap' color='text.secondary'>\n                <FormControlLabel\n                    labelPlacement=\"start\"\n                    control={<Switch id=\"aktywni-użytkownicy\" name=\"activated\"\n                        inputProps={{ 'aria-label': 'aktywni-użytkownicy' }}\n                        onChange={handleChange}\n                        checked={queryParams.activated}\n                    />}\n                    label=\"Aktywne konta\"\n                />\n                <FormControlLabel\n                    labelPlacement=\"start\"\n                    control={<Switch id=\"unsunięci-użytkownicy\" name=\"deleted\"\n                        inputProps={{ 'aria-label': 'unsunięci-użytkownicy' }}\n                        onChange={handleChange}\n                        checked={queryParams.deleted}\n                    />}\n                    label=\"Usunięte konta\"\n                />\n            </Grid>\n        </Grid>\n    );\n}\n\nexport default React.memo(SearchBar);","import React from 'react';\nimport { Link } from \"@mui/material\";\nimport Avatar from \"@mui/material/Avatar\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemAvatar from \"@mui/material/ListItemAvatar\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport User from \"../../../../../../../models/User\";\nimport ImageService from \"../../../../../../../services/ImageService\";\nimport { dynamicPaths } from \"../../../../../../../shared/path\";\n\n\n\ninterface UserListItemProps {\n    user: User\n}\n\nexport default function UserListItem({ user }: UserListItemProps) {\n    return (\n        <ListItem button\n            component={Link}\n            href={dynamicPaths.toUser(user.id)}\n        >\n            <ListItemAvatar\n                title={user.email}\n                aria-label={user.email}\n            >\n                <Avatar src={ImageService.getLink(user.image)} />\n            </ListItemAvatar>\n            <ListItemText\n                primary={`${user.name} ${user.surname}`}\n                secondary={\n                    <>\n                        {user.email}\n                    </>\n                }\n            />\n        </ListItem>\n    );\n}","import React from 'react';\nimport { ListItem, ListItemText } from \"@mui/material\";\nimport List from \"@mui/material/List\";\nimport { useUsers } from \"../../../UsersContext\";\nimport UserListItem from \"./UserListItem\";\n\n\n\nexport default function UsersList() {\n    const { users } = useUsers();\n\n    return (\n        <List>\n            {\n                users.length === 0 && <ListItem>\n                    <ListItemText primary='Brak użytkowników spełniających kryteria' />\n                </ListItem>\n            }\n            {\n                users.map((item) => <UserListItem key={item.id} user={item} />)\n            }\n        </List>\n    );\n}\n\n","import React from \"react\";\nimport { UsersContextValue } from \".\";\nimport { usersContext } from \"./UsersContextProvider\";\n\n\n\nexport default function useUsers(){\n    return React.useContext(usersContext) as UsersContextValue\n}","import React from 'react';\nimport { Stack } from \"@mui/material\";\nimport TabHeadLine from \"../../../../../../shared/components/TabHeadLine\";\nimport ListPagination from \"../../../components/ListPagination\";\nimport SearchBar from \"./SearchBar\";\nimport UsersList from \"./UsersList\";\n\n\n\nexport default function UsersView() {\n    return (\n        <Stack spacing={3}>\n            <TabHeadLine\n                title='Lista użytkowników'\n                subtitle='Wyszukuj użytkowników według podanych kryteriów.'\n            />\n\n            <SearchBar />\n\n            <UsersList />\n\n            <ListPagination />\n        </Stack>\n    );\n}","import React from 'react';\nimport { AllUsersChartsData } from \"../../../../../models/Stats\";\nimport { Chart, ChartSection, ChartsTab, useCharts } from \"../../components/Charts\";\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\nimport { Button } from \"@mui/material\";\nimport { usePDF } from \"@react-pdf/renderer\";\nimport PDFPage from \"../../components/PDF/PDFPage\";\nimport Table from \"../../components/PDF/Table\";\n\n\n\nexport default function UsersCharts() {\n    return (\n        <ChartsTab>\n            <ActualLoader />\n        </ChartsTab>\n    );\n}\n\n\nfunction ActualLoader() {\n    const { chartsData } = useCharts<AllUsersChartsData>();\n\n\n    const [PDF] = usePDF({\n        document: <PDFPage\n            subject='Statystyki użytkowników'\n            sections={\n                [\n                    <Table\n                        title=\"Statystyki użytkowników\"\n                        rows={[\n                            [\n                                'email',\n                                'ilość rezerwacji',\n                                'czas rezerwacji',\n                                'średni czas rezerwacji',\n                                'średni planowany czas rezerwacji'\n                            ]\n                            , ...chartsData.users.map(r => [\n                                r.email,\n                                r.reservationsCount,\n                                r.allTimeMinutes,\n                                r.avgActualTimeMinutes,\n                                r.avgPlannedTimeMinutes\n                            ])\n                        ]}\n                    />\n                ]} />\n    });\n\n\n    return (\n        <>\n            {\n                (PDF.loading || !PDF.url) ?\n                    <p>loading pdf ...</p>\n                    :\n                    <Button startIcon={<PictureAsPdfIcon />}>\n                        <a href={PDF.url} download={'stats.pdf'} title='pobierz tabele pdf'>\n                            Pobierz raport pdf\n                        </a>\n                    </Button>\n            }\n            <ChartSection defaultOpen title='Statystyki użytkowników'>\n                <Chart\n                    fullWidth={chartsData.users.length >= 6}\n                    title='Ilość rezerwacji na użytkownika'\n                    data={chartsData.users}\n                    xKey='email'\n                    y={[\n                        { label: 'Ilość rezerwacji', key: 'reservationsCount' }\n                    ]}\n                />\n                <Chart\n                    fullWidth={chartsData.users.length >= 6}\n                    title=\"Czas wszystkich reserwacji w dany dzień\"\n                    data={chartsData.users}\n                    xKey='email'\n                    y={[\n                        { label: 'Czas całkowity', key: 'allTimeMinutes' },\n                    ]}\n                />\n                <Chart\n                    fullWidth\n                    title=\"Średnie czasy rezerwacji\"\n                    data={chartsData.users}\n                    xKey='email'\n                    y={[\n                        { label: 'Średni planowany czas', key: 'avgPlannedTimeMinutes' },\n                        { label: 'Średni faktyczny czas', key: 'avgActualTimeMinutes' },\n                    ]}\n                />\n            </ChartSection>\n        </>\n    );\n}","import { QueryParamsContext } from \"../../../../contexts/QueryParamsContext\";\nimport { UserQueryParams } from \"../../../../services/UserService\";\nimport { UsersContext } from \"./UsersContext\";\nimport React from \"react\";\nimport SwipeableTabs from \"../components/SwipeableTabs/SwipeableTabs\";\nimport UsersView from \"./components/UsersView\";\nimport UsersCharts from \"./components/UsersCharts\";\nimport useResolvedAccess from \"../hooks/useResolvedAccess\";\n\n\n\nexport default function UsersPage() {\n    const { statsViewer} = useResolvedAccess();\n\n    const pages = React.useMemo(() => {\n        let arr = [\n            { name: 'Użytkownicy', component: <UsersView /> }\n        ];\n\n        statsViewer && arr.push({ name: 'Statystyki', component: <UsersCharts /> });\n\n        return arr;\n    }, [\n        statsViewer\n    ]);\n\n\n    return (\n        <QueryParamsContext\n            name=\"users-query-params\"\n            default={{\n                deleted: false,\n                activated: true,\n                search: '',\n                itemsOnPage: 10,\n                currentPage: 1\n            } as UserQueryParams}\n        >\n            <UsersContext>\n                <SwipeableTabs tabs={pages} />\n            </UsersContext>\n        </QueryParamsContext>\n    );\n}","import React from 'react';\nimport { Redirect, Route, Switch } from \"react-router-dom\";\nimport useSession from \"../../../auth/useSession\";\nimport paths from \"../../../shared/path\";\nimport AccessPage from \"./AccessPage\";\nimport AddressPage from \"./AddressPage\";\nimport BuildingPage from \"./BuildingPage\";\nimport HomePage from \"./HomePage\";\nimport LogsPage from \"./LogsPage\";\nimport RoomPage from \"./RoomPage\";\nimport SettingsPage from \"./SettingsPage\";\nimport UserPage from \"./UserPage\";\nimport UsersPage from \"./UsersPage\";\n\n\n\nexport default function ProtectedPages() {\n    const { user } = useSession();\n\n    if (!user) return <Redirect to={paths.PUBLIC} />\n\n    return (\n        <Switch>\n            <Route path={paths.ROOM} component={RoomPage} />\n            <Route path={paths.BUILDING} component={BuildingPage} />\n            <Route path={paths.ADDRESS} component={AddressPage} />\n\n            <Route path={paths.SETTINGS} component={SettingsPage} />\n            <Route path={paths.ACCESS} component={AccessPage} />\n            <Route path={paths.USER} component={UserPage} />\n            <Route path={paths.USERS} component={UsersPage} />\n            <Route path={paths.LOGS} component={LogsPage} />\n            <Route path={paths.HOME} component={HomePage} />\n\n            <Route path={paths.INFRASTRUCTURE}>\n                Zasoby\n            </Route>\n            <Route path={paths.HOME + '/*'}>\n                <Redirect to={paths.HOME} />\n            </Route>\n        </Switch>\n    );\n}","import { Redirect, Route, Switch } from \"react-router-dom\";\nimport paths from \"../../../shared/path\";\nimport Loading from \"../../../shared/components/Loading\";\nimport React from \"react\";\nimport useSession from \"../../../auth/useSession\";\n\n\nconst Activation = React.lazy(() => import('./Activation'));\nconst Login = React.lazy(() => import('./Login'));\nconst Register = React.lazy(() => import('./Register'));\nconst ChangePassword = React.lazy(() => import('./ChangePassword'));\nconst Welcome = React.lazy(() => import('./Welcome'));\n\n\nexport default function PublicPages() {\n    const { user } = useSession();\n\n    if (user) return <Redirect to={paths.HOME} />\n\n    return (\n        <Switch>\n            <React.Suspense fallback={<Loading />}>\n                <Route path={paths.LOGIN} component={Login} />\n                <Route path={paths.REGISTER} component={Register} />\n                <Route path={paths.ACTIVATE} component={Activation} />\n                <Route path={paths.REMIND_PASSWORD} component={ChangePassword} />\n                <Route path={paths.PUBLIC} exact component={Welcome} />\n            </React.Suspense>\n\n            <Route path=\"*\">\n                <Redirect to={paths.PUBLIC} />\n            </Route>\n        </Switch>\n    );\n}","import React from 'react';\nimport { Box } from '@mui/system';\nimport {\n    Switch,\n    Route,\n    Redirect\n} from \"react-router-dom\";\n\nimport paths from '../../shared/path';\n\nimport ProtectedPages from './protected';\nimport PublicPages from './public';\n\n\nconst tabStyle = {\n    minHeight: \"84vh\",\n    padding: \"1.5vh 0px\"\n}\n\n\nexport default function Tabs() {\n    return (\n        <Box sx={tabStyle}>\n            <Switch>\n                <Route path={paths.HOME} component={ProtectedPages} />\n                <Route path={paths.PUBLIC} component={PublicPages} />\n                <Route path='*'> \n                    <Redirect to={paths.PUBLIC} />\n                </Route>\n            </Switch>\n        </Box>\n    );\n}","import { Typography } from \"@mui/material\";\nimport React from \"react\";\n\n\nfunction Copyright() {\n    return (\n        <Typography\n            align=\"center\"\n            sx={{\n                backgroundColor: \"primary.dark\",\n                padding: 2,\n                color: \"primary.light\"\n            }}\n        >\n            &copy; Szymon Rykała 2021/2022\n        </Typography>\n    );\n}\n\nexport default React.memo(Copyright);","import React from \"react\";\nimport { Container, Link, List, ListItem, Typography } from \"@mui/material\";\nimport Box from \"@mui/system/Box\";\nimport useSession from \"../../auth/useSession\";\nimport paths from \"../../shared/path\";\nimport useResolvedAccess from \"../pages/protected/hooks/useResolvedAccess\";\n\n\ninterface LinkListItem {\n    name: string,\n    link: string\n}\n\n\nconst LinkItem = (props: LinkListItem) =>\n    <ListItem\n        sx={{\n            width: '30%',\n            minWidth: '200px'\n        }}>\n        <Link\n            sx={{ color: 'background.default' }}\n            href={props.link}\n        >\n            {props.name}\n        </Link>\n    </ListItem>\n    ;\n\n\nfunction Links() {\n    const { user } = useSession();\n    const access = useResolvedAccess();\n\n\n    // generates list of helpful links in case of user is logged in or not\n    const linksList = React.useMemo(() => {\n        const list = [];\n        if (user) {\n            list.push({ name: 'Mój Profil', link: paths.MY_PROFILE }, { name: 'Home', link: paths.HOME });\n            access.accessAdmin && list.push({ name: 'Dostępy', link: paths.ACCESS });\n            access.owner && list.push({ name: 'Ustawienia', link: paths.SETTINGS });\n        } else {\n            list.push(\n                { name: 'Strona główna', link: paths.PUBLIC },\n                { name: 'Logowanie', link: paths.LOGIN },\n                { name: 'Rejestracja', link: paths.REGISTER },\n                { name: 'Aktywacja Konta', link: paths.ACTIVATE }\n            );\n        }\n        return list;\n    }, [\n        user,\n        access?.accessAdmin,\n        access?.owner,\n    ]);\n\n\n    const links = React.useMemo(() => {\n\n        return linksList.filter(item => item.link)\n            .map((item) => <LinkItem key={item.name} {...item} />);\n    }, [\n        linksList\n    ]);\n\n    return (\n        <Box\n            sx={{\n                backgroundColor: \"primary.main\"\n            }}\n        >\n            <Container>\n                <Typography sx={{ pt: 2 }} component='p' variant='body2' color='background.default'>\n                    Przydatne linki:\n                </Typography>\n                <List sx={{\n                    display: 'flex',\n                    flexDirection: 'row',\n                    alignContent: 'center',\n                    justifyContent: 'flex-start',\n                    flexWrap: 'wrap'\n                }}>\n\n                    {links}\n                </List>\n            </Container>\n        </Box>\n    );\n}\n\nexport default React.memo(Links);","import React from 'react';\nimport {\n    Grid,\n} from \"@mui/material\";\n\nimport { Box } from \"@mui/system\";\n\nimport Copyright from \"./Copyrights\";\nimport Links from \"./Links\";\n\n\n\n\nexport default function Footer() {\n\n    return (\n        <Box >\n            <Grid container\n                direction=\"column\"\n                alignItems=\"stretch\"\n            >\n                <Grid item>\n                    <Links />\n                </Grid>\n                <Grid item>\n                    <Copyright />\n                </Grid>\n            </Grid>\n        </Box>\n    );\n}\n\n\n\n\n","import React from \"react\";\nimport { Link, List, ListItem, ListItemIcon, ListItemText, SvgIconTypeMap } from \"@mui/material\";\nimport HomeIcon from '@mui/icons-material/Home';\nimport AccountIcon from '@mui/icons-material/AccountCircle';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport VerifiedUserIcon from '@mui/icons-material/VerifiedUser';\nimport PeopleIcon from '@mui/icons-material/People';\nimport SearchIcon from '@mui/icons-material/Search';\n\nimport paths from \"../../../shared/path\";\nimport { OverridableComponent } from \"@mui/material/OverridableComponent\";\nimport useResolvedAccess from \"../../pages/protected/hooks/useResolvedAccess\";\n\n\n\ninterface NavListItem {\n  label: string,\n  href: string,\n  icon: OverridableComponent<SvgIconTypeMap<{}, \"svg\">>\n}\n\n\nconst navListItems: NavListItem[] = [\n  {\n    label: \"Panel Główny\",\n    href: paths.HOME,\n    icon: HomeIcon\n  }, {\n    label: \"Moje Konto\",\n    href: paths.MY_PROFILE,\n    icon: AccountIcon\n  }\n];\n\n\nconst settingsItem: NavListItem = {\n  label: 'Ustawienia Platformy',\n  href: paths.SETTINGS,\n  icon: SettingsIcon\n};\n\n\nconst accessLinkItem: NavListItem = {\n  label: 'Klasy dostępu',\n  href: paths.ACCESS,\n  icon: VerifiedUserIcon\n};\n\n\nconst usersLinkItem: NavListItem = {\n  label: 'Użytkownicy',\n  href: paths.USERS,\n  icon: PeopleIcon\n};\n\nconst logsLinkItem: NavListItem = {\n  label: 'Logs Explorer',\n  href: paths.LOGS,\n  icon: SearchIcon\n};\n\nconst MainListItem = React.memo((props: NavListItem) =>\n  <ListItem button component={Link} href={props.href}>\n    <ListItemIcon color=\"primary\">\n      {<props.icon color='primary' />}\n    </ListItemIcon>\n    <ListItemText primary={props.label} />\n  </ListItem >\n);\n\n\nexport default function MainDrawerList() {\n  const { accessAdmin, owner, logsAdmin } = useResolvedAccess();\n\n  const result = React.useMemo(() => {\n    let list = Object.assign([], navListItems) as NavListItem[];\n\n    list.push(usersLinkItem);\n    accessAdmin && list.push(accessLinkItem);\n    logsAdmin && list.push(logsLinkItem);\n    owner && list.push(settingsItem);\n\n    return list;\n  }, [\n    accessAdmin,\n    logsAdmin,\n    owner\n  ]);\n\n\n  const renderedList = React.useMemo(() =>\n    result.map((item) => <MainListItem key={item.label} {...item} />)\n    , [result]);\n\n\n  return (\n    <List>\n      {renderedList}\n    </List>\n  );\n}","import React from 'react';\nimport { Box } from \"@mui/material\";\n\n\ninterface DrawerPanelProps {\n    children: React.ReactNode,\n    toggleOpen: any,\n}\n\n\nexport default function DrawerPanel({\n    children,\n    toggleOpen\n}: DrawerPanelProps) {\n    return (\n        <Box\n            sx={{ width: 320 }}\n            role=\"presentation\"\n            onClick={toggleOpen}\n            onKeyDown={toggleOpen}\n        >\n            {children}\n        </Box>\n    );\n}","import React from 'react';\nimport { Avatar, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { SessionUser } from \"../../../models/User\";\nimport ImageService from \"../../../services/ImageService\";\n\n\ninterface AvatarViewProps {\n    user: SessionUser | null,\n}\n\n\nexport default function AvatarView({\n    user\n}: AvatarViewProps) {\n    return (\n        <Box\n            onClick={(ev) => ev.stopPropagation()}\n            sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                padding: 2,\n                color: 'primary.dark'\n            }}\n        >\n            <Avatar\n                alt={`${user?.name} ${user?.surname}`}\n                src={ImageService.getLink(user?.image)}\n                sx={{\n                    width: '120px',\n                    height: '120px',\n                    fontSize: '36px',\n                    mt: 2,\n                    mb: 2,\n                }}\n            />\n            <Typography>\n                {user?.name}&nbsp;{user?.surname}\n            </Typography>\n            <Typography>\n                <a href={`mailto:${user?.email}`}>\n                    {user?.email}\n                </a>\n            </Typography>\n        </Box>\n    );\n}","import React from \"react\";\nimport { ExpandLess, ExpandMore } from \"@mui/icons-material\";\nimport { Collapse, IconButton, Link, ListItemButton, ListItemIcon, ListItemText, Stack } from \"@mui/material\";\nimport StorageService from \"../../../../services/StorageService\";\n\n\n\ninterface CallapsableListItemProps {\n    name: string,\n    href?: string\n    children: React.ReactNode,\n    icon?: React.ReactNode,\n    sx?: any\n}\n\n\nexport default function CollapseableListItem(props: CallapsableListItemProps) {\n    const [open, setOpen] = React.useState<boolean>(false);\n\n    const OPENED_NAME = React.useMemo(() => `${props.name}-nav-item`, [props.name]);\n\n    React.useEffect(() => {\n        setOpen(StorageService.read(OPENED_NAME));\n    }, [OPENED_NAME]);\n\n    const handleOpen = React.useCallback((ev: React.MouseEvent) => {\n        ev.stopPropagation()\n        StorageService.save(OPENED_NAME, !open);\n        setOpen(old => !old);\n    }, [\n        OPENED_NAME,\n        open\n    ]);\n\n    return (\n        <>\n            <Stack direction=\"row\">\n                <ListItemButton component={Link} href={props.href} sx={props.sx}>\n                    <ListItemIcon>\n                        {props.icon}\n                    </ListItemIcon>\n\n                    <ListItemText primary={props.name} />\n                </ListItemButton>\n\n                <IconButton sx={{ width: '42px', height: '42px' }} size='medium' onClick={handleOpen}>\n                    {open ? <ExpandLess /> : <ExpandMore />}\n                </IconButton>\n            </Stack>\n\n            <Collapse in={open} timeout=\"auto\" >\n                <Stack sx={props.sx}>\n                    {props.children}\n                </Stack>\n            </Collapse>\n        </>\n    );\n}\n","import React from \"react\";\nimport { Box, Link, ListItem, ListItemIcon } from \"@mui/material\";\nimport { MapItem } from \"../../../../models/AddressMap\";\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\nimport paths from \"../../../../shared/path\";\n\n\n\nfunction RoomListItem(props: MapItem) {\n    return (\n        <ListItem button component={Link} href={`${paths.HOME}${props.href}`}>\n            <Box sx={{ width: '100%' }} >\n                <ListItemIcon >\n                    <ArrowRightIcon />\n                </ListItemIcon>\n                {props.name}\n            </Box>\n        </ListItem>\n    );\n}\n\nexport default React.memo(RoomListItem);","import React from 'react';\nimport BungalowIcon from '@mui/icons-material/Bungalow';\nimport MapIcon from '@mui/icons-material/Map';\nimport { Stack } from \"@mui/material\";\nimport { useResourceMap } from '../../../../contexts/ResourceMapContext';\nimport paths from '../../../../shared/path';\nimport CollapseableListItem from \"./CollapseableListItem\";\nimport RoomListItem from \"./RoomListItem\";\n\n\nexport default function ResourcesList() {\n    const { resourceMap } = useResourceMap();\n\n    const rendered = React.useMemo(() => {\n        return resourceMap?.map(({ id, name, href, buildings }) =>\n            <CollapseableListItem\n                key={id}\n                name={name}\n                href={`${paths.HOME}${href}`}\n                icon={<MapIcon color=\"primary\" />}\n                sx={{ width: '100%' }}\n            >\n                {buildings.map(({ id, name, href, rooms }) =>\n                    <CollapseableListItem\n                        key={id}\n                        name={name}\n                        href={`${paths.HOME}${href}`}\n                        icon={<BungalowIcon color=\"primary\" />}\n                        sx={{\n                            pl: 6,\n                            width: '100%',\n                        }}\n                    >\n                        {rooms.map((roomEntry) => <RoomListItem key={roomEntry.id} {...roomEntry} />)}\n\n                    </CollapseableListItem>)}\n            </CollapseableListItem>)\n    }, [resourceMap]);\n\n    return (\n        <Stack>\n            {rendered}\n        </Stack>\n    );\n}\n\n\n","import React from \"react\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemIcon from \"@mui/material/ListItemIcon\";\nimport { CreateAddressForm } from \"../../pages/protected/AddressPage/Forms\";\nimport AddIcon from '@mui/icons-material/Add';\n\n\n\nexport default function CreateAddressButton() {\n    const [formOpen, setFormOpen] = React.useState<boolean>(false);\n\n    const handleClick = React.useCallback((ev) => {\n        ev.stopPropagation();\n        setFormOpen(true);\n    }, []);\n\n    return (\n        <>\n            <CreateAddressForm\n                open={formOpen}\n                onClose={() => setFormOpen(false)}\n            />\n            <ListItem button\n                component='div'\n                onClick={handleClick}\n                sx={{ color: 'primary.dark' }}\n            >\n                <ListItemIcon>\n                    <AddIcon color='primary' />\n                </ListItemIcon>\n                Dodaj adres\n            </ListItem>\n        </>\n    );\n}","import React from \"react\";\nimport { Divider, Drawer, ListItem, ListItemText } from \"@mui/material\";\nimport MainDrawerList from \"./MainDrawerList\";\nimport DrawerPanel from \"./DrawerPanel\";\nimport AvatarView from './AvatarView';\nimport useSession from \"../../../auth/useSession\";\nimport ResourcesList from \"./ResourcesList\";\nimport CreateAddressButton from \"./CreateAddressButton\";\nimport useResolvedAccess from \"../../pages/protected/hooks/useResolvedAccess\";\n\n\ninterface AppDrawerProps {\n    open: boolean,\n    toggleOpen: any,\n}\n\nexport default function AppDrawer({ toggleOpen, open }: AppDrawerProps) {\n    const { premisesAdmin } = useResolvedAccess();\n    const { user } = useSession();\n\n    return (\n        <Drawer\n            variant=\"temporary\"\n            ModalProps={{\n                keepMounted: true\n            }}\n            anchor=\"left\"\n            open={open}\n            onClose={toggleOpen}\n        >\n            <DrawerPanel toggleOpen={(toggleOpen)}>\n                <AvatarView user={user} />\n\n                <Divider />\n                <MainDrawerList />\n\n                <Divider />\n                <ListItem\n                    onClick={(ev: React.MouseEvent) => ev.stopPropagation()}\n                    component=\"div\"\n                    sx={{ pb: 0, color: 'text.disabled' }}\n                >\n                    <ListItemText>\n                        Zasoby:\n                    </ListItemText>\n                </ListItem>\n                <ResourcesList />\n\n            </DrawerPanel>\n            {\n                premisesAdmin && <CreateAddressButton />\n            }\n        </Drawer>\n    );\n}\n","import React from \"react\";\nimport { Link, Menu, MenuItem } from \"@mui/material\";\nimport useSession from \"../../../auth/useSession\";\nimport paths from \"../../../shared/path\";\n\n\n\ninterface AccountMenuProps {\n    trigger: null | HTMLElement,\n    handleClose: () => void\n}\n\nconst links = [\n    { name: \"Mój Profil\", link: paths.MY_PROFILE },\n    { name: \"Panel Główny\", link: paths.HOME },\n]\n\n\nexport default function AccountMenu({ trigger, handleClose }: AccountMenuProps) {\n    const { logout } = useSession();\n\n    const linksComp = React.useMemo(() => {\n        return links.map(({ name, link }, i) =>\n            <MenuItem key={i} onClick={handleClose} href={link} component={Link}>\n                {name}\n            </MenuItem>)\n    }, [handleClose]);\n\n\n    return (\n        <Menu\n            id=\"menu-appbar\"\n            anchorEl={trigger}\n            anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n            keepMounted\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n            }}\n            open={Boolean(trigger)}\n            onClose={handleClose}\n        >\n            {linksComp}\n\n            <MenuItem onClick={() => {\n                handleClose();\n                logout();\n            }}>\n                Wyloguj\n            </MenuItem>\n        </Menu>\n    );\n}","import * as React from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\n\n\nimport AccountMenu from './AccountMenu';\nimport useSession from '../../../auth/useSession';\nimport { Avatar, Link } from '@mui/material';\nimport paths from '../../../shared/path';\nimport ImageService from '../../../services/ImageService';\n\n\ninterface NavigationBarProps {\n\ttoggleDrawer: any\n}\n\n\nexport default function NavigationBar(props: NavigationBarProps) {\n\tconst { user } = useSession();\n\tconst [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n\tconst handleMenu = React.useCallback((event: React.MouseEvent<HTMLElement>) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetAnchorEl(null);\n\t}, []);\n\n\treturn (\n\t\t<Box sx={{ flexGrow: 1 }}>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t{user && (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tonClick={props.toggleDrawer}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\t\taria-label=\"menu\"\n\t\t\t\t\t\t\tsx={{ mr: 2, color: \"background.default\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuIcon color='inherit' />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t)}\n\t\t\t\t\t<Typography variant=\"h4\" component=\"span\" sx={{\n\t\t\t\t\t\tflexGrow: 1,\n\t\t\t\t\t\tfontFamily: \"Dancing Script, cursive\",\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\thref={user ? paths.HOME : paths.PUBLIC}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\twidth: 'fit-content',\n\t\t\t\t\t\t\t\tcolor: 'background.default',\n\t\t\t\t\t\t\t\t'&:hover': {\n\t\t\t\t\t\t\t\t\ttextDecoration: 'none'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRav System\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Typography>\n\t\t\t\t\t{user && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\taria-label=\"account of current user\"\n\t\t\t\t\t\t\t\taria-controls=\"menu-appbar\"\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\tonClick={handleMenu}\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\talt={user.name}\n\t\t\t\t\t\t\t\t\tsrc={ImageService.getLink(user.image)}\n\t\t\t\t\t\t\t\t\tsx={{ width: 42, height: 42 }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t<AccountMenu\n\t\t\t\t\t\t\t\ttrigger={anchorEl}\n\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t</Box>\n\t);\n}\n","import React from \"react\";\nimport AppDrawer from \"./Drawer\";\nimport NavigationBar from \"./NavigationBar\";\n\n\nexport default function Navigation() {\n\tconst [open, setOpen] = React.useState(false);\n\n\tconst toggleDrawer = React.useCallback((\n\t\tevent: React.KeyboardEvent | React.MouseEvent,\n\t\tshouldWork: boolean = true\n\t) => {\n\t\tevent.stopPropagation();\n\t\tif (\n\t\t\tshouldWork &&\n\t\t\tevent.type === 'keydown' &&\n\t\t\t((event as React.KeyboardEvent).key === 'Tab' ||\n\t\t\t\t(event as React.KeyboardEvent).key === 'Shift')\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tsetOpen(old => !old);\n\t}, []);\n\n\treturn <>\n\t\t<NavigationBar toggleDrawer={toggleDrawer} />\n\t\t<AppDrawer\n\t\t\topen={open}\n\t\t\ttoggleOpen={toggleDrawer}\n\t\t/>\n\t</>\n}","import React from 'react';\nimport { Box, Container, CssBaseline } from '@mui/material';\n\nimport '@fontsource/roboto/300.css';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\n\n\nimport Theme from './shared/Theme';\nimport SessionProvider from './auth/sessionProvider'\nimport Tabs from './components/pages';\nimport Footer from './components/Footer';\nimport { HashRouter } from 'react-router-dom';\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport plLocale from 'date-fns/locale/pl';\nimport NotificationContextProvider from './contexts/NotificationContext/NotificationContextProvider';\nimport { ResourceMapContextProvider } from './contexts/ResourceMapContext';\nimport Navigation from './components/Navigation';\nimport { Tutorial } from './components/pages/protected/components/Tutorial';\n\n\n\nfunction App() {\n\treturn (\n\t\t<Theme>\n\t\t\t<LocalizationProvider dateAdapter={AdapterDateFns} locale={plLocale}>\n\t\t\t\t<CssBaseline />\n\t\t\t\t<Box component=\"div\" className=\"App\" sx={{ backgroundColor: 'background.default' }}>\n\t\t\t\t\t<HashRouter>\n\t\t\t\t\t\t<NotificationContextProvider>\n\t\t\t\t\t\t\t<SessionProvider >\n\t\t\t\t\t\t\t\t<ResourceMapContextProvider>\n\t\t\t\t\t\t\t\t\t<Tutorial>\n\t\t\t\t\t\t\t\t\t\t<Navigation />\n\t\t\t\t\t\t\t\t\t\t<Container>\n\t\t\t\t\t\t\t\t\t\t\t<Tabs />\n\t\t\t\t\t\t\t\t\t\t</Container>\n\t\t\t\t\t\t\t\t\t\t<Footer />\n\t\t\t\t\t\t\t\t\t</Tutorial>\n\t\t\t\t\t\t\t\t</ResourceMapContextProvider>\n\t\t\t\t\t\t\t</SessionProvider>\n\t\t\t\t\t\t</NotificationContextProvider>\n\t\t\t\t\t</HashRouter>\n\t\t\t\t</Box>\n\t\t\t</LocalizationProvider>\n\t\t</Theme>\n\t);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\nserviceWorkerRegistration.register();","import React from 'react';\nimport Paper from \"@mui/material/Paper\";\nimport Typography from \"@mui/material/Typography\";\nimport { SxProps } from \"@mui/system\";\n\n\n\ninterface SmallCardProps {\n    children: React.ReactNode | React.ReactNode[];\n    title?: string,\n    titleComponent?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6',\n    sx?: SxProps\n}\n\n\nexport default function SmallCard(props: SmallCardProps) {\n    return (\n        <Paper elevation={0} sx={{\n            p: 2,\n            ...props.sx\n        }}>\n            {props?.title && <Typography variant='body2' component={props.titleComponent ?? 'h2'} color='text.secondary'>\n                {props.title}\n            </Typography>}\n            {props.children}\n        </Paper>\n    )\n}","import Reservation from \"../models/Reservation\";\nimport paths from \"../shared/path\";\nimport { AppURLParams, PaginationQueryParams } from \"./interfaces\";\nimport Service from \"./Service\";\n\n\nexport interface ReservationsQueryParams extends PaginationQueryParams {\n    from?: string,\n    search?: string\n}\n\nexport interface CreateReservationData {\n    title: string,\n    description: string,\n    plannedStart: string,\n    plannedEnd: string,\n    roomId?: number\n}\n\nexport interface UpdateReservationData {\n    [index: string]: any,\n    title?: string,\n    description?: string,\n    plannedStart?: string,\n    plannedEnd?: string,\n    roomId?: number\n}\n\nenum Colors {\n    success = '#edf7ed',\n    error = '#fdeded',\n    info = '#e5f6fd',\n    warning = '#fff4e5',\n    inert = '#f5f5f5'\n}\n\ninterface ReservationStatus {\n    message: string,\n    color: Colors\n}\n\n\n\nclass ReservationService extends Service {\n\n    private emitStatus(mess: string, color: Colors): ReservationStatus {\n        return { message: mess, color: color };\n    }\n\n    private localPreparPath(urlParams: AppURLParams): string {\n        if (\n            window.location.toString().includes(paths.HOME)\n            && Object.keys(urlParams).length === 0\n        ) {\n            return '/users/' + this.userId.toString();\n        }\n        return this.preparePath(urlParams);\n    }\n\n\n    public getReservations(\n        urlParams: AppURLParams,\n        queryParams: ReservationsQueryParams\n    ) {\n        return this.get(`${this.localPreparPath(urlParams)}/reservations`, queryParams);\n    }\n\n\n    public createOne(data: CreateReservationData) {\n        return this.post('/reservations', data)\n    }\n\n    public update(id: number, data: UpdateReservationData) {\n        return this.patch(`/reservations/${id}`, data);\n    }\n\n    public pingKey(id: number, key: string) {\n        return this.patch(`/reservations/${id}/keys`, {\n            RFIDTag: key\n        });\n    }\n\n    public remove(id: number) {\n        return this.delete(`/reservations/${id}`);\n    }\n\n    /**\n     * resolves status \n     * @param reservation\n     * @returns \n     */\n    public resolveStatus(reservation: Reservation): ReservationStatus {\n\n        const nowTimestamp = Date.now();\n\n        const now = new Date(nowTimestamp);\n        const now_minus15 = new Date(nowTimestamp - 900_000);\n        const now_plus15 = new Date(nowTimestamp + 900_000);\n        const { actualStart, plannedStart, actualEnd, plannedEnd } = reservation;\n\n\n        const start = new Date(actualStart ? actualStart : plannedStart);\n        const end = new Date(actualEnd ? actualEnd : plannedEnd);\n\n\n        // nie rozpoczęła się\n        if (!actualStart) {\n            // jest już po czasie, i czeka do +15 minut na odbiór\n            if (start < now && start > now_minus15) return this.emitStatus('Powinna zostać już odebrana', Colors.warning);\n\n            // za 15 minut zaczyna się rezerwacja\n            if (start > now && start < now_plus15) return this.emitStatus('Za chwilę zostanie odebrana', Colors.info);\n\n            // nie została odbrana w czasie <planowany start + 15 minut>\n            if (start < now_plus15) return this.emitStatus('Nieodebrana.', Colors.error)\n\n            return this.emitStatus('Oczekuje', Colors.inert)\n\n            // rozpoczęła się\n        } else if (actualStart) {\n            // zakończyła się\n            if (actualEnd) return this.emitStatus('Rezerwacja zakończona.', Colors.inert);\n\n            // nie zakończyła się\n            if (!actualEnd) {\n                // kończy się w ciągu 15 minut\n                if (now < end && now_plus15 > end) return this.emitStatus('Za chwilę się kończy.', Colors.info);\n\n                // czas zakończenia już minął\n                if (now > end) {\n                    const end_plus15 = new Date(Date.parse(end.toString()) + 900_000)\n\n                    // dodajemy 15 minut\n                    if (now < end_plus15) return this.emitStatus('Powinna się zakończyć.', Colors.warning);\n\n                    // dodane 15 minut już minęło\n                    if (now > end_plus15) return this.emitStatus('Czas minął, klucz nie oddany.', Colors.error);\n                }\n\n                return this.emitStatus('Rezerwacja trwa.', Colors.success);\n            }\n        }\n\n        return this.emitStatus(\"Status nieznany\", Colors.warning);\n    }\n}\n\nexport default new ReservationService()"],"sourceRoot":""}